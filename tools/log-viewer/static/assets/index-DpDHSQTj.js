var yR=Object.defineProperty;var bR=(t,e,r)=>e in t?yR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var se=(t,e,r)=>bR(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Rl,Ke,Nk,zk,oa,Uy,$k,Vk,Hk,km,Lp,Op,cs={},Wk=[],_R=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ml=Array.isArray;function rn(t,e){for(var r in e)t[r]=e[r];return t}function Tm(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function xR(t,e,r){var n,a,i,s={};for(i in e)i=="key"?n=e[i]:i=="ref"?a=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?Rl.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)s[i]===void 0&&(s[i]=t.defaultProps[i]);return Po(t,s,n,a,null)}function Po(t,e,r,n,a){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++Nk,__i:-1,__u:0};return a==null&&Ke.vnode!=null&&Ke.vnode(i),i}function xn(t){return t.children}function Qi(t,e){this.props=t,this.context=e}function ti(t,e){if(e==null)return t.__?ti(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?ti(t):null}function Gk(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Gk(t)}}function jy(t){(!t.__d&&(t.__d=!0)&&oa.push(t)&&!el.__r++||Uy!=Ke.debounceRendering)&&((Uy=Ke.debounceRendering)||$k)(el)}function el(){for(var t,e,r,n,a,i,s,o=1;oa.length;)oa.length>o&&oa.sort(Vk),t=oa.shift(),o=oa.length,t.__d&&(r=void 0,n=void 0,a=(n=(e=t).__v).__e,i=[],s=[],e.__P&&((r=rn({},n)).__v=n.__v+1,Ke.vnode&&Ke.vnode(r),Am(e.__P,r,n,e.__n,e.__P.namespaceURI,32&n.__u?[a]:null,i,a??ti(n),!!(32&n.__u),s),r.__v=n.__v,r.__.__k[r.__i]=r,Kk(i,r,s),n.__e=n.__=null,r.__e!=a&&Gk(r)));el.__r=0}function Uk(t,e,r,n,a,i,s,o,l,u,c){var f,d,h,v,p,g,y,m=n&&n.__k||Wk,b=e.length;for(l=wR(r,e,m,l,b),f=0;f<b;f++)(h=r.__k[f])!=null&&(d=h.__i==-1?cs:m[h.__i]||cs,h.__i=f,g=Am(t,h,d,a,i,s,o,l,u,c),v=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&Pm(d.ref,null,h),c.push(h.ref,h.__c||v,h)),p==null&&v!=null&&(p=v),(y=!!(4&h.__u))||d.__k===h.__k?l=jk(h,l,t,y):typeof h.type=="function"&&g!==void 0?l=g:v&&(l=v.nextSibling),h.__u&=-7);return r.__e=p,l}function wR(t,e,r,n,a){var i,s,o,l,u,c=r.length,f=c,d=0;for(t.__k=new Array(a),i=0;i<a;i++)(s=e[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[i]=Po(null,s,null,null,null):Ml(s)?s=t.__k[i]=Po(xn,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[i]=Po(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[i]=s,l=i+d,s.__=t,s.__b=t.__b+1,o=null,(u=s.__i=SR(s,r,l,f))!=-1&&(f--,(o=r[u])&&(o.__u|=2)),o==null||o.__v==null?(u==-1&&(a>c?d--:a<c&&d++),typeof s.type!="function"&&(s.__u|=4)):u!=l&&(u==l-1?d--:u==l+1?d++:(u>l?d--:d++,s.__u|=4))):t.__k[i]=null;if(f)for(i=0;i<c;i++)(o=r[i])!=null&&!(2&o.__u)&&(o.__e==n&&(n=ti(o)),Xk(o,o));return n}function jk(t,e,r,n){var a,i;if(typeof t.type=="function"){for(a=t.__k,i=0;a&&i<a.length;i++)a[i]&&(a[i].__=t,e=jk(a[i],e,r,n));return e}t.__e!=e&&(n&&(e&&t.type&&!e.parentNode&&(e=ti(t)),r.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function SR(t,e,r,n){var a,i,s,o=t.key,l=t.type,u=e[r],c=u!=null&&(2&u.__u)==0;if(u===null&&o==null||c&&o==u.key&&l==u.type)return r;if(n>(c?1:0)){for(a=r-1,i=r+1;a>=0||i<e.length;)if((u=e[s=a>=0?a--:i++])!=null&&!(2&u.__u)&&o==u.key&&l==u.type)return s}return-1}function Ky(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||_R.test(e)?r:r+"px"}function Zs(t,e,r,n,a){var i,s;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Ky(t.style,e,"");if(r)for(e in r)n&&r[e]==n[e]||Ky(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Hk,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n?r.u=n.u:(r.u=km,t.addEventListener(e,i?Op:Lp,i)):t.removeEventListener(e,i?Op:Lp,i);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function Yy(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=km++;else if(e.t<r.u)return;return r(Ke.event?Ke.event(e):e)}}}function Am(t,e,r,n,a,i,s,o,l,u){var c,f,d,h,v,p,g,y,m,b,_,x,S,w,E,C,T,A=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),i=[o=e.__e=r.__e]),(c=Ke.__b)&&c(e);e:if(typeof A=="function")try{if(y=e.props,m="prototype"in A&&A.prototype.render,b=(c=A.contextType)&&n[c.__c],_=c?b?b.props.value:c.__:n,r.__c?g=(f=e.__c=r.__c).__=f.__E:(m?e.__c=f=new A(y,_):(e.__c=f=new Qi(y,_),f.constructor=A,f.render=CR),b&&b.sub(f),f.state||(f.state={}),f.__n=n,d=f.__d=!0,f.__h=[],f._sb=[]),m&&f.__s==null&&(f.__s=f.state),m&&A.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=rn({},f.__s)),rn(f.__s,A.getDerivedStateFromProps(y,f.__s))),h=f.props,v=f.state,f.__v=e,d)m&&A.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),m&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(m&&A.getDerivedStateFromProps==null&&y!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,_),e.__v==r.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,_)===!1){for(e.__v!=r.__v&&(f.props=y,f.state=f.__s,f.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(P){P&&(P.__=e)}),x=0;x<f._sb.length;x++)f.__h.push(f._sb[x]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,_),m&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,v,p)})}if(f.context=_,f.props=y,f.__P=t,f.__e=!1,S=Ke.__r,w=0,m){for(f.state=f.__s,f.__d=!1,S&&S(e),c=f.render(f.props,f.state,f.context),E=0;E<f._sb.length;E++)f.__h.push(f._sb[E]);f._sb=[]}else do f.__d=!1,S&&S(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++w<25);f.state=f.__s,f.getChildContext!=null&&(n=rn(rn({},n),f.getChildContext())),m&&!d&&f.getSnapshotBeforeUpdate!=null&&(p=f.getSnapshotBeforeUpdate(h,v)),C=c,c!=null&&c.type===xn&&c.key==null&&(C=Yk(c.props.children)),o=Uk(t,Ml(C)?C:[C],e,r,n,a,i,s,o,l,u),f.base=e.__e,e.__u&=-161,f.__h.length&&s.push(f),g&&(f.__E=f.__=null)}catch(P){if(e.__v=null,l||i!=null)if(P.then){for(e.__u|=l?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,e.__e=o}else{for(T=i.length;T--;)Tm(i[T]);Ip(e)}else e.__e=r.__e,e.__k=r.__k,P.then||Ip(e);Ke.__e(P,e,r)}else i==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):o=e.__e=ER(r.__e,e,r,n,a,i,s,l,u);return(c=Ke.diffed)&&c(e),128&e.__u?void 0:o}function Ip(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Ip)}function Kk(t,e,r){for(var n=0;n<r.length;n++)Pm(r[n],r[++n],r[++n]);Ke.__c&&Ke.__c(e,t),t.some(function(a){try{t=a.__h,a.__h=[],t.some(function(i){i.call(a)})}catch(i){Ke.__e(i,a.__v)}})}function Yk(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ml(t)?t.map(Yk):rn({},t)}function ER(t,e,r,n,a,i,s,o,l){var u,c,f,d,h,v,p,g=r.props||cs,y=e.props,m=e.type;if(m=="svg"?a="http://www.w3.org/2000/svg":m=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((h=i[u])&&"setAttribute"in h==!!m&&(m?h.localName==m:h.nodeType==3)){t=h,i[u]=null;break}}if(t==null){if(m==null)return document.createTextNode(y);t=document.createElementNS(a,m,y.is&&y),o&&(Ke.__m&&Ke.__m(e,i),o=!1),i=null}if(m==null)g===y||o&&t.data==y||(t.data=y);else{if(i=i&&Rl.call(t.childNodes),!o&&i!=null)for(g={},u=0;u<t.attributes.length;u++)g[(h=t.attributes[u]).name]=h.value;for(u in g)if(h=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")f=h;else if(!(u in y)){if(u=="value"&&"defaultValue"in y||u=="checked"&&"defaultChecked"in y)continue;Zs(t,u,null,h,a)}}for(u in y)h=y[u],u=="children"?d=h:u=="dangerouslySetInnerHTML"?c=h:u=="value"?v=h:u=="checked"?p=h:o&&typeof h!="function"||g[u]===h||Zs(t,u,h,g[u],a);if(c)o||f&&(c.__html==f.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(f&&(t.innerHTML=""),Uk(e.type=="template"?t.content:t,Ml(d)?d:[d],e,r,n,m=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,s,i?i[0]:r.__k&&ti(r,0),o,l),i!=null)for(u=i.length;u--;)Tm(i[u]);o||(u="value",m=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[u]||m=="progress"&&!v||m=="option"&&v!=g[u])&&Zs(t,u,v,g[u],a),u="checked",p!=null&&p!=t[u]&&Zs(t,u,p,g[u],a))}return t}function Pm(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(a){Ke.__e(a,r)}}function Xk(t,e,r){var n,a;if(Ke.unmount&&Ke.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||Pm(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){Ke.__e(i,e)}n.base=n.__P=null}if(n=t.__k)for(a=0;a<n.length;a++)n[a]&&Xk(n[a],e,r||typeof t.type!="function");r||Tm(t.__e),t.__c=t.__=t.__e=void 0}function CR(t,e,r){return this.constructor(t,r)}function kR(t,e,r){var n,a,i,s;e==document&&(e=document.documentElement),Ke.__&&Ke.__(t,e),a=(n=!1)?null:e.__k,i=[],s=[],Am(e,t=e.__k=xR(xn,null,[t]),a||cs,cs,e.namespaceURI,a?null:e.firstChild?Rl.call(e.childNodes):null,i,a?a.__e:e.firstChild,n,s),Kk(i,t,s)}Rl=Wk.slice,Ke={__e:function(t,e,r,n){for(var a,i,s;e=e.__;)if((a=e.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(t)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,n||{}),s=a.__d),s)return a.__E=a}catch(o){t=o}throw t}},Nk=0,zk=function(t){return t!=null&&t.constructor===void 0},Qi.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=rn({},this.state),typeof t=="function"&&(t=t(rn({},r),this.props)),t&&rn(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),jy(this))},Qi.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),jy(this))},Qi.prototype.render=xn,oa=[],$k=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vk=function(t,e){return t.__v.__b-e.__v.__b},el.__r=0,Hk=/(PointerCapture)$|Capture$/i,km=0,Lp=Yy(!1),Op=Yy(!0);var TR=0;function k(t,e,r,n,a,i){e||(e={});var s,o,l=e;if("ref"in l)for(o in l={},e)o=="ref"?s=e[o]:l[o]=e[o];var u={type:t,props:l,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--TR,__i:-1,__u:0,__source:a,__self:i};if(typeof t=="function"&&(s=t.defaultProps))for(o in s)l[o]===void 0&&(l[o]=s[o]);return Ke.vnode&&Ke.vnode(u),u}var fs,ct,wu,Xy,tl=0,Zk=[],gt=Ke,Zy=gt.__b,Qy=gt.__r,Jy=gt.diffed,e0=gt.__c,t0=gt.unmount,r0=gt.__;function Rm(t,e){gt.__h&&gt.__h(ct,t,tl||e),tl=0;var r=ct.__H||(ct.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function rr(t){return tl=1,AR(Jk,t)}function AR(t,e,r){var n=Rm(fs++,2);if(n.t=t,!n.__c&&(n.__=[Jk(void 0,e),function(o){var l=n.__N?n.__N[0]:n.__[0],u=n.t(l,o);l!==u&&(n.__N=[u,n.__[1]],n.__c.setState({}))}],n.__c=ct,!ct.__f)){var a=function(o,l,u){if(!n.__c.__H)return!0;var c=n.__c.__H.__.filter(function(d){return!!d.__c});if(c.every(function(d){return!d.__N}))return!i||i.call(this,o,l,u);var f=n.__c.props!==o;return c.forEach(function(d){if(d.__N){var h=d.__[0];d.__=d.__N,d.__N=void 0,h!==d.__[0]&&(f=!0)}}),i&&i.call(this,o,l,u)||f};ct.__f=!0;var i=ct.shouldComponentUpdate,s=ct.componentWillUpdate;ct.componentWillUpdate=function(o,l,u){if(this.__e){var c=i;i=void 0,a(o,l,u),i=c}s&&s.call(this,o,l,u)},ct.shouldComponentUpdate=a}return n.__N||n.__}function Sa(t,e){var r=Rm(fs++,3);!gt.__s&&Qk(r.__H,e)&&(r.__=t,r.u=e,ct.__H.__h.push(r))}function Ir(t){return tl=5,Mm(function(){return{current:t}},[])}function Mm(t,e){var r=Rm(fs++,7);return Qk(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function PR(){for(var t;t=Zk.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ro),t.__H.__h.forEach(Bp),t.__H.__h=[]}catch(e){t.__H.__h=[],gt.__e(e,t.__v)}}gt.__b=function(t){ct=null,Zy&&Zy(t)},gt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),r0&&r0(t,e)},gt.__r=function(t){Qy&&Qy(t),fs=0;var e=(ct=t.__c).__H;e&&(wu===ct?(e.__h=[],ct.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Ro),e.__h.forEach(Bp),e.__h=[],fs=0)),wu=ct},gt.diffed=function(t){Jy&&Jy(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Zk.push(e)!==1&&Xy===gt.requestAnimationFrame||((Xy=gt.requestAnimationFrame)||RR)(PR)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),wu=ct=null},gt.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Ro),r.__h=r.__h.filter(function(n){return!n.__||Bp(n)})}catch(n){e.some(function(a){a.__h&&(a.__h=[])}),e=[],gt.__e(n,r.__v)}}),e0&&e0(t,e)},gt.unmount=function(t){t0&&t0(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Ro(n)}catch(a){e=a}}),r.__H=void 0,e&&gt.__e(e,r.__v))};var n0=typeof requestAnimationFrame=="function";function RR(t){var e,r=function(){clearTimeout(n),n0&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);n0&&(e=requestAnimationFrame(r))}function Ro(t){var e=ct,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),ct=e}function Bp(t){var e=ct;t.__c=t.__(),ct=e}function Qk(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function Jk(t,e){return typeof e=="function"?e(t):e}var rl;rl={__e:function(t,e,r,n){for(var a,i,s;e=e.__;)if((a=e.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(t)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,n||{}),s=a.__d),s)return a.__E=a}catch(o){t=o}throw t}},typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var MR=0;function Tt(t,e,r,n,a,i){e||(e={});var s,o,l=e;if("ref"in l)for(o in l={},e)o=="ref"?s=e[o]:l[o]=e[o];var u={type:t,props:l,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--MR,__i:-1,__u:0,__source:a,__self:i};if(typeof t=="function"&&(s=t.defaultProps))for(o in s)l[o]===void 0&&(l[o]=s[o]);return rl.vnode&&rl.vnode(u),u}var Or,Su,a0,eT=[],Lt=rl,i0=Lt.__b,s0=Lt.__r,o0=Lt.diffed,l0=Lt.__c,u0=Lt.unmount,c0=Lt.__;function DR(){for(var t;t=eT.shift();){var e=t.__H;if(t.__P&&e)try{e.__h.some(Mo),e.__h.some(Fp),e.__h=[]}catch(r){e.__h=[],Lt.__e(r,t.__v)}}}Lt.__b=function(t){Or=null,i0&&i0(t)},Lt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),c0&&c0(t,e)},Lt.__r=function(t){s0&&s0(t);var e=(Or=t.__c).__H;e&&(Su===Or?(e.__h=[],Or.__h=[],e.__.some(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.some(Mo),e.__h.some(Fp),e.__h=[])),Su=Or},Lt.diffed=function(t){o0&&o0(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(eT.push(e)!==1&&a0===Lt.requestAnimationFrame||((a0=Lt.requestAnimationFrame)||LR)(DR)),e.__H.__.some(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Su=Or=null},Lt.__c=function(t,e){e.some(function(r){try{r.__h.some(Mo),r.__h=r.__h.filter(function(n){return!n.__||Fp(n)})}catch(n){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Lt.__e(n,r.__v)}}),l0&&l0(t,e)},Lt.unmount=function(t){u0&&u0(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.some(function(n){try{Mo(n)}catch(a){e=a}}),r.__H=void 0,e&&Lt.__e(e,r.__v))};var f0=typeof requestAnimationFrame=="function";function LR(t){var e,r=function(){clearTimeout(n),f0&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);f0&&(e=requestAnimationFrame(r))}function Mo(t){var e=Or,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),Or=e}function Fp(t){var e=Or;t.__c=t.__(),Or=e}function OR({size:t=16,class:e="",color:r="currentColor"}){return Tt("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:e,children:[Tt("circle",{cx:"11",cy:"11",r:"8"}),Tt("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}function IR({size:t=16,class:e="",color:r="currentColor"}){return Tt("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:e,children:Tt("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})})}function BR({size:t=16,class:e="",color:r="currentColor"}){return Tt("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:e,children:[Tt("polyline",{points:"23 4 23 10 17 10"}),Tt("polyline",{points:"1 20 1 14 7 14"}),Tt("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}function FR({size:t=16,class:e="",color:r="currentColor"}){return Tt("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:e,children:[Tt("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Tt("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function qR({size:t=16,class:e="",color:r="currentColor"}){return Tt("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:e,children:[Tt("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Tt("polyline",{points:"14 2 14 8 20 8"}),Tt("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),Tt("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),Tt("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]})}const NR="x-session-id",d0="viewer_session_id";function zR(){let t=sessionStorage.getItem(d0);return t||(t=crypto.randomUUID(),sessionStorage.setItem(d0,t)),t}function ui(t={}){return{...t,headers:{...t.headers,[NR]:zR()}}}var $R=Symbol.for("preact-signals");function Dm(){if(Ya>1)Ya--;else{for(var t,e=!1;Ji!==void 0;){var r=Ji;for(Ji=void 0,qp++;r!==void 0;){var n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&nT(r))try{r.c()}catch(a){e||(t=a,e=!0)}r=n}}if(qp=0,Ya--,e)throw t}}var We=void 0;function tT(t){var e=We;We=void 0;try{return t()}finally{We=e}}var Ji=void 0,Ya=0,qp=0,nl=0;function rT(t){if(We!==void 0){var e=t.n;if(e===void 0||e.t!==We)return e={i:0,S:t,p:We.s,n:void 0,t:We,e:void 0,x:void 0,r:e},We.s!==void 0&&(We.s.n=e),We.s=e,t.n=e,32&We.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=We.s,e.n=void 0,We.s.n=e,We.s=e),e}}function Bt(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}Bt.prototype.brand=$R;Bt.prototype.h=function(){return!0};Bt.prototype.S=function(t){var e=this,r=this.t;r!==t&&t.e===void 0&&(t.x=r,this.t=t,r!==void 0?r.e=t:tT(function(){var n;(n=e.W)==null||n.call(e)}))};Bt.prototype.U=function(t){var e=this;if(this.t!==void 0){var r=t.e,n=t.x;r!==void 0&&(r.x=n,t.e=void 0),n!==void 0&&(n.e=r,t.x=void 0),t===this.t&&(this.t=n,n===void 0&&tT(function(){var a;(a=e.Z)==null||a.call(e)}))}};Bt.prototype.subscribe=function(t){var e=this;return Om(function(){var r=e.value,n=We;We=void 0;try{t(r)}finally{We=n}},{name:"sub"})};Bt.prototype.valueOf=function(){return this.value};Bt.prototype.toString=function(){return this.value+""};Bt.prototype.toJSON=function(){return this.value};Bt.prototype.peek=function(){var t=We;We=void 0;try{return this.value}finally{We=t}};Object.defineProperty(Bt.prototype,"value",{get:function(){var t=rT(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(qp>100)throw new Error("Cycle detected");this.v=t,this.i++,nl++,Ya++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Dm()}}}});function Ft(t,e){return new Bt(t,e)}function nT(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function aT(t){for(var e=t.s;e!==void 0;e=e.n){var r=e.S.n;if(r!==void 0&&(e.r=r),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function iT(t){for(var e=t.s,r=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):r=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}t.s=r}function Ea(t,e){Bt.call(this,void 0),this.x=t,this.s=void 0,this.g=nl-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}Ea.prototype=new Bt;Ea.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===nl))return!0;if(this.g=nl,this.f|=1,this.i>0&&!nT(this))return this.f&=-2,!0;var t=We;try{aT(this),We=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(r){this.v=r,this.f|=16,this.i++}return We=t,iT(this),this.f&=-2,!0};Ea.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}Bt.prototype.S.call(this,t)};Ea.prototype.U=function(t){if(this.t!==void 0&&(Bt.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};Ea.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(Ea.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=rT(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function Rt(t,e){return new Ea(t,e)}function sT(t){var e=t.u;if(t.u=void 0,typeof e=="function"){Ya++;var r=We;We=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,Lm(t),n}finally{We=r,Dm()}}}function Lm(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,sT(t)}function VR(t){if(We!==this)throw new Error("Out-of-order effect");iT(this),We=t,this.f&=-2,8&this.f&&Lm(this),Dm()}function ci(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}ci.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};ci.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,sT(this),aT(this),Ya++;var t=We;return We=this,VR.bind(this,t)};ci.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ji,Ji=this)};ci.prototype.d=function(){this.f|=8,1&this.f||Lm(this)};ci.prototype.dispose=function(){this.d()};function Om(t,e){var r=new ci(t,e);try{r.c()}catch(a){throw r.d(),a}var n=r.d.bind(r);return n[Symbol.dispose]=n,n}var Qs;function fi(t,e){Ke[t]=e.bind(null,Ke[t]||function(){})}function al(t){if(Qs){var e=Qs;Qs=void 0,e()}Qs=t&&t.S()}function oT(t){var e=this,r=t.data,n=WR(r);n.value=r;var a=Mm(function(){for(var i=e.__v;i=i.__;)if(i.__c){i.__c.__$f|=4;break}return e.__$u.c=function(){var s,o=e.__$u.S(),l=a.value;o(),zk(l)||((s=e.base)==null?void 0:s.nodeType)!==3?(e.__$f|=1,e.setState({})):e.base.data=l},Rt(function(){var s=n.value.value;return s===0?0:s===!0?"":s||""})},[]);return a.value}oT.displayName="_st";Object.defineProperties(Bt.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:oT},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});fi("__b",function(t,e){if(typeof e.type=="string"){var r,n=e.props;for(var a in n)if(a!=="children"){var i=n[a];i instanceof Bt&&(r||(e.__np=r={}),r[a]=i,n[a]=i.peek())}}t(e)});fi("__r",function(t,e){t(e),al();var r,n=e.__c;n&&(n.__$f&=-2,(r=n.__$u)===void 0&&(n.__$u=r=function(a){var i;return Om(function(){i=this}),i.c=function(){n.__$f|=1,n.setState({})},i}())),al(r)});fi("__e",function(t,e,r,n){al(),t(e,r,n)});fi("diffed",function(t,e){al();var r;if(typeof e.type=="string"&&(r=e.__e)){var n=e.__np,a=e.props;if(n){var i=r.U;if(i)for(var s in i){var o=i[s];o!==void 0&&!(s in n)&&(o.d(),i[s]=void 0)}else r.U=i={};for(var l in n){var u=i[l],c=n[l];u===void 0?(u=HR(r,l,c,a),i[l]=u):u.o(c,a)}}}t(e)});function HR(t,e,r,n){var a=e in t&&t.ownerSVGElement===void 0,i=Ft(r);return{o:function(s,o){i.value=s,n=o},d:Om(function(){var s=i.value.value;n[e]!==s&&(n[e]=s,a?t[e]=s:s?t.setAttribute(e,s):t.removeAttribute(e))})}}fi("unmount",function(t,e){if(typeof e.type=="string"){var r=e.__e;if(r){var n=r.U;if(n){r.U=void 0;for(var a in n){var i=n[a];i&&i.d()}}}}else{var s=e.__c;if(s){var o=s.__$u;o&&(s.__$u=void 0,o.d())}}t(e)});fi("__h",function(t,e,r,n){(n<3||n===9)&&(e.__$f|=2),t(e,r,n)});Qi.prototype.shouldComponentUpdate=function(t,e){if(this.__R)return!0;var r=this.__$u,n=r&&r.s!==void 0;for(var a in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(n||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(n||4&this.__$f)||3&this.__$f)return!0;for(var i in t)if(i!=="__source"&&t[i]!==this.props[i])return!0;for(var s in this.props)if(!(s in t))return!0;return!1};function WR(t){return Mm(function(){return Ft(t)},[])}const di="/api";async function GR(){const t=await fetch(`${di}/logs`,ui());if(!t.ok)throw new Error("Failed to fetch log files");return t.json()}async function UR(t){const e=await fetch(`${di}/logs/${encodeURIComponent(t)}`,ui());if(!e.ok)throw new Error("Failed to fetch log content");return e.json()}async function jR(t,e,r,n){const a=new URL(`${di}/search/${encodeURIComponent(t)}`,window.location.origin);a.searchParams.set("q",e),r&&a.searchParams.set("level",r);const i=await fetch(a.toString(),ui());if(!i.ok){const s=await i.json();throw new Error(s.error||"Search failed")}return i.json()}async function KR(t,e,r){const n=new URL(`${di}/query/${encodeURIComponent(t)}`,window.location.origin);n.searchParams.set("jq",e);const a=await fetch(n.toString(),ui());if(!a.ok){const i=await a.json();throw new Error(i.error||"Query failed")}return a.json()}async function lT(t){const e=await fetch(`${di}/source/${encodeURIComponent(t)}`,ui());if(!e.ok)throw new Error("Failed to fetch source file");return e.json()}async function YR(t,e,r=5){const n=new URL(`${di}/source/${encodeURIComponent(t)}`,window.location.origin);n.searchParams.set("line",e.toString()),n.searchParams.set("context",r.toString());const a=await fetch(n.toString(),ui());if(!a.ok)throw new Error("Failed to fetch source snippet");return a.json()}function il(){return{entries:[],searchQuery:"",jqFilter:"",levelFilter:"",typeFilter:"",selectedEntry:null,codeViewerFile:null,codeViewerContent:"",codeViewerLine:null}}const Ga=Ft([]),Wt=Ft(null),Nr=Ft(!1),ga=Ft(null),ur=Ft("Ready"),ri=Ft("logs"),Np=Ft(!1),Fr=Ft(new Map);function XR(t){if(!t)return il();const e=Fr.value;if(!e.has(t)){const r=new Map(e);r.set(t,il()),Fr.value=r}return Fr.value.get(t)}function Ln(t){const e=Wt.value;if(!e)return;const r=new Map(Fr.value),n=r.get(e)||il();r.set(e,{...n,...t}),Fr.value=r}const cn=Rt(()=>XR(Wt.value)),zr=Rt(()=>cn.value.entries),zp=Rt(()=>cn.value.searchQuery),$p=Rt(()=>cn.value.jqFilter),Im=Rt(()=>cn.value.levelFilter),uT=Rt(()=>cn.value.typeFilter),ZR=Rt(()=>cn.value.selectedEntry),QR=Rt(()=>cn.value.codeViewerFile),JR=Rt(()=>cn.value.codeViewerContent),eM=Rt(()=>cn.value.codeViewerLine),Ni=Rt(()=>{let t=zr.value;const e=Im.value,r=uT.value;return e&&(t=t.filter(n=>n.level.toUpperCase()===e.toUpperCase())),r&&(t=t.filter(n=>n.event_type===r)),t}),tM=Rt(()=>{const t=zr.value,e={TRACE:0,DEBUG:0,INFO:0,WARN:0,ERROR:0},r={event:0,span_enter:0,span_exit:0,unknown:0},n={};for(const o of t){const l=o.level.toUpperCase();l in e&&e[l]++;const u=o.event_type;if(u in r&&r[u]++,o.event_type==="span_exit"&&o.span_name){const c=o.fields.busy;if(typeof c=="string"){const f=c.match(/([\d.]+)(Âµs|ms|s)/);if(f){const d=f[1],h=f[2];if(!d||!h)continue;let v=parseFloat(d);h==="Âµs"?v/=1e6:h==="ms"&&(v/=1e3),n[o.span_name]||(n[o.span_name]={count:0,totalDuration:0});const p=n[o.span_name];p&&(p.count++,p.totalDuration+=v)}}}}const a=new Map;for(const o of t)if(o.timestamp){const l=parseFloat(o.timestamp),u=Math.floor(l*10)/10;a.set(u,(a.get(u)||0)+1)}const i=Array.from(a.entries()).map(([o,l])=>({timestamp:o,count:l})).sort((o,l)=>o.timestamp-l.timestamp),s=Object.entries(n).map(([o,l])=>({name:o,count:l.count,avgDuration:l.totalDuration/l.count})).sort((o,l)=>l.count-o.count).slice(0,10);return{levelCounts:e,typeCounts:r,timelineData:i,topSpans:s}});async function cT(){Nr.value=!0,ga.value=null;try{Ga.value=await GR(),ur.value=`Found ${Ga.value.length} log files`}catch(t){ga.value=String(t),ur.value="Error loading files"}finally{Nr.value=!1}}async function Bm(t){const e=Fr.value.get(t);if(e&&e.entries.length>0){Wt.value=t,ri.value="logs",ur.value=`Loaded ${t} (${e.entries.length} entries)`;return}Nr.value=!0,ga.value=null,ur.value=`Loading ${t}...`;try{const r=await UR(t),n=new Map(Fr.value);n.set(t,{...il(),entries:r.entries}),Fr.value=n,Wt.value=t,ri.value="logs",ur.value=`Loaded ${t} (${r.entries.length} entries)`}catch(r){ga.value=String(r),ur.value="Error loading file"}finally{Nr.value=!1}}async function rM(t){if(!t||!Wt.value){Ln({searchQuery:""});return}Nr.value=!0,ur.value=`Searching for "${t}"...`;try{const e=await jR(Wt.value,t,Im.value||void 0);Ln({entries:e.matches,searchQuery:t}),ur.value=`Found ${e.total_matches} matches`}catch(e){ga.value=String(e),ur.value=`Search error: ${e}`}finally{Nr.value=!1}}async function nM(t){if(!t||!Wt.value){Ln({jqFilter:""});return}Nr.value=!0,ur.value="Applying JQ filter...";try{const e=await KR(Wt.value,t);Ln({entries:e.matches,jqFilter:t,searchQuery:""}),ur.value=`JQ filter matched ${e.total_matches} entries`}catch(e){ga.value=String(e),ur.value=`JQ error: ${e}`}finally{Nr.value=!1}}async function aM(t,e){try{const r=await lT(t);Ln({codeViewerFile:t,codeViewerContent:r.content,codeViewerLine:e??null}),ri.value="code"}catch(r){ga.value=`Failed to load source: ${r}`}}function fT(t){Ln({selectedEntry:t})}function dT(t){ri.value=t}function hT(t){Ln({levelFilter:t})}function vT(t){Ln({typeFilter:t})}function gT(){const t=Wt.value;if(!t)return;const e=new Map(Fr.value);e.delete(t),Fr.value=e,Bm(t)}function en({size:t=12,color:e="currentColor",className:r=""}){return k("svg",{width:t,height:t,viewBox:"0 0 12 12",fill:"none",class:r,children:k("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function tn({size:t=12,color:e="currentColor",className:r=""}){return k("svg",{width:t,height:t,viewBox:"0 0 12 12",fill:"none",class:r,children:k("path",{d:"M4.5 3L7.5 6L4.5 9",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}function h0({size:t=14,color:e="currentColor",className:r=""}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",class:r,children:[k("circle",{cx:"7",cy:"5.5",r:"2",stroke:e,"stroke-width":"1.2"}),k("path",{d:"M7 12C7 12 11 8 11 5.5C11 3.01 9.21 1 7 1C4.79 1 3 3.01 3 5.5C3 8 7 12 7 12Z",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})]})}function iM({size:t=14,color:e="#c87878",className:r=""}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",class:r,children:[k("path",{d:"M7 1C7 1 4 4.5 4 7.5C4 9.71 5.34 11.5 7 11.5C8.66 11.5 10 9.71 10 7.5C10 4.5 7 1 7 1Z",fill:e,opacity:"0.3"}),k("path",{d:"M7 1C7 1 4 4.5 4 7.5C4 9.71 5.34 11.5 7 11.5C8.66 11.5 10 9.71 10 7.5C10 4.5 7 1 7 1Z",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}),k("path",{d:"M7 5C7 5 5.5 7 5.5 8.5C5.5 9.33 6.17 10 7 10C7.83 10 8.5 9.33 8.5 8.5C8.5 7 7 5 7 5Z",fill:e,opacity:"0.6"})]})}function sM({size:t=14,color:e="currentColor",className:r=""}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",class:r,children:[k("path",{d:"M4 3.5H12",stroke:e,"stroke-width":"1.2","stroke-linecap":"round"}),k("path",{d:"M4 7H12",stroke:e,"stroke-width":"1.2","stroke-linecap":"round"}),k("path",{d:"M4 10.5H12",stroke:e,"stroke-width":"1.2","stroke-linecap":"round"}),k("circle",{cx:"2",cy:"3.5",r:"0.75",fill:e}),k("circle",{cx:"2",cy:"7",r:"0.75",fill:e}),k("circle",{cx:"2",cy:"10.5",r:"0.75",fill:e})]})}function oM({size:t=14,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",children:[k("path",{d:"M3 2.5C3 1.95 3.45 1.5 4 1.5H8L11 4.5V11.5C11 12.05 10.55 12.5 10 12.5H4C3.45 12.5 3 12.05 3 11.5V2.5Z",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}),k("path",{d:"M8 1.5V4.5H11",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})]})}function lM({size:t=14,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",children:k("path",{d:"M2 4C2 3.45 2.45 3 3 3H5.5L6.5 4.5H11C11.55 4.5 12 4.95 12 5.5V10.5C12 11.05 11.55 11.5 11 11.5H3C2.45 11.5 2 11.05 2 10.5V4Z",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})})}function uM({size:t=14,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",children:[k("path",{d:"M2 4C2 3.45 2.45 3 3 3H5.5L6.5 4.5H11C11.55 4.5 12 4.95 12 5.5V6",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}),k("path",{d:"M1 7H10.5L12 11.5H2.5L1 7Z",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})]})}const es=Ft(!1);function Vp(t,e){if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const r of t)Vp(r,e);else{const r=t;typeof r._type=="string"&&e.add(r._type);for(const n of Object.values(r))Vp(n,e)}}const v0=Rt(()=>{const t=new Set;for(const e of zr.value)Vp(e.fields,t);return Array.from(t).sort()}),g0=Rt(()=>{const t={name:"",path:"",children:new Map,isFile:!1,count:0},e=new Map;for(const r of zr.value)r.file&&e.set(r.file,(e.get(r.file)||0)+1);for(const[r,n]of e){const a=r.split("/");let i=t,s="";for(let o=0;o<a.length;o++){const l=a[o];s=s?`${s}/${l}`:l;const u=o===a.length-1;i.children.has(l)||i.children.set(l,{name:l,path:s,children:new Map,isFile:u,count:0}),i=i.children.get(l),u&&(i.count=n)}}return t}),p0=Rt(()=>{const t=new Set;for(const e of zr.value)if(e.fields)for(const r of Object.keys(e.fields))t.add(r);return Array.from(t).sort()}),m0=Rt(()=>{const t=new Set;for(const e of zr.value)e.span_name&&t.add(e.span_name);return Array.from(t).sort()}),Ha=Ft(""),bn=Ft(""),Do=Ft(""),Lo=Ft("");function cM(){Ha.value="",bn.value="",Do.value="",Lo.value="",hT(""),vT("")}const Js=Ft(""),ts=Ft(new Set);function pT({node:t,depth:e=0,onSelect:r}){const n=ts.value.has(t.path),a=t.children.size>0,i=bn.value===t.path,s=u=>{u.stopPropagation();const c=new Set(ts.value);n?c.delete(t.path):c.add(t.path),ts.value=c},o=()=>{r(t.path)},l=Array.from(t.children.values()).sort((u,c)=>u.isFile!==c.isFile?u.isFile?1:-1:u.name.localeCompare(c.name));return k("div",{class:"file-tree-item",children:[k("div",{class:`file-tree-row ${i?"selected":""}`,style:{paddingLeft:`${e*16+8}px`},onClick:o,children:[a?k("span",{class:"tree-toggle",onClick:s,children:n?k(en,{size:10}):k(tn,{size:10})}):k("span",{class:"tree-toggle-placeholder"}),k("span",{class:`tree-icon ${t.isFile?"file-icon":"folder-icon"}`,children:t.isFile?k(oM,{size:14}):n?k(uM,{size:14}):k(lM,{size:14})}),k("span",{class:"tree-name",children:t.name}),t.count>0&&k("span",{class:"tree-count",children:t.count})]}),n&&a&&k("div",{class:"file-tree-children",children:l.map(u=>k(pT,{node:u,depth:e+1,onSelect:r},u.path))})]})}function fM(){if(!es.value)return null;const t=o=>{Wt.value&&nM(o)},e=(o,l,u,c)=>{const f=o??Ha.value,d=l??bn.value,h=u??Do.value,v=c??Lo.value,p=[];if(f&&p.push(`(.fields | .. | objects | select(._type == "${f}"))`),d&&p.push(`(.file | contains("${d}"))`),h&&p.push(`(.fields | has("${h}"))`),v&&p.push(`(.span_name == "${v}")`),p.length===0){gT();return}const g=`select(${p.join(" and ")})`;t(g)},r=o=>{o.preventDefault(),Js.value&&t(Js.value)},n=o=>{const l=o===bn.value?"":o;bn.value=l,e(void 0,l,void 0,void 0)},a=()=>{const o=new Set,l=u=>{u.children.size>0&&(o.add(u.path),u.children.forEach(c=>l(c)))};l(g0.value),ts.value=o},i=()=>{ts.value=new Set},s=Rt(()=>{const o=new Set;for(const l of zr.value)l.file&&o.add(l.file);return o.size});return k("div",{class:"filter-panel",children:[k("div",{class:"filter-panel-header",children:[k("h3",{children:"ðŸ” Advanced Filters"}),k("button",{class:"btn btn-small",onClick:()=>es.value=!1,children:"âœ•"})]}),k("div",{class:"filter-columns",children:[k("div",{class:"filter-column",children:[k("h4",{children:"Level & Type"}),k("div",{class:"filter-field",children:[k("label",{children:"Log Level:"}),k("select",{class:"filter-select",value:Im.value,onChange:o=>hT(o.target.value),children:[k("option",{value:"",children:"All Levels"}),k("option",{value:"TRACE",children:"TRACE"}),k("option",{value:"DEBUG",children:"DEBUG"}),k("option",{value:"INFO",children:"INFO"}),k("option",{value:"WARN",children:"WARN"}),k("option",{value:"ERROR",children:"ERROR"})]})]}),k("div",{class:"filter-field",children:[k("label",{children:"Event Type:"}),k("select",{class:"filter-select",value:uT.value,onChange:o=>vT(o.target.value),children:[k("option",{value:"",children:"All Types"}),k("option",{value:"event",children:"Event"}),k("option",{value:"span_enter",children:"Span Enter"}),k("option",{value:"span_exit",children:"Span Exit"})]})]})]}),k("div",{class:"filter-column",children:[k("h4",{children:["Type Name (",v0.value.length,")"]}),k("div",{class:"filter-field",children:[k("label",{children:"Select Type:"}),k("select",{class:"filter-select",value:Ha.value,onChange:o=>{const l=o.target.value;Ha.value=l,e(l,void 0,void 0,void 0)},children:[k("option",{value:"",children:"Select type..."}),v0.value.map(o=>k("option",{value:o,children:o},o))]})]}),k("div",{class:"filter-field",children:[k("label",{children:"Custom Type:"}),k("input",{type:"text",class:"filter-input",placeholder:"Enter type...",value:Ha.value,onInput:o=>{const l=o.target.value;Ha.value=l,e(l,void 0,void 0,void 0)}})]})]}),k("div",{class:"filter-column filter-column-wide",children:[k("div",{class:"filter-section-header",children:[k("h4",{children:["File Path (",s.value,")"]}),k("div",{class:"tree-actions",children:[k("button",{class:"btn btn-small",onClick:a,title:"Expand All",children:"âŠž"}),k("button",{class:"btn btn-small",onClick:i,title:"Collapse All",children:"âŠŸ"})]})]}),bn.value&&k("div",{class:"selected-file",children:[k("span",{children:k("code",{children:bn.value})}),k("button",{class:"btn btn-small",onClick:()=>bn.value="",children:"âœ•"})]}),k("div",{class:"file-tree-container",children:Array.from(g0.value.children.values()).sort((o,l)=>o.isFile!==l.isFile?o.isFile?1:-1:o.name.localeCompare(l.name)).map(o=>k(pT,{node:o,onSelect:n},o.path))})]}),k("div",{class:"filter-column",children:[k("h4",{children:"Other Filters"}),k("div",{class:"filter-field",children:[k("label",{children:["Has Field (",p0.value.length,"):"]}),k("select",{class:"filter-select",value:Do.value,onChange:o=>{const l=o.target.value;Do.value=l,e(void 0,void 0,l,void 0)},children:[k("option",{value:"",children:"Select field..."}),p0.value.map(o=>k("option",{value:o,children:o},o))]})]}),k("div",{class:"filter-field",children:[k("label",{children:["Span Name (",m0.value.length,"):"]}),k("select",{class:"filter-select",value:Lo.value,onChange:o=>{const l=o.target.value;Lo.value=l,e(void 0,void 0,void 0,l)},children:[k("option",{value:"",children:"Select span..."}),m0.value.map(o=>k("option",{value:o,children:o},o))]})]})]})]}),k("div",{class:"filter-section",children:[k("h4",{children:"Custom JQ Query"}),k("form",{class:"custom-jq-form",onSubmit:r,children:[k("input",{type:"text",class:"filter-input jq-input-large",placeholder:'e.g., select(.level == "ERROR" and (.message | contains("panic")))',value:Js.value,onInput:o=>Js.value=o.target.value}),k("button",{type:"submit",class:"btn btn-secondary",children:"âš¡ Execute"})]}),$p.value&&k("div",{class:"current-filter",children:[k("span",{class:"current-filter-label",children:"Active filter:"}),k("code",{class:"current-filter-code",children:$p.value})]})]})]})}function dM(){const t=r=>{r.preventDefault();const a=r.target.querySelector("input");rM(a.value)},e=()=>{cT(),Wt.value&&Bm(Wt.value)};return k("header",{class:"header",children:[k("div",{class:"header-left",children:[k(qR,{size:14,color:"#8b9dc3"}),k("h1",{class:"header-title",children:"Log Viewer"})]}),k("form",{class:"search-form",onSubmit:t,children:[k("input",{type:"text",class:"search-input",placeholder:"Search (regex supported)...",value:zp.value}),k("button",{type:"submit",class:"btn btn-primary",children:[k(OR,{size:12})," Search"]})]}),k("button",{class:`btn ${es.value?"btn-active":""}`,onClick:()=>es.value=!es.value,title:"Advanced Filters",children:[k(IR,{size:12})," Filters"]}),k("div",{class:"header-filters",children:[(zp.value||$p.value)&&k("button",{class:"btn",onClick:()=>{cM(),gT()},children:[k(FR,{size:12})," Clear"]}),k("label",{class:"checkbox-label",children:[k("input",{type:"checkbox",checked:Np.value,onChange:r=>Np.value=r.target.checked}),"Show Raw"]})]}),k("div",{class:"header-right",children:[k("span",{class:"status-text",children:ur.value}),k("button",{class:"btn",onClick:e,children:[k(BR,{size:12})," Refresh"]})]})]})}function hM(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:`${(t/(1024*1024)).toFixed(1)} MB`}function vM(){return k("aside",{class:"sidebar",children:[k("div",{class:"sidebar-header",children:[k("h2",{children:"Log Files"}),k("span",{class:"file-count",children:[Ga.value.length," files"]})]}),k("div",{class:"file-list",children:Nr.value&&Ga.value.length===0?k("p",{class:"loading",children:"Loading..."}):Ga.value.length===0?k("p",{class:"placeholder",children:"No log files found"}):Ga.value.map(t=>k("div",{class:`file-item ${t.name===Wt.value?"active":""}`,onClick:()=>Bm(t.name),children:[k("div",{class:"file-name",title:t.name,children:t.name}),k("div",{class:"file-meta",children:[hM(t.size)," â€¢ ",t.modified||"Unknown"]})]},t.name))})]})}function gM({size:t=14,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",children:[k("path",{d:"M2 4H6L8 7L6 10H2",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}),k("path",{d:"M8 7H12",stroke:e,"stroke-width":"1.2","stroke-linecap":"round"}),k("circle",{cx:"12",cy:"7",r:"1.5",stroke:e,"stroke-width":"1.2"})]})}function pM({size:t=14,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",children:[k("rect",{x:"2",y:"8",width:"2.5",height:"4",rx:"0.5",stroke:e,"stroke-width":"1.2"}),k("rect",{x:"5.75",y:"5",width:"2.5",height:"7",rx:"0.5",stroke:e,"stroke-width":"1.2"}),k("rect",{x:"9.5",y:"2",width:"2.5",height:"10",rx:"0.5",stroke:e,"stroke-width":"1.2"})]})}function mM({size:t=14,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",children:[k("path",{d:"M3 2.5C3 1.95 3.45 1.5 4 1.5H8L11 4.5V11.5C11 12.05 10.55 12.5 10 12.5H4C3.45 12.5 3 12.05 3 11.5V2.5Z",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}),k("path",{d:"M8 1.5V4.5H11",stroke:e,"stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})]})}const yM=[{id:"logs",label:"Logs",icon:()=>k(sM,{size:14})},{id:"flow",label:"Flow Graph",icon:()=>k(gM,{size:14})},{id:"stats",label:"Statistics",icon:()=>k(pM,{size:14})},{id:"code",label:"Code",icon:()=>k(mM,{size:14})}];function bM(){return k("div",{class:"tab-bar",children:[k("div",{class:"tabs",children:yM.map(t=>k("button",{class:`tab ${ri.value===t.id?"active":""}`,onClick:()=>dT(t.id),children:[k("span",{class:"tab-icon",children:t.icon()}),k("span",{class:"tab-label",children:t.label})]},t.id))}),k("div",{class:"tab-info",children:k("span",{class:"entry-count",children:[Ni.value.length," entries"]})})]})}function _M(t){return typeof t=="object"&&t!==null&&"_type"in t&&typeof t._type=="string"}function mT(t){return typeof t=="object"&&t!==null&&"text"in t&&"index"in t&&Object.keys(t).length===2}function eo(t){return t===null||typeof t!="object"?!0:Array.isArray(t)?t.length<=3&&t.every(e=>typeof e!="object"||e===null):!!mT(t)}function Yr({name:t}){const e=t.split("::");if(e.length>1){const r=e.pop(),n=e.join("::");return k("span",{class:"rust-type",children:[k("span",{class:"rust-module",children:[n,"::"]}),k("span",{class:"rust-type-name",children:r})]})}return k("span",{class:"rust-type-name",children:t})}function xM({token:t}){return k("span",{class:"rust-token",children:[k("span",{class:"rust-string",children:['"',t.text,'"']}),k("span",{class:"rust-paren",children:"("}),k("span",{class:"rust-number",children:t.index}),k("span",{class:"rust-paren",children:")"})]})}function wM(t){return/^-?\d+(\.\d+)?$/.test(t)}function SM(t){return t?/^(type_param|type_name|ty|T|Type|type|generic|param)$/i.test(t):!1}function EM(t){return t.includes("::")?!0:/^[A-Z][a-zA-Z0-9]*$/.test(t)&&!t.includes(" ")}function CM({value:t,fieldName:e}){return t===null?k("span",{class:"rust-keyword",children:"None"}):typeof t=="boolean"?k("span",{class:"rust-keyword",children:String(t)}):typeof t=="number"?k("span",{class:"rust-number",children:t}):typeof t=="string"?wM(t)?k("span",{class:"rust-number",children:t}):SM(e)||EM(t)?k(Yr,{name:t}):k("span",{class:"rust-string",children:['"',t,'"']}):k("span",{class:"rust-unknown",children:String(t)})}function Rr({value:t,name:e,depth:r=0,defaultExpanded:n=!0,inline:a=!1}){const[i,s]=rr(n);if(t===null)return k("span",{class:"rust-value",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k("span",{class:"rust-keyword",children:"None"})]});if(typeof t!="object")return k("span",{class:"rust-value",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(CM,{value:t,fieldName:e})]});if(mT(t))return k("span",{class:"rust-value",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(xM,{token:t})]});if(Array.isArray(t)){if(t.length===0)return k("span",{class:"rust-value",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k("span",{class:"rust-bracket",children:"[]"})]});const l=eo(t);return a||l&&r>0?k("span",{class:"rust-value rust-array-inline",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k("span",{class:"rust-bracket",children:"["}),t.map((u,c)=>k("span",{children:[k(Rr,{value:u,depth:r+1,inline:!0}),c<t.length-1&&k("span",{class:"rust-comma",children:", "})]},c)),k("span",{class:"rust-bracket",children:"]"})]}):k("div",{class:"rust-value rust-array",children:[k("div",{class:"rust-collapsible-header",onClick:()=>s(!i),children:[k("span",{class:"rust-toggle",children:i?k(en,{size:8}):k(tn,{size:8})}),e&&k("span",{class:"rust-field-name",children:[e,": "]}),k("span",{class:"rust-bracket",children:"["}),!i&&k(xn,{children:[k("span",{class:"rust-preview",children:[t.length," items"]}),k("span",{class:"rust-bracket",children:"]"})]})]}),i&&k("div",{class:"rust-array-items",children:[t.map((u,c)=>k("div",{class:"rust-array-item",children:[k(Rr,{value:u,depth:r+1,defaultExpanded:r<2}),c<t.length-1&&k("span",{class:"rust-comma",children:","})]},c)),k("span",{class:"rust-bracket",children:"]"})]})]})}if(_M(t)){const l=t._type,u="_variant"in t?t._variant:null,c="_values"in t&&Array.isArray(t._values),f=Object.entries(t).filter(([h])=>h!=="_type"&&h!=="_values"&&h!=="_variant");if(u){const h=c?t._values:[];return!c||h.length===0?k("span",{class:"rust-value rust-typed-inline",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),k("span",{class:"rust-paren",children:"::"}),k("span",{class:"rust-keyword",children:u})]}):h.length===1&&eo(h[0])?k("span",{class:"rust-value rust-typed-inline",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),k("span",{class:"rust-paren",children:"::"}),k("span",{class:"rust-keyword",children:u}),k("span",{class:"rust-paren",children:"("}),h.map((p,g)=>k("span",{children:[k(Rr,{value:p,depth:r+1,inline:!0}),g<h.length-1&&k("span",{class:"rust-comma",children:", "})]},g)),k("span",{class:"rust-paren",children:")"})]}):k("div",{class:"rust-value rust-typed",children:[k("div",{class:"rust-collapsible-header",onClick:()=>s(!i),children:[k("span",{class:"rust-toggle",children:i?k(en,{size:8}):k(tn,{size:8})}),e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),k("span",{class:"rust-paren",children:"::"}),k("span",{class:"rust-keyword",children:u}),k("span",{class:"rust-paren",children:"("}),!i&&k("span",{class:"rust-preview",children:"..."}),!i&&k("span",{class:"rust-paren",children:")"})]}),i&&k("div",{class:"rust-typed-values",children:[h.map((p,g)=>k("div",{class:"rust-typed-value",children:[k(Rr,{value:p,depth:r+1,defaultExpanded:r<2}),g<h.length-1&&k("span",{class:"rust-comma",children:","})]},g)),k("span",{class:"rust-paren",children:")"})]})]})}if(c){const h=t._values;return h.length===0||h.length===1&&eo(h[0])?k("span",{class:"rust-value rust-typed-inline",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),h.length>0&&k(xn,{children:[k("span",{class:"rust-paren",children:"("}),h.map((v,p)=>k("span",{children:[k(Rr,{value:v,depth:r+1,inline:!0}),p<h.length-1&&k("span",{class:"rust-comma",children:", "})]},p)),k("span",{class:"rust-paren",children:")"})]})]}):k("div",{class:"rust-value rust-typed",children:[k("div",{class:"rust-collapsible-header",onClick:()=>s(!i),children:[k("span",{class:"rust-toggle",children:i?k(en,{size:8}):k(tn,{size:8})}),e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),k("span",{class:"rust-paren",children:"("}),!i&&k("span",{class:"rust-preview",children:"..."}),!i&&k("span",{class:"rust-paren",children:")"})]}),i&&k("div",{class:"rust-typed-values",children:[h.map((v,p)=>k("div",{class:"rust-typed-value",children:[k(Rr,{value:v,depth:r+1,defaultExpanded:r<2}),p<h.length-1&&k("span",{class:"rust-comma",children:","})]},p)),k("span",{class:"rust-paren",children:")"})]})]})}return f.length===0?k("span",{class:"rust-value",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l})]}):f.every(([,h])=>eo(h))&&f.length<=3&&a?k("span",{class:"rust-value rust-struct-inline",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),k("span",{class:"rust-brace",children:[" ","{"," "]}),f.map(([h,v],p)=>k("span",{children:[k("span",{class:"rust-field-name",children:h}),k("span",{class:"rust-colon",children:": "}),k(Rr,{value:v,depth:r+1,inline:!0}),p<f.length-1&&k("span",{class:"rust-comma",children:", "})]},h)),k("span",{class:"rust-brace",children:[" ","}"]})]}):k("div",{class:"rust-value rust-struct",children:[k("div",{class:"rust-collapsible-header",onClick:()=>s(!i),children:[k("span",{class:"rust-toggle",children:i?k(en,{size:8}):k(tn,{size:8})}),e&&k("span",{class:"rust-field-name",children:[e,": "]}),k(Yr,{name:l}),k("span",{class:"rust-brace",children:[" ","{"]}),!i&&k(xn,{children:[k("span",{class:"rust-preview",children:[f.length," fields"]}),k("span",{class:"rust-brace",children:"}"})]})]}),i&&k("div",{class:"rust-struct-fields",children:[f.map(([h,v],p)=>k("div",{class:"rust-struct-field",children:[k(Rr,{value:v,name:h,depth:r+1,defaultExpanded:r<2}),p<f.length-1&&k("span",{class:"rust-comma",children:","})]},h)),k("span",{class:"rust-brace",children:"}"})]})]})}const o=Object.entries(t);return o.length===0?k("span",{class:"rust-value",children:[e&&k("span",{class:"rust-field-name",children:[e,": "]}),k("span",{class:"rust-brace",children:"{}"})]}):k("div",{class:"rust-value rust-object",children:[k("div",{class:"rust-collapsible-header",onClick:()=>s(!i),children:[k("span",{class:"rust-toggle",children:i?k(en,{size:8}):k(tn,{size:8})}),e&&k("span",{class:"rust-field-name",children:[e,": "]}),k("span",{class:"rust-brace",children:"{"}),!i&&k(xn,{children:[k("span",{class:"rust-preview",children:[o.length," fields"]}),k("span",{class:"rust-brace",children:"}"})]})]}),i&&k("div",{class:"rust-object-fields",children:[o.map(([l,u],c)=>k("div",{class:"rust-object-field",children:[k(Rr,{value:u,name:l,depth:r+1,defaultExpanded:r<2}),c<o.length-1&&k("span",{class:"rust-comma",children:","})]},l)),k("span",{class:"rust-brace",children:"}"})]})]})}function kM({fields:t,defaultExpanded:e=!0}){const r=Object.entries(t).filter(([n])=>n!=="message");return r.length===0?null:k("div",{class:"rust-fields-container",children:r.map(([n,a])=>k("div",{class:"rust-field-row",children:k(Rr,{value:a,name:n,defaultExpanded:e})},n))})}var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bT={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(n){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function m(b){return b instanceof l?new l(b.type,m(b.content),b.alias):Array.isArray(b)?b.map(m):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++i}),m.__id},clone:function m(b,_){_=_||{};var x,S;switch(o.util.type(b)){case"Object":if(S=o.util.objId(b),_[S])return _[S];x={},_[S]=x;for(var w in b)b.hasOwnProperty(w)&&(x[w]=m(b[w],_));return x;case"Array":return S=o.util.objId(b),_[S]?_[S]:(x=[],_[S]=x,b.forEach(function(E,C){x[C]=m(E,_)}),x);default:return b}},getLanguage:function(m){for(;m;){var b=a.exec(m.className);if(b)return b[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,b){m.className=m.className.replace(RegExp(a,"gi"),""),m.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(x){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(x.stack)||[])[1];if(m){var b=document.getElementsByTagName("script");for(var _ in b)if(b[_].src==m)return b[_]}return null}},isActive:function(m,b,_){for(var x="no-"+b;m;){var S=m.classList;if(S.contains(b))return!0;if(S.contains(x))return!1;m=m.parentElement}return!!_}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(m,b){var _=o.util.clone(o.languages[m]);for(var x in b)_[x]=b[x];return _},insertBefore:function(m,b,_,x){x=x||o.languages;var S=x[m],w={};for(var E in S)if(S.hasOwnProperty(E)){if(E==b)for(var C in _)_.hasOwnProperty(C)&&(w[C]=_[C]);_.hasOwnProperty(E)||(w[E]=S[E])}var T=x[m];return x[m]=w,o.languages.DFS(o.languages,function(A,P){P===T&&A!=m&&(this[A]=w)}),w},DFS:function m(b,_,x,S){S=S||{};var w=o.util.objId;for(var E in b)if(b.hasOwnProperty(E)){_.call(b,E,b[E],x||E);var C=b[E],T=o.util.type(C);T==="Object"&&!S[w(C)]?(S[w(C)]=!0,m(C,_,null,S)):T==="Array"&&!S[w(C)]&&(S[w(C)]=!0,m(C,_,E,S))}}},plugins:{},highlightAll:function(m,b){o.highlightAllUnder(document,m,b)},highlightAllUnder:function(m,b,_){var x={callback:_,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",x),x.elements=Array.prototype.slice.apply(x.container.querySelectorAll(x.selector)),o.hooks.run("before-all-elements-highlight",x);for(var S=0,w;w=x.elements[S++];)o.highlightElement(w,b===!0,x.callback)},highlightElement:function(m,b,_){var x=o.util.getLanguage(m),S=o.languages[x];o.util.setLanguage(m,x);var w=m.parentElement;w&&w.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(w,x);var E=m.textContent,C={element:m,language:x,grammar:S,code:E};function T(P){C.highlightedCode=P,o.hooks.run("before-insert",C),C.element.innerHTML=C.highlightedCode,o.hooks.run("after-highlight",C),o.hooks.run("complete",C),_&&_.call(C.element)}if(o.hooks.run("before-sanity-check",C),w=C.element.parentElement,w&&w.nodeName.toLowerCase()==="pre"&&!w.hasAttribute("tabindex")&&w.setAttribute("tabindex","0"),!C.code){o.hooks.run("complete",C),_&&_.call(C.element);return}if(o.hooks.run("before-highlight",C),!C.grammar){T(o.util.encode(C.code));return}if(b&&n.Worker){var A=new Worker(o.filename);A.onmessage=function(P){T(P.data)},A.postMessage(JSON.stringify({language:C.language,code:C.code,immediateClose:!0}))}else T(o.highlight(C.code,C.grammar,C.language))},highlight:function(m,b,_){var x={code:m,grammar:b,language:_};if(o.hooks.run("before-tokenize",x),!x.grammar)throw new Error('The language "'+x.language+'" has no grammar.');return x.tokens=o.tokenize(x.code,x.grammar),o.hooks.run("after-tokenize",x),l.stringify(o.util.encode(x.tokens),x.language)},tokenize:function(m,b){var _=b.rest;if(_){for(var x in _)b[x]=_[x];delete b.rest}var S=new f;return d(S,S.head,m),c(m,S,b,S.head,0),v(S)},hooks:{all:{},add:function(m,b){var _=o.hooks.all;_[m]=_[m]||[],_[m].push(b)},run:function(m,b){var _=o.hooks.all[m];if(!(!_||!_.length))for(var x=0,S;S=_[x++];)S(b)}},Token:l};n.Prism=o;function l(m,b,_,x){this.type=m,this.content=b,this.alias=_,this.length=(x||"").length|0}l.stringify=function m(b,_){if(typeof b=="string")return b;if(Array.isArray(b)){var x="";return b.forEach(function(T){x+=m(T,_)}),x}var S={type:b.type,content:m(b.content,_),tag:"span",classes:["token",b.type],attributes:{},language:_},w=b.alias;w&&(Array.isArray(w)?Array.prototype.push.apply(S.classes,w):S.classes.push(w)),o.hooks.run("wrap",S);var E="";for(var C in S.attributes)E+=" "+C+'="'+(S.attributes[C]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+E+">"+S.content+"</"+S.tag+">"};function u(m,b,_,x){m.lastIndex=b;var S=m.exec(_);if(S&&x&&S[1]){var w=S[1].length;S.index+=w,S[0]=S[0].slice(w)}return S}function c(m,b,_,x,S,w){for(var E in _)if(!(!_.hasOwnProperty(E)||!_[E])){var C=_[E];C=Array.isArray(C)?C:[C];for(var T=0;T<C.length;++T){if(w&&w.cause==E+","+T)return;var A=C[T],P=A.inside,R=!!A.lookbehind,D=!!A.greedy,L=A.alias;if(D&&!A.pattern.global){var I=A.pattern.toString().match(/[imsuy]*$/)[0];A.pattern=RegExp(A.pattern.source,I+"g")}for(var O=A.pattern||A,B=x.next,H=S;B!==b.tail&&!(w&&H>=w.reach);H+=B.value.length,B=B.next){var G=B.value;if(b.length>m.length)return;if(!(G instanceof l)){var N=1,$;if(D){if($=u(O,H,m,R),!$||$.index>=m.length)break;var z=$.index,X=$.index+$[0].length,F=H;for(F+=B.value.length;z>=F;)B=B.next,F+=B.value.length;if(F-=B.value.length,H=F,B.value instanceof l)continue;for(var q=B;q!==b.tail&&(F<X||typeof q.value=="string");q=q.next)N++,F+=q.value.length;N--,G=m.slice(H,F),$.index-=H}else if($=u(O,0,G,R),!$)continue;var z=$.index,W=$[0],te=G.slice(0,z),Y=G.slice(z+W.length),V=H+G.length;w&&V>w.reach&&(w.reach=V);var U=B.prev;te&&(U=d(b,U,te),H+=te.length),h(b,U,N);var K=new l(E,P?o.tokenize(W,P):W,L,W);if(B=d(b,U,K),Y&&d(b,B,Y),N>1){var Z={cause:E+","+T,reach:V};c(m,b,_,B.prev,H,Z),w&&Z.reach>w.reach&&(w.reach=Z.reach)}}}}}}function f(){var m={value:null,prev:null,next:null},b={value:null,prev:m,next:null};m.next=b,this.head=m,this.tail=b,this.length=0}function d(m,b,_){var x=b.next,S={value:_,prev:b,next:x};return b.next=S,x.prev=S,m.length++,S}function h(m,b,_){for(var x=b.next,S=0;S<_&&x!==m.tail;S++)x=x.next;b.next=x,x.prev=b,m.length-=S}function v(m){for(var b=[],_=m.head.next;_!==m.tail;)b.push(_.value),_=_.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(m){var b=JSON.parse(m.data),_=b.language,x=b.code,S=b.immediateClose;n.postMessage(o.highlight(x,o.languages[_],_)),S&&n.close()},!1)),o;var p=o.util.currentScript();p&&(o.filename=p.src,p.hasAttribute("data-manual")&&(o.manual=!0));function g(){o.manual||o.highlightAll()}if(!o.manual){var y=document.readyState;y==="loading"||y==="interactive"&&p&&p.defer?document.addEventListener("DOMContentLoaded",g):window.requestAnimationFrame?window.requestAnimationFrame(g):window.setTimeout(g,16)}return o}(e);t.exports&&(t.exports=r),typeof ca<"u"&&(ca.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:r.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,a){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:r.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(n){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var i=n.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loadingâ€¦",a=function(p,g){return"âœ– Error "+p+" while fetching file: "+g},i="âœ– Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",c="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function d(p,g,y){var m=new XMLHttpRequest;m.open("GET",p,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?g(m.responseText):m.status>=400?y(a(m.status,m.statusText)):y(i))},m.send(null)}function h(p){var g=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(p||"");if(g){var y=Number(g[1]),m=g[2],b=g[3];return m?b?[y,Number(b)]:[y,void 0]:[y,y]}}r.hooks.add("before-highlightall",function(p){p.selector+=", "+f}),r.hooks.add("before-sanity-check",function(p){var g=p.element;if(g.matches(f)){p.code="",g.setAttribute(o,l);var y=g.appendChild(document.createElement("CODE"));y.textContent=n;var m=g.getAttribute("data-src"),b=p.language;if(b==="none"){var _=(/\.(\w+)$/.exec(m)||[,"none"])[1];b=s[_]||_}r.util.setLanguage(y,b),r.util.setLanguage(g,b);var x=r.plugins.autoloader;x&&x.loadLanguages(b),d(m,function(S){g.setAttribute(o,u);var w=h(g.getAttribute("data-range"));if(w){var E=S.split(/\r\n?|\n/g),C=w[0],T=w[1]==null?E.length:w[1];C<0&&(C+=E.length),C=Math.max(0,Math.min(C-1,E.length)),T<0&&(T+=E.length),T=Math.max(0,Math.min(T,E.length)),S=E.slice(C,T).join(`
`),g.hasAttribute("data-start")||g.setAttribute("data-start",String(C+1))}y.textContent=S,r.highlightElement(y)},function(S){g.setAttribute(o,c),y.textContent=S})}}),r.plugins.fileHighlight={highlight:function(g){for(var y=(g||document).querySelectorAll(f),m=0,b;b=y[m++];)r.highlightElement(b)}};var v=!1;r.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(bT);var TM=bT.exports;const sl=yT(TM);(function(t){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),t.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},t.languages.rust["closure-params"].inside.rest=t.languages.rust,t.languages.rust.attribute.inside.string=t.languages.rust.string})(Prism);function AM(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function y0(t,e){try{const r=sl.languages[e];if(r)return sl.highlight(t,r,e)}catch{}return AM(t)}function PM(t){return t.endsWith(".rs")?"rust":t.endsWith(".ts")||t.endsWith(".tsx")?"typescript":t.endsWith(".js")||t.endsWith(".jsx")?"javascript":"plaintext"}function b0({snippet:t,file:e,isPanic:r=!1}){const[n,a]=rr(null),[i,s]=rr(!1),[o,l]=rr(null),u=Ir(null),c=PM(e),f=t.content.split(`
`).map(v=>y0(v,c));Sa(()=>{n&&o&&u.current&&u.current.scrollIntoView({behavior:"instant",block:"center"})},[n,o]);const d=async(v,p)=>{if(p.stopPropagation(),n){l(v);return}s(!0),l(v);try{const g=await lT(e);a(g.content)}catch(g){console.error("Failed to load full file:",g)}finally{s(!1)}},h=v=>{v.stopPropagation(),a(null),l(null)};if(n){const v=n.split(`
`),p=v.map(g=>y0(g,c));return k("div",{class:`code-snippet full-file ${r?"panic-snippet":""}`,children:[k("div",{class:"full-file-header",children:[k("span",{class:"full-file-path",children:e}),k("span",{class:"full-file-lines",children:[v.length," lines"]}),k("button",{class:"full-file-collapse",onClick:h,children:"Collapse"})]}),k("pre",{class:"snippet-code full-file-code",children:p.map((g,y)=>{const m=y+1,b=m===o;return k("div",{ref:b?u:void 0,class:`snippet-line clickable ${b?"highlight":""}`,onClick:_=>d(m,_),children:[k("span",{class:"line-number",children:m}),k("code",{dangerouslySetInnerHTML:{__html:g||" "}})]},y)})})]})}return k("div",{class:`code-snippet ${r?"panic-snippet":""} ${i?"loading":""}`,children:[k("pre",{class:"snippet-code",children:f.map((v,p)=>{const g=t.start_line+p,y=g===t.highlight_line;return k("div",{class:`snippet-line clickable ${y?"highlight":""}`,onClick:m=>d(g,m),title:"Click to expand full file at this line",children:[k("span",{class:"line-number",children:g}),k("code",{dangerouslySetInnerHTML:{__html:v||" "}})]},p)})}),i&&k("div",{class:"snippet-loading",children:"Loading full file..."})]})}function Eu(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function Hp(t,e){if(!e)return Eu(t);try{const r=new RegExp(`(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return Eu(t).replace(r,'<mark class="highlight">$1</mark>')}catch{return Eu(t)}}function RM(t){if(!t)return"";const e=parseFloat(t);return e<1?`${(e*1e3).toFixed(0)}ms`:`${e.toFixed(2)}s`}function MM(t){var n,a;const e=[],r=t.split(`
`);for(let i=0;i<r.length;i++){const s=(n=r[i])==null?void 0:n.trim();if(!s)continue;const o=s.match(/^(\d+):\s+(.+)$/);if(o){const l=o[1],u=o[2];if(!l||!u)continue;const c=parseInt(l,10);let f;if(i+1<r.length){const d=(a=r[i+1])==null?void 0:a.trim();d!=null&&d.startsWith("at ")&&(f=d.slice(3),i++)}e.push({index:c,function:u,location:f})}}return e}function DM(t){const e=[/^rust_begin_unwind/,/^core::/,/^std::/,/^<.*as core::/,/^test::/,/^__rust_/,/^<alloc::/,/^alloc::/];return t.filter(r=>e.some(n=>n.test(r.function))?!1:r.location&&!r.location.includes("/rustc/")&&!r.location.includes("\\rustc\\")?!0:!r.function.includes("::{{closure}}")||r.location).slice(0,5)}function LM(t){if(!t)return 0;let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e),e=e&e;return Math.abs(e*137.508)%360}function _0(t,e=50,r=35){return t?`hsl(${LM(t)}, ${e}%, ${r}%)`:"transparent"}function OM(t,e=40,r=50){return`hsl(${(t*50+180)%360}, ${e}%, ${r}%)`}function IM({message:t,assertionDiff:e,searchQuery:r}){return e?k("div",{class:"panic-message-formatted",children:[k("div",{class:"panic-title",children:e.title}),k("div",{class:"panic-diff",children:[k("div",{class:"diff-header",children:[k("span",{class:"diff-label diff-left",children:["â† ",e.left_label]}),k("span",{class:"diff-vs",children:"vs"}),k("span",{class:"diff-label diff-right",children:[e.right_label," â†’"]})]}),k("div",{class:"diff-content",children:[k("div",{class:"diff-column diff-left-column",children:e.left_value?k("pre",{class:"diff-value",children:e.left_value}):k("div",{class:"diff-empty",children:"(empty)"})}),k("div",{class:"diff-column diff-right-column",children:e.right_value?k("pre",{class:"diff-value",children:e.right_value}):k("div",{class:"diff-empty",children:"(empty)"})})]})]})]}):k("div",{class:"panic-message",dangerouslySetInnerHTML:{__html:Hp(t,r)}})}function x0(t,e,r=3){const[n,a]=rr(null),[i,s]=rr(null),[o,l]=rr(!1);return Sa(()=>{!t||!e||n&&n.highlight_line===e||(l(!0),s(null),YR(t,e,r).then(u=>{a(u),l(!1)}).catch(u=>{s(String(u)),l(!1)}))},[t,e,r]),{snippet:n,error:i,loading:o}}function BM({entry:t,showRaw:e,searchQuery:r,isSelected:n,onSelect:a,expandAll:i,isExpanded:s,onToggleExpand:o,headerCellRef:l,headerScrollLeft:u=0,headerColWidth:c=500,onHeaderWheel:f,hoveredSpanName:d,onSpanHover:h}){var z;const[v,p]=rr(!1),g=s!==void 0?s:v,y=t.file&&t.source_line,m=t.panic_file&&t.panic_line,b=t.level.toLowerCase(),_=t.event_type.replace("_","-"),x=Math.min(t.depth,10),{snippet:S,error:w}=x0(t.file,t.source_line),{snippet:E}=x0(t.panic_file,t.panic_line),C=W=>{W.stopPropagation(),t.file&&aM(t.file,t.source_line??void 0)},T=Object.entries(t.fields).filter(([W])=>W!=="message"),A=T.length>0,P=t.message.startsWith("PANIC:"),R=t.backtrace?DM(MM(t.backtrace)):[],D=i||g,L=A||t.backtrace&&!P,I=y&&S||P&&(E||t.assertion_diff||R.length>0)||e,O=L||I,B=()=>{a(),O&&(o?o():p(!v))},H=W=>{W.stopPropagation(),o?o():p(!v)},G=t.span_name&&d===t.span_name,N=t.event_type==="span_enter",$=t.event_type==="span_exit",X=_0(t.span_name,60,45),F=_0(t.span_name,30,30),q=()=>{t.span_name&&h&&h(t.span_name)};return k("div",{class:`log-entry ${n?"selected":""} level-${b} type-${_} ${P?"panic-entry":""} ${O?"expandable":""} ${D?"expanded":""} ${G?"span-highlighted":""} ${N?"span-enter":""} ${$?"span-exit":""} ${x>0?"in-span":""}`,onClick:B,onMouseEnter:q,style:x>0?{"--span-color":X,"--span-color-muted":F}:void 0,children:[(()=>{var Y;const W=$?x+1:x,te=W*12;return k("div",{class:"entry-header-cell",style:{width:`${c}px`,maxWidth:`${c}px`,"--gutter-width":`${te}px`},onWheel:f,children:[W>0&&k("div",{class:"depth-gutter",children:Array.from({length:W}).map((V,U)=>{const K=U===W-1,Z=OM(U);let ae="pass";return K&&(N?ae="top-corner":$&&(ae="bottom-corner")),k("span",{class:`depth-line ${ae}`,style:{"--line-color":Z}},U)})}),k("div",{class:"entry-header-content",ref:V=>{l&&l(V)},style:{transform:`translateX(-${u}px)`},children:k("div",{class:"entry-header-col",children:k("div",{class:"header-content",children:[k("div",{class:"header-row1",children:[k("span",{class:`level-badge ${b}`,children:t.level}),k("span",{class:`type-badge ${_}`,children:t.event_type==="span_enter"?"ENTER":t.event_type==="span_exit"?"EXIT":"EVENT"}),P&&k("span",{class:"panic-badge",children:k(iM,{size:8})}),k("span",{class:"entry-meta",children:["#",t.line_number]}),t.timestamp&&k("span",{class:"entry-meta",children:RM(t.timestamp)}),t.span_name&&k("span",{class:"span-name",children:t.span_name}),P?k("span",{class:"entry-message panic-msg",dangerouslySetInnerHTML:{__html:Hp(t.message,r)}}):k("span",{class:"entry-message",dangerouslySetInnerHTML:{__html:Hp(t.message,r)}})]}),(A||y)&&k("div",{class:"header-row2",children:[A&&k("span",{class:"content-meta",children:[T.length," ",T.length===1?"field":"fields"]}),y&&k("button",{class:"header-location",onClick:C,title:`${t.file}:${t.source_line}`,children:[k(h0,{size:8}),(Y=t.file)==null?void 0:Y.split(/[/\\]/).pop(),":",t.source_line]})]}),D&&k("div",{class:"header-details",onClick:V=>V.stopPropagation(),children:[A&&k("div",{class:"fields-rust-container",children:k(kM,{fields:t.fields,defaultExpanded:!0})}),t.backtrace&&!P&&k("pre",{class:"backtrace-content",children:t.backtrace})]})]})})}),O&&k("button",{class:"header-expand-toggle",onClick:H,children:D?k(en,{size:8}):k(tn,{size:8})})]})})(),k("div",{class:"entry-viewport-cell",children:k("div",{class:"entry-viewport-col",children:[!D&&y&&S&&k("div",{class:"viewport-collapsed",children:k("code",{class:"source-line-preview",children:((z=S.content.split(`
`)[S.highlight_line-S.start_line])==null?void 0:z.trim())||""})}),I&&k("div",{class:"viewport-header",children:[k("span",{class:"viewport-label",children:"Source"}),k("button",{class:"col-toggle",onClick:H,children:D?k(en,{size:8}):k(tn,{size:8})})]}),D&&k("div",{class:"viewport-content",onClick:W=>W.stopPropagation(),children:[P&&t.assertion_diff&&k(IM,{message:t.message,assertionDiff:t.assertion_diff,searchQuery:r}),P&&m&&E&&k("div",{class:"panic-source",children:[k("div",{class:"panic-location",children:[k(h0,{size:8})," ",t.panic_file,":",t.panic_line]}),k(b0,{snippet:E,file:t.panic_file,isPanic:!0})]}),P&&R.length>0&&k("div",{class:"callers-list",children:R.map((W,te)=>k("div",{class:"caller-frame",children:[k("span",{class:"frame-index",children:W.index}),k("span",{class:"frame-function",children:W.function}),W.location&&k("span",{class:"frame-location",children:["at ",W.location]})]},te))}),y&&S&&k(b0,{snippet:S,file:t.file}),y&&w&&k("span",{class:"snippet-error",children:w}),e&&k("pre",{class:"entry-raw",children:t.raw})]})]})})]})}function FM({size:t=32,color:e="currentColor"}){return k("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",style:{opacity:.5},children:k("path",{d:"M4 8C4 6.9 4.9 6 6 6H12L14 9H26C27.1 9 28 9.9 28 11V24C28 25.1 27.1 26 26 26H6C4.9 26 4 25.1 4 24V8Z",stroke:e,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}function w0(){const[t,e]=rr(!1),[r,n]=rr(new Set),[a,i]=rr(0),[s,o]=rr(0),[l,u]=rr(500),[c,f]=rr(null),d=Ir(!1),h={current:[]},v={current:null};Sa(()=>{let x=0;h.current.forEach(S=>{S&&(x=Math.max(x,S.scrollWidth))}),o(x)},[Ni.value,r]);const p=x=>{i(x)},g=x=>{const S=x.deltaX!==0?x.deltaX:x.shiftKey?x.deltaY:0;if(S!==0&&(x.preventDefault(),i(w=>{const E=Math.max(0,s-l);return Math.max(0,Math.min(E,w+S))}),v.current)){const w=Math.max(0,s-l),E=Math.max(0,Math.min(w,a+S));v.current.scrollLeft=E}},y=x=>{n(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})},m=x=>S=>{S&&(h.current[x]=S)},b=x=>{x.preventDefault(),d.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const S=x.clientX,w=l,E=T=>{if(!d.current)return;const A=T.clientX-S,P=Math.max(200,w+A);u(P)},C=()=>{d.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",C)};if(!Wt.value)return k("div",{class:"log-viewer empty",children:k("div",{class:"placeholder-message",children:[k(FM,{size:32}),k("p",{children:"Select a log file to view"})]})});if(Nr.value)return k("div",{class:"log-viewer loading",children:[k("div",{class:"spinner"}),k("p",{children:"Loading..."})]});if(Ni.value.length===0)return k("div",{class:"log-viewer empty",children:k("div",{class:"placeholder-message",children:[k("span",{class:"placeholder-icon",children:"ðŸ”"}),k("p",{children:"No entries match the current filters"})]})});const _=Math.max(0,s-l);return k("div",{class:"log-viewer",children:[k("div",{class:"log-viewer-toolbar",children:[k("span",{class:"toolbar-count",children:[Ni.value.length," entries"]}),k("button",{class:"expand-toggle",onClick:()=>e(!t),title:t?"Collapse all":"Expand all",children:t?k(en,{size:12}):k(tn,{size:12})})]}),_>0&&k("div",{class:"header-scrollbar-container",style:{width:`${l}px`},children:k("div",{class:"header-scrollbar",ref:x=>{v.current=x},onScroll:x=>p(x.target.scrollLeft),children:k("div",{class:"header-scrollbar-content",style:{width:`${s}px`}})})}),k("div",{class:"log-entries-wrapper",children:[k("div",{class:"column-resize-handle",style:{left:`${l}px`},onMouseDown:b}),k("div",{class:"log-entries",onMouseLeave:()=>f(null),children:Ni.value.map((x,S)=>{var w;return k(BM,{entry:x,showRaw:Np.value,searchQuery:zp.value,isSelected:((w=ZR.value)==null?void 0:w.line_number)===x.line_number,onSelect:()=>fT(x),expandAll:t,isExpanded:r.has(x.line_number),onToggleExpand:()=>y(x.line_number),headerCellRef:m(S),headerScrollLeft:a,headerColWidth:l,onHeaderWheel:g,hoveredSpanName:c,onSpanHover:f},x.line_number)})})]})]})}(function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript})(Prism);function qM(t){return t?t.endsWith(".rs")?"rust":t.endsWith(".ts")||t.endsWith(".tsx")?"typescript":t.endsWith(".js")||t.endsWith(".jsx")?"javascript":t.endsWith(".json")?"json":t.endsWith(".toml")?"toml":t.endsWith(".yaml")||t.endsWith(".yml")?"yaml":"plaintext":"plaintext"}function NM(){const t=Ir(null),e=Ir(null),r=QR.value,n=JR.value,a=eM.value,i=qM(r);if(Sa(()=>{e.current&&e.current.scrollIntoView({behavior:"instant",block:"center"})},[a,n]),!r)return k("div",{class:"code-viewer empty",children:k("div",{class:"placeholder-message",children:[k("span",{class:"placeholder-icon",children:"ðŸ“„"}),k("p",{children:"Click a source location to view code"})]})});const s=n.split(`
`);let o=n;try{const u=sl.languages[i];u&&(o=sl.highlight(n,u,i))}catch{}const l=o.split(`
`);return k("div",{class:"code-viewer",ref:t,children:[k("div",{class:"code-header",children:[k("span",{class:"code-filename",children:r}),k("span",{class:"code-language",children:i}),k("span",{class:"code-lines",children:[s.length," lines"]})]}),k("div",{class:"code-content",children:k("pre",{class:"code-pre",children:l.map((u,c)=>{const f=c+1,d=f===a;return k("div",{ref:d?e:void 0,class:`code-line ${d?"highlight":""}`,children:[k("span",{class:"line-number",children:f}),k("code",{dangerouslySetInnerHTML:{__html:u||" "}})]},c)})})})]})}function Wp(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function zM(t){if(Array.isArray(t))return t}function $M(t){if(Array.isArray(t))return Wp(t)}function Hn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xT(n.key),n)}}function Wn(t,e,r){return e&&VM(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sr(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Fm(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return s=l.done,l},e:function(l){o=!0,i=l},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw i}}}}function _T(t,e,r){return(e=xT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HM(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WM(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,o=[],l=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function GM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(t,e){return zM(t)||WM(t,e)||Fm(t,e)||GM()}function ol(t){return $M(t)||HM(t)||Fm(t)||UM()}function jM(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xT(t){var e=jM(t,"string");return typeof e=="symbol"?e:e+""}function St(t){"@babel/helpers - typeof";return St=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(t)}function Fm(t,e){if(t){if(typeof t=="string")return Wp(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wp(t,e):void 0}}var _t=typeof window>"u"?null:window,S0=_t?_t.navigator:null;_t&&_t.document;var KM=St(""),wT=St({}),YM=St(function(){}),XM=typeof HTMLElement>"u"?"undefined":St(HTMLElement),Rs=function(e){return e&&e.instanceString&&st(e.instanceString)?e.instanceString():null},we=function(e){return e!=null&&St(e)==KM},st=function(e){return e!=null&&St(e)===YM},Xe=function(e){return!cr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},$e=function(e){return e!=null&&St(e)===wT&&!Xe(e)&&e.constructor===Object},ZM=function(e){return e!=null&&St(e)===wT},oe=function(e){return e!=null&&St(e)===St(1)&&!isNaN(e)},QM=function(e){return oe(e)&&Math.floor(e)===e},ll=function(e){if(XM!=="undefined")return e!=null&&e instanceof HTMLElement},cr=function(e){return Ms(e)||ST(e)},Ms=function(e){return Rs(e)==="collection"&&e._private.single},ST=function(e){return Rs(e)==="collection"&&!e._private.single},qm=function(e){return Rs(e)==="core"},ET=function(e){return Rs(e)==="stylesheet"},JM=function(e){return Rs(e)==="event"},On=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},eD=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},tD=function(e){return $e(e)&&oe(e.x1)&&oe(e.x2)&&oe(e.y1)&&oe(e.y2)},rD=function(e){return ZM(e)&&st(e.then)},nD=function(){return S0&&S0.userAgent.match(/msie|trident|edge/i)},ni=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,l=r.apply(i,s),u=n.cache;return(o=u[l])||(o=u[l]=e.apply(i,s)),o};return n.cache={},n},Nm=ni(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Dl=ni(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),CT=ni(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),E0=function(e){return On(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},wn=function(e,r){return e.slice(-1*r.length)===r},xt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",aD="rgb[a]?\\(("+xt+"[%]?)\\s*,\\s*("+xt+"[%]?)\\s*,\\s*("+xt+"[%]?)(?:\\s*,\\s*("+xt+"))?\\)",iD="rgb[a]?\\((?:"+xt+"[%]?)\\s*,\\s*(?:"+xt+"[%]?)\\s*,\\s*(?:"+xt+"[%]?)(?:\\s*,\\s*(?:"+xt+"))?\\)",sD="hsl[a]?\\(("+xt+")\\s*,\\s*("+xt+"[%])\\s*,\\s*("+xt+"[%])(?:\\s*,\\s*("+xt+"))?\\)",oD="hsl[a]?\\((?:"+xt+")\\s*,\\s*(?:"+xt+"[%])\\s*,\\s*(?:"+xt+"[%])(?:\\s*,\\s*(?:"+xt+"))?\\)",lD="\\#[0-9a-fA-F]{3}",uD="\\#[0-9a-fA-F]{6}",kT=function(e,r){return e<r?-1:e>r?1:0},cD=function(e,r){return-1*kT(e,r)},Ee=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},fD=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},dD=function(e){var r,n,a,i,s,o,l,u;function c(v,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?v+(p-v)*6*g:g<1/2?p:g<2/3?v+(p-v)*(2/3-g)*6:v}var f=new RegExp("^"+sD+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=l=u=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,h=2*i-d;o=Math.round(255*c(h,d,n+1/3)),l=Math.round(255*c(h,d,n)),u=Math.round(255*c(h,d,n-1/3))}r=[o,l,u,s]}return r},hD=function(e){var r,n=new RegExp("^"+aD+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(o&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},vD=function(e){return gD[e.toLowerCase()]},TT=function(e){return(Xe(e)?e:null)||vD(e)||fD(e)||hD(e)||dD(e)},gD={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},AT=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if($e(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},PT=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if($e(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ds(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cu,C0;function Ls(){if(C0)return Cu;C0=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Cu=t,Cu}var ku,k0;function pD(){if(k0)return ku;k0=1;var t=typeof to=="object"&&to&&to.Object===Object&&to;return ku=t,ku}var Tu,T0;function Ll(){if(T0)return Tu;T0=1;var t=pD(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Tu=r,Tu}var Au,A0;function mD(){if(A0)return Au;A0=1;var t=Ll(),e=function(){return t.Date.now()};return Au=e,Au}var Pu,P0;function yD(){if(P0)return Pu;P0=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Pu=e,Pu}var Ru,R0;function bD(){if(R0)return Ru;R0=1;var t=yD(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Ru=r,Ru}var Mu,M0;function zm(){if(M0)return Mu;M0=1;var t=Ll(),e=t.Symbol;return Mu=e,Mu}var Du,D0;function _D(){if(D0)return Du;D0=1;var t=zm(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),l=s[a];try{s[a]=void 0;var u=!0}catch{}var c=n.call(s);return u&&(o?s[a]=l:delete s[a]),c}return Du=i,Du}var Lu,L0;function xD(){if(L0)return Lu;L0=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Lu=r,Lu}var Ou,O0;function RT(){if(O0)return Ou;O0=1;var t=zm(),e=_D(),r=xD(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return Ou=s,Ou}var Iu,I0;function wD(){if(I0)return Iu;I0=1;function t(e){return e!=null&&typeof e=="object"}return Iu=t,Iu}var Bu,B0;function Os(){if(B0)return Bu;B0=1;var t=RT(),e=wD(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Bu=n,Bu}var Fu,F0;function SD(){if(F0)return Fu;F0=1;var t=bD(),e=Ls(),r=Os(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=i.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):a.test(u)?n:+u}return Fu=l,Fu}var qu,q0;function ED(){if(q0)return qu;q0=1;var t=Ls(),e=mD(),r=SD(),n="Expected a function",a=Math.max,i=Math.min;function s(o,l,u){var c,f,d,h,v,p,g=0,y=!1,m=!1,b=!0;if(typeof o!="function")throw new TypeError(n);l=r(l)||0,t(u)&&(y=!!u.leading,m="maxWait"in u,d=m?a(r(u.maxWait)||0,l):d,b="trailing"in u?!!u.trailing:b);function _(R){var D=c,L=f;return c=f=void 0,g=R,h=o.apply(L,D),h}function x(R){return g=R,v=setTimeout(E,l),y?_(R):h}function S(R){var D=R-p,L=R-g,I=l-D;return m?i(I,d-L):I}function w(R){var D=R-p,L=R-g;return p===void 0||D>=l||D<0||m&&L>=d}function E(){var R=e();if(w(R))return C(R);v=setTimeout(E,S(R))}function C(R){return v=void 0,b&&c?_(R):(c=f=void 0,h)}function T(){v!==void 0&&clearTimeout(v),g=0,c=p=f=v=void 0}function A(){return v===void 0?h:C(e())}function P(){var R=e(),D=w(R);if(c=arguments,f=this,p=R,D){if(v===void 0)return x(p);if(m)return clearTimeout(v),v=setTimeout(E,l),_(p)}return v===void 0&&(v=setTimeout(E,l)),h}return P.cancel=T,P.flush=A,P}return qu=s,qu}var CD=ED(),Is=Ds(CD),Nu=_t?_t.performance:null,MT=Nu&&Nu.now?function(){return Nu.now()}:function(){return Date.now()},kD=function(){if(_t){if(_t.requestAnimationFrame)return function(t){_t.requestAnimationFrame(t)};if(_t.mozRequestAnimationFrame)return function(t){_t.mozRequestAnimationFrame(t)};if(_t.webkitRequestAnimationFrame)return function(t){_t.webkitRequestAnimationFrame(t)};if(_t.msRequestAnimationFrame)return function(t){_t.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(MT())},1e3/60)}}(),ul=function(e){return kD(e)},ln=MT,la=9261,DT=65599,Wa=5381,LT=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:la,n=r,a;a=e.next(),!a.done;)n=n*DT+a.value|0;return n},ds=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:la;return r*DT+e|0},hs=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wa;return(r<<5)+r+e|0},TD=function(e,r){return e*2097152+r},mn=function(e){return e[0]*2097152+e[1]},ro=function(e,r){return[ds(e[0],r[0]),hs(e[1],r[1])]},N0=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return LT(s,r)},pa=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return LT(s,r)},OT=function(){return AD(arguments)},AD=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=pa(a):r=pa(a,r)}return r};function PD(t,e,r,n,a){var i=a*Math.PI/180,s=Math.cos(i)*(t-r)-Math.sin(i)*(e-n)+r,o=Math.sin(i)*(t-r)+Math.cos(i)*(e-n)+n;return{x:s,y:o}}var RD=function(e,r,n,a,i,s){return{x:(e-n)*i+n,y:(r-a)*s+a}};function MD(t,e,r){if(r===0)return t;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,s=1/i,o=PD(t.x,t.y,n,a,r),l=RD(o.x,o.y,n,a,i,s);return{x:l.x,y:l.y}}var z0=!0,DD=console.warn!=null,LD=console.trace!=null,$m=Number.MAX_SAFE_INTEGER||9007199254740991,IT=function(){return!0},cl=function(){return!1},$0=function(){return 0},Vm=function(){},nt=function(e){throw new Error(e)},BT=function(e){if(e!==void 0)z0=!!e;else return z0},Ue=function(e){BT()&&(DD?console.warn(e):(console.log(e),LD&&console.trace()))},OD=function(e){return Ee({},e)},Br=function(e){return e==null?e:Xe(e)?e.slice():$e(e)?OD(e):e},ID=function(e){return e.slice()},FT=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},BD={},qT=function(){return BD},qt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},In=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Hm=function(e){e.splice(0,e.length)},FD=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},nr=function(e,r,n){return n&&(r=CT(n,r)),e[r]},Qr=function(e,r,n,a){n&&(r=CT(n,r)),e[r]=a},qD=function(){function t(){Hn(this,t),this._obj={}}return Wn(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),nn=typeof Map<"u"?Map:qD,ND="undefined",zD=function(){function t(e){if(Hn(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Wn(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),hi=(typeof Set>"u"?"undefined":St(Set))!==ND?Set:zD,Ol=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!qm(e)){nt("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){nt("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new hi,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),l=e.zoom();i.position={x:(s.x-o.x)/l,y:(s.y-o.y)/l}}var u=[];Xe(r.classes)?u=r.classes:we(r.classes)&&(u=r.classes.split(/\s+/));for(var c=0,f=u.length;c<f;c++){var d=u[c];!d||d===""||i.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var h=r.style||r.css;h&&(Ue("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},V0=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;$e(n)&&!cr(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!st(a)?a:i,a=st(a)?a:function(){};for(var o=this._private.cy,l=n=we(n)?this.filter(n):n,u=[],c=[],f={},d={},h={},v=0,p,g=this.byGroup(),y=g.nodes,m=g.edges,b=0;b<l.length;b++){var _=l[b],x=_.id();_.isNode()&&(u.unshift(_),e.bfs&&(h[x]=!0,c.push(_)),d[x]=0)}for(var S=function(){var R=e.bfs?u.shift():u.pop(),D=R.id();if(e.dfs){if(h[D])return 0;h[D]=!0,c.push(R)}var L=d[D],I=f[D],O=I!=null?I.source():null,B=I!=null?I.target():null,H=I==null?void 0:R.same(O)?B[0]:O[0],G;if(G=a(R,I,H,v++,L),G===!0)return p=R,1;if(G===!1)return 1;for(var N=R.connectedEdges().filter(function(z){return(!i||z.source().same(R))&&m.has(z)}),$=0;$<N.length;$++){var X=N[$],F=X.connectedNodes().filter(function(z){return!z.same(R)&&y.has(z)}),q=F.id();F.length!==0&&!h[q]&&(F=F[0],u.push(F),e.bfs&&(h[q]=!0,c.push(F)),f[q]=X,d[q]=d[D]+1)}},w;u.length!==0&&(w=S(),!(w!==0&&w===1)););for(var E=o.collection(),C=0;C<c.length;C++){var T=c[C],A=f[T.id()];A!=null&&E.push(A),E.push(T)}return{path:o.collection(E),found:o.collection(p)}}},vs={breadthFirstSearch:V0({bfs:!0}),depthFirstSearch:V0({dfs:!0})};vs.bfs=vs.breadthFirstSearch;vs.dfs=vs.depthFirstSearch;var Oo={exports:{}},$D=Oo.exports,H0;function VD(){return H0||(H0=1,function(t,e){(function(){var r,n,a,i,s,o,l,u,c,f,d,h,v,p,g;a=Math.floor,f=Math.min,n=function(y,m){return y<m?-1:y>m?1:0},c=function(y,m,b,_,x){var S;if(b==null&&(b=0),x==null&&(x=n),b<0)throw new Error("lo must be non-negative");for(_==null&&(_=y.length);b<_;)S=a((b+_)/2),x(m,y[S])<0?_=S:b=S+1;return[].splice.apply(y,[b,b-b].concat(m)),m},o=function(y,m,b){return b==null&&(b=n),y.push(m),p(y,0,y.length-1,b)},s=function(y,m){var b,_;return m==null&&(m=n),b=y.pop(),y.length?(_=y[0],y[0]=b,g(y,0,m)):_=b,_},u=function(y,m,b){var _;return b==null&&(b=n),_=y[0],y[0]=m,g(y,0,b),_},l=function(y,m,b){var _;return b==null&&(b=n),y.length&&b(y[0],m)<0&&(_=[y[0],m],m=_[0],y[0]=_[1],g(y,0,b)),m},i=function(y,m){var b,_,x,S,w,E;for(m==null&&(m=n),S=(function(){E=[];for(var C=0,T=a(y.length/2);0<=T?C<T:C>T;0<=T?C++:C--)E.push(C);return E}).apply(this).reverse(),w=[],_=0,x=S.length;_<x;_++)b=S[_],w.push(g(y,b,m));return w},v=function(y,m,b){var _;if(b==null&&(b=n),_=y.indexOf(m),_!==-1)return p(y,0,_,b),g(y,_,b)},d=function(y,m,b){var _,x,S,w,E;if(b==null&&(b=n),x=y.slice(0,m),!x.length)return x;for(i(x,b),E=y.slice(m),S=0,w=E.length;S<w;S++)_=E[S],l(x,_,b);return x.sort(b).reverse()},h=function(y,m,b){var _,x,S,w,E,C,T,A,P;if(b==null&&(b=n),m*10<=y.length){if(S=y.slice(0,m).sort(b),!S.length)return S;for(x=S[S.length-1],T=y.slice(m),w=0,C=T.length;w<C;w++)_=T[w],b(_,x)<0&&(c(S,_,0,null,b),S.pop(),x=S[S.length-1]);return S}for(i(y,b),P=[],E=0,A=f(m,y.length);0<=A?E<A:E>A;0<=A?++E:--E)P.push(s(y,b));return P},p=function(y,m,b,_){var x,S,w;for(_==null&&(_=n),x=y[b];b>m;){if(w=b-1>>1,S=y[w],_(x,S)<0){y[b]=S,b=w;continue}break}return y[b]=x},g=function(y,m,b){var _,x,S,w,E;for(b==null&&(b=n),x=y.length,E=m,S=y[m],_=2*m+1;_<x;)w=_+1,w<x&&!(b(y[_],y[w])<0)&&(_=w),y[m]=y[_],m=_,_=2*m+1;return y[m]=S,p(y,E,m,b)},r=function(){y.push=o,y.pop=s,y.replace=u,y.pushpop=l,y.heapify=i,y.updateItem=v,y.nlargest=d,y.nsmallest=h;function y(m){this.cmp=m??n,this.nodes=[]}return y.prototype.push=function(m){return o(this.nodes,m,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},y.prototype.replace=function(m){return u(this.nodes,m,this.cmp)},y.prototype.pushpop=function(m){return l(this.nodes,m,this.cmp)},y.prototype.heapify=function(){return i(this.nodes,this.cmp)},y.prototype.updateItem=function(m){return v(this.nodes,m,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var m;return m=new y,m.nodes=this.nodes.slice(0),m},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,m){return t.exports=m()}(this,function(){return r})}).call($D)}(Oo)),Oo.exports}var zu,W0;function HD(){return W0||(W0=1,zu=VD()),zu}var WD=HD(),Bs=Ds(WD),GD=qt({root:null,weight:function(e){return 1},directed:!1}),UD={dijkstra:function(e){if(!$e(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=GD(e),a=n.root,i=n.weight,s=n.directed,o=this,l=i,u=we(a)?this.filter(a)[0]:a[0],c={},f={},d={},h=this.byGroup(),v=h.nodes,p=h.edges;p.unmergeBy(function(L){return L.isLoop()});for(var g=function(I){return c[I.id()]},y=function(I,O){c[I.id()]=O,m.updateItem(I)},m=new Bs(function(L,I){return g(L)-g(I)}),b=0;b<v.length;b++){var _=v[b];c[_.id()]=_.same(u)?0:1/0,m.push(_)}for(var x=function(I,O){for(var B=(s?I.edgesTo(O):I.edgesWith(O)).intersect(p),H=1/0,G,N=0;N<B.length;N++){var $=B[N],X=l($);(X<H||!G)&&(H=X,G=$)}return{edge:G,dist:H}};m.size()>0;){var S=m.pop(),w=g(S),E=S.id();if(d[E]=w,w!==1/0)for(var C=S.neighborhood().intersect(v),T=0;T<C.length;T++){var A=C[T],P=A.id(),R=x(S,A),D=w+R.dist;D<g(A)&&(y(A,D),f[P]={node:S,edge:R.edge})}}return{distanceTo:function(I){var O=we(I)?v.filter(I)[0]:I[0];return d[O.id()]},pathTo:function(I){var O=we(I)?v.filter(I)[0]:I[0],B=[],H=O,G=H.id();if(O.length>0)for(B.unshift(O);f[G];){var N=f[G];B.unshift(N.edge),B.unshift(N.node),H=N.node,G=H.id()}return o.spawn(B)}}}},jD={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,l=function(_){for(var x=0;x<s.length;x++){var S=s[x];if(S.has(_))return x}},u=0;u<i;u++)s[u]=this.spawn(n[u]);for(var c=a.sort(function(b,_){return e(b)-e(_)}),f=0;f<c.length;f++){var d=c[f],h=d.source()[0],v=d.target()[0],p=l(h),g=l(v),y=s[p],m=s[g];p!==g&&(o.merge(d),y.merge(m),s.splice(g,1))}return o}},KD=qt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),YD={aStar:function(e){var r=this.cy(),n=KD(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var u=a.id(),c=i.id(),f={},d={},h={},v=new Bs(function(G,N){return d[G.id()]-d[N.id()]}),p=new hi,g={},y={},m=function(N,$){v.push(N),p.add($)},b,_,x=function(){b=v.pop(),_=b.id(),p.delete(_)},S=function(N){return p.has(N)};m(a,u),f[u]=0,d[u]=s(a);for(var w=0;v.size()>0;){if(x(),w++,_===c){for(var E=[],C=i,T=c,A=y[T];E.unshift(C),A!=null&&E.unshift(A),C=g[T],C!=null;)T=C.id(),A=y[T];return{found:!0,distance:f[_],path:this.spawn(E),steps:w}}h[_]=!0;for(var P=b._private.edges,R=0;R<P.length;R++){var D=P[R];if(this.hasElementWithId(D.id())&&!(o&&D.data("source")!==_)){var L=D.source(),I=D.target(),O=L.id()!==_?L:I,B=O.id();if(this.hasElementWithId(B)&&!h[B]){var H=f[_]+l(D);if(!S(B)){f[B]=H,d[B]=H+s(O),m(O,B),g[B]=b,y[B]=D;continue}H<f[B]&&(f[B]=H,d[B]=H+s(O),g[B]=b,y[B]=D)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},XD=qt({weight:function(e){return 1},directed:!1}),ZD={floydWarshall:function(e){for(var r=this.cy(),n=XD(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),l=o.nodes,u=o.edges,c=l.length,f=c*c,d=function(X){return l.indexOf(X)},h=function(X){return l[X]},v=new Array(f),p=0;p<f;p++){var g=p%c,y=(p-g)/c;y===g?v[p]=0:v[p]=1/0}for(var m=new Array(f),b=new Array(f),_=0;_<u.length;_++){var x=u[_],S=x.source()[0],w=x.target()[0];if(S!==w){var E=d(S),C=d(w),T=E*c+C,A=s(x);if(v[T]>A&&(v[T]=A,m[T]=C,b[T]=x),!i){var P=C*c+E;!i&&v[P]>A&&(v[P]=A,m[P]=E,b[P]=x)}}}for(var R=0;R<c;R++)for(var D=0;D<c;D++)for(var L=D*c+R,I=0;I<c;I++){var O=D*c+I,B=R*c+I;v[L]+v[B]<v[O]&&(v[O]=v[L]+v[B],m[O]=m[L])}var H=function(X){return(we(X)?r.filter(X):X)[0]},G=function(X){return d(H(X))},N={distance:function(X,F){var q=G(X),z=G(F);return v[q*c+z]},path:function(X,F){var q=G(X),z=G(F),W=h(q);if(q===z)return W.collection();if(m[q*c+z]==null)return r.collection();var te=r.collection(),Y=q,V;for(te.merge(W);q!==z;)Y=q,q=m[q*c+z],V=b[Y*c+q],te.merge(V),te.merge(h(q));return te}};return N}},QD=qt({weight:function(e){return 1},directed:!1,root:null}),JD={bellmanFord:function(e){var r=this,n=QD(e),a=n.weight,i=n.directed,s=n.root,o=a,l=this,u=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,h=d.length,v=new nn,p=!1,g=[];s=u.collection(s)[0],f.unmergeBy(function(le){return le.isLoop()});for(var y=f.length,m=function(xe){var me=v.get(xe.id());return me||(me={},v.set(xe.id(),me)),me},b=function(xe){return(we(xe)?u.$(xe):xe)[0]},_=function(xe){return m(b(xe)).dist},x=function(xe){for(var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,ue=b(xe),ge=[],de=ue;;){if(de==null)return r.spawn();var pe=m(de),ye=pe.edge,ke=pe.pred;if(ge.unshift(de[0]),de.same(me)&&ge.length>0)break;ye!=null&&ge.unshift(ye),de=ke}return l.spawn(ge)},S=0;S<h;S++){var w=d[S],E=m(w);w.same(s)?E.dist=0:E.dist=1/0,E.pred=null,E.edge=null}for(var C=!1,T=function(xe,me,ue,ge,de,pe){var ye=ge.dist+pe;ye<de.dist&&!ue.same(ge.edge)&&(de.dist=ye,de.pred=xe,de.edge=ue,C=!0)},A=1;A<h;A++){C=!1;for(var P=0;P<y;P++){var R=f[P],D=R.source(),L=R.target(),I=o(R),O=m(D),B=m(L);T(D,L,R,O,B,I),i||T(L,D,R,B,O,I)}if(!C)break}if(C)for(var H=[],G=0;G<y;G++){var N=f[G],$=N.source(),X=N.target(),F=o(N),q=m($).dist,z=m(X).dist;if(q+F<z||!i&&z+F<q)if(p||(Ue("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var W=[];q+F<z&&W.push($),!i&&z+F<q&&W.push(X);for(var te=W.length,Y=0;Y<te;Y++){var V=W[Y],U=[V];U.push(m(V).edge);for(var K=m(V).pred;U.indexOf(K)===-1;)U.push(K),U.push(m(K).edge),K=m(K).pred;U=U.slice(U.indexOf(K));for(var Z=U[0].id(),ae=0,ie=2;ie<U.length;ie+=2)U[ie].id()<Z&&(Z=U[ie].id(),ae=ie);U=U.slice(ae).concat(U.slice(0,ae)),U.push(U[0]);var Ae=U.map(function(le){return le.id()}).join(",");H.indexOf(Ae)===-1&&(g.push(l.spawn(U)),H.push(Ae))}}else break}return{distanceTo:_,pathTo:x,hasNegativeWeightCycle:p,negativeWeightCycles:g}}},eL=Math.sqrt(2),tL=function(e,r,n){n.length===0&&nt("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],l=r[s],u=n,c=u.length-1;c>=0;c--){var f=u[c],d=f[1],h=f[2];(r[d]===o&&r[h]===l||r[d]===l&&r[h]===o)&&u.splice(c,1)}for(var v=0;v<u.length;v++){var p=u[v];p[1]===l?(u[v]=p.slice(),u[v][1]=o):p[2]===l&&(u[v]=p.slice(),u[v][2]=o)}for(var g=0;g<r.length;g++)r[g]===l&&(r[g]=o);return u},$u=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=tL(i,e,r),n--}return r},rL={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(B){return B.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/eL);if(i<2){nt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<s;c++){var f=a[c];u.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,h=[],v=new Array(i),p=new Array(i),g=new Array(i),y=function(H,G){for(var N=0;N<i;N++)G[N]=H[N]},m=0;m<=o;m++){for(var b=0;b<i;b++)p[b]=b;var _=$u(p,u.slice(),i,l),x=_.slice();y(p,g);var S=$u(p,_,l,2),w=$u(g,x,l,2);S.length<=w.length&&S.length<d?(d=S.length,h=S,y(p,v)):w.length<=S.length&&w.length<d&&(d=w.length,h=w,y(g,v))}for(var E=this.spawn(h.map(function(B){return a[B[0]]})),C=this.spawn(),T=this.spawn(),A=v[0],P=0;P<v.length;P++){var R=v[P],D=n[P];R===A?C.merge(D):T.merge(D)}var L=function(H){var G=e.spawn();return H.forEach(function(N){G.merge(N),N.connectedEdges().forEach(function($){e.contains($)&&!E.contains($)&&G.merge($)})}),G},I=[L(C),L(T)],O={cut:E,components:I,partition1:C,partition2:T};return O}},Vu,nL=function(e){return{x:e.x,y:e.y}},Il=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},NT=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Ua=function(e){return{x:e[0],y:e[1]}},aL=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},iL=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},sL=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},oL=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,l=e.length-1;l>=0;l--){var u=e[l];s?isFinite(u)||(e[l]=-1/0,o++):e.splice(l,1)}i&&e.sort(function(d,h){return d-h});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+o]:(e[f-1+o]+e[f+o])/2},lL=function(e){return Math.PI*e/180},no=function(e,r){return Math.atan2(r,e)-Math.PI/2},Wm=Math.log2||function(t){return Math.log(t)/Math.log(2)},Gm=function(e){return e>0?1:e<0?-1:0},ma=function(e,r){return Math.sqrt(na(e,r))},na=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},uL=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},kt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Xa=function(e,r,n,a){return{x:kt(e.x,r.x,n.x,a),y:kt(e.y,r.y,n.y,a)}},cL=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=ma(e,r),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},gs=function(e,r,n){return Math.max(e,Math.min(n,r))},Zt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},fL=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},dL=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},hL=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},zT=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Io=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Bo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=pt(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},G0=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Um=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Sn=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},U0=function(e,r){return Sn(e,r.x,r.y)},$T=function(e,r){return Sn(e,r.x1,r.y1)&&Sn(e,r.x2,r.y2)},vL=(Vu=Math.hypot)!==null&&Vu!==void 0?Vu:function(t,e){return Math.sqrt(t*t+e*e)};function gL(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var r=function(E,C){return{x:E.x+C.x,y:E.y+C.y}},n=function(E,C){return{x:E.x-C.x,y:E.y-C.y}},a=function(E,C){return{x:E.x*C,y:E.y*C}},i=function(E,C){return E.x*C.y-E.y*C.x},s=function(E){var C=vL(E.x,E.y);return C===0?{x:0,y:0}:{x:E.x/C,y:E.y/C}},o=function(E){for(var C=0,T=0;T<E.length;T++){var A=E[T],P=E[(T+1)%E.length];C+=A.x*P.y-P.x*A.y}return C/2},l=function(E,C,T,A){var P=n(C,E),R=n(A,T),D=i(P,R);if(Math.abs(D)<1e-9)return r(E,a(P,.5));var L=i(n(T,E),R)/D;return r(E,a(P,L))},u=t.map(function(w){return{x:w.x,y:w.y}});o(u)<0&&u.reverse();for(var c=u.length,f=[],d=0;d<c;d++){var h=u[d],v=u[(d+1)%c],p=n(v,h),g=s({x:p.y,y:-p.x});f.push(g)}for(var y=f.map(function(w,E){var C=r(u[E],a(w,e)),T=r(u[(E+1)%c],a(w,e));return{p1:C,p2:T}}),m=[],b=0;b<c;b++){var _=y[(b-1+c)%c],x=y[b],S=l(_.p1,_.p2,x.p1,x.p2);m.push(S)}return m}function pL(t,e,r,n,a,i){var s=CL(t,e,r,n,a),o=gL(s,i),l=Zt();return o.forEach(function(u){return zT(l,u.x,u.y)}),l}var VT=function(e,r,n,a,i,s,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?Bn(i,s):l,c=i/2,f=s/2;u=Math.min(u,c,f);var d=u!==c,h=u!==f,v;if(d){var p=n-c+u-o,g=a-f-o,y=n+c-u+o,m=g;if(v=En(e,r,n,a,p,g,y,m,!1),v.length>0)return v}if(h){var b=n+c+o,_=a-f+u-o,x=b,S=a+f-u+o;if(v=En(e,r,n,a,b,_,x,S,!1),v.length>0)return v}if(d){var w=n-c+u-o,E=a+f+o,C=n+c-u+o,T=E;if(v=En(e,r,n,a,w,E,C,T,!1),v.length>0)return v}if(h){var A=n-c-o,P=a-f+u-o,R=A,D=a+f-u+o;if(v=En(e,r,n,a,A,P,R,D,!1),v.length>0)return v}var L;{var I=n-c+u,O=a-f+u;if(L=zi(e,r,n,a,I,O,u+o),L.length>0&&L[0]<=I&&L[1]<=O)return[L[0],L[1]]}{var B=n+c-u,H=a-f+u;if(L=zi(e,r,n,a,B,H,u+o),L.length>0&&L[0]>=B&&L[1]<=H)return[L[0],L[1]]}{var G=n+c-u,N=a+f-u;if(L=zi(e,r,n,a,G,N,u+o),L.length>0&&L[0]>=G&&L[1]>=N)return[L[0],L[1]]}{var $=n-c+u,X=a+f-u;if(L=zi(e,r,n,a,$,X,u+o),L.length>0&&L[0]<=$&&L[1]>=X)return[L[0],L[1]]}return[]},mL=function(e,r,n,a,i,s,o){var l=o,u=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,s),d=Math.max(a,s);return u-l<=e&&e<=c+l&&f-l<=r&&r<=d+l},yL=function(e,r,n,a,i,s,o,l,u){var c={x1:Math.min(n,o,i)-u,x2:Math.max(n,o,i)+u,y1:Math.min(a,l,s)-u,y2:Math.max(a,l,s)+u};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},bL=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,l=(-r+s)/o,u=(-r-s)/o;return[l,u]},_L=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,l,u,c,f,d,h,v;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,o=l*l*l+u*u,i[1]=0,h=r/3,o>0){f=u+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=u-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-h+f+d,h+=(f+d)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-d+f)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,o===0){v=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-h+2*v,i[4]=i[2]=-(v+h);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),v=2*Math.sqrt(l),i[0]=-h+v*Math.cos(c/3),i[2]=-h+v*Math.cos((c+2*Math.PI)/3),i[4]=-h+v*Math.cos((c+4*Math.PI)/3)},xL=function(e,r,n,a,i,s,o,l){var u=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*l+4*s*s-4*s*l+l*l,c=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*l-6*s*s+3*s*l,f=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*l-a*r+2*s*s+2*s*r-l*r,d=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,h=[];_L(u,c,f,d,h);for(var v=1e-7,p=[],g=0;g<6;g+=2)Math.abs(h[g+1])<v&&h[g]>=0&&h[g]<=1&&p.push(h[g]);p.push(1),p.push(0);for(var y=-1,m,b,_,x=0;x<p.length;x++)m=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*o,b=Math.pow(1-p[x],2)*a+2*(1-p[x])*p[x]*s+p[x]*p[x]*l,_=Math.pow(m-e,2)+Math.pow(b-r,2),y>=0?_<y&&(y=_):y=_;return y},wL=function(e,r,n,a,i,s){var o=[e-n,r-a],l=[i-n,s-a],u=l[0]*l[0]+l[1]*l[1],c=o[0]*o[0]+o[1]*o[1],f=o[0]*l[0]+o[1]*l[1],d=f*f/u;return f<0?c:d>u?(e-i)*(e-i)+(r-s)*(r-s):c-d},ar=function(e,r,n){for(var a,i,s,o,l,u=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],o=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)l=(e-a)/(s-a)*(o-i)+i,l>r&&u++;else continue;return u%2!==0},un=function(e,r,n,a,i,s,o,l,u){var c=new Array(n.length),f;l[0]!=null?(f=Math.atan(l[1]/l[0]),l[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=l;for(var d=Math.cos(-f),h=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=s/2*(n[v*2]*d-n[v*2+1]*h),c[v*2+1]=o/2*(n[v*2+1]*d+n[v*2]*h),c[v*2]+=a,c[v*2+1]+=i;var p;if(u>0){var g=dl(c,-u);p=fl(g)}else p=c;return ar(e,r,p)},SL=function(e,r,n,a,i,s,o,l){for(var u=new Array(n.length*2),c=0;c<l.length;c++){var f=l[c];u[c*4+0]=f.startX,u[c*4+1]=f.startY,u[c*4+2]=f.stopX,u[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-r,2);if(d<=Math.pow(f.radius,2))return!0}return ar(e,r,u)},fl=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,l,u,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],s=e[f*4+3],f<e.length/4-1?(o=e[(f+1)*4],l=e[(f+1)*4+1],u=e[(f+1)*4+2],c=e[(f+1)*4+3]):(o=e[0],l=e[1],u=e[2],c=e[3]);var d=En(n,a,i,s,o,l,u,c,!0);r[f*2]=d[0],r[f*2+1]=d[1]}return r},dl=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(s=e[(l+1)*2],o=e[(l+1)*2+1]):(s=e[0],o=e[1]);var u=o-i,c=-(s-a),f=Math.sqrt(u*u+c*c),d=u/f,h=c/f;n[l*4]=a+d*r,n[l*4+1]=i+h*r,n[l*4+2]=s+d*r,n[l*4+3]=o+h*r}return n},EL=function(e,r,n,a,i,s){var o=n-e,l=a-r;o/=i,l/=s;var u=Math.sqrt(o*o+l*l),c=u-1;if(c<0)return[];var f=c/u;return[(n-e)*f+e,(a-r)*f+r]},fa=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},zi=function(e,r,n,a,i,s,o){var l=[n-e,a-r],u=[e-i,r-s],c=l[0]*l[0]+l[1]*l[1],f=2*(u[0]*l[0]+u[1]*l[1]),d=u[0]*u[0]+u[1]*u[1]-o*o,h=f*f-4*c*d;if(h<0)return[];var v=(-f+Math.sqrt(h))/(2*c),p=(-f-Math.sqrt(h))/(2*c),g=Math.min(v,p),y=Math.max(v,p),m=[];if(g>=0&&g<=1&&m.push(g),y>=0&&y<=1&&m.push(y),m.length===0)return[];var b=m[0]*l[0]+e,_=m[0]*l[1]+r;if(m.length>1){if(m[0]==m[1])return[b,_];var x=m[1]*l[0]+e,S=m[1]*l[1]+r;return[b,_,x,S]}else return[b,_]},Hu=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},En=function(e,r,n,a,i,s,o,l,u){var c=e-i,f=n-e,d=o-i,h=r-s,v=a-r,p=l-s,g=d*h-p*c,y=f*h-v*c,m=p*f-d*v;if(m!==0){var b=g/m,_=y/m,x=.001,S=0-x,w=1+x;return S<=b&&b<=w&&S<=_&&_<=w?[e+b*f,r+b*v]:u?[e+b*f,r+b*v]:[]}else return g===0||y===0?Hu(e,n,o)===o?[o,l]:Hu(e,n,i)===i?[i,s]:Hu(i,o,n)===n?[n,a]:[]:[]},CL=function(e,r,n,a,i){var s=[],o=a/2,l=i/2,u=r,c=n;s.push({x:u+o*e[0],y:c+l*e[1]});for(var f=1;f<e.length/2;f++)s.push({x:u+o*e[f*2],y:c+l*e[f*2+1]});return s},ps=function(e,r,n,a,i,s,o,l){var u=[],c,f=new Array(n.length),d=!0;s==null&&(d=!1);var h;if(d){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*s+a,f[v*2+1]=n[v*2+1]*o+i;if(l>0){var p=dl(f,-l);h=fl(p)}else h=f}else h=n;for(var g,y,m,b,_=0;_<h.length/2;_++)g=h[_*2],y=h[_*2+1],_<h.length/2-1?(m=h[(_+1)*2],b=h[(_+1)*2+1]):(m=h[0],b=h[1]),c=En(e,r,a,i,g,y,m,b),c.length!==0&&u.push(c[0],c[1]);return u},kL=function(e,r,n,a,i,s,o,l,u){var c=[],f,d=new Array(n.length*2);u.forEach(function(m,b){b===0?(d[d.length-2]=m.startX,d[d.length-1]=m.startY):(d[b*4-2]=m.startX,d[b*4-1]=m.startY),d[b*4]=m.stopX,d[b*4+1]=m.stopY,f=zi(e,r,a,i,m.cx,m.cy,m.radius),f.length!==0&&c.push(f[0],f[1])});for(var h=0;h<d.length/4;h++)f=En(e,r,a,i,d[h*4],d[h*4+1],d[h*4+2],d[h*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-r,2),g=1;g<c.length/2;g++){var y=Math.pow(c[g*2]-e,2)+Math.pow(c[g*2+1]-r,2);y<=p&&(v[0]=c[g*2],v[1]=c[g*2+1],p=y)}return v}return c},ao=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},Xt=function(e,r){var n=Gp(e,r);return n=HT(n),n},HT=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),l=Math.max(l,n);for(var c=2/(o-i),f=2/(l-s),d=0;d<a;d++)r=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),l=Math.max(l,n);if(s<-1)for(var h=0;h<a;h++)n=e[2*h+1]=e[2*h+1]+(-1-s);return e},Gp=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},Bn=function(e,r){return Math.min(e/4,r/4,8)},WT=function(e,r){return Math.min(e/10,r/10,8)},jm=function(){return 8},TL=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Up=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function Wu(t,e){function r(f){for(var d=[],h=0;h<f.length;h++){var v=f[h],p=f[(h+1)%f.length],g={x:p.x-v.x,y:p.y-v.y},y={x:-g.y,y:g.x},m=Math.sqrt(y.x*y.x+y.y*y.y);d.push({x:y.x/m,y:y.y/m})}return d}function n(f,d){var h=1/0,v=-1/0,p=sr(f),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,m=y.x*d.x+y.y*d.y;h=Math.min(h,m),v=Math.max(v,m)}}catch(b){p.e(b)}finally{p.f()}return{min:h,max:v}}function a(f,d){return!(f.max<d.min||d.max<f.min)}var i=[].concat(ol(r(t)),ol(r(e))),s=sr(i),o;try{for(s.s();!(o=s.n()).done;){var l=o.value,u=n(t,l),c=n(e,l);if(!a(u,c))return!1}}catch(f){s.e(f)}finally{s.f()}return!0}var AL=qt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),PL={pageRank:function(e){for(var r=AL(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,f=u.length,d=f*f,h=c.length,v=new Array(d),p=new Array(f),g=(1-n)/f,y=0;y<f;y++){for(var m=0;m<f;m++){var b=y*f+m;v[b]=0}p[y]=0}for(var _=0;_<h;_++){var x=c[_],S=x.data("source"),w=x.data("target");if(S!==w){var E=u.indexOfId(S),C=u.indexOfId(w),T=s(x),A=C*f+E;v[A]+=T,p[E]+=T}}for(var P=1/f+g,R=0;R<f;R++)if(p[R]===0)for(var D=0;D<f;D++){var L=D*f+R;v[L]=P}else for(var I=0;I<f;I++){var O=I*f+R;v[O]=v[O]/p[R]+g}for(var B=new Array(f),H=new Array(f),G,N=0;N<f;N++)B[N]=1;for(var $=0;$<i;$++){for(var X=0;X<f;X++)H[X]=0;for(var F=0;F<f;F++)for(var q=0;q<f;q++){var z=F*f+q;H[F]+=v[z]*B[q]}uL(H),G=B,B=H,H=G;for(var W=0,te=0;te<f;te++){var Y=G[te]-B[te];W+=Y*Y}if(W<a)break}var V={rank:function(K){return K=o.collection(K)[0],B[u.indexOf(K)]}};return V}},j0=qt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Za={degreeCentralityNormalized:function(e){e=j0(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,h=0,v=0;v<a;v++){var p=n[v],g=p.id();e.root=p;var y=this.degreeCentrality(e);d<y.indegree&&(d=y.indegree),h<y.outdegree&&(h=y.outdegree),c[g]=y.indegree,f[g]=y.outdegree}return{indegree:function(b){return d==0?0:(we(b)&&(b=r.filter(b)),c[b.id()]/d)},outdegree:function(b){return h===0?0:(we(b)&&(b=r.filter(b)),f[b.id()]/h)}}}else{for(var i={},s=0,o=0;o<a;o++){var l=n[o];e.root=l;var u=this.degreeCentrality(e);s<u.degree&&(s=u.degree),i[l.id()]=u.degree}return{degree:function(b){return s===0?0:(we(b)&&(b=r.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=j0(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,l=a.alpha;if(i=r.collection(i)[0],o){for(var h=i.connectedEdges(),v=h.filter(function(S){return S.target().same(i)&&n.has(S)}),p=h.filter(function(S){return S.source().same(i)&&n.has(S)}),g=v.length,y=p.length,m=0,b=0,_=0;_<v.length;_++)m+=s(v[_]);for(var x=0;x<p.length;x++)b+=s(p[x]);return{indegree:Math.pow(g,1-l)*Math.pow(m,l),outdegree:Math.pow(y,1-l)*Math.pow(b,l)}}else{for(var u=i.connectedEdges().intersection(n),c=u.length,f=0,d=0;d<u.length;d++)f+=s(u[d]);return{degree:Math.pow(c,1-l)*Math.pow(f,l)}}}};Za.dc=Za.degreeCentrality;Za.dcn=Za.degreeCentralityNormalised=Za.degreeCentralityNormalized;var K0=qt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Qa={closenessCentralityNormalized:function(e){for(var r=K0(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},l=0,u=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<u.length;f++){for(var d=0,h=u[f],v=0;v<u.length;v++)if(f!==v){var p=c.distance(h,u[v]);n?d+=1/p:d+=p}n||(d=1/d),l<d&&(l=d),o[h.id()]=d}return{closeness:function(y){return l==0?0:(we(y)?y=s.filter(y)[0].id():y=y.id(),o[y]/l)}}},closenessCentrality:function(e){var r=K0(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),c=0;c<u.length;c++){var f=u[c];if(!f.same(n)){var d=o.distanceTo(f);s?l+=1/d:l+=d}}return s?l:1/l}};Qa.cc=Qa.closenessCentrality;Qa.ccn=Qa.closenessCentralityNormalised=Qa.closenessCentralityNormalized;var RL=qt({weight:null,directed:!1}),jp={betweennessCentrality:function(e){for(var r=RL(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),l={},u={},c=0,f={set:function(b,_){u[b]=_,_>c&&(c=_)},get:function(b){return u[b]}},d=0;d<o.length;d++){var h=o[d],v=h.id();n?l[v]=h.outgoers().nodes():l[v]=h.openNeighborhood().nodes(),f.set(v,0)}for(var p=function(){for(var b=o[g].id(),_=[],x={},S={},w={},E=new Bs(function(F,q){return w[F]-w[q]}),C=0;C<o.length;C++){var T=o[C].id();x[T]=[],S[T]=0,w[T]=1/0}for(S[b]=1,w[b]=0,E.push(b);!E.empty();){var A=E.pop();if(_.push(A),i)for(var P=0;P<l[A].length;P++){var R=l[A][P],D=s.getElementById(A),L=void 0;D.edgesTo(R).length>0?L=D.edgesTo(R)[0]:L=R.edgesTo(D)[0];var I=a(L);R=R.id(),w[R]>w[A]+I&&(w[R]=w[A]+I,E.nodes.indexOf(R)<0?E.push(R):E.updateItem(R),S[R]=0,x[R]=[]),w[R]==w[A]+I&&(S[R]=S[R]+S[A],x[R].push(A))}else for(var O=0;O<l[A].length;O++){var B=l[A][O].id();w[B]==1/0&&(E.push(B),w[B]=w[A]+1),w[B]==w[A]+1&&(S[B]=S[B]+S[A],x[B].push(A))}}for(var H={},G=0;G<o.length;G++)H[o[G].id()]=0;for(;_.length>0;){for(var N=_.pop(),$=0;$<x[N].length;$++){var X=x[N][$];H[X]=H[X]+S[X]/S[N]*(1+H[N])}N!=o[g].id()&&f.set(N,f.get(N)+H[N])}},g=0;g<o.length;g++)p();var y={betweenness:function(b){var _=s.collection(b).id();return f.get(_)},betweennessNormalized:function(b){if(c==0)return 0;var _=s.collection(b).id();return f.get(_)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};jp.bc=jp.betweennessCentrality;var ML=qt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),DL=function(e){return ML(e)},LL=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},OL=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},GT=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},IL=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+o]*r[o*n+l]}return a},BL=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=IL(e,a,r);return e},FL=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return GT(a,r),a},qL=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},NL=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],l=0;l<r;l++)Math.round(e[s*r+l]*1e3)/1e3>0&&o.push(n[l]);o.length!==0&&i.push(a.collection(o))}return i},zL=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},$L=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&zL(e[r],e[n])&&e.splice(n,1);return e},Y0=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=DL(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var l=r.length,u=l*l,c=new Array(u),f,d=0;d<u;d++)c[d]=0;for(var h=0;h<n.length;h++){var v=n[h],p=s[v.source().id()],g=s[v.target().id()],y=LL(v,i.attributes);c[p*l+g]+=y,c[g*l+p]+=y}OL(c,l,i.multFactor),GT(c,l);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,f=BL(c,l,i.expandFactor),c=FL(f,l,i.inflateFactor),qL(c,f,u,4)||(m=!0),b++;var _=NL(c,l,r,a);return _=$L(_),_},VL={markovClustering:Y0,mcl:Y0},HL=function(e){return e},UT=function(e,r){return Math.abs(r-e)},X0=function(e,r,n){return e+UT(r,n)},Z0=function(e,r,n){return e+Math.pow(n-r,2)},WL=function(e){return Math.sqrt(e)},GL=function(e,r,n){return Math.max(e,UT(r,n))},Ti=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:HL,o=a,l,u,c=0;c<e;c++)l=r(c),u=n(c),o=i(o,l,u);return s(o)},ai={euclidean:function(e,r,n){return e>=2?Ti(e,r,n,0,Z0,WL):Ti(e,r,n,0,X0)},squaredEuclidean:function(e,r,n){return Ti(e,r,n,0,Z0)},manhattan:function(e,r,n){return Ti(e,r,n,0,X0)},max:function(e,r,n){return Ti(e,r,n,-1/0,GL)}};ai["squared-euclidean"]=ai.squaredEuclidean;ai.squaredeuclidean=ai.squaredEuclidean;function Bl(t,e,r,n,a,i){var s;return st(t)?s=t:s=ai[t]||ai.euclidean,e===0&&st(t)?s(a,i):s(e,r,n,a,i)}var UL=qt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Km=function(e){return UL(e)},hl=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(f){return n[f]}:function(f){return a[f](n)},l=function(d){return a[d](r)},u=n,c=r;return Bl(e,a.length,o,l,u,c)},Gu=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,s[u]=e.max(n[u]).value;for(var c=0;c<r;c++){l=[];for(var f=0;f<a;f++)l[f]=Math.random()*(s[f]-i[f])+i[f];o[c]=l}return o},jT=function(e,r,n,a,i){for(var s=1/0,o=0,l=0;l<r.length;l++){var u=hl(n,e,r[l],a,i);u<s&&(s=u,o=l)}return o},KT=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},jL=function(e,r,n){return Math.abs(r-e)<=n},KL=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},YL=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Q0=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];YL(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},J0=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=hl("manhattan",r[i],e,n,"kMedoids");return a},XL=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Km(e),s=new Array(i.k),o={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=Gu(n,i.k,i.attributes)):St(i.testCentroids)==="object"?l=i.testCentroids:l=Gu(n,i.k,i.attributes):l=Gu(n,i.k,i.attributes);for(var u=!0,c=0;u&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],o[a.id()]=jT(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var d=0;d<i.k;d++){var h=KT(d,n,o);if(h.length!==0){for(var v=i.attributes.length,p=l[d],g=new Array(v),y=new Array(v),m=0;m<v;m++){y[m]=0;for(var b=0;b<h.length;b++)a=h[b],y[m]+=i.attributes[m](a);g[m]=y[m]/h.length,jL(g[m],p[m],i.sensitivityThreshold)||(u=!0)}l[d]=g,s[d]=r.collection(h)}}c++}return s},ZL=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Km(e),s=new Array(i.k),o,l={},u,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(St(i.testCentroids)==="object"?o=i.testCentroids:o=Q0(n,i.k)):o=Q0(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],l[a.id()]=jT(a,o,i.distance,i.attributes,"kMedoids");f=!1;for(var v=0;v<o.length;v++){var p=KT(v,n,l);if(p.length!==0){c[v]=J0(o[v],p,i.attributes);for(var g=0;g<p.length;g++)u=J0(p[g],p,i.attributes),u<c[v]&&(c[v]=u,o[v]=p[g],f=!0);s[v]=r.collection(p)}}d++}return s},QL=function(e,r,n,a,i){for(var s,o,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){s=0,o=0;for(var d=0;d<r.length;d++)s+=a[d][c]*i.attributes[f](r[d]),o+=a[d][c];e[c][f]=s/o}},JL=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,l,u,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){o=0;for(var h=0;h<n.length;h++)l=hl(i.distance,a[d],n[f],i.attributes,"cmeans"),u=hl(i.distance,a[d],n[h],i.attributes,"cmeans"),o+=Math.pow(l/u,c);e[d][f]=1/o}},eO=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,l,u=0;u<r.length;u++){o=-1/0,l=-1;for(var c=0;c<r[0].length;c++)r[u][c]>o&&(o=r[u][c],l=c);i[l].push(e[u])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},eb=function(e){var r=this.cy(),n=this.nodes(),a=Km(e),i,s,o,l,u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(a.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var h=0,v=0;v<a.k;v++)o[d][v]=Math.random(),h+=o[d][v];for(var p=0;p<a.k;p++)o[d][p]=o[d][p]/h}s=new Array(a.k);for(var g=0;g<a.k;g++)s[g]=new Array(a.attributes.length);u=new Array(n.length);for(var y=0;y<n.length;y++)u[y]=new Array(a.k);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,QL(s,n,o,u,a),JL(o,l,s,n,a),KL(o,l,a.sensitivityThreshold)||(m=!0),b++;return i=eO(n,o,a,r),{clusters:i,degreeOfMembership:o}},tO={kMeans:XL,kMedoids:ZL,fuzzyCMeans:eb,fcm:eb},rO=qt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),nO={single:"min",complete:"max"},aO=function(e){var r=rO(e),n=nO[r.linkage];return n!=null&&(r.linkage=n),r},tb=function(e,r,n,a,i){for(var s=0,o=1/0,l,u=i.attributes,c=function(C,T){return Bl(i.distance,u.length,function(A){return u[A](C)},function(A){return u[A](T)},C,T)},f=0;f<e.length;f++){var d=e[f].key,h=n[d][a[d]];h<o&&(s=d,o=h)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var v=r[s],p=r[a[s]],g;i.mode==="dendrogram"?g={left:v,right:p,key:v.key}:g={value:v.value.concat(p.value),key:v.key},e[v.index]=g,e.splice(p.index,1),r[v.key]=g;for(var y=0;y<e.length;y++){var m=e[y];v.key===m.key?l=1/0:i.linkage==="min"?(l=n[v.key][m.key],n[v.key][m.key]>n[p.key][m.key]&&(l=n[p.key][m.key])):i.linkage==="max"?(l=n[v.key][m.key],n[v.key][m.key]<n[p.key][m.key]&&(l=n[p.key][m.key])):i.linkage==="mean"?l=(n[v.key][m.key]*v.size+n[p.key][m.key]*p.size)/(v.size+p.size):i.mode==="dendrogram"?l=c(m.value,v.value):l=c(m.value[0],v.value[0]),n[v.key][m.key]=n[m.key][v.key]=l}for(var b=0;b<e.length;b++){var _=e[b].key;if(a[_]===v.key||a[_]===p.key){for(var x=_,S=0;S<e.length;S++){var w=e[S].key;n[_][w]<n[_][x]&&(x=w)}a[_]=x}e[b].index=b}return v.key=p.key=v.index=p.index=null,!0},ja=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&ja(e.left,r),e.right&&ja(e.right,r)))},Kp=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Kp(e.left,r),a=Kp(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Yp=function(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&ja(e.left,a),e.right&&ja(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&ja(e.left,a),e.right&&ja(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Yp(e.left,r-1,n)),e.right&&(i=Yp(e.right,r-1,n)),a.concat(i))},rb=function(e){for(var r=this.cy(),n=this.nodes(),a=aO(e),i=a.attributes,s=function(b,_){return Bl(a.distance,i.length,function(x){return i[x](b)},function(x){return i[x](_)},b,_)},o=[],l=[],u=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=d,c[f]=d,l[f]=[],u[f]=0}for(var h=0;h<o.length;h++)for(var v=0;v<=h;v++){var p=void 0;a.mode==="dendrogram"?p=h===v?1/0:s(o[h].value,o[v].value):p=h===v?1/0:s(o[h].value[0],o[v].value[0]),l[h][v]=p,l[v][h]=p,p<l[h][u[h]]&&(u[h]=v)}for(var g=tb(o,c,l,u,a);g;)g=tb(o,c,l,u,a);var y;return a.mode==="dendrogram"?(y=Yp(o[0],a.dendrogramDepth,r),a.addDendrogram&&Kp(o[0],r)):(y=new Array(o.length),o.forEach(function(m,b){m.key=m.index=null,y[b]=r.collection(m.value)})),y},iO={hierarchicalClustering:rb,hca:rb},sO=qt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),oO=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||nt("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||oe(n)||nt("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),sO(e)},lO=function(e,r,n,a){var i=function(o,l){return a[l](o)};return-Bl(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},uO=function(e,r){var n=null;return r==="median"?n=oL(e):r==="mean"?n=sL(e):r==="min"?n=aL(e):r==="max"?n=iL(e):n=r,n},cO=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},nb=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>o&&(s=u,o=r[i*e+u])}s>0&&a.push(s)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},fO=function(e,r,n){for(var a=nb(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var l=-1,u=-1/0,c=0;c<s.length;c++){for(var f=0,d=0;d<s.length;d++)f+=r[s[d]*e+s[c]];f>u&&(l=c,u=f)}n[i]=s[l]}return a=nb(e,r,n),a},ab=function(e){for(var r=this.cy(),n=this.nodes(),a=oO(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,l,u,c,f,d;o=n.length,l=o*o,u=new Array(l);for(var h=0;h<l;h++)u[h]=-1/0;for(var v=0;v<o;v++)for(var p=0;p<o;p++)v!==p&&(u[v*o+p]=lO(a.distance,n[v],n[p],a.attributes));c=uO(u,a.preference);for(var g=0;g<o;g++)u[g*o+g]=c;f=new Array(l);for(var y=0;y<l;y++)f[y]=0;d=new Array(l);for(var m=0;m<l;m++)d[m]=0;for(var b=new Array(o),_=new Array(o),x=new Array(o),S=0;S<o;S++)b[S]=0,_[S]=0,x[S]=0;for(var w=new Array(o*a.minIterations),E=0;E<w.length;E++)w[E]=0;var C;for(C=0;C<a.maxIterations;C++){for(var T=0;T<o;T++){for(var A=-1/0,P=-1/0,R=-1,D=0,L=0;L<o;L++)b[L]=f[T*o+L],D=d[T*o+L]+u[T*o+L],D>=A?(P=A,A=D,R=L):D>P&&(P=D);for(var I=0;I<o;I++)f[T*o+I]=(1-a.damping)*(u[T*o+I]-A)+a.damping*b[I];f[T*o+R]=(1-a.damping)*(u[T*o+R]-P)+a.damping*b[R]}for(var O=0;O<o;O++){for(var B=0,H=0;H<o;H++)b[H]=d[H*o+O],_[H]=Math.max(0,f[H*o+O]),B+=_[H];B-=_[O],_[O]=f[O*o+O],B+=_[O];for(var G=0;G<o;G++)d[G*o+O]=(1-a.damping)*Math.min(0,B-_[G])+a.damping*b[G];d[O*o+O]=(1-a.damping)*(B-_[O])+a.damping*b[O]}for(var N=0,$=0;$<o;$++){var X=d[$*o+$]+f[$*o+$]>0?1:0;w[C%a.minIterations*o+$]=X,N+=X}if(N>0&&(C>=a.minIterations-1||C==a.maxIterations-1)){for(var F=0,q=0;q<o;q++){x[q]=0;for(var z=0;z<a.minIterations;z++)x[q]+=w[z*o+q];(x[q]===0||x[q]===a.minIterations)&&F++}if(F===o)break}}for(var W=cO(o,f,d),te=fO(o,u,W),Y={},V=0;V<W.length;V++)Y[W[V]]=[];for(var U=0;U<n.length;U++){var K=i[n[U].id()],Z=te[K];Z!=null&&Y[Z].push(n[U])}for(var ae=new Array(W.length),ie=0;ie<W.length;ie++)ae[ie]=r.collection(Y[W[ie]]);return ae},dO={affinityPropagation:ab,ap:ab},hO=qt({root:void 0,directed:!1}),vO={hierholzer:function(e){if(!$e(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=hO(e),a=n.root,i=n.directed,s=this,o=!1,l,u,c;a&&(c=we(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?s.forEach(function(m){var b=m.id();if(m.isNode()){var _=m.indegree(!0),x=m.outdegree(!0),S=_-x,w=x-_;S==1?l?o=!0:l=b:w==1?u?o=!0:u=b:(w>1||S>1)&&(o=!0),f[b]=[],m.outgoers().forEach(function(E){E.isEdge()&&f[b].push(E.id())})}else d[b]=[void 0,m.target().id()]}):s.forEach(function(m){var b=m.id();if(m.isNode()){var _=m.degree(!0);_%2&&(l?u?o=!0:u=b:l=b),f[b]=[],m.connectedEdges().forEach(function(x){return f[b].push(x.id())})}else d[b]=[m.source().id(),m.target().id()]});var h={found:!1,trail:void 0};if(o)return h;if(u&&l)if(i){if(c&&u!=c)return h;c=u}else{if(c&&u!=c&&l!=c)return h;c||(c=u)}else c||(c=s[0].id());var v=function(b){for(var _=b,x=[b],S,w,E;f[_].length;)S=f[_].shift(),w=d[S][0],E=d[S][1],_!=E?(f[E]=f[E].filter(function(C){return C!=S}),_=E):!i&&_!=w&&(f[w]=f[w].filter(function(C){return C!=S}),_=w),x.unshift(S),x.unshift(_);return x},p=[],g=[];for(g=v(c);g.length!=1;)f[g[0]].length==0?(p.unshift(s.getElementById(g.shift())),p.unshift(s.getElementById(g.shift()))):g=v(g.shift()).concat(g);p.unshift(s.getElementById(g.shift()));for(var y in f)if(f[y].length)return h;return h.found=!0,h.trail=this.spawn(p,!0),h}},io=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},l=function(d,h){for(var v=s.length-1,p=[],g=e.spawn();s[v].x!=d||s[v].y!=h;)p.push(s.pop().edge),v--;p.push(s.pop().edge),p.forEach(function(y){var m=y.connectedNodes().intersection(e);g.merge(y),m.forEach(function(b){var _=b.id(),x=b.connectedEdges().intersection(e);g.merge(b),r[_].cutVertex?g.merge(x.filter(function(S){return S.isLoop()})):g.merge(x)})}),i.push(g)},u=function(d,h,v){d===v&&(a+=1),r[h]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(h).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(h)));else{var g,y,m,b;p.forEach(function(_){g=_.source().id(),y=_.target().id(),m=g===h?y:g,m!==v&&(b=_.id(),o[b]||(o[b]=!0,s.push({x:h,y:m,edge:_})),m in r?r[h].low=Math.min(r[h].low,r[m].id):(u(d,m,h),r[h].low=Math.min(r[h].low,r[m].low),r[h].id<=r[m].low&&(r[h].cutVertex=!0,l(h,m))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in r||(a=0,u(d,d),r[d].cutVertex=a>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},gO={hopcroftTarjanBiconnected:io,htbc:io,htb:io,hopcroftTarjanBiconnectedComponents:io},so=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function(u){i.push(u),r[u]={index:n,low:n++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(p){var g=p.target().id();g!==u&&(g in r||o(g),r[g].explored||(r[u].low=Math.min(r[u].low,r[g].low)))}),r[u].index===r[u].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),r[d].low=r[u].index,r[d].explored=!0,d===u)break}var h=f.edgesWith(f),v=f.merge(h);a.push(v),s=s.difference(v)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||o(u)}}),{cut:s,components:a}},pO={tarjanStronglyConnected:so,tsc:so,tscc:so,tarjanStronglyConnectedComponents:so},YT={};[vs,UD,jD,YD,ZD,JD,rL,PL,Za,Qa,jp,VL,tO,iO,dO,vO,gO,pO].forEach(function(t){Ee(YT,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var XT=0,ZT=1,QT=2,Cr=function(e){if(!(this instanceof Cr))return new Cr(e);this.id="Thenable/1.0.7",this.state=XT,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Cr.prototype={fulfill:function(e){return ib(this,ZT,"fulfillValue",e)},reject:function(e){return ib(this,QT,"rejectReason",e)},then:function(e,r){var n=this,a=new Cr;return n.onFulfilled.push(ob(e,a,"fulfill")),n.onRejected.push(ob(r,a,"reject")),JT(n),a.proxy}};var ib=function(e,r,n,a){return e.state===XT&&(e.state=r,e[n]=a,JT(e)),e},JT=function(e){e.state===ZT?sb(e,"onFulfilled",e.fulfillValue):e.state===QT&&sb(e,"onRejected",e.rejectReason)},sb=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},ob=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}e2(r,i)}}},e2=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(St(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):e2(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Cr.all=function(t){return new Cr(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var l=t[o],u=l!=null&&l.then!=null;if(u)l.then(function(f){i(o,f)},function(f){r(f)});else{var c=l;i(o,c)}})(s)})};Cr.resolve=function(t){return new Cr(function(e,r){e(t)})};Cr.reject=function(t){return new Cr(function(e,r){r(t)})};var vi=typeof Promise<"u"?Promise:Cr,Xp=function(e,r,n){var a=qm(e),i=!a,s=this._private=Ee({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&st(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var l=e.pan();s.startPan={x:l.x,y:l.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},ya=Xp.prototype;Ee(ya,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),cr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,c){var f=e[u];f!=null&&(e[u]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new vi(function(a,i){n.push(function(){a()})})}});ya.complete=ya.completed;ya.run=ya.play;ya.running=ya.playing;var mO={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,l=!i,u=!l;if(!o.styleEnabled())return this;var c=o.style();r=Ee({},r,n);var f=Object.keys(r).length===0;if(f)return new Xp(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var d=r.renderedPosition,h=o.pan(),v=o.zoom();r.position=NT(d,v,h)}if(l&&r.panBy!=null){var p=r.panBy,g=o.pan();r.pan={x:g.x+p.x,y:g.y+p.y}}var y=r.center||r.centre;if(l&&y!=null){var m=o.getCenterPan(y.eles,r.zoom);m!=null&&(r.pan=m)}if(l&&r.fit!=null){var b=r.fit,_=o.getFitViewport(b.eles||b.boundingBox,b.padding);_!=null&&(r.pan=_.pan,r.zoom=_.zoom)}if(l&&$e(r.zoom)){var x=o.getZoomedViewport(r.zoom);x!=null?(x.zoomed&&(r.zoom=x.zoom),x.panned&&(r.pan=x.pan)):r.zoom=null}return new Xp(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=Ee({},r,n));for(var l=0;l<s.length;l++){var u=s[l],c=u.animated()&&(r.queue===void 0||r.queue),f=u.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<s.length;l++){for(var u=s[l],c=u._private,f=c.animation.current,d=0;d<f.length;d++){var h=f[d],v=h._private;n&&(v.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},Uu,lb;function Fl(){if(lb)return Uu;lb=1;var t=Array.isArray;return Uu=t,Uu}var ju,ub;function yO(){if(ub)return ju;ub=1;var t=Fl(),e=Os(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return ju=a,ju}var Ku,cb;function bO(){if(cb)return Ku;cb=1;var t=RT(),e=Ls(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var l=t(o);return l==n||l==a||l==r||l==i}return Ku=s,Ku}var Yu,fb;function _O(){if(fb)return Yu;fb=1;var t=Ll(),e=t["__core-js_shared__"];return Yu=e,Yu}var Xu,db;function xO(){if(db)return Xu;db=1;var t=_O(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Xu=r,Xu}var Zu,hb;function wO(){if(hb)return Zu;hb=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Zu=r,Zu}var Qu,vb;function SO(){if(vb)return Qu;vb=1;var t=bO(),e=xO(),r=Ls(),n=wO(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!r(d)||e(d))return!1;var h=t(d)?c:i;return h.test(n(d))}return Qu=f,Qu}var Ju,gb;function EO(){if(gb)return Ju;gb=1;function t(e,r){return e==null?void 0:e[r]}return Ju=t,Ju}var ec,pb;function Ym(){if(pb)return ec;pb=1;var t=SO(),e=EO();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return ec=r,ec}var tc,mb;function ql(){if(mb)return tc;mb=1;var t=Ym(),e=t(Object,"create");return tc=e,tc}var rc,yb;function CO(){if(yb)return rc;yb=1;var t=ql();function e(){this.__data__=t?t(null):{},this.size=0}return rc=e,rc}var nc,bb;function kO(){if(bb)return nc;bb=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return nc=t,nc}var ac,_b;function TO(){if(_b)return ac;_b=1;var t=ql(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return ac=a,ac}var ic,xb;function AO(){if(xb)return ic;xb=1;var t=ql(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return ic=n,ic}var sc,wb;function PO(){if(wb)return sc;wb=1;var t=ql(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return sc=r,sc}var oc,Sb;function RO(){if(Sb)return oc;Sb=1;var t=CO(),e=kO(),r=TO(),n=AO(),a=PO();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,oc=i,oc}var lc,Eb;function MO(){if(Eb)return lc;Eb=1;function t(){this.__data__=[],this.size=0}return lc=t,lc}var uc,Cb;function t2(){if(Cb)return uc;Cb=1;function t(e,r){return e===r||e!==e&&r!==r}return uc=t,uc}var cc,kb;function Nl(){if(kb)return cc;kb=1;var t=t2();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return cc=e,cc}var fc,Tb;function DO(){if(Tb)return fc;Tb=1;var t=Nl(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return fc=n,fc}var dc,Ab;function LO(){if(Ab)return dc;Ab=1;var t=Nl();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return dc=e,dc}var hc,Pb;function OO(){if(Pb)return hc;Pb=1;var t=Nl();function e(r){return t(this.__data__,r)>-1}return hc=e,hc}var vc,Rb;function IO(){if(Rb)return vc;Rb=1;var t=Nl();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return vc=e,vc}var gc,Mb;function BO(){if(Mb)return gc;Mb=1;var t=MO(),e=DO(),r=LO(),n=OO(),a=IO();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,gc=i,gc}var pc,Db;function FO(){if(Db)return pc;Db=1;var t=Ym(),e=Ll(),r=t(e,"Map");return pc=r,pc}var mc,Lb;function qO(){if(Lb)return mc;Lb=1;var t=RO(),e=BO(),r=FO();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return mc=n,mc}var yc,Ob;function NO(){if(Ob)return yc;Ob=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return yc=t,yc}var bc,Ib;function zl(){if(Ib)return bc;Ib=1;var t=NO();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return bc=e,bc}var _c,Bb;function zO(){if(Bb)return _c;Bb=1;var t=zl();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return _c=e,_c}var xc,Fb;function $O(){if(Fb)return xc;Fb=1;var t=zl();function e(r){return t(this,r).get(r)}return xc=e,xc}var wc,qb;function VO(){if(qb)return wc;qb=1;var t=zl();function e(r){return t(this,r).has(r)}return wc=e,wc}var Sc,Nb;function HO(){if(Nb)return Sc;Nb=1;var t=zl();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Sc=e,Sc}var Ec,zb;function WO(){if(zb)return Ec;zb=1;var t=qO(),e=zO(),r=$O(),n=VO(),a=HO();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Ec=i,Ec}var Cc,$b;function GO(){if($b)return Cc;$b=1;var t=WO(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],l=i.cache;if(l.has(o))return l.get(o);var u=n.apply(this,s);return i.cache=l.set(o,u)||l,u};return i.cache=new(r.Cache||t),i}return r.Cache=t,Cc=r,Cc}var kc,Vb;function UO(){if(Vb)return kc;Vb=1;var t=GO(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return kc=r,kc}var Tc,Hb;function r2(){if(Hb)return Tc;Hb=1;var t=UO(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,l,u){i.push(l?u.replace(r,"$1"):o||s)}),i});return Tc=n,Tc}var Ac,Wb;function n2(){if(Wb)return Ac;Wb=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Ac=t,Ac}var Pc,Gb;function jO(){if(Gb)return Pc;Gb=1;var t=zm(),e=n2(),r=Fl(),n=Os(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Pc=s,Pc}var Rc,Ub;function a2(){if(Ub)return Rc;Ub=1;var t=jO();function e(r){return r==null?"":t(r)}return Rc=e,Rc}var Mc,jb;function i2(){if(jb)return Mc;jb=1;var t=Fl(),e=yO(),r=r2(),n=a2();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return Mc=a,Mc}var Dc,Kb;function Xm(){if(Kb)return Dc;Kb=1;var t=Os();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Dc=e,Dc}var Lc,Yb;function KO(){if(Yb)return Lc;Yb=1;var t=i2(),e=Xm();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return Lc=r,Lc}var Oc,Xb;function YO(){if(Xb)return Oc;Xb=1;var t=KO();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return Oc=e,Oc}var XO=YO(),ZO=Ds(XO),Ic,Zb;function QO(){if(Zb)return Ic;Zb=1;var t=Ym(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Ic=e,Ic}var Bc,Qb;function JO(){if(Qb)return Bc;Qb=1;var t=QO();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Bc=e,Bc}var Fc,Jb;function eI(){if(Jb)return Fc;Jb=1;var t=JO(),e=t2(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var l=i[s];(!(n.call(i,s)&&e(l,o))||o===void 0&&!(s in i))&&t(i,s,o)}return Fc=a,Fc}var qc,e1;function tI(){if(e1)return qc;e1=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return qc=r,qc}var Nc,t1;function rI(){if(t1)return Nc;t1=1;var t=eI(),e=i2(),r=tI(),n=Ls(),a=Xm();function i(s,o,l,u){if(!n(s))return s;o=e(o,s);for(var c=-1,f=o.length,d=f-1,h=s;h!=null&&++c<f;){var v=a(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=d){var g=h[v];p=u?u(g,v,h):void 0,p===void 0&&(p=n(g)?g:r(o[c+1])?[]:{})}t(h,v,p),h=h[v]}return s}return Nc=i,Nc}var zc,r1;function nI(){if(r1)return zc;r1=1;var t=rI();function e(r,n,a){return r==null?r:t(r,n,a)}return zc=e,zc}var aI=nI(),iI=Ds(aI),$c,n1;function sI(){if(n1)return $c;n1=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return $c=t,$c}var Vc,a1;function oI(){if(a1)return Vc;a1=1;var t=n2(),e=sI(),r=Fl(),n=Os(),a=r2(),i=Xm(),s=a2();function o(l){return r(l)?t(l,i):n(l)?[l]:e(a(s(l)))}return Vc=o,Vc}var lI=oI(),uI=Ds(lI),cI={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Ee({},r,e),function(a,i){var s=e,o=this,l=o.length!==void 0,u=l?o:[o],c=l?o[0]:o;if(we(a)){var f=a.indexOf(".")!==-1,d=f&&uI(a);if(s.allowGetting&&i===void 0){var h;return c&&(s.beforeGet(c),d&&c._private[s.field][a]===void 0?h=ZO(c._private[s.field],d):h=c._private[s.field][a]),h}else if(s.allowSetting&&i!==void 0){var v=!s.immutableKeys[a];if(v){var p=_T({},a,i);s.beforeSet(o,p);for(var g=0,y=u.length;g<y;g++){var m=u[g];s.canSet(m)&&(d&&c._private[s.field][a]===void 0?iI(m._private[s.field],d,i):m._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&$e(a)){var b=a,_,x,S=Object.keys(b);s.beforeSet(o,b);for(var w=0;w<S.length;w++){_=S[w],x=b[_];var E=!s.immutableKeys[_];if(E)for(var C=0;C<u.length;C++){var T=u[C];s.canSet(T)&&(T._private[s.field][_]=x)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&st(a)){var A=a;o.on(s.bindingEvent,A)}else if(s.allowGetting&&a===void 0){var P;return c&&(s.beforeGet(c),P=c._private[s.field]),P}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Ee({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,l=o?s:[s];if(we(a)){for(var u=a.split(/\s+/),c=u.length,f=0;f<c;f++){var d=u[f];if(!On(d)){var h=!i.immutableKeys[d];if(h)for(var v=0,p=l.length;v<p;v++)l[v]._private[i.field][d]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var g=0,y=l.length;g<y;g++)for(var m=l[g]._private[i.field],b=Object.keys(m),_=0;_<b.length;_++){var x=b[_],S=!i.immutableKeys[x];S&&(m[x]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},fI={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new vi(function(o,l){var u=function(h){i.off.apply(i,f),o(h)},c=s.concat([u]),f=c.concat([]);i.on.apply(i,c)})}}},Ge={};[mO,cI,fI].forEach(function(t){Ee(Ge,t)});var dI={animate:Ge.animate(),animation:Ge.animation(),animated:Ge.animated(),clearQueue:Ge.clearQueue(),delay:Ge.delay(),delayAnimation:Ge.delayAnimation(),stop:Ge.stop()},Fo={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(v){return n.push(v)}),n}else Xe(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new hi(e),s=0;s<r.length;s++){for(var o=r[s],l=o._private,u=l.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=u.has(d);if(!h){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Xe(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var l=n[s],u=l._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=u.has(d),v=!1;r||a&&!h?(u.add(d),v=!0):(!r||a&&h)&&(u.delete(d),v=!0),!c&&v&&(i.push(l),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Fo.className=Fo.classNames=Fo.classes;var ze={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:xt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ze.variable="(?:[\\w-.]|(?:\\\\"+ze.metaChar+"))+";ze.className="(?:[\\w-]|(?:\\\\"+ze.metaChar+"))+";ze.value=ze.string+"|"+ze.number;ze.id=ze.variable;(function(){var t,e,r;for(t=ze.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],ze.comparatorOp+="|@"+e;for(t=ze.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(ze.comparatorOp+="|\\!"+e)})();var Ye=function(){return{checks:[]}},fe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Zp=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return cD(t.selector,e.selector)}),hI=function(){for(var t={},e,r=0;r<Zp.length;r++)e=Zp[r],t[e.selector]=e.matches;return t}(),vI=function(e,r){return hI[e](r)},gI="("+Zp.map(function(t){return t.selector}).join("|")+")",La=function(e){return e.replace(new RegExp("\\\\("+ze.metaChar+")","g"),function(r,n){return n})},yn=function(e,r,n){e[e.length-1]=n},Qp=[{name:"group",query:!0,regex:"("+ze.group+")",populate:function(e,r,n){var a=pt(n,1),i=a[0];r.checks.push({type:fe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:gI,populate:function(e,r,n){var a=pt(n,1),i=a[0];r.checks.push({type:fe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ze.id+")",populate:function(e,r,n){var a=pt(n,1),i=a[0];r.checks.push({type:fe.ID,value:La(i)})}},{name:"className",query:!0,regex:"\\.("+ze.className+")",populate:function(e,r,n){var a=pt(n,1),i=a[0];r.checks.push({type:fe.CLASS,value:La(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ze.variable+")\\s*\\]",populate:function(e,r,n){var a=pt(n,1),i=a[0];r.checks.push({type:fe.DATA_EXIST,field:La(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ze.variable+")\\s*("+ze.comparatorOp+")\\s*("+ze.value+")\\s*\\]",populate:function(e,r,n){var a=pt(n,3),i=a[0],s=a[1],o=a[2],l=new RegExp("^"+ze.string+"$").exec(o)!=null;l?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:fe.DATA_COMPARE,field:La(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ze.boolOp+")\\s*("+ze.variable+")\\s*\\]",populate:function(e,r,n){var a=pt(n,2),i=a[0],s=a[1];r.checks.push({type:fe.DATA_BOOL,field:La(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ze.meta+")\\s*("+ze.comparatorOp+")\\s*("+ze.number+")\\s*\\]\\]",populate:function(e,r,n){var a=pt(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:fe.META_COMPARE,field:La(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:ze.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Ye();return o}},{name:"directedEdge",separator:!0,regex:ze.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ye(),a=r,i=Ye();return n.checks.push({type:fe.DIRECTED_EDGE,source:a,target:i}),yn(e,r,n),e.edgeCount++,i}else{var s=Ye(),o=r,l=Ye();return s.checks.push({type:fe.NODE_SOURCE,source:o,target:l}),yn(e,r,s),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:ze.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ye(),a=r,i=Ye();return n.checks.push({type:fe.UNDIRECTED_EDGE,nodes:[a,i]}),yn(e,r,n),e.edgeCount++,i}else{var s=Ye(),o=r,l=Ye();return s.checks.push({type:fe.NODE_NEIGHBOR,node:o,neighbor:l}),yn(e,r,s),l}}},{name:"child",separator:!0,regex:ze.child,populate:function(e,r){if(e.currentSubject==null){var n=Ye(),a=Ye(),i=e[e.length-1];return n.checks.push({type:fe.CHILD,parent:i,child:a}),yn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ye(),o=e[e.length-1],l=Ye(),u=Ye(),c=Ye(),f=Ye();return s.checks.push({type:fe.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:fe.TRUE}],f.checks.push({type:fe.TRUE}),l.checks.push({type:fe.PARENT,parent:f,child:c}),yn(e,o,s),e.currentSubject=u,e.compoundCount++,c}else{var d=Ye(),h=Ye(),v=[{type:fe.PARENT,parent:d,child:h}];return d.checks=r.checks,r.checks=v,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:ze.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ye(),a=Ye(),i=e[e.length-1];return n.checks.push({type:fe.DESCENDANT,ancestor:i,descendant:a}),yn(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ye(),o=e[e.length-1],l=Ye(),u=Ye(),c=Ye(),f=Ye();return s.checks.push({type:fe.COMPOUND_SPLIT,left:o,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:fe.TRUE}],f.checks.push({type:fe.TRUE}),l.checks.push({type:fe.ANCESTOR,ancestor:f,descendant:c}),yn(e,o,s),e.currentSubject=u,e.compoundCount++,c}else{var d=Ye(),h=Ye(),v=[{type:fe.ANCESTOR,ancestor:d,descendant:h}];return d.checks=r.checks,r.checks=v,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:ze.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ue("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===fe.DIRECTED_EDGE?a.type=fe.NODE_TARGET:i===fe.UNDIRECTED_EDGE&&(a.type=fe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Qp.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var pI=function(e){for(var r,n,a,i=0;i<Qp.length;i++){var s=Qp[i],o=s.name,l=e.match(s.regexObj);if(l!=null){n=l,r=s,a=o;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},mI=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},yI=function(e){var r=this,n=r.inputText=e,a=r[0]=Ye();for(r.length=1,n=mI(n);;){var i=pI(n);if(i.expr==null)return Ue("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var c=r[u];if(c.compoundCount>0&&c.edgeCount>0)return Ue("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Ue("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Ue("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},bI=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return we(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,h=c.value;switch(d){case fe.GROUP:{var v=e(h);return v.substring(0,v.length-1)}case fe.DATA_COMPARE:{var p=c.field,g=c.operator;return"["+p+n(e(g))+r(h)+"]"}case fe.DATA_BOOL:{var y=c.operator,m=c.field;return"["+e(y)+m+"]"}case fe.DATA_EXIST:{var b=c.field;return"["+b+"]"}case fe.META_COMPARE:{var _=c.operator,x=c.field;return"[["+x+n(e(_))+r(h)+"]]"}case fe.STATE:return h;case fe.ID:return"#"+h;case fe.CLASS:return"."+h;case fe.PARENT:case fe.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case fe.ANCESTOR:case fe.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case fe.COMPOUND_SPLIT:{var S=i(c.left,f),w=i(c.subject,f),E=i(c.right,f);return S+(S.length>0?" ":"")+w+E}case fe.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,h,v){return d+(f===c&&v===0?"$":"")+a(h,f)},"")},s="",o=0;o<this.length;o++){var l=this[o];s+=i(l,l.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},_I={parse:yI,toString:bI},s2=function(e,r,n){var a,i=we(e),s=oe(e),o=we(n),l,u,c=!1,f=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||o||c)&&(l=!i&&!s?"":""+e,u=""+n),c&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},xI=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},wI=function(e){return e!==void 0},Zm=function(e,r){return e.data(r)},SI=function(e,r){return e[r]()},ut=[],et=function(e,r){return e.checks.every(function(n){return ut[n.type](n,r)})};ut[fe.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};ut[fe.STATE]=function(t,e){var r=t.value;return vI(r,e)};ut[fe.ID]=function(t,e){var r=t.value;return e.id()===r};ut[fe.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};ut[fe.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return s2(SI(e,r),n,a)};ut[fe.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return s2(Zm(e,r),n,a)};ut[fe.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return xI(Zm(e,r),n)};ut[fe.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,wI(Zm(e,r))};ut[fe.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return et(r,a)&&et(n,i)||et(n,a)&&et(r,i)};ut[fe.NODE_NEIGHBOR]=function(t,e){return et(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&et(t.neighbor,r)})};ut[fe.DIRECTED_EDGE]=function(t,e){return et(t.source,e.source())&&et(t.target,e.target())};ut[fe.NODE_SOURCE]=function(t,e){return et(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&et(t.target,r)})};ut[fe.NODE_TARGET]=function(t,e){return et(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&et(t.source,r)})};ut[fe.CHILD]=function(t,e){return et(t.child,e)&&et(t.parent,e.parent())};ut[fe.PARENT]=function(t,e){return et(t.parent,e)&&e.children().some(function(r){return et(t.child,r)})};ut[fe.DESCENDANT]=function(t,e){return et(t.descendant,e)&&e.ancestors().some(function(r){return et(t.ancestor,r)})};ut[fe.ANCESTOR]=function(t,e){return et(t.ancestor,e)&&e.descendants().some(function(r){return et(t.descendant,r)})};ut[fe.COMPOUND_SPLIT]=function(t,e){return et(t.subject,e)&&et(t.left,e)&&et(t.right,e)};ut[fe.TRUE]=function(){return!0};ut[fe.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};ut[fe.FILTER]=function(t,e){var r=t.value;return r(e)};var EI=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===fe.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(et(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},CI=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(et(a,e))return!0}return!1},kI={matches:CI,filter:EI},Fn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||we(e)&&e.match(/^\s*$/)||(cr(e)?this.addQuery({checks:[{type:fe.COLLECTION,value:e.collection()}]}):st(e)?this.addQuery({checks:[{type:fe.FILTER,value:e}]}):we(e)?this.parse(e)||(this.invalid=!0):nt("A selector must be created from a string; found "))},qn=Fn.prototype;[_I,kI].forEach(function(t){return Ee(qn,t)});qn.text=function(){return this.inputText};qn.size=function(){return this.length};qn.eq=function(t){return this[t]};qn.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};qn.addQuery=function(t){this[this.length++]=t};qn.selector=qn.toString;var Rn={allAre:function(e){var r=new Fn(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Fn(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Rn.allAreNeighbours=Rn.allAreNeighbors;Rn.has=Rn.contains;Rn.equal=Rn.equals=Rn.same;var gr=function(e,r){return function(a,i,s,o){var l=a,u=this,c;if(l==null?c="":cr(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var f=u[0]._private,d=f.traversalCache=f.traversalCache||{},h=d[r]=d[r]||[],v=pa(c),p=h[v];return p||(h[v]=e.call(u,a,i,s,o))}else return e.call(u,a,i,s,o)}},ii={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:gr(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Qm(t,e,r,n){for(var a=[],i=new hi,s=t.cy(),o=s.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):o&&n(a,i,u)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),o&&n(a,i,c)}return t}function o2(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}ii.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qm(this,t,e,o2)};function l2(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}ii.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qm(this,t,e,l2)};function TI(t,e,r){l2(t,e,r),o2(t,e,r)}ii.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qm(this,t,e,TI)};ii.ancestors=ii.parents;var ms,u2;ms=u2={data:Ge.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ge.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ge.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ge.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ge.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ge.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};ms.attr=ms.data;ms.removeAttr=ms.removeData;var AI=u2,$l={};function Hc(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}Ee($l,{degree:Hc(function(t,e){return e.source().same(e.target())?2:1}),indegree:Hc(function(t,e){return e.target().same(t)?1:0}),outdegree:Hc(function(t,e){return e.source().same(t)?1:0})});function Oa(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}Ee($l,{minDegree:Oa("degree",function(t,e){return t<e}),maxDegree:Oa("degree",function(t,e){return t>e}),minIndegree:Oa("indegree",function(t,e){return t<e}),maxIndegree:Oa("indegree",function(t,e){return t>e}),minOutdegree:Oa("outdegree",function(t,e){return t<e}),maxOutdegree:Oa("outdegree",function(t,e){return t>e})});Ee($l,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Sr,c2,f2=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},i1={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){f2(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Sr=c2={position:Ge.data(i1),silentPosition:Ge.data(Ee({},i1,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){f2(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if($e(e))r?this.silentPosition(e):this.position(e);else if(st(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if($e(e)?(a={x:oe(e.x)?e.x:0,y:oe(e.y)?e.y:0},n=r):we(e)&&oe(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),u={x:l.x+a.x,y:l.y+a.y};n?o.silentPosition(u):o.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return $e(e)?this.shift(e,!0):we(e)&&oe(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=$e(e)?e:void 0,l=o!==void 0||r!==void 0&&we(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];r!==void 0?c.position(e,(r-s[e])/i):o!==void 0&&c.position(NT(o,i,s))}else{var f=n.position();return o=Il(f,i,s),e===void 0?o:o[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=$e(e)?e:void 0,s=i!==void 0||r!==void 0&&we(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var l=0;l<this.length;l++){var u=this[l],c=o?u.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var h=d?c.position():{x:0,y:0};r!==void 0?u.position(e,r+h[e]):i!==void 0&&u.position({x:i.x+h.x,y:i.y+h.y})}else{var v=n.position(),p=o?n.parent():null,g=p&&p.length>0,y=g;g&&(p=p[0]);var m=y?p.position():{x:0,y:0};return i={x:v.x-m.x,y:v.y-m.y},e===void 0?i:i[e]}else if(!s)return;return this}};Sr.modelPosition=Sr.point=Sr.position;Sr.modelPositions=Sr.points=Sr.positions;Sr.renderedPoint=Sr.renderedPosition;Sr.relativePoint=Sr.relativePosition;var PI=c2,Ja,Gn;Ja=Gn={};Gn.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:l,w:s-i,h:l-o}};Gn.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Gn.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,l=s.children(),u=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),d=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function h(C,T,A){var P=0,R=0,D=T+A;return C>0&&D>0&&(P=T/D*C,R=A/D*C),{biasDiff:P,biasComplementDiff:R}}function v(C,T,A,P){if(A.units==="%")switch(P){case"width":return C>0?A.pfValue*C:0;case"height":return T>0?A.pfValue*T:0;case"average":return C>0&&T>0?A.pfValue*(C+T)/2:0;case"min":return C>0&&T>0?C>T?A.pfValue*T:A.pfValue*C:0;case"max":return C>0&&T>0?C>T?A.pfValue*C:A.pfValue*T:0;default:return 0}else return A.units==="px"?A.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var g=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var y=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var m=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var b=h(c.width.val-f.w,p,g),_=b.biasDiff,x=b.biasComplementDiff,S=h(c.height.val-f.h,y,m),w=S.biasDiff,E=S.biasComplementDiff;o.autoPadding=v(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,c.width.val),d.x=(-_+f.x1+f.x2+x)/2,o.autoHeight=Math.max(f.h,c.height.val),d.y=(-w+f.y1+f.y2+E)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var vr=function(e){return e===1/0||e===-1/0?0:e},_r=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},_n=function(e,r){return r==null?e:_r(e,r.x1,r.y1,r.x2,r.y2)},Ai=function(e,r,n){return nr(e,r,n)},oo=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,l,u;if(o!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=l-s,f.y1=u-s,f.x2=l+s,f.y2=u+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Io(f,1),_r(e,f.x1,f.y1,f.x2,f.y2)}}},Wc=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),c=Ai(s,"labelWidth",n),f=Ai(s,"labelHeight",n),d=Ai(s,"labelX",n),h=Ai(s,"labelY",n),v=r.pstyle(a+"text-margin-x").pfValue,p=r.pstyle(a+"text-margin-y").pfValue,g=r.isEdge(),y=r.pstyle(a+"text-rotation"),m=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,_=b/2,x=r.pstyle("text-background-padding").pfValue,S=2,w=f,E=c,C=E/2,T=w/2,A,P,R,D;if(g)A=d-C,P=d+C,R=h-T,D=h+T;else{switch(l.value){case"left":A=d-E,P=d;break;case"center":A=d-C,P=d+C;break;case"right":A=d,P=d+E;break}switch(u.value){case"top":R=h-w,D=h;break;case"center":R=h-T,D=h+T;break;case"bottom":R=h,D=h+w;break}}var L=v-Math.max(m,_)-x-S,I=v+Math.max(m,_)+x+S,O=p-Math.max(m,_)-x-S,B=p+Math.max(m,_)+x+S;A+=L,P+=I,R+=O,D+=B;var H=n||"main",G=i.labelBounds,N=G[H]=G[H]||{};N.x1=A,N.y1=R,N.x2=P,N.y2=D,N.w=P-A,N.h=D-R,N.leftPad=L,N.rightPad=I,N.topPad=O,N.botPad=B;var $=g&&y.strValue==="autorotate",X=y.pfValue!=null&&y.pfValue!==0;if($||X){var F=$?Ai(i.rstyle,"labelAngle",n):y.pfValue,q=Math.cos(F),z=Math.sin(F),W=(A+P)/2,te=(R+D)/2;if(!g){switch(l.value){case"left":W=P;break;case"right":W=A;break}switch(u.value){case"top":te=D;break;case"bottom":te=R;break}}var Y=function(le,xe){return le=le-W,xe=xe-te,{x:le*q-xe*z+W,y:le*z+xe*q+te}},V=Y(A,R),U=Y(A,D),K=Y(P,R),Z=Y(P,D);A=Math.min(V.x,U.x,K.x,Z.x),P=Math.max(V.x,U.x,K.x,Z.x),R=Math.min(V.y,U.y,K.y,Z.y),D=Math.max(V.y,U.y,K.y,Z.y)}var ae=H+"Rot",ie=G[ae]=G[ae]||{};ie.x1=A,ie.y1=R,ie.x2=P,ie.y2=D,ie.w=P-A,ie.h=D-R,_r(e,A,R,P,D),_r(i.labelBounds.all,A,R,P,D)}return e}},s1=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value,i=r.pstyle("outline-offset").value,s=a+i;d2(e,r,n,s,"outside",s/2)}},d2=function(e,r,n,a,i,s){if(!(n===0||a<=0||i==="inside")){var o=r.cy(),l=r.pstyle("shape").value,u=o.renderer().nodeShapes[l],c=r.position(),f=c.x,d=c.y,h=r.width(),v=r.height();if(u.hasMiterBounds){i==="center"&&(a/=2);var p=u.miterBounds(f,d,h,v,a);_n(e,p)}else s!=null&&s>0&&Bo(e,[s,s,s,s])}},RI=function(e,r){if(!r.cy().headless()){var n=r.pstyle("border-opacity").value,a=r.pstyle("border-width").pfValue,i=r.pstyle("border-position").value;d2(e,r,n,a,i)}},MI=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=Zt(),o=e._private,l=e.isNode(),u=e.isEdge(),c,f,d,h,v,p,g=o.rstyle,y=l&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(Ae){return Ae.pstyle("display").value!=="none"},b=!a||m(e)&&(!u||m(e.source())&&m(e.target()));if(b){var _=0,x=0;a&&r.includeOverlays&&(_=e.pstyle("overlay-opacity").value,_!==0&&(x=e.pstyle("overlay-padding").value));var S=0,w=0;a&&r.includeUnderlays&&(S=e.pstyle("underlay-opacity").value,S!==0&&(w=e.pstyle("underlay-padding").value));var E=Math.max(x,w),C=0,T=0;if(a&&(C=e.pstyle("width").pfValue,T=C/2),l&&r.includeNodes){var A=e.position();v=A.x,p=A.y;var P=e.outerWidth(),R=P/2,D=e.outerHeight(),L=D/2;c=v-R,f=v+R,d=p-L,h=p+L,_r(s,c,d,f,h),a&&s1(s,e),a&&r.includeOutlines&&!i&&s1(s,e),a&&RI(s,e)}else if(u&&r.includeEdges)if(a&&!i){var I=e.pstyle("curve-style").strValue;if(c=Math.min(g.srcX,g.midX,g.tgtX),f=Math.max(g.srcX,g.midX,g.tgtX),d=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),c-=T,f+=T,d-=T,h+=T,_r(s,c,d,f,h),I==="haystack"){var O=g.haystackPts;if(O&&O.length===2){if(c=O[0].x,d=O[0].y,f=O[1].x,h=O[1].y,c>f){var B=c;c=f,f=B}if(d>h){var H=d;d=h,h=H}_r(s,c-T,d-T,f+T,h+T)}}else if(I==="bezier"||I==="unbundled-bezier"||wn(I,"segments")||wn(I,"taxi")){var G;switch(I){case"bezier":case"unbundled-bezier":G=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":G=g.linePts;break}if(G!=null)for(var N=0;N<G.length;N++){var $=G[N];c=$.x-T,f=$.x+T,d=$.y-T,h=$.y+T,_r(s,c,d,f,h)}}}else{var X=e.source(),F=X.position(),q=e.target(),z=q.position();if(c=F.x,f=z.x,d=F.y,h=z.y,c>f){var W=c;c=f,f=W}if(d>h){var te=d;d=h,h=te}c-=T,f+=T,d-=T,h+=T,_r(s,c,d,f,h)}if(a&&r.includeEdges&&u&&(oo(s,e,"mid-source"),oo(s,e,"mid-target"),oo(s,e,"source"),oo(s,e,"target")),a){var Y=e.pstyle("ghost").value==="yes";if(Y){var V=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue;_r(s,s.x1+V,s.y1+U,s.x2+V,s.y2+U)}}var K=o.bodyBounds=o.bodyBounds||{};G0(K,s),Bo(K,y),Io(K,1),a&&(c=s.x1,f=s.x2,d=s.y1,h=s.y2,_r(s,c-E,d-E,f+E,h+E));var Z=o.overlayBounds=o.overlayBounds||{};G0(Z,s),Bo(Z,y),Io(Z,1);var ae=o.labelBounds=o.labelBounds||{};ae.all!=null?dL(ae.all):ae.all=Zt(),a&&r.includeLabels&&(r.includeMainLabels&&Wc(s,e,null),u&&(r.includeSourceLabels&&Wc(s,e,"source"),r.includeTargetLabels&&Wc(s,e,"target")))}return s.x1=vr(s.x1),s.y1=vr(s.y1),s.x2=vr(s.x2),s.y2=vr(s.y2),s.w=vr(s.x2-s.x1),s.h=vr(s.y2-s.y1),s.w>0&&s.h>0&&b&&(Bo(s,y),Io(s,1)),s},h2=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},v2=function(e){var r=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return N0([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return N0([r(i.x),r(i.y)])}},o1=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?l1:h2(r),o=s===l1;if(n.bbCache==null?(a=MI(e,ys),n.bbCache=a,n.bbCachePosKey=v2(e)):a=n.bbCache,!o){var l=e.isNode();a=Zt(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?_n(a,n.overlayBounds):_n(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?_n(a,n.labelBounds.all):(r.includeMainLabels&&_n(a,n.labelBounds.mainRot),r.includeSourceLabels&&_n(a,n.labelBounds.sourceRot),r.includeTargetLabels&&_n(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},ys={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},l1=h2(ys),u1=qt(ys);Gn.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=ni(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==v2(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=ys:t=u1(t),e=o1(this[0],t);else{e=Zt(),t=t||ys;var a=u1(t),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<i.length;l++){var u=i[l];n(u)&&u.dirtyBoundingBoxCache(),_n(e,o1(u,a))}}return e.x1=vr(e.x1),e.y1=vr(e.y1),e.x2=vr(e.x2),e.y2=vr(e.y2),e.w=vr(e.x2-e.x1),e.h=vr(e.y2-e.y1),e};Gn.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Gn.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),$e(t)){var i=t;t=function(){return i}}var s=function(c,f){return c._private.bbAtOldPos=t(c,f)},o=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=fL(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};Ja.boundingbox=Ja.bb=Ja.boundingBox;Ja.renderedBoundingbox=Ja.renderedBoundingBox;var DI=Gn,$i,Fs;$i=Fs={};var g2=function(e){e.uppercaseName=E0(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=E0(e.outerName),$i[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},$i["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),l=n.pstyle("border-position").value,u;l==="center"?u=n.pstyle("border-width").pfValue:l==="outside"?u=2*n.pstyle("border-width").pfValue:u=0;var c=2*n.padding();return o+u+c}else return 1},$i["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},$i["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};g2({name:"width"});g2({name:"height"});Fs.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Fs.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Fs.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var LI=Fs,OI=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},II=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Il(r(e),n.zoom(),n.pan())}},BI=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return Il(s,i,a)})}},FI=function(e){return e.renderer().getControlPoints(e)},qI=function(e){return e.renderer().getSegmentPoints(e)},NI=function(e){return e.renderer().getSourceEndpoint(e)},zI=function(e){return e.renderer().getTargetEndpoint(e)},$I=function(e){return e.renderer().getEdgeMidpoint(e)},c1={controlPoints:{get:FI,mult:!0},segmentPoints:{get:qI,mult:!0},sourceEndpoint:{get:NI},targetEndpoint:{get:zI},midpoint:{get:$I}},VI=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},HI=Object.keys(c1).reduce(function(t,e){var r=c1[e],n=VI(e);return t[e]=function(){return OI(this,r.get)},r.mult?t[n]=function(){return BI(this,r.get)}:t[n]=function(){return II(this,r.get)},t},{}),WI=Ee({},PI,DI,LI,HI);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var p2=function(e,r){this.recycle(e,r)};function Pi(){return!1}function lo(){return!0}p2.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Pi,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?lo:Pi):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=lo;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=lo;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=lo,this.stopPropagation()},isDefaultPrevented:Pi,isPropagationStopped:Pi,isImmediatePropagationStopped:Pi};var m2=/^([^.]+)(\.(?:[^.]+))?$/,GI=".*",y2={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},f1=Object.keys(y2),UI={};function Vl(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:UI,e=arguments.length>1?arguments[1]:void 0,r=0;r<f1.length;r++){var n=f1[r];this[n]=t[n]||y2[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Nn=Vl.prototype,b2=function(e,r,n,a,i,s,o){st(a)&&(i=a,a=null),o&&(s==null?s=o:s=Ee({},s,o));for(var l=Xe(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!On(c)){var f=c.match(m2);if(f){var d=f[1],h=f[2]?f[2]:null,v=r(e,c,d,h,a,i,s);if(v===!1)break}}}},d1=function(e,r){return e.addEventFields(e.context,r),new p2(r.type,r)},jI=function(e,r,n){if(JM(n)){r(e,n);return}else if($e(n)){r(e,d1(e,n));return}for(var a=Xe(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!On(s)){var o=s.match(m2);if(o){var l=o[1],u=o[2]?o[2]:null,c=d1(e,{type:l,namespace:u,target:e.context});r(e,c)}}}};Nn.on=Nn.addListener=function(t,e,r,n,a){return b2(this,function(i,s,o,l,u,c,f){st(c)&&i.listeners.push({event:s,callback:c,type:o,namespace:l,qualifier:u,conf:f})},t,e,r,n,a),this};Nn.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Nn.removeListener=Nn.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=ID(this.listeners));for(var i=this.listeners,s=function(u){var c=i[u];b2(a,function(f,d,h,v,p,g){if((c.type===h||t==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!g||c.callback===g))return i.splice(u,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};Nn.removeAllListeners=function(){return this.removeListener("*")};Nn.emit=Nn.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Xe(e)||(e=[e]),jI(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(){var c=n[l];if(c.type===s.type&&(!c.namespace||c.namespace===s.namespace||c.namespace===GI)&&i.eventMatches(i.context,c,s)){var f=[s];e!=null&&FD(f,e),i.beforeEmit(i.context,c,s),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(v){return v!==c}));var d=i.callbackContext(i.context,c,s),h=c.callback.apply(d,f);i.afterEmit(i.context,c,s),h===!1&&(s.stopPropagation(),s.preventDefault())}},l=0;l<a;l++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};var KI={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Ms(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},uo=function(e){return we(e)?new Fn(e):e},_2={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Vl(KI,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=uo(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=uo(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=uo(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=uo(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Ge.eventAliasesOn(_2);var x2={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(we(e)||cr(e))return new Fn(e).filter(this);if(st(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){we(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(we(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,l=s?i:a,u=0;u<o.length;u++){var c=o[u];l.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(l,u){for(var c=0;c<l.length;c++){var f=l[c],d=f._private.data.id,h=u.hasElementWithId(d);h||n.push(f)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,l=function(c,f,d){for(var h=0;h<c.length;h++){var v=c[h],p=v._private.data.id,g=f.hasElementWithId(p);g?i.merge(v):d.push(v)}};return l(s,o,n),l(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&we(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],l=o._private.data.id,u=!i.has(l);if(u){var c=this.length++;this[c]=o,i.set(l,{ele:o,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,l=this[o],u=l._private.data.id;this[o]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],l=r?e.apply(r,[o,s,i]):e(o,s,i);l>n&&(n=l,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],l=r?e.apply(r,[o,s,i]):e(o,s,i);l<n&&(n=l,a=o)}return{value:n,ele:a}}},Ve=x2;Ve.u=Ve["|"]=Ve["+"]=Ve.union=Ve.or=Ve.add;Ve["\\"]=Ve["!"]=Ve["-"]=Ve.difference=Ve.relativeComplement=Ve.subtract=Ve.not;Ve.n=Ve["&"]=Ve["."]=Ve.and=Ve.intersection=Ve.intersect;Ve["^"]=Ve["(+)"]=Ve["(-)"]=Ve.symmetricDifference=Ve.symdiff=Ve.xor;Ve.fnFilter=Ve.filterFn=Ve.stdFilter=Ve.filter;Ve.complement=Ve.abscomp=Ve.absoluteComplement;var YI={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},w2=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?$m:0}var s=i(e)-i(r);if(s!==0)return s;function o(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var l=o(e)-o(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},vl={forEach:function(e,r){if(st(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!st(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(w2)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:$m-1}else{var i=r.source,s=r.target,o=i.zDepth(),l=s.zDepth();return Math.max(o,l,0)}}}};vl.each=vl.forEach;var XI=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":St(Symbol))!=e&&St(Symbol.iterator)!=e;r&&(vl[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return _T({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};XI();var ZI=qt({nodeDimensionsIncludeLabels:!1}),qo={layoutDimensions:function(e){e=ZI(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(x){return!x.isParent()}),i=this.cy(),s=r.eles,o=function(S){return S.id()},l=ni(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(S,w,E){var C={x:w.x1+w.w/2,y:w.y1+w.h/2},T={x:(E.x-C.x)*S,y:(E.y-C.y)*S};return{x:C.x+T.x,y:C.y+T.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var S=Zt(),w=0;w<a.length;w++){var E=a[w],C=l(E,w);zT(S,C.x,C.y)}return S},d=f(),h=ni(function(x,S){var w=l(x,S);if(c){var E=Math.abs(r.spacingFactor);w=u(E,d,w)}return r.transform!=null&&(w=r.transform(x,w)),w},o);if(r.animate){for(var v=0;v<a.length;v++){var p=a[v],g=h(p,v),y=r.animateFilter==null||r.animateFilter(p,v);if(y){var m=p.animation({position:g,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else p.position(g)}if(r.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(h),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var _=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(_)}e.animations.forEach(function(x){return x.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),vi.all(e.animations.map(function(x){return x.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(h),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Ee({},e,{eles:this}))}};qo.createLayout=qo.makeLayout=qo.layout;function S2(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Hl(t,e){return t=pa(t),function(n){return S2(t,e,n)}}function Wl(t,e){t=pa(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return S2(t,r,a)}}var Ot={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if($e(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(we(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var l=s[o],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Gc(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Jm(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||Gc(i,n);var l=o.source,u=o.target;return r(l)&&(!s||Gc(l,r))&&(l===u||r(u)&&(!s||Gc(u,r)))}}}var gi=Hl("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});Ot.takesUpSpace=Wl("takesUpSpace",Jm({ok:gi}));var QI=Hl("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&gi(t)}),JI=Hl("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&gi(t)});Ot.interactive=Wl("interactive",Jm({ok:QI,parentOk:JI,edgeOkViaNode:gi}));Ot.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var eB=Hl("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&gi(t)}),tB=gi;Ot.visible=Wl("visible",Jm({ok:eB,edgeOkViaNode:tB}));Ot.hidden=function(){var t=this[0];if(t)return!t.visible()};Ot.isBundledBezier=Wl("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Ot.bypass=Ot.css=Ot.style;Ot.renderedCss=Ot.renderedStyle;Ot.removeBypass=Ot.removeCss=Ot.removeStyle;Ot.pstyle=Ot.parsedStyle;var Mn={};function h1(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&st(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Xe(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var l=this[o],u=!t.ableField||l._private[t.ableField],c=l._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(l);if(f!==void 0&&(u=f,!f))return this}u&&(l._private[t.field]=t.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(t.event),s&&d.emit(s)}return this}}function pi(t){Mn[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Mn[t.on]=h1({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Mn[t.off]=h1({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}pi({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});pi({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});pi({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});pi({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Mn.deselect=Mn.unselect;Mn.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};pi({field:"active",on:"activate",off:"unactivate"});pi({field:"pannable",on:"panify",off:"unpanify"});Mn.inactive=function(){var t=this[0];if(t)return!t._private.active};var Gt={},v1=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var l=!1,u=o.connectedEdges(),c=0;c<u.length;c++){var f=u[c],d=f.source(),h=f.target();if(e.noIncomingEdges&&h===o&&d!==o||e.noOutgoingEdges&&d===o&&h!==o){l=!0;break}}l||i.push(o)}}return this.spawn(i,!0).filter(n)}},g1=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),l=0;l<o.length;l++){var u=o[l],c=u.source(),f=u.target();e.outgoing&&c===s?(a.push(u),a.push(f)):e.incoming&&f===s&&(a.push(u),a.push(c))}}return this.spawn(a,!0).filter(r)}},p1=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,l=0;l<s.length;l++){var u=s[l],c=u.id();i[c]||(i[c]=!0,a.push(u),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};Gt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Ee(Gt,{roots:v1({noIncomingEdges:!0}),leaves:v1({noOutgoingEdges:!0}),outgoers:gr(g1({outgoing:!0}),"outgoers"),successors:p1({outgoing:!0}),incomers:gr(g1({incoming:!0}),"incomers"),predecessors:p1({})});Ee(Gt,{neighborhood:gr(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],l=o.source(),u=o.target(),c=a===l?u:l;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Gt.neighbourhood=Gt.neighborhood;Gt.closedNeighbourhood=Gt.closedNeighborhood;Gt.openNeighbourhood=Gt.openNeighborhood;Ee(Gt,{source:gr(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:gr(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:m1({attr:"source"}),targets:m1({attr:"target"})});function m1(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}Ee(Gt,{edgesWith:gr(y1(),"edgesWith"),edgesTo:gr(y1({thisIsSrc:!0}),"edgesTo")});function y1(t){return function(r){var n=[],a=this._private.cy,i=t||{};we(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,l=0;l<o.length;l++){var u=o[l],c=u._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),d=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=f||d;h&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(u))}return this.spawn(n,!0)}}Ee(Gt,{connectedEdges:gr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:gr(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:gr(b1(),"parallelEdges"),codirectedEdges:gr(b1({codirected:!0}),"codirectedEdges")});function b1(t){var e={codirected:!1};return t=Ee({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var l=i[o],u=l._private,c=u.source,f=c._private.data.id,d=u.data.target,h=c._private.edges,v=0;v<h.length;v++){var p=h[v],g=p._private.data,y=g.target,m=g.source,b=y===d&&m===f,_=f===y&&d===m;(s.codirected&&b||!s.codirected&&(b||_))&&a.push(p)}return this.spawn(a,!0).filter(n)}}Ee(Gt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return r.spawn();var l=function(){var c=n.collection();s.push(c);var f=i[0];o(f,c),r.bfs({directed:!1,roots:f,visit:function(h){return o(h,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(h){r.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do l();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Gt.componentsOf=Gt.components;var It=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){nt("A collection must have a reference to the core");return}var i=new nn,s=!1;if(!r)r=[];else if(r.length>0&&$e(r[0])&&!Ms(r[0])){s=!0;for(var o=[],l=new hi,u=0,c=r.length;u<c;u++){var f=r[u];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=FT();else if(e.hasElementWithId(d.id)||l.has(d.id))continue;var h=new Ol(e,f,!1);o.push(h),l.add(d.id)}r=o}this.length=0;for(var v=0,p=r.length;v<p;v++){var g=r[v][0];if(g!=null){var y=g._private.data.id;(!n||!i.has(y))&&(n&&i.set(y,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new nn,_=this.eles,x=0;x<_.length;x++){var S=_[x];b.set(S.id(),{index:x,ele:S})}}},n&&(this._private.map=i),s&&!a&&this.restore()},Je=Ol.prototype=It.prototype=Object.create(Array.prototype);Je.instanceString=function(){return"collection"};Je.spawn=function(t,e){return new It(this.cy(),t,e)};Je.spawnSelf=function(){return this.spawn(this)};Je.cy=function(){return this._private.cy};Je.renderer=function(){return this._private.cy.renderer()};Je.element=function(){return this[0]};Je.collection=function(){return ST(this)?this:new It(this._private.cy,[this])};Je.unique=function(){return new It(this._private.cy,this,!0)};Je.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Je.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new It(e)};Je.$id=Je.getElementById;Je.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};Je.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Je.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Je.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if($e(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,l=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),l!=null&&l!=a.target&&(s.target=""+l,i=!0),i&&(e=e.move(s))}else{var u="parent"in t.data,c=t.data.parent;u&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(p,g,y){var m=t[p];m!=null&&m!==n[p]&&(m?e[g]():e[y]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var d={data:Br(n.data),position:Br(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var h=0;return n.classes.forEach(function(v){return d.classes+=h++===0?v:" "+v}),d}}};Je.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};Je.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Ol(t,a,!1);e.push(i)}return new It(t,e)};Je.copy=Je.clone;Je.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,l=0,u=r.length;l<u;l++){var c=r[l];e&&!c.removed()||(c.isNode()?i.push(c):s.push(c))}o=i.concat(s);var f,d=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var h=o[f],v=h._private,p=v.data;if(h.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=FT();else if(oe(p.id))p.id=""+p.id;else if(On(p.id)||!we(p.id)){nt("Can not create element with invalid string ID `"+p.id+"`"),d();continue}else if(n.hasElementWithId(p.id)){nt("Can not create second element with ID `"+p.id+"`"),d();continue}}var g=p.id;if(h.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(h.isEdge()){for(var m=h,b=["source","target"],_=b.length,x=!1,S=0;S<_;S++){var w=b[S],E=p[w];oe(E)&&(E=p[w]=""+p[w]),E==null||E===""?(nt("Can not create edge `"+g+"` with unspecified "+w),x=!0):n.hasElementWithId(E)||(nt("Can not create edge `"+g+"` with nonexistant "+w+" `"+E+"`"),x=!0)}if(x){d();continue}var C=n.getElementById(p.source),T=n.getElementById(p.target);C.same(T)?C._private.edges.push(m):(C._private.edges.push(m),T._private.edges.push(m)),m._private.source=C,m._private.target=T}v.map=new nn,v.map.set(g,{ele:h,index:0}),v.removed=!1,e&&n.addToPool(h)}for(var A=0;A<i.length;A++){var P=i[A],R=P._private.data;oe(R.parent)&&(R.parent=""+R.parent);var D=R.parent,L=D!=null;if(L||P._private.parent){var I=P._private.parent?n.collection().merge(P._private.parent):n.getElementById(D);if(I.empty())R.parent=void 0;else if(I[0].removed())Ue("Node added with missing parent, reference to parent removed"),R.parent=void 0,P._private.parent=null;else{for(var O=!1,B=I;!B.empty();){if(P.same(B)){O=!0,R.parent=void 0;break}B=B.parent()}O||(I[0]._private.children.push(P),P._private.parent=I[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var H=o.length===r.length?r:new It(n,o),G=0;G<H.length;G++){var N=H[G];N.isNode()||(N.parallelEdges().clearTraversalCache(),N.source().clearTraversalCache(),N.target().clearTraversalCache())}var $;a.hasCompoundNodes?$=n.collection().merge(H).merge(H.connectedNodes()).merge(H.parent()):$=H,$.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?H.emitAndNotify("add"):e&&H.emit("add")}return r};Je.removed=function(){var t=this[0];return t&&t._private.removed};Je.inside=function(){var t=this[0];return t&&!t._private.removed};Je.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(D){for(var L=D._private.edges,I=0;I<L.length;I++)l(L[I])}function o(D){for(var L=D._private.children,I=0;I<L.length;I++)l(L[I])}function l(D){var L=a[D.id()];e&&D.removed()||L||(a[D.id()]=!0,D.isNode()?(n.push(D),s(D),o(D)):n.unshift(D))}for(var u=0,c=r.length;u<c;u++){var f=r[u];l(f)}function d(D,L){var I=D._private.edges;In(I,L),D.clearTraversalCache()}function h(D){D.clearTraversalCache()}var v=[];v.ids={};function p(D,L){L=L[0],D=D[0];var I=D._private.children,O=D.id();In(I,L),L._private.parent=null,v.ids[O]||(v.ids[O]=!0,v.push(D))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var g=0;g<n.length;g++){var y=n[g];if(y.isEdge()){var m=y.source()[0],b=y.target()[0];d(m,y),d(b,y);for(var _=y.parallelEdges(),x=0;x<_.length;x++){var S=_[x];h(S),S.isBundledBezier()&&S.dirtyBoundingBoxCache()}}else{var w=y.parent();w.length!==0&&p(w,y)}e&&(y._private.removed=!0)}var E=i._private.elements;i._private.hasCompoundNodes=!1;for(var C=0;C<E.length;C++){var T=E[C];if(T.isParent()){i._private.hasCompoundNodes=!0;break}}var A=new It(this.cy(),n);A.size()>0&&(t?A.emitAndNotify("remove"):e&&A.emit("remove"));for(var P=0;P<v.length;P++){var R=v[P];(!e||!R.removed())&&R.updateStyle()}return A};Je.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(v){return v==null?v:""+v};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),l=s!=null&&e.hasElementWithId(s),u=o!=null&&e.hasElementWithId(o);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var h=0;h<r.length;h++){var v=r[h],p=v._private.data;v.isEdge()&&(l&&(p.source=s),u&&(p.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var h=r.remove(n,a);h.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var p=r[v],g=p._private.data;p.isNode()&&(g.parent=d)}h.restore(n,a)}),r.emitAndNotify("move")}}return this};[YT,dI,Fo,Rn,ii,AI,$l,WI,_2,x2,YI,vl,qo,Ot,Mn,Gt].forEach(function(t){Ee(Je,t)});var rB={add:function(e){var r,n=this;if(cr(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new It(n,i)}}else if(Xe(e)){var l=e;r=new It(n,l)}else if($e(e)&&(Xe(e.nodes)||Xe(e.edges))){for(var u=e,c=[],f=["nodes","edges"],d=0,h=f.length;d<h;d++){var v=f[d],p=u[v];if(Xe(p))for(var g=0,y=p.length;g<y;g++){var m=Ee({group:v},p[g]);c.push(m)}}r=new It(n,c)}else{var b=e;r=new Ol(n,b).collection()}return r},remove:function(e){if(!cr(e)){if(we(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function nB(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,l=11,u=1/(l-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=c?new Float32Array(l):new Array(l);function h(T,A){return 1-3*A+3*T}function v(T,A){return 3*A-6*T}function p(T){return 3*T}function g(T,A,P){return((h(A,P)*T+v(A,P))*T+p(A))*T}function y(T,A,P){return 3*h(A,P)*T*T+2*v(A,P)*T+p(A)}function m(T,A){for(var P=0;P<a;++P){var R=y(A,t,r);if(R===0)return A;var D=g(A,t,r)-T;A-=D/R}return A}function b(){for(var T=0;T<l;++T)d[T]=g(T*u,t,r)}function _(T,A,P){var R,D,L=0;do D=A+(P-A)/2,R=g(D,t,r)-T,R>0?P=D:A=D;while(Math.abs(R)>s&&++L<o);return D}function x(T){for(var A=0,P=1,R=l-1;P!==R&&d[P]<=T;++P)A+=u;--P;var D=(T-d[P])/(d[P+1]-d[P]),L=A+D*u,I=y(L,t,r);return I>=i?m(T,L):I===0?L:_(T,A,A+u)}var S=!1;function w(){S=!0,(t!==e||r!==n)&&b()}var E=function(A){return S||w(),t===e&&r===n?A:A===0?0:A===1?1:g(x(A),e,n)};E.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var C="generateBezier("+[t,e,r,n]+")";return E.toString=function(){return C},E}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var aB=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),l=e(n,a,o),u=1/6*(i.dx+2*(s.dx+o.dx)+l.dx),c=1/6*(i.dv+2*(s.dv+o.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+c*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,f=16/1e3,d,h,v;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,d=s!==null,d?(u=n(a,i),h=u/s*f):h=f;v=r(v||o,h),l.push(1+v.x),u+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return d?function(p){return l[p*(l.length-1)|0]}:u}}(),Ze=function(e,r,n,a){var i=nB(e,r,n,a);return function(s,o,l){return s+(o-s)*i(l)}},No={linear:function(e,r,n){return e+(r-e)*n},ease:Ze(.25,.1,.25,1),"ease-in":Ze(.42,0,1,1),"ease-out":Ze(0,0,.58,1),"ease-in-out":Ze(.42,0,.58,1),"ease-in-sine":Ze(.47,0,.745,.715),"ease-out-sine":Ze(.39,.575,.565,1),"ease-in-out-sine":Ze(.445,.05,.55,.95),"ease-in-quad":Ze(.55,.085,.68,.53),"ease-out-quad":Ze(.25,.46,.45,.94),"ease-in-out-quad":Ze(.455,.03,.515,.955),"ease-in-cubic":Ze(.55,.055,.675,.19),"ease-out-cubic":Ze(.215,.61,.355,1),"ease-in-out-cubic":Ze(.645,.045,.355,1),"ease-in-quart":Ze(.895,.03,.685,.22),"ease-out-quart":Ze(.165,.84,.44,1),"ease-in-out-quart":Ze(.77,0,.175,1),"ease-in-quint":Ze(.755,.05,.855,.06),"ease-out-quint":Ze(.23,1,.32,1),"ease-in-out-quint":Ze(.86,0,.07,1),"ease-in-expo":Ze(.95,.05,.795,.035),"ease-out-expo":Ze(.19,1,.22,1),"ease-in-out-expo":Ze(1,0,0,1),"ease-in-circ":Ze(.6,.04,.98,.335),"ease-out-circ":Ze(.075,.82,.165,1),"ease-in-out-circ":Ze(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return No.linear;var a=aB(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":Ze};function _1(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function x1(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Ia(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=x1(t,a),o=x1(e,a);if(oe(s)&&oe(o))return _1(i,s,o,r,n);if(Xe(s)&&Xe(o)){for(var l=[],u=0;u<o.length;u++){var c=s[u],f=o[u];if(c!=null&&f!=null){var d=_1(i,c,f,r,n);l.push(d)}else l.push(f)}return l}}function iB(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,l=s.startTime,u=n?t:t.cy(),c=u.style();if(!s.easingImpl)if(o==null)s.easingImpl=No.linear;else{var f;if(we(o)){var d=c.parse("transition-timing-function",o);f=d.value}else f=o;var h,v;we(f)?(h=f,v=[]):(h=f[1],v=f.slice(2).map(function(H){return+H})),v.length>0?(h==="spring"&&v.push(s.duration),s.easingImpl=No[h].apply(null,v)):s.easingImpl=No[h]}var p=s.easingImpl,g;if(s.duration===0?g=1:g=(r-l)/s.duration,s.applying&&(g=s.progress),g<0?g=0:g>1&&(g=1),s.delay==null){var y=s.startPosition,m=s.position;if(m&&a&&!t.locked()){var b={};Ri(y.x,m.x)&&(b.x=Ia(y.x,m.x,g,p)),Ri(y.y,m.y)&&(b.y=Ia(y.y,m.y,g,p)),t.position(b)}var _=s.startPan,x=s.pan,S=i.pan,w=x!=null&&n;w&&(Ri(_.x,x.x)&&(S.x=Ia(_.x,x.x,g,p)),Ri(_.y,x.y)&&(S.y=Ia(_.y,x.y,g,p)),t.emit("pan"));var E=s.startZoom,C=s.zoom,T=C!=null&&n;T&&(Ri(E,C)&&(i.zoom=gs(i.minZoom,Ia(E,C,g,p),i.maxZoom)),t.emit("zoom")),(w||T)&&t.emit("viewport");var A=s.style;if(A&&A.length>0&&a){for(var P=0;P<A.length;P++){var R=A[P],D=R.name,L=R,I=s.startStyle[D],O=c.properties[I.name],B=Ia(I,L,g,p,O);c.overrideBypass(t,D,B)}t.emit("style")}}return s.progress=g,g}function Ri(t,e){return t==null||e==null?!1:oe(t)&&oe(e)?!0:!!(t&&e)}function sB(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function w1(t,e){var r=e._private.aniEles,n=[];function a(c,f){var d=c._private,h=d.animation.current,v=d.animation.queue,p=!1;if(h.length===0){var g=v.shift();g&&h.push(g)}for(var y=function(S){for(var w=S.length-1;w>=0;w--){var E=S[w];E()}S.splice(0,S.length)},m=h.length-1;m>=0;m--){var b=h[m],_=b._private;if(_.stopped){h.splice(m,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.frames);continue}!_.playing&&!_.applying||(_.playing&&_.applying&&(_.applying=!1),_.started||sB(c,b,t),iB(c,b,t,f),_.applying&&(_.applying=!1),y(_.frames),_.step!=null&&_.step(t),b.completed()&&(h.splice(m,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.completes)),p=!0)}return!f&&h.length===0&&v.length===0&&n.push(c),p}for(var i=!1,s=0;s<r.length;s++){var o=r[s],l=a(o);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var oB={animate:Ge.animate(),animation:Ge.animation(),animated:Ge.animated(),clearQueue:Ge.clearQueue(),delay:Ge.delay(),delayAnimation:Ge.delayAnimation(),stop:Ge.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&ul(function(i){w1(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){w1(s,e)},n.beforeRenderPriorities.animations):r()}},lB={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Ms(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},co=function(e){return we(e)?new Fn(e):e},E2={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Vl(lB,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,co(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,co(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,co(r),n),this},once:function(e,r,n){return this.emitter().one(e,co(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Ge.eventAliasesOn(E2);var Jp={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Jp.jpeg=Jp.jpg;var zo={layout:function(e){var r=this;if(e==null){nt("Layout options must be specified to make a layout");return}if(e.name==null){nt("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){nt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;we(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(Ee({},e,{cy:r,eles:i}));return s}};zo.createLayout=zo.makeLayout=zo.layout;var uB={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},cB=qt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),em={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){nt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ue("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=cB(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};em.invalidateDimensions=em.resize;var $o={collection:function(e,r){return we(e)?this.$(e):cr(e)?e.collection():Xe(e)?(r||(r={}),new It(this,e,r.unique,r.removed)):new It(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};$o.elements=$o.filter=$o.$;var Mt={},rs="t",fB="f";Mt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var l=e.getContextStyle(o),u=e.applyContextStyle(o,l,s);s._private.appliedInitStyle?e.updateTransitions(s,u.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&a.push(s)}}return a};Mt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},l=0;l<r.length;l++){var u=r[l],c=t[l]===rs,f=e[l]===rs,d=c!==f,h=u.mappedProperties.length>0;if(d||f&&h){var v=void 0;d&&h||d?v=u.properties:h&&(v=u.mappedProperties);for(var p=0;p<v.length;p++){for(var g=v[p],y=g.name,m=!1,b=l+1;b<r.length;b++){var _=r[b],x=e[b]===rs;if(x&&(m=_.properties[g.name]!=null,m))break}!o[y]&&!m&&(o[y]=!0,s.push(y))}}}return n[a]=s,s};Mt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=rs:r+=fB}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Mt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===rs;if(o)for(var l=0;l<s.properties.length;l++){var u=s.properties[l];a[u.name]=u}}return n[e]=a,a};Mt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var l=a[o],u=e[l],c=r.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var f=c.mapping,d=f.fnValue=u.value(r);if(d===f.prevFnValue)continue}var h=i[l]={prev:c};n.applyParsedProperty(r,u),h.next=r.pstyle(l),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}};Mt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(K,Z,ae){return r.getPropertiesHash(K,Z,ae)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var c=a[u];e.styleKeys[c]=[la,Wa]}for(var f=function(K,Z){return e.styleKeys[Z][0]=ds(K,e.styleKeys[Z][0])},d=function(K,Z){return e.styleKeys[Z][1]=hs(K,e.styleKeys[Z][1])},h=function(K,Z){f(K,Z),d(K,Z)},v=function(K,Z){for(var ae=0;ae<K.length;ae++){var ie=K.charCodeAt(ae);f(ie,Z),d(ie,Z)}},p=2e9,g=function(K){return-128<K&&K<128&&Math.floor(K)!==K?p-(K*1024|0):K},y=0;y<n.length;y++){var m=n[y],b=l[m];if(b!=null){var _=this.properties[m],x=_.type,S=_.groupKey,w=void 0;_.hashOverride!=null?w=_.hashOverride(t,b):b.pfValue!=null&&(w=b.pfValue);var E=_.enums==null?b.value:null,C=w!=null,T=E!=null,A=C||T,P=b.units;if(x.number&&A&&!x.multiple){var R=C?w:E;h(g(R),S),!C&&P!=null&&v(P,S)}else v(b.strValue,S)}}for(var D=[la,Wa],L=0;L<a.length;L++){var I=a[L],O=e.styleKeys[I];D[0]=ds(O[0],D[0]),D[1]=hs(O[1],D[1])}e.styleKey=TD(D[0],D[1]);var B=e.styleKeys;e.labelDimsKey=mn(B.labelDimensions);var H=i(t,["label"],B.labelDimensions);if(e.labelKey=mn(H),e.labelStyleKey=mn(ro(B.commonLabel,H)),!o){var G=i(t,["source-label"],B.labelDimensions);e.sourceLabelKey=mn(G),e.sourceLabelStyleKey=mn(ro(B.commonLabel,G));var N=i(t,["target-label"],B.labelDimensions);e.targetLabelKey=mn(N),e.targetLabelStyleKey=mn(ro(B.commonLabel,N))}if(o){var $=e.styleKeys,X=$.nodeBody,F=$.nodeBorder,q=$.nodeOutline,z=$.backgroundImage,W=$.compound,te=$.pie,Y=$.stripe,V=[X,F,q,z,W,te,Y].filter(function(U){return U!=null}).reduce(ro,[la,Wa]);e.nodeKey=mn(V),e.hasPie=te!=null&&te[0]!==la&&te[1]!==Wa,e.hasStripe=Y!=null&&Y[0]!==la&&Y[1]!==Wa}return s!==e.styleKey};Mt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};Mt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,l=n.bypass,u=a[n.name],c=u&&u.bypass,f=t._private,d="mapping",h=function(X){return X==null?null:X.pfValue!=null?X.pfValue:X.value},v=function(){var X=h(u),F=h(n);r.checkTriggers(t,n.name,X,F)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,v(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,v(),!0):!1:(v(),!0);var p=function(){Ue("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var g=n.field.split("."),y=f.data,m=0;m<g.length&&y;m++){var b=g[m];y=y[b]}if(y==null)return p(),!1;var _;if(oe(y)){var x=n.fieldMax-n.fieldMin;x===0?_=0:_=(y-n.fieldMin)/x}else return Ue("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;if(_<0?_=0:_>1&&(_=1),o.color){var S=n.valueMin[0],w=n.valueMax[0],E=n.valueMin[1],C=n.valueMax[1],T=n.valueMin[2],A=n.valueMax[2],P=n.valueMin[3]==null?1:n.valueMin[3],R=n.valueMax[3]==null?1:n.valueMax[3],D=[Math.round(S+(w-S)*_),Math.round(E+(C-E)*_),Math.round(T+(A-T)*_),Math.round(P+(R-P)*_)];i={bypass:n.bypass,name:n.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else if(o.number){var L=n.valueMin+(n.valueMax-n.valueMin)*_;i=this.parse(n.name,L,n.bypass,d)}else return!1;if(!i)return p(),!1;i.mapping=n,n=i;break}case s.data:{for(var I=n.field.split("."),O=f.data,B=0;B<I.length&&O;B++){var H=I[B];O=O[H]}if(O!=null&&(i=this.parse(n.name,O,n.bypass,d)),!i)return p(),!1;i.mapping=n,n=i;break}case s.fn:{var G=n.value,N=n.fnValue!=null?n.fnValue:G(t);if(n.prevFnValue=N,N==null)return Ue("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,N,n.bypass,d),!i)return Ue("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Br(n),n=i;break}case void 0:break;default:return!1}return l?(c?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):c?u.bypassed=n:a[n.name]=n,v(),!0};Mt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],l=a[o];l!=null&&(l.bypass?l.bypassed=null:a[o]=null)}}};Mt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Mt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},l=!1,u=0;u<a.length;u++){var c=a[u],f=t.pstyle(c),d=e[c];if(d){var h=d.prev,v=h,p=d.next!=null?d.next:f,g=!1,y=void 0,m=1e-6;v&&(oe(v.pfValue)&&oe(p.pfValue)?(g=p.pfValue-v.pfValue,y=v.pfValue+m*g):oe(v.value)&&oe(p.value)?(g=p.value-v.value,y=v.value+m*g):Xe(v.value)&&Xe(p.value)&&(g=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],y=v.strValue),g&&(o[c]=p.strValue,this.applyBypass(t,c,y),l=!0))}}if(!l)return;n.transitioning=!0,new vi(function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};Mt.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);t.removed()||o!=null&&o(r,n,t)&&i(s)};Mt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};Mt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};Mt.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Mt.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Mt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var qs={};qs.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var l=a.properties[o],u=l.name,c=this.parse(u,r,!0);c&&i.push(c)}}else if(we(e)){var f=this.parse(e,r,!0);f&&i.push(f)}else if($e(e)){var d=e;n=r;for(var h=Object.keys(d),v=0;v<h.length;v++){var p=h[v],g=d[p];if(g===void 0&&(g=d[Dl(p)]),g!==void 0){var y=this.parse(p,g,!0);y&&i.push(y)}}}else return!1;if(i.length===0)return!1;for(var m=!1,b=0;b<t.length;b++){for(var _=t[b],x={},S=void 0,w=0;w<i.length;w++){var E=i[w];if(n){var C=_.pstyle(E.name);S=x[E.name]={prev:C}}m=this.applyParsedProperty(_,Br(E))||m,n&&(S.next=_.pstyle(E.name))}m&&this.updateStyleHints(_),n&&this.updateTransitions(_,x,s)}return m};qs.overrideBypass=function(t,e,r){e=Nm(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,l=s.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":l?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};qs.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};qs.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var l=e[o],u=this.properties[l],c=i.pstyle(u.name);if(!(!c||!c.bypass)){var f="",d=this.parse(l,f,!0),h=s[u.name]={prev:c};this.applyParsedProperty(i,d),h.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};var ey={};ey.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};ey.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var $r={};$r.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};$r.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[Dl(i.name)]=s)}return n}};$r.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};$r.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,l=s.units,u=s.strValue;if(r&&i.number&&o!=null&&oe(o)){var c=t.cy().zoom(),f=function(g){return g*c},d=function(g,y){return f(g)+y},h=Xe(o),v=h?l.every(function(p){return p!=null}):l!=null;return v?h?o.map(function(p,g){return d(p,l[g])}).join(" "):d(o,l):h?o.map(function(p){return we(p)?p:""+f(p)}).join(" "):""+f(o)}else if(u!=null)return u}return null}};$r.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&($e(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};$r.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],l=n[o],u=a[o]||a[Nm(o)],c=this.parse(u.name,l);c&&r.push(c)}return r};$r.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=ds(o,n[0]),n[1]=hs(o,n[1]);else for(s=i.strValue,u=0;u<s.length;u++)o=s.charCodeAt(u),n[0]=ds(o,n[0]),n[1]=hs(o,n[1]);return n};$r.getPropertiesHash=$r.getNonDefaultPropertiesHash;var Gl={};Gl.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var l=s[o],u=i[l];e.css(l,u)}}return e};Gl.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Gl.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var ty={};ty.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Ue("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new Fn(f);if(d.invalid){Ue("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var h=c[2],v=!1;i=h;for(var p=[];;){var g=i.match(/^\s*$/);if(g)break;var y=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Ue("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}s=y[0];var m=y[1],b=y[2],_=e.properties[m];if(!_){Ue("Skipping property: Invalid property name in: "+s),l();continue}var x=r.parse(m,b);if(!x){Ue("Skipping property: Invalid property definition in: "+s),l();continue}p.push({name:m,val:b}),l()}if(v){o();break}r.selector(f);for(var S=0;S<p.length;S++){var w=p[S];r.css(w.name,w.val)}o()}return r};ty.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var vt={};(function(){var t=xt,e=iD,r=oD,n=lD,a=uD,i=function(U){return"^"+U+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(U){var K=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+U+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+K+")\\s*\\,\\s*("+K+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];vt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(U,K){switch(U.length){case 2:return K[0]!=="deg"&&K[0]!=="rad"&&K[1]!=="deg"&&K[1]!=="rad";case 1:return we(U[0])||K[0]==="deg"||K[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(U){var K=U.length;return K===1||K===2||K===4}}};var l={zeroNonZero:function(U,K){return(U==null||K==null)&&U!==K||U==0&&K!=0?!0:U!=0&&K==0},any:function(U,K){return U!=K},emptyNonEmpty:function(U,K){var Z=On(U),ae=On(K);return Z&&!ae||!Z&&ae}},u=vt.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],f=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],h=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],v=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],p=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any},{name:"box-selection",type:u.boxSelection,triggersZOrder:l.any}],g=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(U,K,Z){return U===K?!1:Z.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],y=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],m=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],b=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],_=function(U,K){return K.value==="label"?-U.poolIndex():K.pfValue},x=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:_},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:_},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],S=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],w=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],E=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],C=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],T=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(U,K){return U===K?!1:U==="bezier"||K==="bezier"}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],A=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],P=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],R=[];vt.pieBackgroundN=16,R.push({name:"pie-size",type:u.sizeMaybePercent}),R.push({name:"pie-hole",type:u.sizeMaybePercent}),R.push({name:"pie-start-angle",type:u.angle});for(var D=1;D<=vt.pieBackgroundN;D++)R.push({name:"pie-"+D+"-background-color",type:u.color}),R.push({name:"pie-"+D+"-background-size",type:u.percent}),R.push({name:"pie-"+D+"-background-opacity",type:u.zeroOneNumber});var L=[];vt.stripeBackgroundN=16,L.push({name:"stripe-size",type:u.sizeMaybePercent}),L.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var I=1;I<=vt.stripeBackgroundN;I++)L.push({name:"stripe-"+I+"-background-color",type:u.color}),L.push({name:"stripe-"+I+"-background-size",type:u.percent}),L.push({name:"stripe-"+I+"-background-opacity",type:u.zeroOneNumber});var O=[],B=vt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(V){B.forEach(function(U){var K=U+"-"+V.name,Z=V.type,ae=V.triggersBounds;O.push({name:K,type:Z,triggersBounds:ae})})},{});var H=vt.properties=[].concat(p,b,g,y,m,A,v,h,c,f,d,x,S,w,E,R,L,C,T,O,P),G=vt.propertyGroups={behavior:p,transition:b,visibility:g,overlay:y,underlay:m,ghost:A,commonLabel:v,labelDimensions:h,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:x,nodeBorder:S,nodeOutline:w,backgroundImage:E,pie:R,stripe:L,compound:C,edgeLine:T,edgeArrow:O,core:P},N=vt.propertyGroupNames={},$=vt.propertyGroupKeys=Object.keys(G);$.forEach(function(V){N[V]=G[V].map(function(U){return U.name}),G[V].forEach(function(U){return U.groupKey=V})});var X=vt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];vt.propertyNames=H.map(function(V){return V.name});for(var F=0;F<H.length;F++){var q=H[F];H[q.name]=q}for(var z=0;z<X.length;z++){var W=X[z],te=H[W.pointsTo],Y={name:W.name,alias:!0,pointsTo:te};H.push(Y),H[W.name]=Y}})();vt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};vt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Ee({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=vt.pieBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=vt.stripeBackgroundN;c++){var f=u.name.replace("{{i}}",c),d=u.value;l[f]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return vt.arrowPrefixes.forEach(function(c){var f=c+"-"+u.name,d=u.value;l[f]=d}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};vt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ul={};Ul.parse=function(t,e,r,n){var a=this;if(st(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,l=OT(t,o,s,i),u=a.propCache=a.propCache||[],c;return(c=u[l])||(c=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Br(c),c&&(c.value=Br(c.value))),c};Ul.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ue("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ue("The style value of `label` is deprecated for `"+a.name+"`"),a};Ul.parseImpl=function(t,e,r,n){var a=this;t=Nm(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var l=we(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(st(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var c,f;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(r)return!1;var d=o.data;return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(e))){if(r||u.multiple)return!1;var h=o.mapData;if(!(u.color||u.number))return!1;var v=this.parse(t,f[4]);if(!v||v.mapped)return!1;var p=this.parse(t,f[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return Ue("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+v.strValue+"`"),this.parse(t,v.strValue);if(u.color){var g=v.value,y=p.value,m=g[0]===y[0]&&g[1]===y[1]&&g[2]===y[2]&&(g[3]===y[3]||(g[3]==null||g[3]===1)&&(y[3]==null||y[3]===1));if(m)return!1}return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:p.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var b;if(l?b=e.split(/\s+/):Xe(e)?b=e:b=[e],u.evenMultiple&&b.length%2!==0)return null;for(var _=[],x=[],S=[],w="",E=!1,C=0;C<b.length;C++){var T=a.parse(t,b[C],r,"multiple");E=E||we(T.value),_.push(T.value),S.push(T.pfValue!=null?T.pfValue:T.value),x.push(T.units),w+=(C>0?" ":"")+T.strValue}return u.validate&&!u.validate(_,x)?null:u.singleEnum&&E?_.length===1&&we(_[0])?{name:t,value:_[0],strValue:_[0],bypass:r}:null:{name:t,value:_,pfValue:S,strValue:w,bypass:r,units:x}}var A=function(){for(var Y=0;Y<u.enums.length;Y++){var V=u.enums[Y];if(V===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var P,R="px";if(u.units&&(P=u.units),u.implicitUnits&&(R=u.implicitUnits),!u.unitless)if(l){var D="px|em"+(u.allowPercent?"|\\%":"");P&&(D=P);var L=e.match("^("+xt+")("+D+")?$");L&&(e=L[1],P=L[2]||R)}else(!P||u.implicitUnits)&&(P=R);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=s,A();if(u.integer&&!QM(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var I={name:t,value:e,strValue:""+e+(P||""),units:P,bypass:r};return u.unitless||P!=="px"&&P!=="em"?I.pfValue=e:I.pfValue=P==="px"||!P?e:this.getEmSizeInPixels()*e,(P==="ms"||P==="s")&&(I.pfValue=P==="ms"?e:1e3*e),(P==="deg"||P==="rad")&&(I.pfValue=P==="rad"?e:lL(e)),P==="%"&&(I.pfValue=e/100),I}else if(u.propList){var O=[],B=""+e;if(B!=="none"){for(var H=B.split(/\s*,\s*|\s+/),G=0;G<H.length;G++){var N=H[G].trim();a.properties[N]?O.push(N):Ue("`"+N+"` is not a valid property name")}if(O.length===0)return null}return{name:t,value:O,strValue:O.length===0?"none":O.join(" "),bypass:r}}else if(u.color){var $=TT(e);return $?{name:t,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var X=A();if(X)return X}for(var F=u.regexes?u.regexes:[u.regex],q=0;q<F.length;q++){var z=new RegExp(F[q]),W=z.exec(e);if(W)return{name:t,value:u.singleRegexMatchValue?W[1]:W,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?A():null};var Pt=function(e){if(!(this instanceof Pt))return new Pt(e);if(!qm(e)){nt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Ut=Pt.prototype;Ut.instanceString=function(){return"style"};Ut.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Ut.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Ut.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Ut.selector=function(t){var e=t==="core"?null:new Fn(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Ut.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Dl(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Ut.style=Ut.css;Ut.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};Ut.append=function(t){return ET(t)?t.appendToStyle(this):Xe(t)?this.appendFromJson(t):we(t)&&this.appendFromString(t),this};Pt.fromJson=function(t,e){var r=new Pt(t);return r.fromJson(e),r};Pt.fromString=function(t,e){return new Pt(t).fromString(e)};[Mt,qs,ey,$r,Gl,ty,vt,Ul].forEach(function(t){Ee(Ut,t)});Pt.types=Ut.types;Pt.properties=Ut.properties;Pt.propertyGroups=Ut.propertyGroups;Pt.propertyGroupNames=Ut.propertyGroupNames;Pt.propertyGroupKeys=Ut.propertyGroupKeys;var dB={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return ET(e)?r.style=e.generateStyle(this):Xe(e)?r.style=Pt.fromJson(this,e):we(e)?r.style=Pt.fromString(this,e):r.style=Pt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},hB="single",ba={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=hB),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(we(e[0]))return n=e[0],r[n];if($e(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,oe(s)&&(r.x=s),oe(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&oe(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:$e(e)&&(o=n[0],l=o.x,u=o.y,oe(l)&&(a.x+=l),oe(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&oe(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(oe(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(we(e)){var a=e;e=this.$(a)}else if(tD(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else cr(e)||(e=this.mutableElements());if(!(cr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),l;if(r=oe(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((s-2*r)/n.w,(o-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(s-l*(n.x1+n.x2))/2,y:(o-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return oe(e)&&oe(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):oe(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:oe(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),oe(e)?s=e:$e(e)&&(s=e.level,e.position!=null?i=Il(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!oe(s)||s===a||i!=null&&(!oe(i.x)||!oe(i.y)))return null;if(i!=null){var l=n,u=a,c=s,f={x:-c/u*(i.x-l.x)+i.x,y:-c/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(oe(e.zoom)||(n=!1),$e(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;oe(u.x)&&(r.pan.x=u.x,o=!1),oe(u.y)&&(r.pan.y=u.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(we(e)){var n=e;e=this.mutableElements().filter(n)}else cr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ba.centre=ba.center;ba.autolockNodes=ba.autolock;ba.autoungrabifyNodes=ba.autoungrabify;var bs={data:Ge.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ge.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ge.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ge.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};bs.attr=bs.data;bs.removeAttr=bs.removeData;var _s=function(e){var r=this;e=Ee({},e);var n=e.container;n&&!ll(n)&&ll(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=_t!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=Ee({name:s?"grid":"null"},o.layout),o.renderer=Ee({name:s?"canvas":"null"},o.renderer);var l=function(v,p,g){return p!==void 0?p:g!==void 0?g:v},u=this._private={container:n,ready:!1,options:o,elements:new It(this),listeners:[],aniEles:new It(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:oe(o.zoom)?o.zoom:1,pan:{x:$e(o.pan)&&oe(o.pan.x)?o.pan.x:0,y:$e(o.pan)&&oe(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(v,p){var g=v.some(rD);if(g)return vi.all(v).then(p);p(v)};u.styleEnabled&&r.setStyle([]);var f=Ee({},o,o.renderer);r.initRenderer(f);var d=function(v,p,g){r.notifications(!1);var y=r.mutableElements();y.length>0&&y.remove(),v!=null&&($e(v)||Xe(v))&&r.add(v),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",p),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",g),r.emit("done")});var m=Ee({},r._private.options.layout);m.eles=r.elements(),r.layout(m).run()};c([o.style,o.elements],function(h){var v=h[0],p=h[1];u.styleEnabled&&r.style().append(v),d(p,function(){r.startAnimationLoop(),u.ready=!0,st(o.ready)&&r.on("ready",o.ready);for(var g=0;g<i.length;g++){var y=i[g];r.on("ready",y)}a&&(a.readies=[]),r.emit("ready")},o.done)})},gl=_s.prototype;Ee(gl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return _t;var r=this._private.container.ownerDocument;return r===void 0||r==null?_t:r.defaultView||_t},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!ll(e)&&ll(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Ee({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Br(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(_){return r.getElementById(_.id())};if($e(e)){if(r.startBatch(),e.elements){var s={},o=function(_,x){for(var S=[],w=[],E=0;E<_.length;E++){var C=_[E];if(!C.data.id){Ue("cy.json() cannot handle elements without an ID attribute");continue}var T=""+C.data.id,A=r.getElementById(T);s[T]=!0,A.length!==0?w.push({ele:A,json:C}):(x&&(C.group=x),S.push(C))}r.add(S);for(var P=0;P<w.length;P++){var R=w[P],D=R.ele,L=R.json;D.json(L)}};if(Xe(e.elements))o(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],f=e.elements[c];Xe(f)&&o(f,c)}var d=r.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?d.merge(b):b.remove()}),d.forEach(function(b){return b.children().move({parent:null})}),d.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<h.length;v++){var p=h[v];e[p]!=null&&r[p](e[p])}return r.endBatch(),this}else{var g=!!e,y={};g?y.elements=this.elements().map(function(b){return b.json()}):(y.elements={},a.forEach(function(b){var _=b.group();y.elements[_]||(y.elements[_]=[]),y.elements[_].push(b.json())})),this._private.styleEnabled&&(y.style=r.style().json()),y.data=Br(r.data());var m=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=Br(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=Br(m.renderer),y.hideEdgesOnViewport=m.hideEdgesOnViewport,y.textureOnViewport=m.textureOnViewport,y.wheelSensitivity=m.wheelSensitivity,y.motionBlur=m.motionBlur,y.multiClickDebounceTime=m.multiClickDebounceTime,y}}});gl.$id=gl.getElementById;[rB,oB,E2,Jp,zo,uB,em,$o,dB,ba,bs].forEach(function(t){Ee(gl,t)});var vB={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},gB={maximal:!1,acyclic:!1},Ba=function(e){return e.scratch("breadthfirst")},S1=function(e,r){return e.scratch("breadthfirst",r)};function C2(t){this.options=Ee({},vB,gB,t)}C2.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(me){return me.isChildless()}),a=r,i=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,o=!!t.boundingBox,l=Zt(o?t.boundingBox:structuredClone(e.extent())),u;if(cr(t.roots))u=t.roots;else if(Xe(t.roots)){for(var c=[],f=0;f<t.roots.length;f++){var d=t.roots[f],h=e.getElementById(d);c.push(h)}u=e.collection(c)}else if(we(t.roots))u=e.$(t.roots);else if(i)u=n.roots();else{var v=r.components();u=e.collection();for(var p=function(){var ue=v[g],ge=ue.maxDegree(!1),de=ue.filter(function(pe){return pe.degree(!1)===ge});u=u.add(de)},g=0;g<v.length;g++)p()}var y=[],m={},b=function(ue,ge){y[ge]==null&&(y[ge]=[]);var de=y[ge].length;y[ge].push(ue),S1(ue,{index:de,depth:ge})},_=function(ue,ge){var de=Ba(ue),pe=de.depth,ye=de.index;y[pe][ye]=null,ue.isChildless()&&b(ue,ge)};a.bfs({roots:u,directed:t.directed,visit:function(ue,ge,de,pe,ye){var ke=ue[0],Be=ke.id();ke.isChildless()&&b(ke,ye),m[Be]=!0}});for(var x=[],S=0;S<n.length;S++){var w=n[S];m[w.id()]||x.push(w)}var E=function(ue){for(var ge=y[ue],de=0;de<ge.length;de++){var pe=ge[de];if(pe==null){ge.splice(de,1),de--;continue}S1(pe,{depth:ue,index:de})}},C=function(ue,ge){for(var de=Ba(ue),pe=ue.incomers().filter(function(Ce){return Ce.isNode()&&r.has(Ce)}),ye=-1,ke=ue.id(),Be=0;Be<pe.length;Be++){var qe=pe[Be],Le=Ba(qe);ye=Math.max(ye,Le.depth)}if(de.depth<=ye){if(!t.acyclic&&ge[ke])return null;var Ne=ye+1;return _(ue,Ne),ge[ke]=Ne,!0}return!1};if(i&&s){var T=[],A={},P=function(ue){return T.push(ue)},R=function(){return T.shift()};for(n.forEach(function(me){return T.push(me)});T.length>0;){var D=R(),L=C(D,A);if(L)D.outgoers().filter(function(me){return me.isNode()&&r.has(me)}).forEach(P);else if(L===null){Ue("Detected double maximal shift for node `"+D.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var I=0;if(t.avoidOverlap)for(var O=0;O<n.length;O++){var B=n[O],H=B.layoutDimensions(t),G=H.w,N=H.h;I=Math.max(I,G,N)}var $={},X=function(ue){if($[ue.id()])return $[ue.id()];for(var ge=Ba(ue).depth,de=ue.neighborhood(),pe=0,ye=0,ke=0;ke<de.length;ke++){var Be=de[ke];if(!(Be.isEdge()||Be.isParent()||!n.has(Be))){var qe=Ba(Be);if(qe!=null){var Le=qe.index,Ne=qe.depth;if(!(Le==null||Ne==null)){var Ce=y[Ne].length;Ne<ge&&(pe+=Le/Ce,ye++)}}}}return ye=Math.max(1,ye),pe=pe/ye,ye===0&&(pe=0),$[ue.id()]=pe,pe},F=function(ue,ge){var de=X(ue),pe=X(ge),ye=de-pe;return ye===0?kT(ue.id(),ge.id()):ye};t.depthSort!==void 0&&(F=t.depthSort);for(var q=y.length,z=0;z<q;z++)y[z].sort(F),E(z);for(var W=[],te=0;te<x.length;te++)W.push(x[te]);var Y=function(){for(var ue=0;ue<q;ue++)E(ue)};W.length&&(y.unshift(W),q=y.length,Y());for(var V=0,U=0;U<q;U++)V=Math.max(y[U].length,V);var K={x:l.x1+l.w/2,y:l.y1+l.h/2},Z=n.reduce(function(me,ue){return function(ge){return{w:me.w===-1?ge.w:(me.w+ge.w)/2,h:me.h===-1?ge.h:(me.h+ge.h)/2}}(ue.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ae=Math.max(q===1?0:o?(l.h-t.padding*2-Z.h)/(q-1):(l.h-t.padding*2-Z.h)/(q+1),I),ie=y.reduce(function(me,ue){return Math.max(me,ue.length)},0),Ae=function(ue){var ge=Ba(ue),de=ge.depth,pe=ge.index;if(t.circle){var ye=Math.min(l.w/2/q,l.h/2/q);ye=Math.max(ye,I);var ke=ye*de+ye-(q>0&&y[0].length<=3?ye/2:0),Be=2*Math.PI/y[de].length*pe;return de===0&&y[0].length===1&&(ke=1),{x:K.x+ke*Math.cos(Be),y:K.y+ke*Math.sin(Be)}}else{var qe=y[de].length,Le=Math.max(qe===1?0:o?(l.w-t.padding*2-Z.w)/((t.grid?ie:qe)-1):(l.w-t.padding*2-Z.w)/((t.grid?ie:qe)+1),I),Ne={x:K.x+(pe+1-(qe+1)/2)*Le,y:K.y+(de+1-(q+1)/2)*ae};return Ne}},le={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(le).indexOf(t.direction)===-1&&nt("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(le).join(", ")));var xe=function(ue){return MD(Ae(ue),l,le[t.direction])};return r.nodes().layoutPositions(this,t,xe),this};var pB={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function k2(t){this.options=Ee({},pB,t)}k2.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=Zt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var h=i[d],v=h.layoutDimensions(e),p=v.w,g=v.h;f=Math.max(f,p,g)}if(oe(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(s.h,s.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var y=Math.cos(u)-Math.cos(0),m=Math.sin(u)-Math.sin(0),b=Math.sqrt(f*f/(y*y+m*m));c=Math.max(b,c)}var _=function(S,w){var E=e.startAngle+w*u*(a?1:-1),C=c*Math.cos(E),T=c*Math.sin(E),A={x:o.x+C,y:o.y+T};return A};return n.nodes().layoutPositions(this,e,_),this};var mB={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function T2(t){this.options=Ee({},mB,t)}T2.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=Zt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],u=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),l.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var h=0;h<i.length;h++){var v=i[h],p=v.layoutDimensions(e);u=Math.max(u,p.w,p.h)}l.sort(function(ae,ie){return ie.value-ae.value});for(var g=e.levelWidth(i),y=[[]],m=y[0],b=0;b<l.length;b++){var _=l[b];if(m.length>0){var x=Math.abs(m[0].value-_.value);x>=g&&(m=[],y.push(m))}m.push(_)}var S=u+e.minNodeSpacing;if(!e.avoidOverlap){var w=y.length>0&&y[0].length>1,E=Math.min(s.w,s.h)/2-S,C=E/(y.length+w?1:0);S=Math.min(S,C)}for(var T=0,A=0;A<y.length;A++){var P=y[A],R=e.sweep===void 0?2*Math.PI-2*Math.PI/P.length:e.sweep,D=P.dTheta=R/Math.max(1,P.length-1);if(P.length>1&&e.avoidOverlap){var L=Math.cos(D)-Math.cos(0),I=Math.sin(D)-Math.sin(0),O=Math.sqrt(S*S/(L*L+I*I));T=Math.max(O,T)}P.r=T,T+=S}if(e.equidistant){for(var B=0,H=0,G=0;G<y.length;G++){var N=y[G],$=N.r-H;B=Math.max(B,$)}H=0;for(var X=0;X<y.length;X++){var F=y[X];X===0&&(H=F.r),F.r=H,H+=B}}for(var q={},z=0;z<y.length;z++)for(var W=y[z],te=W.dTheta,Y=W.r,V=0;V<W.length;V++){var U=W[V],K=e.startAngle+(r?1:-1)*te*V,Z={x:o.x+Y*Math.cos(K),y:o.y+Y*Math.sin(K)};q[U.node.id()]=Z}return a.nodes().layoutPositions(this,e,function(ae){var ie=ae.id();return q[ie]}),this};var Uc,yB={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function jl(t){this.options=Ee({},yB,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(u){return u.data("id")===i}),l=e.some(function(u){return u.data("id")===s});return!o||!l});this.options.eles=this.options.eles.not(n)}jl.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Uc=!0:Uc=!1;var n=bB(e,r,t);Uc&&xB(n),t.randomize&&wB(n);var a=ln(),i=function(){SB(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(d){return!(r.stopped||d>=t.numIter||(EB(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var d=t.eles.nodes(),h=P2(n,t,d);d.layoutPositions(r,t,h)}},l=0,u=!0;if(t.animate===!0){var c=function(){for(var d=0;u&&d<t.refresh;)u=s(l),l++,d++;if(!u)C1(n,t),o();else{var h=ln();h-a>=t.animationThreshold&&i(),ul(c)}};c()}else{for(;u;)u=s(l),l++;C1(n,t),o()}return this};jl.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};jl.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var bB=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=Zt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},l=n.eles.components(),u={},c=0;c<l.length;c++)for(var f=l[c],d=0;d<f.length;d++){var h=f[d];u[h.id()]=c}for(var c=0;c<o.nodeSize;c++){var v=i[c],p=v.layoutDimensions(n),g={};g.isLocked=v.locked(),g.id=v.data("id"),g.parentId=v.data("parent"),g.cmptId=u[v.id()],g.children=[],g.positionX=v.position("x"),g.positionY=v.position("y"),g.offsetX=0,g.offsetY=0,g.height=p.w,g.width=p.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(v.style("padding")),g.padRight=parseFloat(v.style("padding")),g.padTop=parseFloat(v.style("padding")),g.padBottom=parseFloat(v.style("padding")),g.nodeRepulsion=st(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=c}for(var y=[],m=0,b=-1,_=[],c=0;c<o.nodeSize;c++){var v=o.layoutNodes[c],x=v.parentId;x!=null?o.layoutNodes[o.idToIndex[x]].children.push(v.id):(y[++b]=v.id,_.push(v.id))}for(o.graphSet.push(_);m<=b;){var S=y[m++],w=o.idToIndex[S],h=o.layoutNodes[w],E=h.children;if(E.length>0){o.graphSet.push(E);for(var c=0;c<E.length;c++)y[++b]=E[c]}}for(var c=0;c<o.graphSet.length;c++)for(var C=o.graphSet[c],d=0;d<C.length;d++){var T=o.idToIndex[C[d]];o.indexToGraph[T]=c}for(var c=0;c<o.edgeSize;c++){var A=a[c],P={};P.id=A.data("id"),P.sourceId=A.data("source"),P.targetId=A.data("target");var R=st(n.idealEdgeLength)?n.idealEdgeLength(A):n.idealEdgeLength,D=st(n.edgeElasticity)?n.edgeElasticity(A):n.edgeElasticity,L=o.idToIndex[P.sourceId],I=o.idToIndex[P.targetId],O=o.indexToGraph[L],B=o.indexToGraph[I];if(O!=B){for(var H=_B(P.sourceId,P.targetId,o),G=o.graphSet[H],N=0,g=o.layoutNodes[L];G.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],N++;for(g=o.layoutNodes[I];G.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],N++;R*=N*n.nestingFactor}P.idealLength=R,P.elasticity=D,o.layoutEdges.push(P)}return o},_B=function(e,r,n){var a=A2(e,r,0,n);return 2>a.count?0:a.graph},A2=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var l=i[o],u=a.idToIndex[l],c=a.layoutNodes[u].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=A2(e,r,f,a);if(d.count!==0)if(d.count===1){if(s++,s===2)break}else return d}}return{count:s,graph:n}},xB,wB=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},P2=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var l=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var u=i.w===0?.5:(l.positionX-i.x1)/i.w,c=i.h===0?.5:(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+c*a.h}}else return{x:l.positionX,y:l.positionY}}},SB=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=P2(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},EB=function(e,r,n){CB(e,r),AB(e),PB(e,r),RB(e),MB(e)},CB=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],l=s+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];kB(o,u,e,r)}},E1=function(e){return-1+2*e*Math.random()},kB=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;o===0&&l===0&&(o=E1(u),l=E1(u));var c=TB(e,r,o,l);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(o*o+l*l),h=f*o/d,v=f*l/d;else var p=pl(e,o,l),g=pl(r,-1*o,-1*l),y=g.x-p.x,m=g.y-p.y,b=y*y+m*m,d=Math.sqrt(b),f=(e.nodeRepulsion+r.nodeRepulsion)/b,h=f*y/d,v=f*m/d;e.isLocked||(e.offsetX-=h,e.offsetY-=v),r.isLocked||(r.offsetX+=h,r.offsetY+=v)}},TB=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},pl=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,l=n/r,u=s/o,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+s/2,c):0<r&&-1*u<=l&&l<=u?(c.x=a+o/2,c.y=i+o*n/2/r,c):0>r&&-1*u<=l&&l<=u?(c.x=a-o/2,c.y=i-o*n/2/r,c):0<n&&(l<=-1*u||l>=u)?(c.x=a+s*r/2/n,c.y=i+s/2,c):(0>n&&(l<=-1*u||l>=u)&&(c.x=a-s*r/2/n,c.y=i-s/2),c)},AB=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],l=e.layoutNodes[o],u=l.positionX-s.positionX,c=l.positionY-s.positionY;if(!(u===0&&c===0)){var f=pl(s,u,c),d=pl(l,-1*u,-1*c),h=d.x-f.x,v=d.y-f.y,p=Math.sqrt(h*h+v*v),g=Math.pow(a.idealLength-p,2)/a.elasticity;if(p!==0)var y=g*h/p,m=g*v/p;else var y=0,m=0;s.isLocked||(s.offsetX+=y,s.offsetY+=m),l.isLocked||(l.offsetX-=y,l.offsetY-=m)}}},PB=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],o=c.positionX,l=c.positionY;for(var f=0;f<s;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var h=o-d.positionX,v=l-d.positionY,p=Math.sqrt(h*h+v*v);if(p>n){var g=r.gravity*h/p,y=r.gravity*v/p;d.offsetX+=g,d.offsetY+=y}}}}},RB=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],l=e.layoutNodes[o],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,f=l.offsetY,d=0;d<u.length;d++){var h=e.layoutNodes[e.idToIndex[u[d]]];h.offsetX+=c,h.offsetY+=f,n[++i]=u[d]}l.offsetX=0,l.offsetY=0}}},MB=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=DB(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,R2(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},DB=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},R2=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return R2(a,r)}},C1=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,l=a[o]=a[o]||[];l.push(s)}for(var u=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}a.sort(function(m,b){return b.w*b.h-m.w*m.h});for(var h=0,v=0,p=0,g=0,y=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=h-c.x1,d.positionY+=v-c.y1)}h+=c.w+r.componentSpacing,p+=c.w+r.componentSpacing,g=Math.max(g,c.h),p>y&&(v+=g+r.componentSpacing,h=0,p=0,g=0)}}},LB={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function M2(t){this.options=Ee({},LB,t)}M2.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Zt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(X){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),l=Math.round(o),u=Math.round(i.w/i.h*o),c=function(F){if(F==null)return Math.min(l,u);var q=Math.min(l,u);q==l?l=F:u=F},f=function(F){if(F==null)return Math.max(l,u);var q=Math.max(l,u);q==l?l=F:u=F},d=e.rows,h=e.cols!=null?e.cols:e.columns;if(d!=null&&h!=null)l=d,u=h;else if(d!=null&&h==null)l=d,u=Math.ceil(s/l);else if(d==null&&h!=null)u=h,l=Math.ceil(s/u);else if(u*l>s){var v=c(),p=f();(v-1)*p>=s?c(v-1):(p-1)*v>=s&&f(p-1)}else for(;u*l<s;){var g=c(),y=f();(y+1)*g>=s?f(y+1):c(g+1)}var m=i.w/u,b=i.h/l;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var _=0;_<a.length;_++){var x=a[_],S=x._private.position;(S.x==null||S.y==null)&&(S.x=0,S.y=0);var w=x.layoutDimensions(e),E=e.avoidOverlapPadding,C=w.w+E,T=w.h+E;m=Math.max(m,C),b=Math.max(b,T)}for(var A={},P=function(F,q){return!!A["c-"+F+"-"+q]},R=function(F,q){A["c-"+F+"-"+q]=!0},D=0,L=0,I=function(){L++,L>=u&&(L=0,D++)},O={},B=0;B<a.length;B++){var H=a[B],G=e.position(H);if(G&&(G.row!==void 0||G.col!==void 0)){var N={row:G.row,col:G.col};if(N.col===void 0)for(N.col=0;P(N.row,N.col);)N.col++;else if(N.row===void 0)for(N.row=0;P(N.row,N.col);)N.row++;O[H.id()]=N,R(N.row,N.col)}}var $=function(F,q){var z,W;if(F.locked()||F.isParent())return!1;var te=O[F.id()];if(te)z=te.col*m+m/2+i.x1,W=te.row*b+b/2+i.y1;else{for(;P(D,L);)I();z=L*m+m/2+i.x1,W=D*b+b/2+i.y1,R(D,L),I()}return{x:z,y:W}};a.layoutPositions(this,e,$)}return this};var OB={ready:function(){},stop:function(){}};function ry(t){this.options=Ee({},OB,t)}ry.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};ry.prototype.stop=function(){return this};var IB={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function D2(t){this.options=Ee({},IB,t)}D2.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=st(t.positions);function a(i){if(t.positions==null)return nL(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s??null}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var BB={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function L2(t){this.options=Ee({},BB,t)}L2.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Zt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var FB=[{name:"breadthfirst",impl:C2},{name:"circle",impl:k2},{name:"concentric",impl:T2},{name:"cose",impl:jl},{name:"grid",impl:M2},{name:"null",impl:ry},{name:"preset",impl:D2},{name:"random",impl:L2}];function O2(t){this.options=t,this.notifications=0}var k1=function(){},T1=function(){throw new Error("A headless instance can not render images")};O2.prototype={recalculateRenderedStyle:k1,notify:function(){this.notifications++},init:k1,isHeadless:function(){return!0},png:T1,jpg:T1};var ny={};ny.arrowShapeWidth=.3;ny.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,c,f,d,h,v,p){var g=h.x-f/2-p,y=h.x+f/2+p,m=h.y-f/2-p,b=h.y+f/2+p,_=g<=u&&u<=y&&m<=c&&c<=b;return _},n=function(u,c,f,d,h){var v=u*Math.cos(d)-c*Math.sin(d),p=u*Math.sin(d)+c*Math.cos(d),g=v*f,y=p*f,m=g+h.x,b=y+h.y;return{x:m,y:b}},a=function(u,c,f,d){for(var h=[],v=0;v<u.length;v+=2){var p=u[v],g=u[v+1];h.push(n(p,g,c,f,d))}return h},i=function(u){for(var c=[],f=0;f<u.length;f++){var d=u[f];c.push(d.x,d.y)}return c},s=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},o=function(u,c){we(c)&&(c=t[c]),t[u]=Ee({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,h,v,p,g,y){var m=i(a(this.points,v+2*y,p,g)),b=ar(d,h,m);return b},roughCollide:r,draw:function(d,h,v,p){var g=a(this.points,h,v,p);e.arrowShapeImpl("polygon")(d,g)},spacing:function(d){return 0},gap:s},c)};o("none",{collide:cl,roughCollide:cl,draw:Vm,spacing:$0,gap:$0}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,c,f,d,h){var v=a(this.points,c,f,d),p=this.controlPoint,g=n(p[0],p[1],c,f,d);e.arrowShapeImpl(this.name)(u,v,g)},gap:function(u){return s(u)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,f,d,h,v,p){var g=i(a(this.points,f+2*p,d,h)),y=i(a(this.pointsTee,f+2*p,d,h)),m=ar(u,c,g)||ar(u,c,y);return m},draw:function(u,c,f,d,h){var v=a(this.points,c,f,d),p=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(u,v,p)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,f,d,h,v,p){var g=h,y=Math.pow(g.x-u,2)+Math.pow(g.y-c,2)<=Math.pow((f+2*p)*this.radius,2),m=i(a(this.points,f+2*p,d,h));return ar(u,c,m)||y},draw:function(u,c,f,d,h){var v=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(u,v,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var f=this.baseCrossLinePts.slice(),d=c/u,h=3,v=5;return f[h]=f[h]-d,f[v]=f[v]-d,f},collide:function(u,c,f,d,h,v,p){var g=i(a(this.points,f+2*p,d,h)),y=i(a(this.crossLinePts(f,v),f+2*p,d,h)),m=ar(u,c,g)||ar(u,c,y);return m},draw:function(u,c,f,d,h){var v=a(this.points,c,f,d),p=a(this.crossLinePts(c,h),c,f,d);e.arrowShapeImpl(this.name)(u,v,p)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return s(u)*.525}}),o("circle",{radius:.15,collide:function(u,c,f,d,h,v,p){var g=h,y=Math.pow(g.x-u,2)+Math.pow(g.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return y},draw:function(u,c,f,d,h){e.arrowShapeImpl(this.name)(u,d.x,d.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Ca={};Ca.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),l=r.zoom(),u=((t-a)/s-o.x)/l,c=((e-i)/s-o.y)/l;return[u,c]};Ca.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(y){return parseFloat(r.getPropertyValue(y))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,c=i.left+i.right,f=e.width/(s+c),d=s-l,h=o-u,v=e.left+a.left+i.left,p=e.top+a.top+i.top;return this.containerBB=[v,p,d,h,f]};Ca.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ca.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Ca.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),c=(n?24:8)/l,f=(n?8:2)/l,d=(n?8:2)/l,h=1/0,v,p;r&&(s=s.interactive);function g(w,E){if(w.isNode()){if(p)return;p=w,o.push(w)}if(w.isEdge()&&(E==null||E<h))if(v){if(v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value){for(var C=0;C<o.length;C++)if(o[C].isEdge()){o[C]=w,v=w,h=E??h;break}}}else o.push(w),v=w,h=E??h}function y(w){var E=w.outerWidth()+2*f,C=w.outerHeight()+2*f,T=E/2,A=C/2,P=w.position(),R=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,D=w._private.rscratch;if(P.x-T<=t&&t<=P.x+T&&P.y-A<=e&&e<=P.y+A){var L=i.nodeShapes[a.getNodeShape(w)];if(L.checkPoint(t,e,0,E,C,P.x,P.y,R,D))return g(w,0),!0}}function m(w){var E=w._private,C=E.rscratch,T=w.pstyle("width").pfValue,A=w.pstyle("arrow-scale").value,P=T/2+c,R=P*P,D=P*2,B=E.source,H=E.target,L;if(C.edgeType==="segments"||C.edgeType==="straight"||C.edgeType==="haystack"){for(var I=C.allpts,O=0;O+3<I.length;O+=2)if(mL(t,e,I[O],I[O+1],I[O+2],I[O+3],D)&&R>(L=wL(t,e,I[O],I[O+1],I[O+2],I[O+3])))return g(w,L),!0}else if(C.edgeType==="bezier"||C.edgeType==="multibezier"||C.edgeType==="self"||C.edgeType==="compound"){for(var I=C.allpts,O=0;O+5<C.allpts.length;O+=4)if(yL(t,e,I[O],I[O+1],I[O+2],I[O+3],I[O+4],I[O+5],D)&&R>(L=xL(t,e,I[O],I[O+1],I[O+2],I[O+3],I[O+4],I[O+5])))return g(w,L),!0}for(var B=B||E.source,H=H||E.target,G=a.getArrowWidth(T,A),N=[{name:"source",x:C.arrowStartX,y:C.arrowStartY,angle:C.srcArrowAngle},{name:"target",x:C.arrowEndX,y:C.arrowEndY,angle:C.tgtArrowAngle},{name:"mid-source",x:C.midX,y:C.midY,angle:C.midsrcArrowAngle},{name:"mid-target",x:C.midX,y:C.midY,angle:C.midtgtArrowAngle}],O=0;O<N.length;O++){var $=N[O],X=i.arrowShapes[w.pstyle($.name+"-arrow-shape").value],F=w.pstyle("width").pfValue;if(X.roughCollide(t,e,G,$.angle,{x:$.x,y:$.y},F,c)&&X.collide(t,e,G,$.angle,{x:$.x,y:$.y},F,c))return g(w),!0}u&&o.length>0&&(y(B),y(H))}function b(w,E,C){return nr(w,E,C)}function _(w,E){var C=w._private,T=d,A;E?A=E+"-":A="",w.boundingBox();var P=C.labelBounds[E||"main"],R=w.pstyle(A+"label").value,D=w.pstyle("text-events").strValue==="yes";if(!(!D||!R)){var L=b(C.rscratch,"labelX",E),I=b(C.rscratch,"labelY",E),O=b(C.rscratch,"labelAngle",E),B=w.pstyle(A+"text-margin-x").pfValue,H=w.pstyle(A+"text-margin-y").pfValue,G=P.x1-T-B,N=P.x2+T-B,$=P.y1-T-H,X=P.y2+T-H;if(O){var F=Math.cos(O),q=Math.sin(O),z=function(Z,ae){return Z=Z-L,ae=ae-I,{x:Z*F-ae*q+L,y:Z*q+ae*F+I}},W=z(G,$),te=z(G,X),Y=z(N,$),V=z(N,X),U=[W.x+B,W.y+H,Y.x+B,Y.y+H,V.x+B,V.y+H,te.x+B,te.y+H];if(ar(t,e,U))return g(w),!0}else if(Sn(P,t,e))return g(w),!0}}for(var x=s.length-1;x>=0;x--){var S=s[x];S.isNode()?y(S)||_(S):m(S)||_(S)||_(S,"source")||_(S,"target")}return o};Ca.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],l=Math.min(t,r),u=Math.max(t,r),c=Math.min(e,n),f=Math.max(e,n);t=l,r=u,e=c,n=f;var d=Zt({x1:t,y1:e,x2:r,y2:n}),h=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}],v=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function p(Z,ae,ie){return nr(Z,ae,ie)}function g(Z,ae){var ie=Z._private,Ae=s,le="";Z.boundingBox();var xe=ie.labelBounds.main;if(!xe)return null;var me=p(ie.rscratch,"labelX",ae),ue=p(ie.rscratch,"labelY",ae),ge=p(ie.rscratch,"labelAngle",ae),de=Z.pstyle(le+"text-margin-x").pfValue,pe=Z.pstyle(le+"text-margin-y").pfValue,ye=xe.x1-Ae-de,ke=xe.x2+Ae-de,Be=xe.y1-Ae-pe,qe=xe.y2+Ae-pe;if(ge){var Le=Math.cos(ge),Ne=Math.sin(ge),Ce=function(ee,M){return ee=ee-me,M=M-ue,{x:ee*Le-M*Ne+me,y:ee*Ne+M*Le+ue}};return[Ce(ye,Be),Ce(ke,Be),Ce(ke,qe),Ce(ye,qe)]}else return[{x:ye,y:Be},{x:ke,y:Be},{x:ke,y:qe},{x:ye,y:qe}]}function y(Z,ae,ie,Ae){function le(xe,me,ue){return(ue.y-xe.y)*(me.x-xe.x)>(me.y-xe.y)*(ue.x-xe.x)}return le(Z,ie,Ae)!==le(ae,ie,Ae)&&le(Z,ae,ie)!==le(Z,ae,Ae)}for(var m=0;m<a.length;m++){var b=a[m];if(b.isNode()){var _=b,x=_.pstyle("text-events").strValue==="yes",S=_.pstyle("box-selection").strValue,w=_.pstyle("box-select-labels").strValue==="yes";if(S==="none")continue;var E=(S==="overlap"||w)&&x,C=_.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:E});if(S==="contain"){var T=!1;if(w&&x){var A=g(_);A&&Wu(A,h)&&(o.push(_),T=!0)}!T&&$T(d,C)&&o.push(_)}else if(S==="overlap"&&Um(d,C)){var P=_.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),R=[{x:P.x1,y:P.y1},{x:P.x2,y:P.y1},{x:P.x2,y:P.y2},{x:P.x1,y:P.y2}];if(Wu(R,h))o.push(_);else{var D=g(_);D&&Wu(D,h)&&o.push(_)}}}else{var L=b,I=L._private,O=I.rscratch,B=L.pstyle("box-selection").strValue;if(B==="none")continue;if(B==="contain"){if(O.startX!=null&&O.startY!=null&&!Sn(d,O.startX,O.startY)||O.endX!=null&&O.endY!=null&&!Sn(d,O.endX,O.endY))continue;if(O.edgeType==="bezier"||O.edgeType==="multibezier"||O.edgeType==="self"||O.edgeType==="compound"||O.edgeType==="segments"||O.edgeType==="haystack"){for(var H=I.rstyle.bezierPts||I.rstyle.linePts||I.rstyle.haystackPts,G=!0,N=0;N<H.length;N++)if(!U0(d,H[N])){G=!1;break}G&&o.push(L)}else O.edgeType==="straight"&&o.push(L)}else if(B==="overlap"){var $=!1;if(O.startX!=null&&O.startY!=null&&O.endX!=null&&O.endY!=null&&(Sn(d,O.startX,O.startY)||Sn(d,O.endX,O.endY)))o.push(L),$=!0;else if(!$&&O.edgeType==="haystack"){for(var X=I.rstyle.haystackPts,F=0;F<X.length;F++)if(U0(d,X[F])){o.push(L),$=!0;break}}if(!$){var q=I.rstyle.bezierPts||I.rstyle.linePts||I.rstyle.haystackPts;if((!q||q.length<2)&&O.edgeType==="straight"&&O.startX!=null&&O.startY!=null&&O.endX!=null&&O.endY!=null&&(q=[{x:O.startX,y:O.startY},{x:O.endX,y:O.endY}]),!q||q.length<2)continue;for(var z=0;z<q.length-1;z++){for(var W=q[z],te=q[z+1],Y=0;Y<v.length;Y++){var V=pt(v[Y],2),U=V[0],K=V[1];if(y(W,te,U,K)){o.push(L),$=!0;break}}if($)break}}}}}return o};var ml={};ml.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",l,u,c,f,d,h,y,m;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,h=e.arrowEndY),y=e.midX,m=e.midY,i)l=c-e.segpts[0],u=f-e.segpts[1];else if(a||s||o||n){var v=e.allpts,p=kt(v[0],v[2],v[4],.1),g=kt(v[1],v[3],v[5],.1);l=c-p,u=f-g}else l=c-y,u=f-m;e.srcArrowAngle=no(l,u);var y=e.midX,m=e.midY;if(r&&(y=(c+d)/2,m=(f+h)/2),l=d-c,u=h-f,i){var v=e.allpts;if(v.length/2%2===0){var b=v.length/2,_=b-2;l=v[b]-v[_],u=v[b+1]-v[_+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var b=v.length/2-1,_=b-2;l=v[b]-v[_],u=v[b+1]-v[_+1]}}else if(a||s||o){var v=e.allpts,x=e.ctrlpts,S,w,E,C;if(x.length/2%2===0){var T=v.length/2-1,A=T+2,P=A+2;S=kt(v[T],v[A],v[P],0),w=kt(v[T+1],v[A+1],v[P+1],0),E=kt(v[T],v[A],v[P],1e-4),C=kt(v[T+1],v[A+1],v[P+1],1e-4)}else{var A=v.length/2-1,T=A-2,P=A+2;S=kt(v[T],v[A],v[P],.4999),w=kt(v[T+1],v[A+1],v[P+1],.4999),E=kt(v[T],v[A],v[P],.5),C=kt(v[T+1],v[A+1],v[P+1],.5)}l=E-S,u=C-w}if(e.midtgtArrowAngle=no(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var b=v.length/2-1,R=b+2;l=-(v[R]-v[b]),u=-(v[R+1]-v[b+1])}}}if(e.midsrcArrowAngle=no(l,u),i)l=d-e.segpts[e.segpts.length-2],u=h-e.segpts[e.segpts.length-1];else if(a||s||o||n){var v=e.allpts,D=v.length,p=kt(v[D-6],v[D-4],v[D-2],.9),g=kt(v[D-5],v[D-3],v[D-1],.9);l=d-p,u=h-g}else l=d-y,u=h-m;e.tgtArrowAngle=no(l,u)};ml.getArrowWidth=ml.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var tm,rm,Mr={},hr={},A1,P1,ua,Vo,jr,Zn,aa,Ar,Fa,fo,I2,B2,nm,am,R1,M1=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},qB=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},NB=function(e,r,n,a,i){if(e!==R1?M1(r,e,Mr):qB(hr,Mr),M1(r,n,hr),A1=Mr.nx*hr.ny-Mr.ny*hr.nx,P1=Mr.nx*hr.nx-Mr.ny*-hr.ny,jr=Math.asin(Math.max(-1,Math.min(1,A1))),Math.abs(jr)<1e-6){tm=r.x,rm=r.y,aa=Fa=0;return}ua=1,Vo=!1,P1<0?jr<0?jr=Math.PI+jr:(jr=Math.PI-jr,ua=-1,Vo=!0):jr>0&&(ua=-1,Vo=!0),r.radius!==void 0?Fa=r.radius:Fa=a,Zn=jr/2,fo=Math.min(Mr.len/2,hr.len/2),i?(Ar=Math.abs(Math.cos(Zn)*Fa/Math.sin(Zn)),Ar>fo?(Ar=fo,aa=Math.abs(Ar*Math.sin(Zn)/Math.cos(Zn))):aa=Fa):(Ar=Math.min(fo,Fa),aa=Math.abs(Ar*Math.sin(Zn)/Math.cos(Zn))),nm=r.x+hr.nx*Ar,am=r.y+hr.ny*Ar,tm=nm-hr.ny*aa*ua,rm=am+hr.nx*aa*ua,I2=r.x+Mr.nx*Ar,B2=r.y+Mr.ny*Ar,R1=r};function F2(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function ay(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(NB(t,e,r,n,a),{cx:tm,cy:rm,radius:aa,startX:I2,startY:B2,stopX:nm,stopY:am,startAngle:Mr.ang+Math.PI/2*ua,endAngle:hr.ang-Math.PI/2*ua,counterClockwise:Vo})}var xs=.01,zB=Math.sqrt(2*xs),Kt={};Kt.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),l=s.units!=null&&o.units!=null,u=function(x,S,w,E){var C=E-S,T=w-x,A=Math.sqrt(T*T+C*C);return{x:-C/A,y:T/A}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(l){var f=this.manualEndptToPx(t.source()[0],s),d=pt(f,2),h=d[0],v=d[1],p=this.manualEndptToPx(t.target()[0],o),g=pt(p,2),y=g[0],m=g[1],b={x1:h,y1:v,x2:y,y2:m};a=u(h,v,y,m),i=b}else Ue("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Kt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,l=s.position(),u=o.position(),c=s.width(),f=o.width(),d=s.height(),h=o.height(),v=r.pstyle("haystack-radius").value,p=v/2;a.haystackPts=a.allpts=[a.source.x*c*p+l.x,a.source.y*d*p+l.y,a.target.x*f*p+u.x,a.target.y*h*p+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Kt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],u=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<o;c++){var f=n.pfValue[c],d=a.pfValue[c],h=1-f,v=f,p=this.findMidptPtsEtc(t,e),g=p.midptPts,y=p.vectorNormInverse,m={x:g.x1*h+g.x2*v,y:g.y1*h+g.y2*v};r.segpts.push(m.x+y.x*d,m.y+y.y*d),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:l),r.isArcRadius.push((s.pfValue[c]!==void 0?s.pfValue[c]:u)==="arc-radius")}};Kt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=r,h=f;n&&(d=0,h=l);var v=u-Math.PI/2,p=v-c/2,g=v+c/2,y=u+"_"+c;d=i[y]===void 0?i[y]=0:++i[y],a.ctrlpts=[s.x+Math.cos(p)*1.4*h*(d/3+1),s.y+Math.sin(p)*1.4*h*(d/3+1),s.x+Math.cos(g)*1.4*h*(d/3+1),s.y+Math.sin(g)*1.4*h*(d/3+1)]};Kt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),h=d?d.pfValue[0]:void 0,v=r,p=f;n&&(v=0,p=h);var g=50,y={x:i.x-o/2,y:i.y-l/2},m={x:s.x-u/2,y:s.y-c/2},b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)},_=.5,x=Math.max(_,Math.log(o*xs)),S=Math.max(_,Math.log(u*xs));a.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*x,b.x-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*S,b.y]};Kt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Kt.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),l=t.pstyle("control-point-weights"),u=o&&l?Math.min(o.value.length,l.value.length):1,c=o?o.pfValue[0]:void 0,f=l.value[0],d=n;i.edgeType=d?"multibezier":"bezier",i.ctrlpts=[];for(var h=0;h<u;h++){var v=(.5-e.eles.length/2+r)*s*(a?-1:1),p=void 0,g=Gm(v);d&&(c=o?o.pfValue[h]:s,f=l.value[h]),n?p=c:p=c!==void 0?g*c:void 0;var y=p!==void 0?p:v,m=1-f,b=f,_=this.findMidptPtsEtc(t,e),x=_.midptPts,S=_.vectorNormInverse,w={x:x.x1*m+x.x2*b,y:x.y1*m+x.y2*b};i.ctrlpts.push(w.x+S.x*y,w.y+S.y*y)}};Kt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",l="upward",u="auto",c=e.posPts,f=e.srcW,d=e.srcH,h=e.tgtW,v=e.tgtH,p=t.pstyle("edge-distances").value,g=p!=="node-position",y=t.pstyle("taxi-direction").value,m=y,b=t.pstyle("taxi-turn"),_=b.units==="%",x=b.pfValue,S=x<0,w=t.pstyle("taxi-turn-min-distance").pfValue,E=g?(f+h)/2:0,C=g?(d+v)/2:0,T=c.x2-c.x1,A=c.y2-c.y1,P=function(M,j){return M>0?Math.max(M-j,0):Math.min(M+j,0)},R=P(T,E),D=P(A,C),L=!1;m===u?y=Math.abs(R)>Math.abs(D)?a:n:m===l||m===o?(y=n,L=!0):(m===i||m===s)&&(y=a,L=!0);var I=y===n,O=I?D:R,B=I?A:T,H=Gm(B),G=!1;!(L&&(_||S))&&(m===o&&B<0||m===l&&B>0||m===i&&B>0||m===s&&B<0)&&(H*=-1,O=H*Math.abs(O),G=!0);var N;if(_){var $=x<0?1+x:x;N=$*O}else{var X=x<0?O:0;N=X+x*H}var F=function(M){return Math.abs(M)<w||Math.abs(M)>=Math.abs(O)},q=F(N),z=F(Math.abs(O)-Math.abs(N)),W=q||z;if(W&&!G)if(I){var te=Math.abs(B)<=d/2,Y=Math.abs(T)<=h/2;if(te){var V=(c.x1+c.x2)/2,U=c.y1,K=c.y2;r.segpts=[V,U,V,K]}else if(Y){var Z=(c.y1+c.y2)/2,ae=c.x1,ie=c.x2;r.segpts=[ae,Z,ie,Z]}else r.segpts=[c.x1,c.y2]}else{var Ae=Math.abs(B)<=f/2,le=Math.abs(A)<=v/2;if(Ae){var xe=(c.y1+c.y2)/2,me=c.x1,ue=c.x2;r.segpts=[me,xe,ue,xe]}else if(le){var ge=(c.x1+c.x2)/2,de=c.y1,pe=c.y2;r.segpts=[ge,de,ge,pe]}else r.segpts=[c.x2,c.y1]}else if(I){var ye=c.y1+N+(g?d/2*H:0),ke=c.x1,Be=c.x2;r.segpts=[ke,ye,Be,ye]}else{var qe=c.x1+N+(g?f/2*H:0),Le=c.y1,Ne=c.y2;r.segpts=[qe,Le,qe,Ne]}if(r.isRound){var Ce=t.pstyle("taxi-radius").value,ce=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Ce),r.isArcRadius=new Array(r.segpts.length/2).fill(ce)}};Kt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,h=e.srcRs,v=e.tgtRs,p=!oe(r.startX)||!oe(r.startY),g=!oe(r.arrowStartX)||!oe(r.arrowStartY),y=!oe(r.endX)||!oe(r.endY),m=!oe(r.arrowEndX)||!oe(r.arrowEndY),b=3,_=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,x=b*_,S=ma({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=S<x,E=ma({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),C=E<x,T=!1;if(p||g||w){T=!0;var A={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},P=Math.sqrt(A.x*A.x+A.y*A.y),R={x:A.x/P,y:A.y/P},D=Math.max(i,s),L={x:r.ctrlpts[0]+R.x*2*D,y:r.ctrlpts[1]+R.y*2*D},I=u.intersectLine(n.x,n.y,i,s,L.x,L.y,0,f,h);w?(r.ctrlpts[0]=r.ctrlpts[0]+R.x*(x-S),r.ctrlpts[1]=r.ctrlpts[1]+R.y*(x-S)):(r.ctrlpts[0]=I[0]+R.x*x,r.ctrlpts[1]=I[1]+R.y*x)}if(y||m||C){T=!0;var O={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},B=Math.sqrt(O.x*O.x+O.y*O.y),H={x:O.x/B,y:O.y/B},G=Math.max(i,s),N={x:r.ctrlpts[0]+H.x*2*G,y:r.ctrlpts[1]+H.y*2*G},$=c.intersectLine(a.x,a.y,o,l,N.x,N.y,0,d,v);C?(r.ctrlpts[0]=r.ctrlpts[0]+H.x*(x-E),r.ctrlpts[1]=r.ctrlpts[1]+H.y*(x-E)):(r.ctrlpts[0]=$[0]+H.x*x,r.ctrlpts[1]=$[1]+H.y*x)}T&&this.findEndpoints(t)}};Kt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=kt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=kt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(ay({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2];if(d.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-h.y,h.x-f.x]}else{var v=[f.x-d.cx,f.y-d.cy],p=d.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(g){return g*p}),e.midX=d.cx+v[0],e.midY=d.cy+v[1],e.midVector=v}}}}};Kt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||oe(e.startX)&&oe(e.startY)&&oe(e.endX)&&oe(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ue("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Kt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new nn,s=function(C,T){return[].concat(ol(C),[T?1:0]).join("-")},o=[],l=[],u=0;u<t.length;u++){var c=t[u],f=c._private,d=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(d==="haystack"){l.push(c);continue}var h=d==="unbundled-bezier"||wn(d,"segments")||d==="straight"||d==="straight-triangle"||wn(d,"taxi"),v=d==="unbundled-bezier"||d==="bezier",p=f.source,g=f.target,y=p.poolIndex(),m=g.poolIndex(),b=[y,m].sort(),_=s(b,h),x=i.get(_);x==null&&(x={eles:[]},o.push({pairId:b,edgeIsUnbundled:h}),i.set(_,x)),x.eles.push(c),h&&(x.hasUnbundled=!0),v&&(x.hasBezier=!0)}}for(var S=function(){var C=o[w],T=C.pairId,A=C.edgeIsUnbundled,P=s(T,A),R=i.get(P),D;if(!R.hasUnbundled){var L=R.eles[0].parallelEdges().filter(function(ce){return ce.isBundledBezier()});Hm(R.eles),L.forEach(function(ce){return R.eles.push(ce)}),R.eles.sort(function(ce,ee){return ce.poolIndex()-ee.poolIndex()})}var I=R.eles[0],O=I.source(),B=I.target();if(O.poolIndex()>B.poolIndex()){var H=O;O=B,B=H}var G=R.srcPos=O.position(),N=R.tgtPos=B.position(),$=R.srcW=O.outerWidth(),X=R.srcH=O.outerHeight(),F=R.tgtW=B.outerWidth(),q=R.tgtH=B.outerHeight(),z=R.srcShape=r.nodeShapes[e.getNodeShape(O)],W=R.tgtShape=r.nodeShapes[e.getNodeShape(B)],te=R.srcCornerRadius=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,Y=R.tgtCornerRadius=B.pstyle("corner-radius").value==="auto"?"auto":B.pstyle("corner-radius").pfValue,V=R.tgtRs=B._private.rscratch,U=R.srcRs=O._private.rscratch;R.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var K=0;K<R.eles.length;K++){var Z=R.eles[K],ae=Z[0]._private.rscratch,ie=Z.pstyle("curve-style").value,Ae=ie==="unbundled-bezier"||wn(ie,"segments")||wn(ie,"taxi"),le=!O.same(Z.source());if(!R.calculatedIntersection&&O!==B&&(R.hasBezier||R.hasUnbundled)){R.calculatedIntersection=!0;var xe=z.intersectLine(G.x,G.y,$,X,N.x,N.y,0,te,U),me=R.srcIntn=xe,ue=W.intersectLine(N.x,N.y,F,q,G.x,G.y,0,Y,V),ge=R.tgtIntn=ue,de=R.intersectionPts={x1:xe[0],x2:ue[0],y1:xe[1],y2:ue[1]},pe=R.posPts={x1:G.x,x2:N.x,y1:G.y,y2:N.y},ye=ue[1]-xe[1],ke=ue[0]-xe[0],Be=Math.sqrt(ke*ke+ye*ye);oe(Be)&&Be>=zB||(Be=Math.sqrt(Math.max(ke*ke,xs)+Math.max(ye*ye,xs)));var qe=R.vector={x:ke,y:ye},Le=R.vectorNorm={x:qe.x/Be,y:qe.y/Be},Ne={x:-Le.y,y:Le.x};R.nodesOverlap=!oe(Be)||W.checkPoint(xe[0],xe[1],0,F,q,N.x,N.y,Y,V)||z.checkPoint(ue[0],ue[1],0,$,X,G.x,G.y,te,U),R.vectorNormInverse=Ne,D={nodesOverlap:R.nodesOverlap,dirCounts:R.dirCounts,calculatedIntersection:!0,hasBezier:R.hasBezier,hasUnbundled:R.hasUnbundled,eles:R.eles,srcPos:N,srcRs:V,tgtPos:G,tgtRs:U,srcW:F,srcH:q,tgtW:$,tgtH:X,srcIntn:ge,tgtIntn:me,srcShape:W,tgtShape:z,posPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},intersectionPts:{x1:de.x2,y1:de.y2,x2:de.x1,y2:de.y1},vector:{x:-qe.x,y:-qe.y},vectorNorm:{x:-Le.x,y:-Le.y},vectorNormInverse:{x:-Ne.x,y:-Ne.y}}}var Ce=le?D:R;ae.nodesOverlap=Ce.nodesOverlap,ae.srcIntn=Ce.srcIntn,ae.tgtIntn=Ce.tgtIntn,ae.isRound=ie.startsWith("round"),a&&(O.isParent()||O.isChild()||B.isParent()||B.isChild())&&(O.parents().anySame(B)||B.parents().anySame(O)||O.same(B)&&O.isParent())?e.findCompoundLoopPoints(Z,Ce,K,Ae):O===B?e.findLoopPoints(Z,Ce,K,Ae):ie.endsWith("segments")?e.findSegmentsPoints(Z,Ce):ie.endsWith("taxi")?e.findTaxiPoints(Z,Ce):ie==="straight"||!Ae&&R.eles.length%2===1&&K===Math.floor(R.eles.length/2)?e.findStraightEdgePoints(Z):e.findBezierPoints(Z,Ce,K,Ae,le),e.findEndpoints(Z),e.tryToCorrectInvalidPoints(Z,Ce),e.checkForInvalidEdgeWarning(Z),e.storeAllpts(Z),e.storeEdgeProjections(Z),e.calculateArrowAngles(Z),e.recalculateEdgeLabelProjections(Z),e.calculateLabelAngles(Z)}},w=0;w<o.length;w++)S();this.findHaystackPoints(l)}};function q2(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Kt.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return q2(e.segpts)};Kt.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return q2(e.ctrlpts)};Kt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Ns={};Ns.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(a,i),c=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};Ns.findEndpoints=function(t){var e,r,n,a,i=this,s,o=t.source()[0],l=t.target()[0],u=o.position(),c=l.position(),f=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,h=t.pstyle("target-distance-from-node").pfValue,v=t.pstyle("source-distance-from-node").pfValue,p=o._private.rscratch,g=l._private.rscratch,y=t.pstyle("curve-style").value,m=t._private.rscratch,b=m.edgeType,_=wn(y,"taxi"),x=b==="self"||b==="compound",S=b==="bezier"||b==="multibezier"||x,w=b!=="bezier",E=b==="straight"||b==="segments",C=b==="segments",T=S||w||E,A=x||_,P=t.pstyle("source-endpoint"),R=A?"outside-to-node":P.value,D=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,L=t.pstyle("target-endpoint"),I=A?"outside-to-node":L.value,O=l.pstyle("corner-radius").value==="auto"?"auto":l.pstyle("corner-radius").pfValue;m.srcManEndpt=P,m.tgtManEndpt=L;var B,H,G,N,$=(e=(L==null||(r=L.pfValue)===null||r===void 0?void 0:r.length)===2?L.pfValue:null)!==null&&e!==void 0?e:[0,0],X=(n=(P==null||(a=P.pfValue)===null||a===void 0?void 0:a.length)===2?P.pfValue:null)!==null&&n!==void 0?n:[0,0];if(S){var F=[m.ctrlpts[0],m.ctrlpts[1]],q=w?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:F;B=q,H=F}else if(E){var z=C?m.segpts.slice(0,2):[c.x+$[0],c.y+$[1]],W=C?m.segpts.slice(m.segpts.length-2):[u.x+X[0],u.y+X[1]];B=W,H=z}if(I==="inside-to-node")s=[c.x,c.y];else if(L.units)s=this.manualEndptToPx(l,L);else if(I==="outside-to-line")s=m.tgtIntn;else if(I==="outside-to-node"||I==="outside-to-node-or-label"?G=B:(I==="outside-to-line"||I==="outside-to-line-or-label")&&(G=[u.x,u.y]),s=i.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),G[0],G[1],0,O,g),I==="outside-to-node-or-label"||I==="outside-to-line-or-label"){var te=l._private.rscratch,Y=te.labelWidth,V=te.labelHeight,U=te.labelX,K=te.labelY,Z=Y/2,ae=V/2,ie=l.pstyle("text-valign").value;ie==="top"?K-=ae:ie==="bottom"&&(K+=ae);var Ae=l.pstyle("text-halign").value;Ae==="left"?U-=Z:Ae==="right"&&(U+=Z);var le=ps(G[0],G[1],[U-Z,K-ae,U+Z,K-ae,U+Z,K+ae,U-Z,K+ae],c.x,c.y);if(le.length>0){var xe=u,me=na(xe,Ua(s)),ue=na(xe,Ua(le)),ge=me;if(ue<me&&(s=le,ge=ue),le.length>2){var de=na(xe,{x:le[2],y:le[3]});de<ge&&(s=[le[2],le[3]])}}}var pe=ao(s,B,i.arrowShapes[f].spacing(t)+h),ye=ao(s,B,i.arrowShapes[f].gap(t)+h);if(m.endX=ye[0],m.endY=ye[1],m.arrowEndX=pe[0],m.arrowEndY=pe[1],R==="inside-to-node")s=[u.x,u.y];else if(P.units)s=this.manualEndptToPx(o,P);else if(R==="outside-to-line")s=m.srcIntn;else if(R==="outside-to-node"||R==="outside-to-node-or-label"?N=H:(R==="outside-to-line"||R==="outside-to-line-or-label")&&(N=[c.x,c.y]),s=i.nodeShapes[this.getNodeShape(o)].intersectLine(u.x,u.y,o.outerWidth(),o.outerHeight(),N[0],N[1],0,D,p),R==="outside-to-node-or-label"||R==="outside-to-line-or-label"){var ke=o._private.rscratch,Be=ke.labelWidth,qe=ke.labelHeight,Le=ke.labelX,Ne=ke.labelY,Ce=Be/2,ce=qe/2,ee=o.pstyle("text-valign").value;ee==="top"?Ne-=ce:ee==="bottom"&&(Ne+=ce);var M=o.pstyle("text-halign").value;M==="left"?Le-=Ce:M==="right"&&(Le+=Ce);var j=ps(N[0],N[1],[Le-Ce,Ne-ce,Le+Ce,Ne-ce,Le+Ce,Ne+ce,Le-Ce,Ne+ce],u.x,u.y);if(j.length>0){var Q=c,J=na(Q,Ua(s)),re=na(Q,Ua(j)),he=J;if(re<J&&(s=[j[0],j[1]],he=re),j.length>2){var ne=na(Q,{x:j[2],y:j[3]});ne<he&&(s=[j[2],j[3]])}}}var be=ao(s,H,i.arrowShapes[d].spacing(t)+v),ve=ao(s,H,i.arrowShapes[d].gap(t)+v);m.startX=ve[0],m.startY=ve[1],m.arrowStartX=be[0],m.arrowStartY=be[1],T&&(!oe(m.startX)||!oe(m.startY)||!oe(m.endX)||!oe(m.endY)?m.badLine=!0:m.badLine=!1)};Ns.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Ns.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var iy={};function $B(t,e,r){for(var n=function(u,c,f,d){return kt(u,c,f,d)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}iy.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)$B(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};iy.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Vr={};Vr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!On(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(u){case"left":r=l.x-i/2-o;break;case"right":r=l.x+i/2+o;break;default:r=l.x}switch(c){case"top":n=l.y-s/2-o;break;case"bottom":n=l.y+s/2+o;break;default:n=l.y}f.labelX=r,f.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var N2=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},z2=function(e,r){var n=r.x-e.x,a=r.y-e.y;return N2(n,a)},VB=function(e,r,n,a){var i=gs(0,a-.001,1),s=gs(0,a+.001,1),o=Xa(e,r,n,i),l=Xa(e,r,n,s);return z2(o,l)};Vr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(f,d,h){Qr(r.rscratch,f,d,h),Qr(r.rstyle,f,d,h)};s("labelX",null,e.x),s("labelY",null,e.y);var o=N2(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var h={x:n.allpts[d],y:n.allpts[d+1]},v={x:n.allpts[d+2],y:n.allpts[d+3]},p={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:h,p1:v,p2:p,startDist:0,length:0,segments:[]})}var g=r.rstyle.bezierPts,y=a.bezierProjPcts.length;function m(w,E,C,T,A){var P=ma(E,C),R=w.segments[w.segments.length-1],D={p0:E,p1:C,t0:T,t1:A,startDist:R?R.startDist+R.length:0,length:P};w.segments.push(D),w.length+=P}for(var b=0;b<f.length;b++){var _=f[b],x=f[b-1];x&&(_.startDist=x.startDist+x.length),m(_,_.p0,g[b*y],0,a.bezierProjPcts[0]);for(var S=0;S<y-1;S++)m(_,g[b*y+S],g[b*y+S+1],a.bezierProjPcts[S],a.bezierProjPcts[S+1]);m(_,g[b*y+y-1],_.p2,a.bezierProjPcts[y-1],1)}return l.cache=f},u=function(f){var d,h=f==="source";if(i[f]){var v=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=l(),g,y=0,m=0,b=0;b<p.length;b++){for(var _=p[h?b:p.length-1-b],x=0;x<_.segments.length;x++){var S=_.segments[h?x:_.segments.length-1-x],w=b===p.length-1&&x===_.segments.length-1;if(y=m,m+=S.length,m>=v||w){g={cp:_,segment:S};break}}if(g)break}var E=g.cp,C=g.segment,T=(v-y)/C.length,A=C.t1-C.t0,P=h?C.t0+A*T:C.t1-A*T;P=gs(0,P,1),e=Xa(E.p0,E.p1,E.p2,P),d=VB(E.p0,E.p1,E.p2,P);break}case"straight":case"segments":case"haystack":{for(var R=0,D,L,I,O,B=n.allpts.length,H=0;H+3<B&&(h?(I={x:n.allpts[H],y:n.allpts[H+1]},O={x:n.allpts[H+2],y:n.allpts[H+3]}):(I={x:n.allpts[B-2-H],y:n.allpts[B-1-H]},O={x:n.allpts[B-4-H],y:n.allpts[B-3-H]}),D=ma(I,O),L=R,R+=D,!(R>=v));H+=2);var G=v-L,N=G/D;N=gs(0,N,1),e=cL(I,O,N),d=z2(I,O);break}}s("labelX",f,e.x),s("labelY",f,e.y),s("labelAutoAngle",f,d)}};u("source"),u("target"),this.applyLabelDimensions(t)}};Vr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Vr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=pa(n,t._private.labelDimsKey);if(nr(r.rscratch,"prefixedLabelDimsKey",e)!==a){Qr(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),s=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,l=nr(r.rscratch,"labelWrapCachedLines",e)||[],u=o!=="wrap"?1:Math.max(l.length,1),c=i.height/u,f=c*s,d=i.width,h=i.height+(u-1)*(s-1)*c;Qr(r.rstyle,"labelWidth",e,d),Qr(r.rscratch,"labelWidth",e,d),Qr(r.rstyle,"labelHeight",e,h),Qr(r.rscratch,"labelHeight",e,h),Qr(r.rscratch,"labelLineHeight",e,f)}};Vr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(X,F){return F?(Qr(r.rscratch,X,e,F),F):nr(r.rscratch,X,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var l=s("labelKey");if(l!=null&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var u="â€‹",c=a.split(`
`),f=t.pstyle("text-max-width").pfValue,d=t.pstyle("text-overflow-wrap").value,h=d==="anywhere",v=[],p=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var y=c[g],m=this.calculateLabelDimensions(t,y),b=m.width;if(h){var _=y.split("").join(u);y=_}if(b>f){var x=y.matchAll(p),S="",w=0,E=sr(x),C;try{for(E.s();!(C=E.n()).done;){var T=C.value,A=T[0],P=y.substring(w,T.index);w=T.index+A.length;var R=S.length===0?P:S+P+A,D=this.calculateLabelDimensions(t,R),L=D.width;L<=f?S+=P+A:(S&&v.push(S),S=P+A)}}catch($){E.e($)}finally{E.f()}S.match(/^[\s\u200b]+$/)||v.push(S)}else v.push(y)}s("labelWrapCachedLines",v),a=s("labelWrapCachedText",v.join(`
`)),s("labelWrapKey",l)}else if(o==="ellipsis"){var I=t.pstyle("text-max-width").pfValue,O="",B="â€¦",H=!1;if(this.calculateLabelDimensions(t,a).width<I)return a;for(var G=0;G<a.length;G++){var N=this.calculateLabelDimensions(t,O+a[G]+B).width;if(N>I)break;O+=a[G],G===a.length-1&&(H=!0)}return H||(O+=B),O}return a};Vr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Vr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,s=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var d=c.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(s," ").concat(u," ").concat(o,"px ").concat(l);for(var h=0,v=0,p=e.split(`
`),g=0;g<p.length;g++){var y=p[g],m=f.measureText(y),b=Math.ceil(m.width),_=o;h=Math.max(b,h),v+=_}return h+=i,v+=i,{width:h,height:v}};Vr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};Vr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var $2={},D1=28,L1=!1;$2.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<D1||t.height()<D1))return L1||(Ue("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),L1=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Kl={};Kl.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var l=0;l<s.length;l++){var u=s[l],c=u._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(n(u.connectedEdges()),c.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var d=o[f];d(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Kl.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Kl.recalculateRenderedStyle=function(t,e){var r=function(_){return _._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,l=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(l.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(l.clean=!1),!(e&&l.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),l.clean=!0)}for(var u=0;u<a.length;u++){var c=a[u],f=c._private,d=f.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],g=p._private,y=g.rstyle,m=g.rscratch;y.srcX=m.arrowStartX,y.srcY=m.arrowStartY,y.tgtX=m.arrowEndX,y.tgtY=m.arrowEndY,y.midX=m.midX,y.midY=m.midY,y.labelAngle=m.labelAngle,y.sourceLabelAngle=m.sourceLabelAngle,y.targetLabelAngle=m.targetLabelAngle}}}};var Yl={};Yl.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Yl.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Yl.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(w2),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var V2={};[Ca,ml,Kt,Ns,iy,Vr,$2,Kl,Yl].forEach(function(t){Ee(V2,t)});var H2={};H2.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",l=t.substring(0,o.length).toLowerCase()===o;return l||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var mi={};mi.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var l=this.binder(o);i.push(l.on.apply(l,a))}}return i}var l=this.binder(t);return l.on.apply(l,a)};mi.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||eD(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(l,u,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};mi.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};mi.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};mi.load=function(){var t=this,e=t.cy.window(),r=function(M){return M.selected()},n=function(M){var j=M.getRootNode();if(j&&j.nodeType===11&&j.host!==void 0)return j},a=function(M,j,Q,J){M==null&&(M=t.cy);for(var re=0;re<j.length;re++){var he=j[re];M.emit({originalEvent:Q,type:he,position:J})}},i=function(M){return M.shiftKey||M.metaKey||M.ctrlKey},s=function(M,j){var Q=!0;if(t.cy.hasCompoundNodes()&&M&&M.pannable())for(var J=0;j&&J<j.length;J++){var M=j[J];if(M.isNode()&&M.isParent()&&!M.pannable()){Q=!1;break}}else Q=!0;return Q},o=function(M){M[0]._private.grabbed=!0},l=function(M){M[0]._private.grabbed=!1},u=function(M){M[0]._private.rscratch.inDragLayer=!0},c=function(M){M[0]._private.rscratch.inDragLayer=!1},f=function(M){M[0]._private.rscratch.isGrabTarget=!0},d=function(M){M[0]._private.rscratch.isGrabTarget=!1},h=function(M,j){var Q=j.addToList,J=Q.has(M);!J&&M.grabbable()&&!M.locked()&&(Q.merge(M),o(M))},v=function(M,j){if(M.cy().hasCompoundNodes()&&!(j.inDragLayer==null&&j.addToList==null)){var Q=M.descendants();j.inDragLayer&&(Q.forEach(u),Q.connectedEdges().forEach(u)),j.addToList&&h(Q,j)}},p=function(M,j){j=j||{};var Q=M.cy().hasCompoundNodes();j.inDragLayer&&(M.forEach(u),M.neighborhood().stdFilter(function(J){return!Q||J.isEdge()}).forEach(u)),j.addToList&&M.forEach(function(J){h(J,j)}),v(M,j),m(M,{inDragLayer:j.inDragLayer}),t.updateCachedGrabbedEles()},g=p,y=function(M){M&&(t.getCachedZSortedEles().forEach(function(j){l(j),c(j),d(j)}),t.updateCachedGrabbedEles())},m=function(M,j){if(!(j.inDragLayer==null&&j.addToList==null)&&M.cy().hasCompoundNodes()){var Q=M.ancestors().orphans();if(!Q.same(M)){var J=Q.descendants().spawnSelf().merge(Q).unmerge(M).unmerge(M.descendants()),re=J.connectedEdges();j.inDragLayer&&(re.forEach(u),J.forEach(u)),j.addToList&&J.forEach(function(he){h(he,j)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},_=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";_?(t.removeObserver=new MutationObserver(function(ee){for(var M=0;M<ee.length;M++){var j=ee[M],Q=j.removedNodes;if(Q)for(var J=0;J<Q.length;J++){var re=Q[J];if(re===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ee){t.destroy()});var S=Is(function(){t.cy.resize()},100);_&&(t.styleObserver=new MutationObserver(S),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",S),x&&(t.resizeObserver=new ResizeObserver(S),t.resizeObserver.observe(t.container));var w=function(M,j){for(;M!=null;)j(M),M=M.parentNode},E=function(){t.invalidateContainerClientCoordsCache()};w(t.container,function(ee){t.registerBinding(ee,"transitionend",E),t.registerBinding(ee,"animationend",E),t.registerBinding(ee,"scroll",E)}),t.registerBinding(t.container,"contextmenu",function(ee){ee.preventDefault()});var C=function(){return t.selection[4]!==0},T=function(M){for(var j=t.findContainerClientCoords(),Q=j[0],J=j[1],re=j[2],he=j[3],ne=M.touches?M.touches:[M],be=!1,ve=0;ve<ne.length;ve++){var Se=ne[ve];if(Q<=Se.clientX&&Se.clientX<=Q+re&&J<=Se.clientY&&Se.clientY<=J+he){be=!0;break}}if(!be)return!1;for(var Me=t.container,Pe=M.target,_e=Pe.parentNode,Oe=!1;_e;){if(_e===Me){Oe=!0;break}_e=_e.parentNode}return!!Oe};t.registerBinding(t.container,"mousedown",function(M){if(T(M)&&!(t.hoverData.which===1&&M.which!==1)){M.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=M.which;var j=t.cy,Q=[M.clientX,M.clientY],J=t.projectIntoViewport(Q[0],Q[1]),re=t.selection,he=t.findNearestElements(J[0],J[1],!0,!1),ne=he[0],be=t.dragData.possibleDragElements;t.hoverData.mdownPos=J,t.hoverData.mdownGPos=Q;var ve=function(De){return{originalEvent:M,type:De,position:{x:J[0],y:J[1]}}},Se=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var De=t.hoverData.down;De?De.emit(ve("taphold")):j.emit(ve("taphold"))}},t.tapholdDuration)};if(M.which==3){t.hoverData.cxtStarted=!0;var Me={originalEvent:M,type:"cxttapstart",position:{x:J[0],y:J[1]}};ne?(ne.activate(),ne.emit(Me),t.hoverData.down=ne):j.emit(Me),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(M.which==1){ne&&ne.activate();{if(ne!=null&&t.nodeIsGrabbable(ne)){var Pe=function(De){De.emit(ve("grab"))};if(f(ne),!ne.selected())be=t.dragData.possibleDragElements=j.collection(),g(ne,{addToList:be}),ne.emit(ve("grabon")).emit(ve("grab"));else{be=t.dragData.possibleDragElements=j.collection();var _e=j.$(function(Oe){return Oe.isNode()&&Oe.selected()&&t.nodeIsGrabbable(Oe)});p(_e,{addToList:be}),ne.emit(ve("grabon")),_e.forEach(Pe)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ne,t.hoverData.downs=he,t.hoverData.downTime=new Date().getTime()}a(ne,["mousedown","tapstart","vmousedown"],M,{x:J[0],y:J[1]}),ne==null?(re[4]=1,t.data.bgActivePosistion={x:J[0],y:J[1]},t.redrawHint("select",!0),t.redraw()):ne.pannable()&&(re[4]=1),Se()}re[0]=re[2]=J[0],re[1]=re[3]=J[1]}},!1);var A=n(t.container);t.registerBinding([e,A],"mousemove",function(M){var j=t.hoverData.capture;if(!(!j&&!T(M))){var Q=!1,J=t.cy,re=J.zoom(),he=[M.clientX,M.clientY],ne=t.projectIntoViewport(he[0],he[1]),be=t.hoverData.mdownPos,ve=t.hoverData.mdownGPos,Se=t.selection,Me=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Me=t.findNearestElement(ne[0],ne[1],!0,!1));var Pe=t.hoverData.last,_e=t.hoverData.down,Oe=[ne[0]-Se[2],ne[1]-Se[3]],De=t.dragData.possibleDragElements,yt;if(ve){var ot=he[0]-ve[0],Yt=ot*ot,dt=he[1]-ve[1],Ct=dt*dt,bt=Yt+Ct;t.hoverData.isOverThresholdDrag=yt=bt>=t.desktopTapThreshold2}var Dt=i(M);yt&&(t.hoverData.tapholdCancelled=!0);var pn=function(){var fr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];fr.length===0?(fr.push(Oe[0]),fr.push(Oe[1])):(fr[0]+=Oe[0],fr[1]+=Oe[1])};Q=!0,a(Me,["mousemove","vmousemove","tapdrag"],M,{x:ne[0],y:ne[1]});var ht=function(fr){return{originalEvent:M,type:fr,position:{x:ne[0],y:ne[1]}}},Gr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||J.emit(ht("boxstart")),Se[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(yt){var Ur=ht("cxtdrag");_e?_e.emit(Ur):J.emit(Ur),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Me!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit(ht("cxtdragout")),t.hoverData.cxtOver=Me,Me&&Me.emit(ht("cxtdragover")))}}else if(t.hoverData.dragging){if(Q=!0,J.panningEnabled()&&J.userPanningEnabled()){var Da;if(t.hoverData.justStartedPan){var Ys=t.hoverData.mdownPos;Da={x:(ne[0]-Ys[0])*re,y:(ne[1]-Ys[1])*re},t.hoverData.justStartedPan=!1}else Da={x:Oe[0]*re,y:Oe[1]*re};J.panBy(Da),J.emit(ht("dragpan")),t.hoverData.dragged=!0}ne=t.projectIntoViewport(M.clientX,M.clientY)}else if(Se[4]==1&&(_e==null||_e.pannable())){if(yt){if(!t.hoverData.dragging&&J.boxSelectionEnabled()&&(Dt||!J.panningEnabled()||!J.userPanningEnabled()))Gr();else if(!t.hoverData.selecting&&J.panningEnabled()&&J.userPanningEnabled()){var Xn=s(_e,t.hoverData.downs);Xn&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Se[4]=0,t.data.bgActivePosistion=Ua(be),t.redrawHint("select",!0),t.redraw())}_e&&_e.pannable()&&_e.active()&&_e.unactivate()}}else{if(_e&&_e.pannable()&&_e.active()&&_e.unactivate(),(!_e||!_e.grabbed())&&Me!=Pe&&(Pe&&a(Pe,["mouseout","tapdragout"],M,{x:ne[0],y:ne[1]}),Me&&a(Me,["mouseover","tapdragover"],M,{x:ne[0],y:ne[1]}),t.hoverData.last=Me),_e)if(yt){if(J.boxSelectionEnabled()&&Dt)_e&&_e.grabbed()&&(y(De),_e.emit(ht("freeon")),De.emit(ht("free")),t.dragData.didDrag&&(_e.emit(ht("dragfreeon")),De.emit(ht("dragfree")))),Gr();else if(_e&&_e.grabbed()&&t.nodeIsDraggable(_e)){var Jt=!t.dragData.didDrag;Jt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||p(De,{inDragLayer:!0});var zt={x:0,y:0};if(oe(Oe[0])&&oe(Oe[1])&&(zt.x+=Oe[0],zt.y+=Oe[1],Jt)){var er=t.hoverData.dragDelta;er&&oe(er[0])&&oe(er[1])&&(zt.x+=er[0],zt.y+=er[1])}t.hoverData.draggingEles=!0,De.silentShift(zt).emit(ht("position")).emit(ht("drag")),t.redrawHint("drag",!0),t.redraw()}}else pn();Q=!0}if(Se[2]=ne[0],Se[3]=ne[1],Q)return M.stopPropagation&&M.stopPropagation(),M.preventDefault&&M.preventDefault(),!1}},!1);var P,R,D;t.registerBinding(e,"mouseup",function(M){if(!(t.hoverData.which===1&&M.which!==1&&t.hoverData.capture)){var j=t.hoverData.capture;if(j){t.hoverData.capture=!1;var Q=t.cy,J=t.projectIntoViewport(M.clientX,M.clientY),re=t.selection,he=t.findNearestElement(J[0],J[1],!0,!1),ne=t.dragData.possibleDragElements,be=t.hoverData.down,ve=i(M);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,be&&be.unactivate();var Se=function(ot){return{originalEvent:M,type:ot,position:{x:J[0],y:J[1]}}};if(t.hoverData.which===3){var Me=Se("cxttapend");if(be?be.emit(Me):Q.emit(Me),!t.hoverData.cxtDragged){var Pe=Se("cxttap");be?be.emit(Pe):Q.emit(Pe)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(he,["mouseup","tapend","vmouseup"],M,{x:J[0],y:J[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(be,["click","tap","vclick"],M,{x:J[0],y:J[1]}),R=!1,M.timeStamp-D<=Q.multiClickDebounceTime()?(P&&clearTimeout(P),R=!0,D=null,a(be,["dblclick","dbltap","vdblclick"],M,{x:J[0],y:J[1]})):(P=setTimeout(function(){R||a(be,["oneclick","onetap","voneclick"],M,{x:J[0],y:J[1]})},Q.multiClickDebounceTime()),D=M.timeStamp)),be==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(M)&&(Q.$(r).unselect(["tapunselect"]),ne.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ne=Q.collection()),he==be&&!t.dragData.didDrag&&!t.hoverData.selecting&&he!=null&&he._private.selectable&&(t.hoverData.dragging||(Q.selectionType()==="additive"||ve?he.selected()?he.unselect(["tapunselect"]):he.select(["tapselect"]):ve||(Q.$(r).unmerge(he).unselect(["tapunselect"]),he.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var _e=Q.collection(t.getAllInBox(re[0],re[1],re[2],re[3]));t.redrawHint("select",!0),_e.length>0&&t.redrawHint("eles",!0),Q.emit(Se("boxend"));var Oe=function(ot){return ot.selectable()&&!ot.selected()};Q.selectionType()==="additive"||ve||Q.$(r).unmerge(_e).unselect(),_e.emit(Se("box")).stdFilter(Oe).select().emit(Se("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!re[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var De=be&&be.grabbed();y(ne),De&&(be.emit(Se("freeon")),ne.emit(Se("free")),t.dragData.didDrag&&(be.emit(Se("dragfreeon")),ne.emit(Se("dragfree"))))}}re[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var L=[],I=4,O,B=1e5,H=function(M,j){for(var Q=0;Q<M.length;Q++)if(M[Q]%j!==0)return!1;return!0},G=function(M){for(var j=Math.abs(M[0]),Q=1;Q<M.length;Q++)if(Math.abs(M[Q])!==j)return!1;return!0},N=function(M){var j=!1,Q=M.deltaY;if(Q==null&&(M.wheelDeltaY!=null?Q=M.wheelDeltaY/4:M.wheelDelta!=null&&(Q=M.wheelDelta/4)),Q!==0){if(O==null)if(L.length>=I){var J=L;if(O=H(J,5),!O){var re=Math.abs(J[0]);O=G(J)&&re>5}if(O)for(var he=0;he<J.length;he++)B=Math.min(Math.abs(J[he]),B)}else L.push(Q),j=!0;else O&&(B=Math.min(Math.abs(Q),B));if(!t.scrollingPage){var ne=t.cy,be=ne.zoom(),ve=ne.pan(),Se=t.projectIntoViewport(M.clientX,M.clientY),Me=[Se[0]*be+ve.x,Se[1]*be+ve.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||C()){M.preventDefault();return}if(ne.panningEnabled()&&ne.userPanningEnabled()&&ne.zoomingEnabled()&&ne.userZoomingEnabled()){M.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Pe;j&&Math.abs(Q)>5&&(Q=Gm(Q)*5),Pe=Q/-250,O&&(Pe/=B,Pe*=3),Pe=Pe*t.wheelSensitivity;var _e=M.deltaMode===1;_e&&(Pe*=33);var Oe=ne.zoom()*Math.pow(10,Pe);M.type==="gesturechange"&&(Oe=t.gestureStartZoom*M.scale),ne.zoom({level:Oe,renderedPosition:{x:Me[0],y:Me[1]}}),ne.emit({type:M.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:M,position:{x:Se[0],y:Se[1]}})}}}};t.registerBinding(t.container,"wheel",N,!0),t.registerBinding(e,"scroll",function(M){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(M){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||M.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ee){t.hasTouchStarted||N(ee)},!0),t.registerBinding(t.container,"mouseout",function(M){var j=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseout",position:{x:j[0],y:j[1]}})},!1),t.registerBinding(t.container,"mouseover",function(M){var j=t.projectIntoViewport(M.clientX,M.clientY);t.cy.emit({originalEvent:M,type:"mouseover",position:{x:j[0],y:j[1]}})},!1);var $,X,F,q,z,W,te,Y,V,U,K,Z,ae,ie=function(M,j,Q,J){return Math.sqrt((Q-M)*(Q-M)+(J-j)*(J-j))},Ae=function(M,j,Q,J){return(Q-M)*(Q-M)+(J-j)*(J-j)},le;t.registerBinding(t.container,"touchstart",le=function(M){if(t.hasTouchStarted=!0,!!T(M)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var j=t.cy,Q=t.touchData.now,J=t.touchData.earlier;if(M.touches[0]){var re=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);Q[0]=re[0],Q[1]=re[1]}if(M.touches[1]){var re=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);Q[2]=re[0],Q[3]=re[1]}if(M.touches[2]){var re=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);Q[4]=re[0],Q[5]=re[1]}var he=function(Dt){return{originalEvent:M,type:Dt,position:{x:Q[0],y:Q[1]}}};if(M.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var ne=t.findContainerClientCoords();V=ne[0],U=ne[1],K=ne[2],Z=ne[3],$=M.touches[0].clientX-V,X=M.touches[0].clientY-U,F=M.touches[1].clientX-V,q=M.touches[1].clientY-U,ae=0<=$&&$<=K&&0<=F&&F<=K&&0<=X&&X<=Z&&0<=q&&q<=Z;var be=j.pan(),ve=j.zoom();z=ie($,X,F,q),W=Ae($,X,F,q),te=[($+F)/2,(X+q)/2],Y=[(te[0]-be.x)/ve,(te[1]-be.y)/ve];var Se=200,Me=Se*Se;if(W<Me&&!M.touches[2]){var Pe=t.findNearestElement(Q[0],Q[1],!0,!0),_e=t.findNearestElement(Q[2],Q[3],!0,!0);Pe&&Pe.isNode()?(Pe.activate().emit(he("cxttapstart")),t.touchData.start=Pe):_e&&_e.isNode()?(_e.activate().emit(he("cxttapstart")),t.touchData.start=_e):j.emit(he("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(M.touches[2])j.boxSelectionEnabled()&&M.preventDefault();else if(!M.touches[1]){if(M.touches[0]){var Oe=t.findNearestElements(Q[0],Q[1],!0,!0),De=Oe[0];if(De!=null&&(De.activate(),t.touchData.start=De,t.touchData.starts=Oe,t.nodeIsGrabbable(De))){var yt=t.dragData.touchDragEles=j.collection(),ot=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),De.selected()?(ot=j.$(function(bt){return bt.selected()&&t.nodeIsGrabbable(bt)}),p(ot,{addToList:yt})):g(De,{addToList:yt}),f(De),De.emit(he("grabon")),ot?ot.forEach(function(bt){bt.emit(he("grab"))}):De.emit(he("grab"))}a(De,["touchstart","tapstart","vmousedown"],M,{x:Q[0],y:Q[1]}),De==null&&(t.data.bgActivePosistion={x:re[0],y:re[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],M,{x:Q[0],y:Q[1]})},t.tapholdDuration)}}if(M.touches.length>=1){for(var Yt=t.touchData.startPosition=[null,null,null,null,null,null],dt=0;dt<Q.length;dt++)Yt[dt]=J[dt]=Q[dt];var Ct=M.touches[0];t.touchData.startGPosition=[Ct.clientX,Ct.clientY]}}},!1);var xe;t.registerBinding(e,"touchmove",xe=function(M){var j=t.touchData.capture;if(!(!j&&!T(M))){var Q=t.selection,J=t.cy,re=t.touchData.now,he=t.touchData.earlier,ne=J.zoom();if(M.touches[0]){var be=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);re[0]=be[0],re[1]=be[1]}if(M.touches[1]){var be=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);re[2]=be[0],re[3]=be[1]}if(M.touches[2]){var be=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);re[4]=be[0],re[5]=be[1]}var ve=function(mR){return{originalEvent:M,type:mR,position:{x:re[0],y:re[1]}}},Se=t.touchData.startGPosition,Me;if(j&&M.touches[0]&&Se){for(var Pe=[],_e=0;_e<re.length;_e++)Pe[_e]=re[_e]-he[_e];var Oe=M.touches[0].clientX-Se[0],De=Oe*Oe,yt=M.touches[0].clientY-Se[1],ot=yt*yt,Yt=De+ot;Me=Yt>=t.touchTapThreshold2}if(j&&t.touchData.cxt){M.preventDefault();var dt=M.touches[0].clientX-V,Ct=M.touches[0].clientY-U,bt=M.touches[1].clientX-V,Dt=M.touches[1].clientY-U,pn=Ae(dt,Ct,bt,Dt),ht=pn/W,Gr=150,Ur=Gr*Gr,Da=1.5,Ys=Da*Da;if(ht>=Ys||pn>=Ur){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Xn=ve("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(Xn),t.touchData.start=null):J.emit(Xn)}}if(j&&t.touchData.cxt){var Xn=ve("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Xn):J.emit(Xn),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Jt=t.findNearestElement(re[0],re[1],!0,!0);(!t.touchData.cxtOver||Jt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(ve("cxtdragout")),t.touchData.cxtOver=Jt,Jt&&Jt.emit(ve("cxtdragover")))}else if(j&&M.touches[2]&&J.boxSelectionEnabled())M.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||J.emit(ve("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,Q[4]=1,!Q||Q.length===0||Q[0]===void 0?(Q[0]=(re[0]+re[2]+re[4])/3,Q[1]=(re[1]+re[3]+re[5])/3,Q[2]=(re[0]+re[2]+re[4])/3+1,Q[3]=(re[1]+re[3]+re[5])/3+1):(Q[2]=(re[0]+re[2]+re[4])/3,Q[3]=(re[1]+re[3]+re[5])/3),t.redrawHint("select",!0),t.redraw();else if(j&&M.touches[1]&&!t.touchData.didSelect&&J.zoomingEnabled()&&J.panningEnabled()&&J.userZoomingEnabled()&&J.userPanningEnabled()){M.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var zt=t.dragData.touchDragEles;if(zt){t.redrawHint("drag",!0);for(var er=0;er<zt.length;er++){var Ei=zt[er]._private;Ei.grabbed=!1,Ei.rscratch.inDragLayer=!1}}var fr=t.touchData.start,dt=M.touches[0].clientX-V,Ct=M.touches[0].clientY-U,bt=M.touches[1].clientX-V,Dt=M.touches[1].clientY-U,Vy=ie(dt,Ct,bt,Dt),lR=Vy/z;if(ae){var uR=dt-$,cR=Ct-X,fR=bt-F,dR=Dt-q,hR=(uR+fR)/2,vR=(cR+dR)/2,Ci=J.zoom(),_u=Ci*lR,Xs=J.pan(),Hy=Y[0]*Ci+Xs.x,Wy=Y[1]*Ci+Xs.y,gR={x:-_u/Ci*(Hy-Xs.x-hR)+Hy,y:-_u/Ci*(Wy-Xs.y-vR)+Wy};if(fr&&fr.active()){var zt=t.dragData.touchDragEles;y(zt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),fr.unactivate().emit(ve("freeon")),zt.emit(ve("free")),t.dragData.didDrag&&(fr.emit(ve("dragfreeon")),zt.emit(ve("dragfree")))}J.viewport({zoom:_u,pan:gR,cancelOnFailedZoom:!0}),J.emit(ve("pinchzoom")),z=Vy,$=dt,X=Ct,F=bt,q=Dt,t.pinching=!0}if(M.touches[0]){var be=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);re[0]=be[0],re[1]=be[1]}if(M.touches[1]){var be=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);re[2]=be[0],re[3]=be[1]}if(M.touches[2]){var be=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);re[4]=be[0],re[5]=be[1]}}else if(M.touches[0]&&!t.touchData.didSelect){var yr=t.touchData.start,xu=t.touchData.last,Jt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Jt=t.findNearestElement(re[0],re[1],!0,!0)),j&&yr!=null&&M.preventDefault(),j&&yr!=null&&t.nodeIsDraggable(yr))if(Me){var zt=t.dragData.touchDragEles,Gy=!t.dragData.didDrag;Gy&&p(zt,{inDragLayer:!0}),t.dragData.didDrag=!0;var ki={x:0,y:0};if(oe(Pe[0])&&oe(Pe[1])&&(ki.x+=Pe[0],ki.y+=Pe[1],Gy)){t.redrawHint("eles",!0);var br=t.touchData.dragDelta;br&&oe(br[0])&&oe(br[1])&&(ki.x+=br[0],ki.y+=br[1])}t.hoverData.draggingEles=!0,zt.silentShift(ki).emit(ve("position")).emit(ve("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==he[0]&&t.touchData.startPosition[1]==he[1]&&t.redrawHint("eles",!0),t.redraw()}else{var br=t.touchData.dragDelta=t.touchData.dragDelta||[];br.length===0?(br.push(Pe[0]),br.push(Pe[1])):(br[0]+=Pe[0],br[1]+=Pe[1])}if(a(yr||Jt,["touchmove","tapdrag","vmousemove"],M,{x:re[0],y:re[1]}),(!yr||!yr.grabbed())&&Jt!=xu&&(xu&&xu.emit(ve("tapdragout")),Jt&&Jt.emit(ve("tapdragover"))),t.touchData.last=Jt,j)for(var er=0;er<re.length;er++)re[er]&&t.touchData.startPosition[er]&&Me&&(t.touchData.singleTouchMoved=!0);if(j&&(yr==null||yr.pannable())&&J.panningEnabled()&&J.userPanningEnabled()){var pR=s(yr,t.touchData.starts);pR&&(M.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Ua(t.touchData.startPosition)),t.swipePanning?(J.panBy({x:Pe[0]*ne,y:Pe[1]*ne}),J.emit(ve("dragpan"))):Me&&(t.swipePanning=!0,J.panBy({x:Oe*ne,y:yt*ne}),J.emit(ve("dragpan")),yr&&(yr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var be=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);re[0]=be[0],re[1]=be[1]}}for(var _e=0;_e<re.length;_e++)he[_e]=re[_e];j&&M.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var me;t.registerBinding(e,"touchcancel",me=function(M){var j=t.touchData.start;t.touchData.capture=!1,j&&j.unactivate()});var ue,ge,de,pe;if(t.registerBinding(e,"touchend",ue=function(M){var j=t.touchData.start,Q=t.touchData.capture;if(Q)M.touches.length===0&&(t.touchData.capture=!1),M.preventDefault();else return;var J=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var re=t.cy,he=re.zoom(),ne=t.touchData.now,be=t.touchData.earlier;if(M.touches[0]){var ve=t.projectIntoViewport(M.touches[0].clientX,M.touches[0].clientY);ne[0]=ve[0],ne[1]=ve[1]}if(M.touches[1]){var ve=t.projectIntoViewport(M.touches[1].clientX,M.touches[1].clientY);ne[2]=ve[0],ne[3]=ve[1]}if(M.touches[2]){var ve=t.projectIntoViewport(M.touches[2].clientX,M.touches[2].clientY);ne[4]=ve[0],ne[5]=ve[1]}var Se=function(Ur){return{originalEvent:M,type:Ur,position:{x:ne[0],y:ne[1]}}};j&&j.unactivate();var Me;if(t.touchData.cxt){if(Me=Se("cxttapend"),j?j.emit(Me):re.emit(Me),!t.touchData.cxtDragged){var Pe=Se("cxttap");j?j.emit(Pe):re.emit(Pe)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!M.touches[2]&&re.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var _e=re.collection(t.getAllInBox(J[0],J[1],J[2],J[3]));J[0]=void 0,J[1]=void 0,J[2]=void 0,J[3]=void 0,J[4]=0,t.redrawHint("select",!0),re.emit(Se("boxend"));var Oe=function(Ur){return Ur.selectable()&&!Ur.selected()};_e.emit(Se("box")).stdFilter(Oe).select().emit(Se("boxselect")),_e.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(j!=null&&j.unactivate(),M.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!M.touches[1]){if(!M.touches[0]){if(!M.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var De=t.dragData.touchDragEles;if(j!=null){var yt=j._private.grabbed;y(De),t.redrawHint("drag",!0),t.redrawHint("eles",!0),yt&&(j.emit(Se("freeon")),De.emit(Se("free")),t.dragData.didDrag&&(j.emit(Se("dragfreeon")),De.emit(Se("dragfree")))),a(j,["touchend","tapend","vmouseup","tapdragout"],M,{x:ne[0],y:ne[1]}),j.unactivate(),t.touchData.start=null}else{var ot=t.findNearestElement(ne[0],ne[1],!0,!0);a(ot,["touchend","tapend","vmouseup","tapdragout"],M,{x:ne[0],y:ne[1]})}var Yt=t.touchData.startPosition[0]-ne[0],dt=Yt*Yt,Ct=t.touchData.startPosition[1]-ne[1],bt=Ct*Ct,Dt=dt+bt,pn=Dt*he*he;t.touchData.singleTouchMoved||(j||re.$(":selected").unselect(["tapunselect"]),a(j,["tap","vclick"],M,{x:ne[0],y:ne[1]}),ge=!1,M.timeStamp-pe<=re.multiClickDebounceTime()?(de&&clearTimeout(de),ge=!0,pe=null,a(j,["dbltap","vdblclick"],M,{x:ne[0],y:ne[1]})):(de=setTimeout(function(){ge||a(j,["onetap","voneclick"],M,{x:ne[0],y:ne[1]})},re.multiClickDebounceTime()),pe=M.timeStamp)),j!=null&&!t.dragData.didDrag&&j._private.selectable&&pn<t.touchTapThreshold2&&!t.pinching&&(re.selectionType()==="single"?(re.$(r).unmerge(j).unselect(["tapunselect"]),j.select(["tapselect"])):j.selected()?j.unselect(["tapunselect"]):j.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var ht=0;ht<ne.length;ht++)be[ht]=ne[ht];t.dragData.didDrag=!1,M.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),M.touches.length<2&&(M.touches.length===1&&(t.touchData.startGPosition=[M.touches[0].clientX,M.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var ye=[],ke=function(M){return{clientX:M.clientX,clientY:M.clientY,force:1,identifier:M.pointerId,pageX:M.pageX,pageY:M.pageY,radiusX:M.width/2,radiusY:M.height/2,screenX:M.screenX,screenY:M.screenY,target:M.target}},Be=function(M){return{event:M,touch:ke(M)}},qe=function(M){ye.push(Be(M))},Le=function(M){for(var j=0;j<ye.length;j++){var Q=ye[j];if(Q.event.pointerId===M.pointerId){ye.splice(j,1);return}}},Ne=function(M){var j=ye.filter(function(Q){return Q.event.pointerId===M.pointerId})[0];j.event=M,j.touch=ke(M)},Ce=function(M){M.touches=ye.map(function(j){return j.touch})},ce=function(M){return M.pointerType==="mouse"||M.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ee){ce(ee)||(ee.preventDefault(),qe(ee),Ce(ee),le(ee))}),t.registerBinding(t.container,"pointerup",function(ee){ce(ee)||(Le(ee),Ce(ee),ue(ee))}),t.registerBinding(t.container,"pointercancel",function(ee){ce(ee)||(Le(ee),Ce(ee),me(ee))}),t.registerBinding(t.container,"pointermove",function(ee){ce(ee)||(ee.preventDefault(),Ne(ee),Ce(ee),xe(ee))})}};var fn={};fn.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,l){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,l,u,c){return ps(o,l,this.points,n,a,i/2,s/2,u)},checkPoint:function(n,a,i,s,o,l,u,c){return un(n,a,this.points,l,u,s,o,[0,-1],i)},hasMiterBounds:t!=="rectangle",miterBounds:function(n,a,i,s,o,l){return pL(this.points,n,a,i,s,o)}}};fn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,l){return EL(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,l){return fa(e,r,a,i,s,o,n)}}};fn.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===a)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=a;var c=i/2,f=s/2;o=o==="auto"?WT(i,s):o;for(var d=new Array(e.length/2),h=0;h<e.length/2;h++)d[h]={x:n+c*e[h*2],y:a+f*e[h*2+1]};var v,p,g,y,m=d.length;for(p=d[m-1],v=0;v<m;v++)g=d[v%m],y=d[(v+1)%m],l[u][v]=ay(p,g,y,o),p=g,g=y;return l[u]},draw:function(n,a,i,s,o,l,u){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,l,u,"drawCorners"))},intersectLine:function(n,a,i,s,o,l,u,c,f){return kL(o,l,this.points,n,a,i,s,u,this.getOrCreateCorners(n,a,i,s,c,f,"corners"))},checkPoint:function(n,a,i,s,o,l,u,c,f){return SL(n,a,this.points,l,u,s,o,this.getOrCreateCorners(l,u,s,o,c,f,"corners"))}}};fn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Xt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,l){return VT(i,s,e,r,n,a,o,l)},checkPoint:function(e,r,n,a,i,s,o,l){var u=a/2,c=i/2;l=l==="auto"?Bn(a,i):l,l=Math.min(u,c,l);var f=l*2;return!!(un(e,r,this.points,s,o,a,i-f,[0,-1],n)||un(e,r,this.points,s,o,a-f,i,[0,-1],n)||fa(e,r,f,f,s-u+l,o-c+l,n)||fa(e,r,f,f,s+u-l,o-c+l,n)||fa(e,r,f,f,s+u-l,o+c-l,n)||fa(e,r,f,f,s-u+l,o+c-l,n))}}};fn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:jm(),points:Xt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,l=e/2,u=n-l,c=n+l,f=a-o,d=a+o;return{topLeft:[u,f+s,u+s,f,u+s,f+s],topRight:[c-s,f,c,f+s,c-s,f+s],bottomRight:[c,d-s,c-s,d,c-s,d-s],bottomLeft:[u+s,d,u,d-s,u+s,d-s]}},intersectLine:function(e,r,n,a,i,s,o,l){var u=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,l),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return ps(i,s,c,e,r)},checkPoint:function(e,r,n,a,i,s,o,l){var u=l==="auto"?this.cornerLength:l;if(un(e,r,this.points,s,o,a,i-2*u,[0,-1],n)||un(e,r,this.points,s,o,a-2*u,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,s,o);return ar(e,r,c.topLeft)||ar(e,r,c.topRight)||ar(e,r,c.bottomRight)||ar(e,r,c.bottomLeft)}}};fn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Xt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,l){var u=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),h=function(g){var y=Xa({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},u),m=Xa({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c),b=Xa({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f);return[g[0],g[1],y.x,y.y,m.x,m.y,b.x,b.y,g[4],g[5]]},v=[].concat(h(d.topLeft),h(d.topRight),h(d.bottomRight),h(d.bottomLeft));return ps(i,s,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,l=n+s,u=a-i,c=a+i,f=Up(e,r),d=f.heightOffset,h=f.widthOffset,v=f.ctrlPtOffsetPct*e,p={topLeft:[o,u+d,o+v,u,o+h,u],topRight:[l-h,u,l-v,u,l,u+d],bottomRight:[l,c-d,l-v,c,l-h,c],bottomLeft:[o+h,c,o+v,c,o,c-d]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,r,n,a,i,s,o,l){var u=Up(a,i),c=u.heightOffset,f=u.widthOffset;if(un(e,r,this.points,s,o,a,i-2*c,[0,-1],n)||un(e,r,this.points,s,o,a-2*f,i,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(a,i,s,o),h=function(E,C,T){var A=T[4],P=T[2],R=T[0],D=T[5],L=T[1],I=Math.min(A,R),O=Math.max(A,R),B=Math.min(D,L),H=Math.max(D,L);if(I<=E&&E<=O&&B<=C&&C<=H){var G=TL(A,P,R),N=bL(G[0],G[1],G[2],E),$=N.filter(function(X){return 0<=X&&X<=1});if($.length>0)return $[0]}return null},v=Object.keys(d),p=0;p<v.length;p++){var g=v[p],y=d[g],m=h(e,r,y);if(m!=null){var b=y[5],_=y[3],x=y[1],S=kt(b,_,x,m);if(y.isTop&&S<=r||y.isBottom&&r<=S)return!0}}return!1}}};fn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Xt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,l){var u=e-(n/2+o),c=r-(a/2+o),f=c,d=e+(n/2+o),h=En(i,s,e,r,u,c,d,f,!1);return h.length>0?h:VT(i,s,e,r,n,a,o,l)},checkPoint:function(e,r,n,a,i,s,o,l){l=l==="auto"?Bn(a,i):l;var u=2*l;if(un(e,r,this.points,s,o,a,i-u,[0,-1],n)||un(e,r,this.points,s,o,a-u,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[s-c,o-f,s-c,o,s+c,o,s+c,o-f];return!!(ar(e,r,d)||fa(e,r,u,u,s+a/2-l,o+i/2-l,n)||fa(e,r,u,u,s-a/2+l,o+i/2-l,n))}}};fn.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Xt(3,0)),this.generateRoundPolygon("round-triangle",Xt(3,0)),this.generatePolygon("rectangle",Xt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Xt(5,0)),this.generateRoundPolygon("round-pentagon",Xt(5,0)),this.generatePolygon("hexagon",Xt(6,0)),this.generateRoundPolygon("round-hexagon",Xt(6,0)),this.generatePolygon("heptagon",Xt(7,0)),this.generateRoundPolygon("round-heptagon",Xt(7,0)),this.generatePolygon("octagon",Xt(8,0)),this.generateRoundPolygon("round-octagon",Xt(8,0));var n=new Array(20);{var a=Gp(5,0),i=Gp(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=HT(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var c=u.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,u)}};var zs={};zs.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};zs.redraw=function(t){t=t||qT();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};zs.beforeRender=function(t,e){if(!this.destroyed){e==null&&nt("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var O1=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};zs.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){O1(t,!0,a);var i=ln();t.render(t.renderOptions);var s=t.lastDrawTime=ln();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else O1(t,!1,a);t.skipFrame=!1,ul(r)}};ul(r)}};var HB=function(e){this.init(e)},W2=HB,yi=W2.prototype;yi.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];yi.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",l=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var u=a.createElement("style");u.id=s,u.textContent="."+o+" { position: relative; }",i.insertBefore(u,i.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Ue("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=oe(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};yi.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};yi.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};yi.isHeadless=function(){return!1};[ny,V2,H2,mi,fn,zs].forEach(function(t){Ee(yi,t)});var jc=1e3/60,G2={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Is(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(u,c){var f=ln(),d=a.averageRedrawTime,h=a.lastRedrawTime,v=[],p=a.cy.extent(),g=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var y=ln(),m=y-f,b=y-c;if(h<jc){var _=jc-(u?d:0);if(b>=e.deqFastCost*_)break}else if(u){if(m>=e.deqCost*h||m>=e.deqAvgCost*d)break}else if(b>=e.deqNoDrawCost*jc)break;var x=e.deq(n,g,p);if(x.length>0)for(var S=0;S<x.length;S++)v.push(x[S]);else break}v.length>0&&(e.onDeqd(n,v),!u&&e.shouldRedraw(n,v,g,p)&&i())},o=e.priority||Vm;a.beforeRender(s,o(n))}}}},WB=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cl;Hn(this,t),this.idsByKey=new nn,this.keyForId=new nn,this.cachesByLvl=new nn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Wn(t,[{key:"getIdsFor",value:function(r){r==null&&nt("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new hi,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new nn,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),I1=25,ho=50,Ho=-4,im=3,U2=7.99,GB=8,UB=1024,jB=1024,KB=1024,YB=.2,XB=.8,ZB=10,QB=.15,JB=.1,eF=.9,tF=.9,rF=100,nF=1,Ka={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},aF=qt({getKey:null,doesEleInvalidateKey:cl,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:IT,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Vi=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=aF(r);Ee(n,a),n.lookup=new WB(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Et=Vi.prototype;Et.reasons=Ka;Et.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Et.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};Et.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Bs(function(r,n){return n.reqs-r.reqs});return e};Et.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Et.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Wm(o*r))),n<Ho)n=Ho;else if(o>=U2||n>im)return null;var u=Math.pow(2,n),c=e.h*u,f=e.w*u,d=s.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,d))return null;var h=l.get(t,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var v;if(c<=I1?v=I1:c<=ho?v=ho:v=Math.ceil(c/ho)*ho,c>KB||f>jB)return null;var p=i.getTextureQueue(v),g=p[p.length-2],y=function(){return i.recycleTexture(v,f)||i.addTexture(v,f)};g||(g=p[p.length-1]),g||(g=y()),g.width-g.usedWidth<f&&(g=y());for(var m=function(I){return I&&I.scaledLabelShown===d},b=a&&a===Ka.dequeue,_=a&&a===Ka.highQuality,x=a&&a===Ka.downscale,S,w=n+1;w<=im;w++){var E=l.get(t,w);if(E){S=E;break}}var C=S&&S.level===n+1?S:null,T=function(){g.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,g.usedWidth,0,f,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,f,v),m(C))T();else if(m(S))if(_){for(var A=S.level;A>n;A--)C=i.getElement(t,e,r,A,Ka.downscale);T()}else return i.queueElement(t,S.level-1),S;else{var P;if(!b&&!_&&!x)for(var R=n-1;R>=Ho;R--){var D=l.get(t,R);if(D){P=D;break}}if(m(P))return i.queueElement(t,n),P;g.context.translate(g.usedWidth,0),g.context.scale(u,u),this.drawElement(g.context,t,e,d,!1),g.context.scale(1/u,1/u),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:n,scale:u,width:f,height:c,scaledLabelShown:d},g.usedWidth+=Math.ceil(f+GB),g.eleCaches.push(h),l.set(t,n,h),i.checkTextureFullness(g),h};Et.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Et.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Ho;i<=im;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var l=0;l<n.length;l++){var u=n[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Et.checkTextureUtility=function(t){t.invalidatedWidth>=YB*t.width&&this.retireTexture(t)};Et.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>XB&&t.fullnessChecks>=ZB?In(r,t):t.fullnessChecks++};Et.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;In(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}Hm(i);var l=e.getRetiredTextureQueue(r);l.push(t)};Et.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(UB,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Et.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Hm(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),In(a,s),n.push(s),s}};Et.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};Et.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<nF&&r.size()>0;s++){var o=r.pop(),l=o.key,u=o.eles[0],c=i.hasCache(u,o.level);if(n[l]=null,c)continue;a.push(o);var f=e.getBoundingBox(u);e.getElement(u,f,t,o.level,Ka.dequeue)}return a};Et.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=$m,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};Et.onDequeue=function(t){this.onDequeues.push(t)};Et.offDequeue=function(t){In(this.onDequeues,t)};Et.setupDequeueing=G2.setupDequeueing({deqRedrawThreshold:rF,deqCost:QB,deqAvgCost:JB,deqNoDrawCost:eF,deqFastCost:tF,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var l=s[o].boundingBox();if(Um(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var iF=1,ns=-4,yl=2,sF=3.99,oF=50,lF=50,uF=.15,cF=.1,fF=.9,dF=.9,hF=1,B1=250,vF=4e3*4e3,F1=32767,gF=!0,j2=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=ln()-2*B1,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=Is(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},lF),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=B1?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,l){return l.reqs-o.reqs};r.layersQueue=new Bs(i),r.setupDequeueing()},Nt=j2.prototype,q1=0,pF=Math.pow(2,53)-1;Nt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:q1=++q1%pF,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,l=-s.bb.x1,u=-s.bb.y1;return o.scale(r,r),o.translate(l,u),s};Nt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Wm(s*e)),r<ns)r=ns;else if(s>=sF||r>yl)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[],f,d=n.levelIsComplete(r,t),h,v=function(){var T=function(L){if(n.validateLayersElesOrdering(L,t),n.levelIsComplete(L,t))return h=l[L],!0},A=function(L){if(!h)for(var I=r+L;ns<=I&&I<=yl&&!T(I);I+=L);};A(1),A(-1);for(var P=c.length-1;P>=0;P--){var R=c[P];R.invalid&&In(c,R)}};if(!d)v();else return c;var p=function(){if(!f){f=Zt();for(var T=0;T<t.length;T++)hL(f,t[T].boundingBox())}return f},g=function(T){T=T||{};var A=T.after;p();var P=Math.ceil(f.w*u),R=Math.ceil(f.h*u);if(P>F1||R>F1)return null;var D=P*R;if(D>vF)return null;var L=n.makeLayer(f,r);if(A!=null){var I=c.indexOf(A)+1;c.splice(I,0,L)}else(T.insert===void 0||T.insert)&&c.unshift(L);return L};if(n.skipping&&!o)return null;for(var y=null,m=t.length/iF,b=!o,_=0;_<t.length;_++){var x=t[_],S=x._private.rscratch,w=S.imgLayerCaches=S.imgLayerCaches||{},E=w[r];if(E){y=E;continue}if((!y||y.eles.length>=m||!$T(y.bb,x.boundingBox()))&&(y=g({insert:!0,after:y}),!y))return null;h||b?n.queueLayer(y,x):n.drawEleInLayer(y,x,r,e),y.eles.push(x),w[r]=y}return h||(b?null:c)};Nt.getEleLevelForLayerLevel=function(t,e){return t};Nt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,gF),i.setImgSmoothing(s,!0))};Nt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};Nt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};Nt.updateElementsInLayers=function(t,e){for(var r=this,n=Ms(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},u=ns;u<=yl;u++){var c=l[u];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,s,i))}};Nt.haveLayers=function(){for(var t=this,e=!1,r=ns;r<=yl;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Nt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=ln(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};Nt.invalidateLayer=function(t){if(this.lastInvalidationTime=ln(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];In(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Nt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};Nt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Nt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Nt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<hF&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Nt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};Nt.requestRedraw=Is(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Nt.setupDequeueing=G2.setupDequeueing({deqRedrawThreshold:oF,deqCost:uF,deqAvgCost:cF,deqNoDrawCost:fF,deqFastCost:dF,deq:function(e,r){return e.dequeue(r)},onDeqd:Vm,shouldRedraw:IT,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var K2={},N1;function mF(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function yF(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function z1(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function bF(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var l=i[o];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function _F(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}K2.arrowShapeImpl=function(t){return(N1||(N1={polygon:mF,"triangle-backcurve":yF,"triangle-tee":z1,"circle-triangle":bF,"triangle-cross":z1,circle:_F}))[t]};var Hr={};Hr.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};Hr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Hr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Hr.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=r.getElement(e,u,n,a,i);if(c!=null){var f=o(l,e);if(f===0)return;var d=s(l,e),h=u.x1,v=u.y1,p=u.w,g=u.h,y,m,b,_,x;if(d!==0){var S=r.getRotationPoint(e);b=S.x,_=S.y,t.translate(b,_),t.rotate(d),x=l.getImgSmoothing(t),x||l.setImgSmoothing(t,!0);var w=r.getRotationOffset(e);y=w.x,m=w.y}else y=h,m=v;var E;f!==1&&(E=t.globalAlpha,t.globalAlpha=E*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,m,p,g),f!==1&&(t.globalAlpha=E),d!==0&&(t.rotate(-d),t.translate(-b,-_),x||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var xF=function(){return 0},wF=function(e,r){return e.getTextAngle(r,null)},SF=function(e,r){return e.getTextAngle(r,"source")},EF=function(e,r){return e.getTextAngle(r,"target")},CF=function(e,r){return r.effectiveOpacity()},Kc=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Hr.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,l=o.eleTxrCache,u=o.lblTxrCache,c=o.slbTxrCache,f=o.tlbTxrCache,d=e.boundingBox(),h=i===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Um(d,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,l,r,a,h,xF,CF),(!v||!p)&&s.drawCachedElementPortion(t,e,u,r,a,h,wF,Kc),v&&!p&&(s.drawCachedElementPortion(t,e,c,r,a,h,SF,Kc),s.drawCachedElementPortion(t,e,f,r,a,h,EF,Kc)),s.drawElementOverlay(t,e)}};Hr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Hr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};Hr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};Hr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],l=o.bb;l.w===0||l.h===0||t.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};var dn={};dn.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,y=u*c,m=u*c,b=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;f==="straight-triangle"?(s.eleStrokeStyle(t,e,L),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=h,t.lineCap=v,s.eleStrokeStyle(t,e,L),s.drawEdgePath(e,t,o.allpts,d),t.lineCap="butt")},_=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(t.lineWidth=h+p,t.lineCap=v,p>0)s.colorStrokeStyle(t,g[0],g[1],g[2],L);else{t.lineCap="butt";return}f==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,d),t.lineCap="butt")},x=function(){a&&s.drawEdgeOverlay(t,e)},S=function(){a&&s.drawEdgeUnderlay(t,e)},w=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(t,e,L)},E=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var C=e.pstyle("ghost").value==="yes";if(C){var T=e.pstyle("ghost-offset-x").pfValue,A=e.pstyle("ghost-offset-y").pfValue,P=e.pstyle("ghost-opacity").value,R=y*P;t.translate(T,A),b(R),w(R),t.translate(-T,-A)}else _();S(),b(),w(),x(),E(),r&&t.translate(l.x1,l.y1)}};var Y2=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};dn.drawEdgeOverlay=Y2("overlay");dn.drawEdgeUnderlay=Y2("underlay");dn.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(l){var f=r.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=f,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<r.length;h+=4)e.quadraticCurveTo(r[h],r[h+1],r[h+2],r[h+3]);break;case"straight":case"haystack":for(var v=2;v+1<r.length;v+=2)e.lineTo(r[v],r[v+1]);break;case"segments":if(a.isRound){var p=sr(a.roundCorners),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;F2(e,y)}}catch(b){p.e(b)}finally{p.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)e.lineTo(r[m],r[m+1]);break}e=i,l?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};dn.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],l=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};dn.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};dn.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(r+"-arrow-width"),h=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(h*=f);var v=e.pstyle("opacity").value;s===void 0&&(s=v);var p=t.globalCompositeOperation;(s!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,u,f,l,h,n,a,i),t.globalCompositeOperation=p);var g=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,g[0],g[1],g[2],s),o.colorStrokeStyle(t,g[0],g[1],g[2],s),o.drawArrowShape(e,t,c,f,l,h,n,a,i)}}};dn.drawArrowShape=function(t,e,r,n,a,i,s,o,l){var u=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,d,h=e,v={x:s,y:o},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),y=u.arrowShapes[a];if(c){var m=u.arrowPathCache=u.arrowPathCache||[],b=pa(a),_=m[b];_!=null?(d=e=_,f=!0):(d=e=new Path2D,m[b]=d)}f||(e.beginPath&&e.beginPath(),c?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,l,v,n),e.closePath&&e.closePath()),e=h,c&&(e.translate(s,o),e.rotate(l),e.scale(g,g)),(r==="filled"||r==="both")&&(c?e.fill(d):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?g:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-l),e.translate(-s,-o))};var sy={};sy.safeDrawImage=function(t,e,r,n,a,i,s,o,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,i,s,o,l,u)}catch(c){Ue(c)}};sy.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,l=s.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),f=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),h=r.width(),v=r.height(),p=r.padding()*2,g=h+(c(r,"background-width-relative-to","value",n)==="inner"?0:p),y=v+(c(r,"background-height-relative-to","value",n)==="inner"?0:p),m=r._private.rscratch,b=c(r,"background-clip","value",n),_=b==="node",x=c(r,"background-image-opacity","value",n)*a,S=c(r,"background-image-smoothing","value",n),w=r.pstyle("corner-radius").value;w!=="auto"&&(w=r.pstyle("corner-radius").pfValue);var E=e.width||e.cachedW,C=e.height||e.cachedH;(E==null||C==null)&&(document.body.appendChild(e),E=e.cachedW=e.width||e.offsetWidth,C=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var T=E,A=C;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?T=c(r,"background-width","pfValue",n)*g:T=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?A=c(r,"background-height","pfValue",n)*y:A=c(r,"background-height","pfValue",n)),!(T===0||A===0)){if(f==="contain"){var P=Math.min(g/T,y/A);T*=P,A*=P}else if(f==="cover"){var P=Math.max(g/T,y/A);T*=P,A*=P}var R=o-g/2,D=c(r,"background-position-x","units",n),L=c(r,"background-position-x","pfValue",n);D==="%"?R+=(g-T)*L:R+=L;var I=c(r,"background-offset-x","units",n),O=c(r,"background-offset-x","pfValue",n);I==="%"?R+=(g-T)*O:R+=O;var B=l-y/2,H=c(r,"background-position-y","units",n),G=c(r,"background-position-y","pfValue",n);H==="%"?B+=(y-A)*G:B+=G;var N=c(r,"background-offset-y","units",n),$=c(r,"background-offset-y","pfValue",n);N==="%"?B+=(y-A)*$:B+=$,m.pathCache&&(R-=o,B-=l,o=0,l=0);var X=t.globalAlpha;t.globalAlpha=x;var F=i.getImgSmoothing(t),q=!1;if(S==="no"&&F?(i.setImgSmoothing(t,!1),q=!0):S==="yes"&&!F&&(i.setImgSmoothing(t,!0),q=!0),d==="no-repeat")_&&(t.save(),m.pathCache?t.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,l,g,y,w,m),t.clip())),i.safeDrawImage(t,e,0,0,E,C,R,B,T,A),_&&t.restore();else{var z=t.createPattern(e,d);t.fillStyle=z,i.nodeShapes[i.getNodeShape(r)].draw(t,o,l,g,y,w,m),t.translate(R,B),t.fill(),t.translate(-R,-B)}t.globalAlpha=X,q&&i.setImgSmoothing(t,F)}};var ka={};ka.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Wm(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};ka.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var l=s.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(u||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!r,v;r&&(v=r,t.translate(-v.x1,-v.y1)),a==null?(s.drawText(t,e,null,h,i),e.isEdge()&&(s.drawText(t,e,"source",h,i),s.drawText(t,e,"target",h,i))):s.drawText(t,e,a,h,i),r&&t.translate(v.x1,v.y1)};ka.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};ka.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*o,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],o),this.colorStrokeStyle(t,c[0],c[1],c[2],l)};function kF(t,e,r,n,a){var i=Math.min(n,a),s=i/2,o=e+n/2,l=r+a/2;t.beginPath(),t.arc(o,l,s,0,Math.PI*2),t.closePath()}function $1(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=Math.min(i,n/2,a/2);t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.quadraticCurveTo(e+n,r,e+n,r+s),t.lineTo(e+n,r+a-s),t.quadraticCurveTo(e+n,r+a,e+n-s,r+a),t.lineTo(e+s,r+a),t.quadraticCurveTo(e,r+a,e,r+a-s),t.lineTo(e,r+s),t.quadraticCurveTo(e,r,e+s,r),t.closePath()}ka.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=nr(a,"labelAngle",e);r=t.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};ka.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=nr(s,"labelX",r),u=nr(s,"labelY",r),c,f,d=this.getLabelText(e,r);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var h=r?r+"-":"",v=nr(s,"labelWidth",r),p=nr(s,"labelHeight",r),g=e.pstyle(h+"text-margin-x").pfValue,y=e.pstyle(h+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,_=e.pstyle("text-valign").value;m&&(b="center",_="center"),l+=g,u+=y;var x;switch(n?x=this.getTextAngle(e,r):x=0,x!==0&&(c=l,f=u,t.translate(c,f),t.rotate(x),l=0,u=0),_){case"top":break;case"center":u+=p/2;break;case"bottom":u+=p;break}var S=e.pstyle("text-background-opacity").value,w=e.pstyle("text-border-opacity").value,E=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue,T=e.pstyle("text-background-shape").strValue,A=T==="round-rectangle"||T==="roundrectangle",P=T==="circle",R=2;if(S>0||E>0&&w>0){var D=t.fillStyle,L=t.strokeStyle,I=t.lineWidth,O=e.pstyle("text-background-color").value,B=e.pstyle("text-border-color").value,H=e.pstyle("text-border-style").value,G=S>0,N=E>0&&w>0,$=l-C;switch(b){case"left":$-=v;break;case"center":$-=v/2;break}var X=u-p-C,F=v+2*C,q=p+2*C;if(G&&(t.fillStyle="rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(S*o,")")),N&&(t.strokeStyle="rgba(".concat(B[0],",").concat(B[1],",").concat(B[2],",").concat(w*o,")"),t.lineWidth=E,t.setLineDash))switch(H){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=E/4,t.setLineDash([]);break;case"solid":default:t.setLineDash([]);break}if(A?(t.beginPath(),$1(t,$,X,F,q,R)):P?(t.beginPath(),kF(t,$,X,F,q)):(t.beginPath(),t.rect($,X,F,q)),G&&t.fill(),N&&t.stroke(),N&&H==="double"){var z=E/2;t.beginPath(),A?$1(t,$+z,X+z,F-2*z,q-2*z,R):t.rect($+z,X+z,F-2*z,q-2*z),t.stroke()}t.fillStyle=D,t.strokeStyle=L,t.lineWidth=I,t.setLineDash&&t.setLineDash([])}var W=2*e.pstyle("text-outline-width").pfValue;if(W>0&&(t.lineWidth=W),e.pstyle("text-wrap").value==="wrap"){var te=nr(s,"labelWrapCachedLines",r),Y=nr(s,"labelLineHeight",r),V=v/2,U=this.getLabelJustification(e);switch(U==="auto"||(b==="left"?U==="left"?l+=-v:U==="center"&&(l+=-V):b==="center"?U==="left"?l+=-V:U==="right"&&(l+=V):b==="right"&&(U==="center"?l+=V:U==="right"&&(l+=v))),_){case"top":u-=(te.length-1)*Y;break;case"center":case"bottom":u-=(te.length-1)*Y;break}for(var K=0;K<te.length;K++)W>0&&t.strokeText(te[K],l,u),t.fillText(te[K],l,u),u+=Y}else W>0&&t.strokeText(d,l,u),t.fillText(d,l,u);x!==0&&(t.rotate(-x),t.translate(-c,-f))}}};var Un={};Un.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,l,u=e._private,c=u.rscratch,f=e.position();if(!(!oe(f.x)||!oe(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,h=s.usePaths(),v,p=!1,g=e.padding();o=e.width()+2*g,l=e.height()+2*g;var y;r&&(y=r,t.translate(-y.x1,-y.y1));for(var m=e.pstyle("background-image"),b=m.value,_=new Array(b.length),x=new Array(b.length),S=0,w=0;w<b.length;w++){var E=b[w],C=_[w]=E!=null&&E!=="none";if(C){var T=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",w);S++,x[w]=s.getCachedImage(E,T,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var A=e.pstyle("background-blacken").value,P=e.pstyle("border-width").pfValue,R=e.pstyle("background-opacity").value*d,D=e.pstyle("border-color").value,L=e.pstyle("border-style").value,I=e.pstyle("border-join").value,O=e.pstyle("border-cap").value,B=e.pstyle("border-position").value,H=e.pstyle("border-dash-pattern").pfValue,G=e.pstyle("border-dash-offset").pfValue,N=e.pstyle("border-opacity").value*d,$=e.pstyle("outline-width").pfValue,X=e.pstyle("outline-color").value,F=e.pstyle("outline-style").value,q=e.pstyle("outline-opacity").value*d,z=e.pstyle("outline-offset").value,W=e.pstyle("corner-radius").value;W!=="auto"&&(W=e.pstyle("corner-radius").pfValue);var te=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;s.eleFillStyle(t,e,ce)},Y=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;s.colorStrokeStyle(t,D[0],D[1],D[2],ce)},V=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;s.colorStrokeStyle(t,X[0],X[1],X[2],ce)},U=function(ce,ee,M,j){var Q=s.nodePathCache=s.nodePathCache||[],J=OT(M==="polygon"?M+","+j.join(","):M,""+ee,""+ce,""+W),re=Q[J],he,ne=!1;return re!=null?(he=re,ne=!0,c.pathCache=he):(he=new Path2D,Q[J]=c.pathCache=he),{path:he,cacheHit:ne}},K=e.pstyle("shape").strValue,Z=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(f.x,f.y);var ae=U(o,l,K,Z);v=ae.path,p=ae.cacheHit}var ie=function(){if(!p){var ce=f;h&&(ce={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(v||t,ce.x,ce.y,o,l,W,c)}h?t.fill(v):t.fill()},Ae=function(){for(var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,M=u.backgrounding,j=0,Q=0;Q<x.length;Q++){var J=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Q);if(ee&&J==="over"||!ee&&J==="inside"){j++;continue}_[Q]&&x[Q].complete&&!x[Q].error&&(j++,s.drawInscribedImage(t,x[Q],e,Q,ce))}u.backgrounding=j!==S,M!==u.backgrounding&&e.updateStyle(!1)},le=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasPie(e)&&(s.drawPie(t,e,ee),ce&&(h||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,l,W,c)))},xe=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasStripe(e)&&(t.save(),h?t.clip(c.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,l,W,c),t.clip()),s.drawStripe(t,e,ee),t.restore(),ce&&(h||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,l,W,c)))},me=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ee=(A>0?A:-A)*ce,M=A>0?0:255;A!==0&&(s.colorFillStyle(t,M,M,M,ee),h?t.fill(v):t.fill())},ue=function(){if(P>0){if(t.lineWidth=P,t.lineCap=O,t.lineJoin=I,t.setLineDash)switch(L){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(H),t.lineDashOffset=G;break;case"solid":case"double":t.setLineDash([]);break}if(B!=="center"){if(t.save(),t.lineWidth*=2,B==="inside")h?t.clip(v):t.clip();else{var ce=new Path2D;ce.rect(-o/2-P,-l/2-P,o+2*P,l+2*P),ce.addPath(v),t.clip(ce,"evenodd")}h?t.stroke(v):t.stroke(),t.restore()}else h?t.stroke(v):t.stroke();if(L==="double"){t.lineWidth=P/3;var ee=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(v):t.stroke(),t.globalCompositeOperation=ee}t.setLineDash&&t.setLineDash([])}},ge=function(){if($>0){if(t.lineWidth=$,t.lineCap="butt",t.setLineDash)switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var ce=f;h&&(ce={x:0,y:0});var ee=s.getNodeShape(e),M=P;B==="inside"&&(M=0),B==="outside"&&(M*=2);var j=(o+M+($+z))/o,Q=(l+M+($+z))/l,J=o*j,re=l*Q,he=s.nodeShapes[ee].points,ne;if(h){var be=U(J,re,ee,he);ne=be.path}if(ee==="ellipse")s.drawEllipsePath(ne||t,ce.x,ce.y,J,re);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ee)){var ve=0,Se=0,Me=0;ee==="round-diamond"?ve=(M+z+$)*1.4:ee==="round-heptagon"?(ve=(M+z+$)*1.075,Me=-(M/2+z+$)/35):ee==="round-hexagon"?ve=(M+z+$)*1.12:ee==="round-pentagon"?(ve=(M+z+$)*1.13,Me=-(M/2+z+$)/15):ee==="round-tag"?(ve=(M+z+$)*1.12,Se=(M/2+$+z)*.07):ee==="round-triangle"&&(ve=(M+z+$)*(Math.PI/2),Me=-(M+z/2+$)/Math.PI),ve!==0&&(j=(o+ve)/o,J=o*j,["round-hexagon","round-tag"].includes(ee)||(Q=(l+ve)/l,re=l*Q)),W=W==="auto"?WT(J,re):W;for(var Pe=J/2,_e=re/2,Oe=W+(M+$+z)/2,De=new Array(he.length/2),yt=new Array(he.length/2),ot=0;ot<he.length/2;ot++)De[ot]={x:ce.x+Se+Pe*he[ot*2],y:ce.y+Me+_e*he[ot*2+1]};var Yt,dt,Ct,bt,Dt=De.length;for(dt=De[Dt-1],Yt=0;Yt<Dt;Yt++)Ct=De[Yt%Dt],bt=De[(Yt+1)%Dt],yt[Yt]=ay(dt,Ct,bt,Oe),dt=Ct,Ct=bt;s.drawRoundPolygonPath(ne||t,ce.x+Se,ce.y+Me,o*j,l*Q,he,yt)}else if(["roundrectangle","round-rectangle"].includes(ee))W=W==="auto"?Bn(J,re):W,s.drawRoundRectanglePath(ne||t,ce.x,ce.y,J,re,W+(M+$+z)/2);else if(["cutrectangle","cut-rectangle"].includes(ee))W=W==="auto"?jm():W,s.drawCutRectanglePath(ne||t,ce.x,ce.y,J,re,null,W+(M+$+z)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ee))W=W==="auto"?Bn(J,re):W,s.drawBottomRoundRectanglePath(ne||t,ce.x,ce.y,J,re,W+(M+$+z)/2);else if(ee==="barrel")s.drawBarrelPath(ne||t,ce.x,ce.y,J,re);else if(ee.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ee)){var pn=(M+$+z)/o;he=fl(dl(he,pn)),s.drawPolygonPath(ne||t,ce.x,ce.y,o,l,he)}else{var ht=(M+$+z)/o;he=fl(dl(he,-ht)),s.drawPolygonPath(ne||t,ce.x,ce.y,o,l,he)}if(h?t.stroke(ne):t.stroke(),F==="double"){t.lineWidth=M/3;var Gr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(ne):t.stroke(),t.globalCompositeOperation=Gr}t.setLineDash&&t.setLineDash([])}},de=function(){a&&s.drawNodeOverlay(t,e,f,o,l)},pe=function(){a&&s.drawNodeUnderlay(t,e,f,o,l)},ye=function(){s.drawElementText(t,e,null,n)},ke=e.pstyle("ghost").value==="yes";if(ke){var Be=e.pstyle("ghost-offset-x").pfValue,qe=e.pstyle("ghost-offset-y").pfValue,Le=e.pstyle("ghost-opacity").value,Ne=Le*d;t.translate(Be,qe),V(),ge(),te(Le*R),ie(),Ae(Ne,!0),Y(Le*N),ue(),le(A!==0||P!==0),xe(A!==0||P!==0),Ae(Ne,!1),me(Ne),t.translate(-Be,-qe)}h&&t.translate(-f.x,-f.y),pe(),h&&t.translate(f.x,f.y),V(),ge(),te(),ie(),Ae(d,!0),Y(),ue(),le(A!==0||P!==0),xe(A!==0||P!==0),Ae(d,!1),me(),h&&t.translate(-f.x,-f.y),ye(),de(),r&&t.translate(y.x1,y.y1)}};var X2=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(a=a||n.position(),i==null||s==null){var h=n.padding();i=n.width()+2*h,s=n.height()+2*h}o.colorFillStyle(r,c[0],c[1],c[2],u),o.nodeShapes[f].draw(r,a.x,a.y,i+l*2,s+l*2,d),r.fill()}}}};Un.drawNodeOverlay=X2("overlay");Un.drawNodeUnderlay=X2("underlay");Un.hasPie=function(t){return t=t[0],t._private.hasPie};Un.hasStripe=function(t){return t=t[0],t._private.hasStripe};Un.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,l=n.x,u=n.y,c=e.width(),f=e.height(),d=Math.min(c,f)/2,h,v=0,p=this.usePaths();if(p&&(l=0,u=0),i.units==="%"?d=d*i.pfValue:i.pfValue!==void 0&&(d=i.pfValue/2),s.units==="%"?h=d*s.pfValue:s.pfValue!==void 0&&(h=s.pfValue/2),!(h>=d))for(var g=1;g<=a.pieBackgroundN;g++){var y=e.pstyle("pie-"+g+"-background-size").value,m=e.pstyle("pie-"+g+"-background-color").value,b=e.pstyle("pie-"+g+"-background-opacity").value*r,_=y/100;_+v>1&&(_=1-v);var x=1.5*Math.PI+2*Math.PI*v;x+=o;var S=2*Math.PI*_,w=x+S;y===0||v>=1||v+_>1||(h===0?(t.beginPath(),t.moveTo(l,u),t.arc(l,u,d,x,w),t.closePath()):(t.beginPath(),t.arc(l,u,d,x,w),t.arc(l,u,h,w,x,!0),t.closePath()),this.colorFillStyle(t,m[0],m[1],m[2],b),t.fill(),v+=_)}};Un.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),l=e.height(),u=0,c=this.usePaths();t.save();var f=e.pstyle("stripe-direction").value,d=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var h=o,v=l;d.units==="%"?(h=h*d.pfValue,v=v*d.pfValue):d.pfValue!==void 0&&(h=d.pfValue,v=d.pfValue),c&&(i=0,s=0),s-=h/2,i-=v/2;for(var p=1;p<=a.stripeBackgroundN;p++){var g=e.pstyle("stripe-"+p+"-background-size").value,y=e.pstyle("stripe-"+p+"-background-color").value,m=e.pstyle("stripe-"+p+"-background-opacity").value*r,b=g/100;b+u>1&&(b=1-u),!(g===0||u>=1||u+b>1)&&(t.beginPath(),t.rect(i,s+v*u,h,v*b),t.closePath(),this.colorFillStyle(t,y[0],y[1],y[2],m),t.fill(),u+=b)}t.restore()};var Qt={},TF=100;Qt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Qt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Qt.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),d=ma(u,f),h=ma(c,f);i=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,h))}else{var v=s?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();i=t.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,g))}else if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();i=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=s?{x:0,y:0}:r.position(),_=r.paddedWidth(),x=r.paddedHeight(),S=_/2,w=x/2,E=r.pstyle("background-gradient-direction").value;switch(E){case"to-bottom":i=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":i=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":i=t.createLinearGradient(b.x+S,b.y,b.x-S,b.y);break;case"to-right":i=t.createLinearGradient(b.x-S,b.y,b.x+S,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-S,b.y-w,b.x+S,b.y+w);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-S,b.y+w,b.x+S,b.y-w);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+S,b.y-w,b.x-S,b.y+w);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+S,b.y+w,b.x-S,b.y-w);break}}if(!i)return null;for(var C=l.length===o.length,T=o.length,A=0;A<T;A++)i.addColorStop(C?l[A]:A/(T-1),"rgba("+o[A][0]+","+o[A][1]+","+o[A][2]+","+a+")");return i};Qt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Qt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Qt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Qt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Qt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Qt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Qt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var l=a*s,u=i*s,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=r.canvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=r.bufferCanvases[d],c.width=l,c.height=u,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,s<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u,e.pixelRatio=s}};Qt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Qt.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Qt.render=function(t){var e=this;t=t||qT();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,l=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=e.data,c=u.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),d=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,v=r.hasCompoundNodes(),p=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);d=d&&!n&&e.motionBlurEnabled&&!g;var y=d;n||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),d&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var m=r.style(),b=r.zoom(),_=s!==void 0?s:b,x=r.pan(),S={x:x.x,y:x.y},w={zoom:b,pan:{x:x.x,y:x.y}},E=e.prevViewport,C=E===void 0||w.zoom!==E.zoom||w.pan.x!==E.pan.x||w.pan.y!==E.pan.y;!C&&!(p&&!v)&&(e.motionBlurPxRatio=1),o&&(S=o),_*=l,S.x*=l,S.y*=l;var T=e.getCachedZSortedEles();function A(Y,V,U,K,Z){var ae=Y.globalCompositeOperation;Y.globalCompositeOperation="destination-out",e.colorFillStyle(Y,255,255,255,e.motionBlurTransparency),Y.fillRect(V,U,K,Z),Y.globalCompositeOperation=ae}function P(Y,V){var U,K,Z,ae;!e.clearingMotionBlur&&(Y===u.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Y===u.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(U={x:x.x*h,y:x.y*h},K=b*h,Z=e.canvasWidth*h,ae=e.canvasHeight*h):(U=S,K=_,Z=e.canvasWidth,ae=e.canvasHeight),Y.setTransform(1,0,0,1,0,0),V==="motionBlur"?A(Y,0,0,Z,ae):!n&&(V===void 0||V)&&Y.clearRect(0,0,Z,ae),a||(Y.translate(U.x,U.y),Y.scale(K,K)),o&&Y.translate(o.x,o.y),s&&Y.scale(s,s)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var R=e.data.bufferContexts[e.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var w=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var D=u.contexts[e.NODE],L=e.textureCache.texture,w=e.textureCache.viewport;D.setTransform(1,0,0,1,0,0),d?A(D,0,0,w.width,w.height):D.clearRect(0,0,w.width,w.height);var I=m.core("outside-texture-bg-color").value,O=m.core("outside-texture-bg-opacity").value;e.colorFillStyle(D,I[0],I[1],I[2],O),D.fillRect(0,0,w.width,w.height);var b=r.zoom();P(D,!1),D.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/l,w.height/w.zoom/l),D.drawImage(L,w.mpan.x,w.mpan.y,w.width/w.zoom/l,w.height/w.zoom/l)}else e.textureOnViewport&&!n&&(e.textureCache=null);var B=r.extent(),H=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),G=e.hideEdgesOnViewport&&H,N=[];if(N[e.NODE]=!c[e.NODE]&&d&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,N[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),N[e.DRAG]=!c[e.DRAG]&&d&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,N[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||N[e.NODE]){var $=d&&!N[e.NODE]&&h!==1,D=n||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:u.contexts[e.NODE]),X=d&&!$?"motionBlur":void 0;P(D,X),G?e.drawCachedNodes(D,T.nondrag,l,B):e.drawLayeredElements(D,T.nondrag,l,B),e.debug&&e.drawDebugPoints(D,T.nondrag),!a&&!d&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||N[e.DRAG])){var $=d&&!N[e.DRAG]&&h!==1,D=n||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:u.contexts[e.DRAG]);P(D,d&&!$?"motionBlur":void 0),G?e.drawCachedNodes(D,T.drag,l,B):e.drawCachedElements(D,T.drag,l,B),e.debug&&e.drawDebugPoints(D,T.drag),!a&&!d&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,P),d&&h!==1){var F=u.contexts[e.NODE],q=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],z=u.contexts[e.DRAG],W=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],te=function(V,U,K){V.setTransform(1,0,0,1,0,0),K||!y?V.clearRect(0,0,e.canvasWidth,e.canvasHeight):A(V,0,0,e.canvasWidth,e.canvasHeight);var Z=h;V.drawImage(U,0,0,e.canvasWidth*Z,e.canvasHeight*Z,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||N[e.NODE])&&(te(F,q,N[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||N[e.DRAG])&&(te(z,W,N[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=w,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),d&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},TF)),n||r.emit("render")};var Mi;Qt.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,l=a.canvasNeedsRedraw,u=t.forcedContext;if(r.showFps||!s&&l[r.SELECT_BOX]&&!o){var c=u||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var f=r.cy.zoom(),d=i.core("selection-box-border-width").value/f;c.lineWidth=d,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var f=r.cy.zoom(),h=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=r.lastRedrawTime;if(r.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),g="1 frame = "+v+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Mi){var y=c.measureText(g);Mi=y.actualBoundingBoxAscent}c.fillText(g,0,Mi);var m=60;c.strokeRect(0,Mi+10,250,20),c.fillRect(0,Mi+10,250*Math.min(p/m,1),20)}o||(l[r.SELECT_BOX]=!1)}};function V1(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function AF(t,e,r){var n=V1(t,t.VERTEX_SHADER,e),a=V1(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function PF(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function oy(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function RF(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function MF(t,e,r,n,a){var i=n*r+e.x,s=a*r+e.y;return s=Math.round(t.canvasHeight-s),[i,s]}function DF(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function LF(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Qn(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function qa(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function OF(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function IF(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function Z2(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function Q2(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function BF(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function FF(t,e,r,n){var a=Z2(t,e),i=pt(a,2),s=i[0],o=i[1],l=Q2(t,o,n),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW),o===t.FLOAT?t.vertexAttribPointer(r,s,o,!1,0,0):o===t.INT&&t.vertexAttribIPointer(r,s,o,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),u}function Pr(t,e,r,n){var a=Z2(t,r),i=pt(a,3),s=i[0],o=i[1],l=i[2],u=Q2(t,o,e*s),c=s*l,f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),o===t.FLOAT?t.vertexAttribPointer(n,s,o,!1,c,0):o===t.INT&&t.vertexAttribIPointer(n,s,o,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var d=new Array(e),h=0;h<e;h++)d[h]=BF(t,o,u,c,s,h);return f.dataArray=u,f.stride=c,f.size=s,f.getView=function(v){return d[v]},f.setPoint=function(v,p,g){var y=d[v];y[0]=p,y[1]=g},f.bufferSubData=function(v){t.bindBuffer(t.ARRAY_BUFFER,f),v?t.bufferSubData(t.ARRAY_BUFFER,0,u,0,v*s):t.bufferSubData(t.ARRAY_BUFFER,0,u)},f}function qF(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var u=0;u<3;u++){var c=r+u;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,u*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),l.getMatrixView=function(f){return i[f]},l.setData=function(f,d){i[d].set(f,0)},l.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,a)},l}function NF(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var H1=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Yc(){var t=new H1(9);return H1!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function W1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function zF(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=r[0],h=r[1],v=r[2],p=r[3],g=r[4],y=r[5],m=r[6],b=r[7],_=r[8];return t[0]=d*n+h*s+v*u,t[1]=d*a+h*o+v*c,t[2]=d*i+h*l+v*f,t[3]=p*n+g*s+y*u,t[4]=p*a+g*o+y*c,t[5]=p*i+g*l+y*f,t[6]=m*n+b*s+_*u,t[7]=m*a+b*o+_*c,t[8]=m*i+b*l+_*f,t}function Wo(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=l,t[6]=d*n+h*s+u,t[7]=d*a+h*o+c,t[8]=d*i+h*l+f,t}function G1(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*s,t[1]=h*a+d*o,t[2]=h*i+d*l,t[3]=h*s-d*n,t[4]=h*o-d*a,t[5]=h*l-d*i,t[6]=u,t[7]=c,t[8]=f,t}function sm(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $F(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var VF=function(){function t(e,r,n,a){Hn(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Wn(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,s=this.texSize,o=i/a,l=n*o,u=a*o;return l>s&&(o=s/n,l=n*o,u=a*o),{scale:o,texW:l,texH:u}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,l=this.texHeight,u=this.getScale(n),c=u.scale,f=u.texW,d=u.texH,h=function(b,_){if(a&&_){var x=_.context,S=b.x,w=b.row,E=S,C=l*w;x.save(),x.translate(E,C),x.scale(c,c),a(x,n),x.restore()}},v=[null,null],p=function(){h(i.freePointer,i.canvas),v[0]={x:i.freePointer.x,y:i.freePointer.row*l,w:f,h:d},v[1]={x:i.freePointer.x+f,y:i.freePointer.row*l,w:0,h:d},i.freePointer.x+=f,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},g=function(){var b=i.scratch,_=i.canvas;b.clear(),h({x:0,row:0},b);var x=s-i.freePointer.x,S=f-x,w=l;{var E=i.freePointer.x,C=i.freePointer.row*l,T=x;_.context.drawImage(b,0,0,T,w,E,C,T,w),v[0]={x:E,y:C,w:T,h:d}}{var A=x,P=(i.freePointer.row+1)*l,R=S;_&&_.context.drawImage(b,A,0,R,w,0,P,R,w),v[1]={x:0,y:P,w:R,h:d}}i.freePointer.x=S,i.freePointer.row++},y=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=s)p();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(y(),p()):this.enableWrapping?g():(y(),p())}return this.keyToLocation.set(r,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=IF(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),HF=function(){function t(e,r,n,a){Hn(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Wn(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new VF(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=sr(this.atlases),l;try{var u=function(){var f=l.value,d=f.getKeys(),h=WF(n,d);if(h.size===0)return a.push(f),d.forEach(function(x){return i.set(x,f)}),1;s||(s=r._createAtlas(),a.push(s));var v=sr(d),p;try{for(v.s();!(p=v.n()).done;){var g=p.value;if(!h.has(g)){var y=f.getOffsets(g),m=pt(y,2),b=m[0],_=m[1];s.canFit({w:b.w+_.w,h:b.h})||(s.lock(),s=r._createAtlas(),a.push(s)),f.canvas&&(r._copyTextureToNewAtlas(g,f,s),i.set(g,s))}}}catch(x){v.e(x)}finally{v.f()}f.dispose()};for(o.s();!(l=o.n()).done;)u()}catch(c){o.e(c)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),s=pt(i,2),o=s[0],l=s[1];if(l.w===0)a.draw(r,o,function(d){d.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),u.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,o.w,0,l.w,l.h);var c=o.w+l.w,f=o.h;a.draw(r,{w:c,h:f},function(d){d.drawImage(u,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function WF(t,e){return t.intersection?t.intersection(e):new Set(ol(t).filter(function(r){return e.has(r)}))}var GF=function(){function t(e,r){Hn(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Wn(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,l=this._cacheScratchCanvas(s),u=new HF(this.r,i,o,l);this.collections.set(r,u)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=Ee({type:r,atlasCollection:i},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(s,o,l,u){return u?((!i||o!=n||l!=a)&&(n=o,a=l,i=r(s,o,l)),i):r(s,o,l)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,l=o===void 0?function(){return!0}:o,u=a.filterType,c=u===void 0?function(){return!0}:u,f=!1,d=!1,h=sr(r),v;try{for(h.s();!(v=h.n()).done;){var p=v.value;if(l(p)){var g=sr(this.renderTypes.values()),y;try{var m=function(){var _=y.value,x=_.type;if(c(x)){var S=n.collections.get(_.collection),w=_.getKey(p),E=Array.isArray(w)?w:[w];if(s)E.forEach(function(P){return S.markKeyForGC(P)}),d=!0;else{var C=_.getID?_.getID(p):p.id(),T=n._key(x,C),A=n.typeAndIdToKey.get(T);A!==void 0&&!LF(E,A)&&(f=!0,n.typeAndIdToKey.delete(T),A.forEach(function(P){return S.markKeyForGC(P)}))}}};for(g.s();!(y=g.n()).done;)m()}catch(b){g.e(b)}finally{g.f()}}}}catch(b){h.e(b)}finally{h.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var r=sr(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),l=!1,u=o.draw(i,a,function(d){s.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,a.w,a.h),d.clip(),s.drawElement(d,r,a,!0,!0),d.restore()):s.drawElement(d,r,a,!0,!0),l=!0});if(l){var c=s.getID?s.getID(r):r.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return u}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(l){var u=i.getBoundingBox(r,l),c=a.getOrCreateAtlas(r,n,u,l),f=c.getOffsets(l),d=pt(f,2),h=d[0],v=d[1];return{atlas:c,tex:h,tex1:h,tex2:v,bb:u}})}},{key:"getDebugInfo",value:function(){var r=[],n=sr(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=pt(a.value,2),s=i[0],o=i[1],l=o.getCounts(),u=l.keyCount,c=l.atlasCount;r.push({type:s,keyCount:u,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return r}}])}(),UF=function(){function t(e){Hn(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Wn(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),jF=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,KF=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,YF=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,XF=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,as={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},bl={IGNORE:1,USE_BB:2},Xc=0,U1=1,j1=2,Zc=3,Na=4,vo=5,Di=6,Li=7,ZF=function(){function t(e,r,n){Hn(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=PF,this.atlasManager=new GF(e,n),this.batchManager=new UF(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(as.SCREEN),this.pickingProgram=this._createShaderProgram(as.PICKING),this.vao=this._createVAO()}return Wn(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Xc,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Na," || aVertType == ").concat(Li,` 
             || aVertType == `).concat(vo," || aVertType == ").concat(Di,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(U1,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(j1,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Zc,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(jF,`
      `).concat(KF,`
      `).concat(YF,`
      `).concat(XF,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Xc,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Zc,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Na,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Na," || vVertType == ").concat(Li,` 
          || vVertType == `).concat(vo," || vVertType == ").concat(Di,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Na,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Li,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Li,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=AF(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(l)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),FF(a,"vec2",i.aPosition,r),this.transformBuffer=qF(a,n,i.aTransform),this.indexBuffer=Pr(a,n,"vec4",i.aIndex),this.vertTypeBuffer=Pr(a,n,"int",i.aVertType),this.atlasIdBuffer=Pr(a,n,"int",i.aAtlasId),this.texBuffer=Pr(a,n,"vec4",i.aTex),this.pointAPointBBuffer=Pr(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=Pr(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=Pr(a,n,"vec2",i.aLineWidth),this.colorBuffer=Pr(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=Pr(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=Pr(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return wn(n,"Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:as.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(r,o)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var l=o.getTexPickingMode(r);if(l===bl.IGNORE)return;if(l==bl.USE_BB){this.drawPickingRectangle(r,n,a);return}}var u=i.getAtlasInfo(r,a),c=sr(u),f;try{for(c.s();!(f=c.n()).done;){var d=f.value,h=d.atlas,v=d.tex1,p=d.tex2;s.canAddToCurrentBatch(h)||this.endBatch();for(var g=s.getAtlasIndexForBatch(h),y=0,m=[[v,!0],[p,!1]];y<m.length;y++){var b=pt(m[y],2),_=b[0],x=b[1];if(_.w!=0){var S=this.instanceCount;this.vertTypeBuffer.getView(S)[0]=Xc;var w=this.indexBuffer.getView(S);qa(n,w);var E=this.atlasIdBuffer.getView(S);E[0]=g;var C=this.texBuffer.getView(S);C[0]=_.x,C[1]=_.y,C[2]=_.w,C[3]=_.h;var T=this.transformBuffer.getMatrixView(S);this.setTransformMatrix(r,T,o,d,x),this.instanceCount++,x||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(A){c.e(A)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=r.pstyle(a.shapeProps.padding).pfValue),i){var l=i.bb,u=i.tex1,c=i.tex2,f=u.w/(u.w+c.w);s||(f=1-f);var d=this._getAdjustedBB(l,o,s,f);this._applyTransformMatrix(n,d,a,r)}else{var h=a.getBoundingBox(r),v=this._getAdjustedBB(h,o,!0,1);this._applyTransformMatrix(n,v,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var s,o;W1(r);var l=a.getRotation?a.getRotation(i):0;if(l!==0){var u=a.getRotationPoint(i),c=u.x,f=u.y;Wo(r,r,[c,f]),G1(r,r,l);var d=a.getRotationOffset(i);s=d.x+(n.xOffset||0),o=d.y+(n.yOffset||0)}else s=n.x1,o=n.y1;Wo(r,r,[s,o]),sm(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var s=r.x1,o=r.y1,l=r.w,u=r.h,c=r.yOffset;n&&(s-=n,o-=n,l+=2*n,u+=2*n);var f=0,d=l*i;return a&&i<1?l=d:!a&&i<1&&(f=l-d,s+=f,l=d),{x1:s,y1:o,w:l,h:u,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=Na;var o=this.indexBuffer.getView(s);qa(n,o);var l=this.colorBuffer.getView(s);Qn([0,0,0],1,l);var u=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,u,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var s=i.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=o,o===vo||o===Di){var u=i.getBoundingBox(r),c=this._getCornerRadius(r,s.radius,u),f=this.cornerRadiusBuffer.getView(l);f[0]=c,f[1]=c,f[2]=c,f[3]=c,o===Di&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(l);qa(n,d);var h=r.pstyle(s.color).value,v=r.pstyle(s.opacity).value,p=this.colorBuffer.getView(l);Qn(h,v,p);var g=this.lineWidthBuffer.getView(l);if(g[0]=0,g[1]=0,s.border){var y=r.pstyle("border-width").value;if(y>0){var m=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,_=this.borderColorBuffer.getView(l);Qn(m,b,_);var x=r.pstyle("border-position").value;if(x==="inside")g[0]=0,g[1]=-y;else if(x==="outside")g[0]=y,g[1]=0;else{var S=y/2;g[0]=S,g[1]=-S}}}var w=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,w,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return Na;case"ellipse":return Li;case"roundrectangle":case"round-rectangle":return vo;case"bottom-round-rectangle":return Di;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,s=a.h;if(r.pstyle(n).value==="auto")return Bn(i,s);var o=r.pstyle(n).pfValue,l=i/2,u=s/2;return Math.min(o,u,l)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,s,o,l;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,l=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,l=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(l)||l==null)){var u=r.pstyle(a+"-arrow-shape").value;if(u!=="none"){var c=r.pstyle(a+"-arrow-color").value,f=r.pstyle("opacity").value,d=r.pstyle("line-opacity").value,h=f*d,v=r.pstyle("width").pfValue,p=r.pstyle("arrow-scale").value,g=this.r.getArrowWidth(v,p),y=this.instanceCount,m=this.transformBuffer.getMatrixView(y);W1(m),Wo(m,m,[s,o]),sm(m,m,[g,g]),G1(m,m,l),this.vertTypeBuffer.getView(y)[0]=Zc;var b=this.indexBuffer.getView(y);qa(n,b);var _=this.colorBuffer.getView(y);Qn(c,h,_),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,u=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=U1;var f=this.indexBuffer.getView(c);qa(n,f);var d=this.colorBuffer.getView(c);Qn(l,u,d);var h=this.lineWidthBuffer.getView(c);h[0]=o;var v=this.pointAPointBBuffer.getView(c);v[0]=a[0],v[1]=a[1],v[2]=a[2],v[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<a.length-2;p+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=j1;var y=this.indexBuffer.getView(g);qa(n,y);var m=this.colorBuffer.getView(g);Qn(l,u,m);var b=this.lineWidthBuffer.getView(g);b[0]=o;var _=a[p-2],x=a[p-1],S=a[p],w=a[p+1],E=a[p+2],C=a[p+3],T=a[p+4],A=a[p+5];p==0&&(_=2*S-E+.001,x=2*w-C+.001),p==a.length-4&&(T=2*E-S+.001,A=2*C-w+.001);var P=this.pointAPointBBuffer.getView(g);P[0]=_,P[1]=x,P[2]=S,P[3]=w;var R=this.pointCPointDBuffer.getView(g);R[0]=E,R[1]=C,R[2]=T,R[3]=A,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var n=r._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(this._isValidEdge(r)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var s=i/n;this._setCurvePoint(r,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var l=(1-n)*r[o]+n*r[o+2],u=(1-n)*r[o+1]+n*r[o+3];s[o]=l,s[o+1]=u}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=sr(this.buffers),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;u.bufferSubData(i)}}catch(v){o.e(v)}finally{o.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(r);for(var d=0;d<c.length;d++)r.activeTexture(r.TEXTURE0+d),r.bindTexture(r.TEXTURE_2D,c[d].texture),r.uniform1i(s.uTextures[d],d);r.uniform1f(s.uZoom,RF(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var h=Qn(this.bgColor,1);r.uniform4fv(s.uBGColor,h),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),J2={};J2.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=QF(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=NF(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new ZF(r,n,t);var a=function(f){return function(d){return r.getTextAngle(d,f)}},i=function(f){return function(d){var h=d.pstyle(f);return h&&h.value}},s=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},o=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?bl.USE_BB:bl.IGNORE},l=function(f){var d=f.position(),h=d.x,v=d.y,p=f.outerWidth(),g=f.outerHeight();return{w:p,h:g,x1:h-p/2,y1:v-g/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:DF,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:Qc(e.getLabelKey,null),getBoundingBox:Jc(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:Qc(e.getSourceLabelKey,"source"),getBoundingBox:Jc(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:Qc(e.getTargetLabelKey,"target"),getBoundingBox:Jc(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var u=Is(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,f){var d=!1;f&&f.length>0&&(d|=r.drawing.invalidate(f)),d&&u()}),JF(r)};function QF(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return TT(r)}function eA(t,e){var r=t._private.rscratch;return nr(r,"labelWrapCachedLines",e)||[]}var Qc=function(e,r){return function(n){var a=e(n),i=eA(n,r);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},Jc=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),l=eA(n,r),u=i.h/l.length,c=u*o,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:u,yOffset:c}}}return i}};function JF(t){{var e=t.render;t.render=function(i){i=i||{};var s=t.cy;t.webgl&&(s.zoom()>U2?(eq(t),e.call(t,i)):(tq(t),rA(t,i,as.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,s,o,l){return oq(t,i,s)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,s){a.call(t,i,s),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(s,{type:"node-body"})}}}function eq(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function tq(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function rq(t){var e=t.canvasWidth,r=t.canvasHeight,n=oy(t),a=n.pan,i=n.zoom,s=Yc();Wo(s,s,[a.x,a.y]),sm(s,s,[i,i]);var o=Yc();$F(o,e,r);var l=Yc();return zF(l,o,s),l}function tA(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=oy(t),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(s,s)}function nq(t,e){t.drawSelectionRectangle(e,function(r){return tA(t,r)})}function aq(t){var e=t.data.contexts[t.NODE];e.save(),tA(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function iq(t){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),l=t.data.contexts[t.NODE],u=o.atlases,c=0;c<u.length;c++){var f=u[c],d=f.canvas;if(d){var h=d.width,v=d.height,p=h*c,g=d.height*s,y=.4;l.save(),l.scale(y,y),l.drawImage(d,p,g),l.strokeStyle="black",l.rect(p,g,h,v),l.stroke(),l.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function sq(t,e,r,n,a){var i,s,o,l,u=oy(t),c=u.pan,f=u.zoom;{var d=MF(t,c,f,e,r),h=pt(d,2),v=h[0],p=h[1],g=6;i=v-g/2,s=p-g/2,o=g,l=g}if(o===0||l===0)return[];var y=t.data.contexts[t.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),rA(t,null,as.PICKING),t.pickingFrameBuffer.needsDraw=!1);var m=o*l,b=new Uint8Array(m*4);y.readPixels(i,s,o,l,y.RGBA,y.UNSIGNED_BYTE,b),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var _=new Set,x=0;x<m;x++){var S=b.slice(x*4,x*4+4),w=OF(S)-1;w>=0&&_.add(w)}return _}function oq(t,e,r){var n=sq(t,e,r),a=t.getCachedZSortedEles(),i,s,o=sr(n),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=a[u];if(!i&&c.isNode()&&(i=c),!s&&c.isEdge()&&(s=c),i&&s)break}}catch(f){o.e(f)}finally{o.f()}return[i,s].filter(Boolean)}function ef(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function rA(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&nq(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=t.data.contexts[t.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=rq(t),l=t.getCachedZSortedEles();if(i=l.length,a.startFrame(o,r),r.screen){for(var u=0;u<l.nondrag.length;u++)ef(t,u,l.nondrag[u]);for(var c=0;c<l.drag.length;c++)ef(t,c,l.drag[c])}else if(r.picking)for(var f=0;f<l.length;f++)ef(t,f,l[f]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(aq(t),iq(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var d=performance.now(),h=!1,v=Math.ceil(d-n),p=a.getDebugInfo(),g=["".concat(i," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(r.name,") - time ").concat(v,"ms, ").concat(g));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var y=p.atlasInfo,m=sr(y),b;try{for(m.s();!(b=m.n()).done;){var _=b.value;console.log("  ".concat(_.type,": ").concat(_.keyCount," keys, ").concat(_.atlasCount," atlases"))}}catch(x){m.e(x)}finally{m.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var jn={};jn.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+s*i[l*2],r+o*i[l*2+1]);t.closePath()};jn.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return F2(t,o)}),t.closePath()};jn.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,l=i==="auto"?Bn(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,l),t.arcTo(e+s,r+o,e,r+o,l),t.arcTo(e-s,r+o,e-s,r,l),t.arcTo(e-s,r-o,e,r-o,l),t.lineTo(e,r-o),t.closePath()};jn.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,l=i==="auto"?Bn(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,l),t.arcTo(e-s,r+o,e-s,r,l),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};jn.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,l=a/2,u=s==="auto"?jm():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+u,r-l),t.lineTo(e+o-u,r-l),t.lineTo(e+o,r-l+u),t.lineTo(e+o,r+l-u),t.lineTo(e+o-u,r+l),t.lineTo(e-o+u,r+l),t.lineTo(e-o,r+l-u),t.lineTo(e-o,r-l+u),t.closePath()};jn.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,l=e+i,u=r-s,c=r+s,f=Up(n,a),d=f.widthOffset,h=f.heightOffset,v=f.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(o,u+h),t.lineTo(o,c-h),t.quadraticCurveTo(o+v,c,o+d,c),t.lineTo(l-d,c),t.quadraticCurveTo(l-v,c,l,c-h),t.lineTo(l,u+h),t.quadraticCurveTo(l-v,u,l-d,u),t.lineTo(o+d,u),t.quadraticCurveTo(o+v,u,o,u+h),t.closePath()};var K1=Math.sin(0),Y1=Math.cos(0),om={},lm={},nA=Math.PI/40;for(var za=0*Math.PI;za<2*Math.PI;za+=nA)om[za]=Math.sin(za),lm[za]=Math.cos(za);jn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=nA)i=e-o*om[u]*K1+o*lm[u]*Y1,s=r+l*lm[u]*K1+l*om[u]*Y1,u===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};var $s={};$s.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};$s.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=oe(t.maxWidth)||oe(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,u=t.scale;else if(o){var c=1/0,f=1/0;oe(t.maxWidth)&&(c=u*t.maxWidth/i),oe(t.maxHeight)&&(f=u*t.maxHeight/s),u=Math.min(c,f),i*=u,s*=u}o||(i*=l,s*=l,u*=l);var d=document.createElement("canvas");d.width=i,d.height=s,d.style.width=i+"px",d.style.height=s+"px";var h=d.getContext("2d");if(i>0&&s>0){h.clearRect(0,0,i,s),h.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(t.full)h.translate(-n.x1*u,-n.y1*u),h.scale(u,u),this.drawElements(h,v),h.scale(1/u,1/u),h.translate(n.x1*u,n.y1*u);else{var p=e.pan(),g={x:p.x*u,y:p.y*u};u*=e.zoom(),h.translate(g.x,g.y),h.scale(u,u),this.drawElements(h,v),h.scale(1/u,1/u),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,i,s),h.fill())}return d};function lq(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function X1(t){var e=t.indexOf(",");return t.substr(e+1)}function aA(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new vi(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return lq(X1(n()),r);case"base64":return X1(n());case"base64uri":default:return n()}}$s.png=function(t){return aA(t,this.bufferCanvasImage(t),"image/png")};$s.jpg=function(t){return aA(t,this.bufferCanvasImage(t),"image/jpeg")};var iA={};iA.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var uq=sA,Re=sA.prototype;Re.CANVAS_LAYERS=3;Re.SELECT_BOX=0;Re.DRAG=1;Re.NODE=2;Re.WEBGL=3;Re.CANVAS_TYPES=["2d","2d","2d","webgl2"];Re.BUFFER_COUNT=3;Re.TEXTURE_BUFFER=0;Re.MOTIONBLUR_BUFFER_NODE=1;Re.MOTIONBLUR_BUFFER_DRAG=2;function sA(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Re.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Re.CANVAS_LAYERS),contexts:new Array(Re.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Re.CANVAS_LAYERS),bufferCanvases:new Array(Re.BUFFER_COUNT),bufferContexts:new Array(Re.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};nD()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<Re.CANVAS_LAYERS;u++){var c=e.data.canvases[u]=n.createElement("canvas"),f=Re.CANVAS_TYPES[u];e.data.contexts[u]=c.getContext(f),e.data.contexts[u]||nt("Could not create canvas of type "+f),Object.keys(l).forEach(function(Y){c.style[Y]=l[Y]}),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(Re.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[u]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Re.NODE].setAttribute("data-id","layer"+Re.NODE+"-node"),e.data.canvases[Re.SELECT_BOX].setAttribute("data-id","layer"+Re.SELECT_BOX+"-selectbox"),e.data.canvases[Re.DRAG].setAttribute("data-id","layer"+Re.DRAG+"-drag"),e.data.canvases[Re.WEBGL]&&e.data.canvases[Re.WEBGL].setAttribute("data-id","layer"+Re.WEBGL+"-webgl");for(var u=0;u<Re.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=n.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var d=Zt(),h=function(V){return{x:(V.x1+V.x2)/2,y:(V.y1+V.y2)/2}},v=function(V){return{x:-V.w/2,y:-V.h/2}},p=function(V){var U=V[0]._private,K=U.oldBackgroundTimestamp===U.backgroundTimestamp;return!K},g=function(V){return V[0]._private.nodeKey},y=function(V){return V[0]._private.labelStyleKey},m=function(V){return V[0]._private.sourceLabelStyleKey},b=function(V){return V[0]._private.targetLabelStyleKey},_=function(V,U,K,Z,ae){return e.drawElement(V,U,K,!1,!1,ae)},x=function(V,U,K,Z,ae){return e.drawElementText(V,U,K,Z,"main",ae)},S=function(V,U,K,Z,ae){return e.drawElementText(V,U,K,Z,"source",ae)},w=function(V,U,K,Z,ae){return e.drawElementText(V,U,K,Z,"target",ae)},E=function(V){return V.boundingBox(),V[0]._private.bodyBounds},C=function(V){return V.boundingBox(),V[0]._private.labelBounds.main||d},T=function(V){return V.boundingBox(),V[0]._private.labelBounds.source||d},A=function(V){return V.boundingBox(),V[0]._private.labelBounds.target||d},P=function(V,U){return U},R=function(V){return h(E(V))},D=function(V,U,K){var Z=V?V+"-":"";return{x:U.x+K.pstyle(Z+"text-margin-x").pfValue,y:U.y+K.pstyle(Z+"text-margin-y").pfValue}},L=function(V,U,K){var Z=V[0]._private.rscratch;return{x:Z[U],y:Z[K]}},I=function(V){return D("",L(V,"labelX","labelY"),V)},O=function(V){return D("source",L(V,"sourceLabelX","sourceLabelY"),V)},B=function(V){return D("target",L(V,"targetLabelX","targetLabelY"),V)},H=function(V){return v(E(V))},G=function(V){return v(T(V))},N=function(V){return v(A(V))},$=function(V){var U=C(V),K=v(C(V));if(V.isNode()){switch(V.pstyle("text-halign").value){case"left":K.x=-U.w-(U.leftPad||0);break;case"right":K.x=-(U.rightPad||0);break}switch(V.pstyle("text-valign").value){case"top":K.y=-U.h-(U.topPad||0);break;case"bottom":K.y=-(U.botPad||0);break}}return K},X=e.data.eleTxrCache=new Vi(e,{getKey:g,doesEleInvalidateKey:p,drawElement:_,getBoundingBox:E,getRotationPoint:R,getRotationOffset:H,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),F=e.data.lblTxrCache=new Vi(e,{getKey:y,drawElement:x,getBoundingBox:C,getRotationPoint:I,getRotationOffset:$,isVisible:P}),q=e.data.slbTxrCache=new Vi(e,{getKey:m,drawElement:S,getBoundingBox:T,getRotationPoint:O,getRotationOffset:G,isVisible:P}),z=e.data.tlbTxrCache=new Vi(e,{getKey:b,drawElement:w,getBoundingBox:A,getRotationPoint:B,getRotationOffset:N,isVisible:P}),W=e.data.lyrTxrCache=new j2(e);e.onUpdateEleCalcs(function(V,U){X.invalidateElements(U),F.invalidateElements(U),q.invalidateElements(U),z.invalidateElements(U),W.invalidateElements(U);for(var K=0;K<U.length;K++){var Z=U[K]._private;Z.oldBackgroundTimestamp=Z.backgroundTimestamp}});var te=function(V){for(var U=0;U<V.length;U++)W.enqueueElementRefinement(V[U].ele)};X.onDequeue(te),F.onDequeue(te),q.onDequeue(te),z.onDequeue(te),t.webgl&&e.initWebgl(t,{getStyleKey:g,getLabelKey:y,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:_,drawLabel:x,drawSourceLabel:S,drawTargetLabel:w,getElementBox:E,getLabelBox:C,getSourceLabelBox:T,getTargetLabelBox:A,getElementRotationPoint:R,getElementRotationOffset:H,getLabelRotationPoint:I,getSourceLabelRotationPoint:O,getTargetLabelRotationPoint:B,getLabelRotationOffset:$,getSourceLabelRotationOffset:G,getTargetLabelRotationOffset:N})}Re.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Re.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Re.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Re.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var cq=typeof Path2D<"u";Re.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Re.usePaths=function(){return cq&&this.pathsEnabled};Re.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Re.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Re.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":St(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[K2,Hr,dn,sy,ka,Un,Qt,J2,jn,$s,iA].forEach(function(t){Ee(Re,t)});var fq=[{name:"null",impl:O2},{name:"base",impl:W2},{name:"canvas",impl:uq}],dq=[{type:"layout",extensions:FB},{type:"renderer",extensions:fq}],oA={},lA={};function uA(t,e,r){var n=r,a=function(E){Ue("Can not register `"+e+"` for `"+t+"` since `"+E+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(_s.prototype[e])return a(e);_s.prototype[e]=r}else if(t==="collection"){if(It.prototype[e])return a(e);It.prototype[e]=r}else if(t==="layout"){for(var i=function(E){this.options=E,r.call(this,E),$e(this._private)||(this._private={}),this._private.cy=E.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var u=o[l];s[u]=s[u]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=r.prototype.stop;s.stop=function(){var w=this.options;if(w&&w.animate){var E=this.animations;if(E)for(var C=0;C<E.length;C++)E[C].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(E){return E._private.cy},d={addEventFields:function(E,C){C.layout=E,C.cy=f(E),C.target=E},bubble:function(){return!0},parent:function(E){return f(E)}};Ee(s,{createEmitter:function(){return this._private.emitter=new Vl(d,this),this},emitter:function(){return this._private.emitter},on:function(E,C){return this.emitter().on(E,C),this},one:function(E,C){return this.emitter().one(E,C),this},once:function(E,C){return this.emitter().one(E,C),this},removeListener:function(E,C){return this.emitter().removeListener(E,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(E,C){return this.emitter().emit(E,C),this}}),Ge.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=cA("renderer","base"),v=h.prototype,p=r,g=r.prototype,y=function(){h.apply(this,arguments),p.apply(this,arguments)},m=y.prototype;for(var b in v){var _=v[b],x=g[b]!=null;if(x)return a(b);m[b]=_}for(var S in g)m[S]=g[S];v.clientFunctions.forEach(function(w){m[w]=m[w]||function(){nt("Renderer does not implement `renderer."+w+"()` on its prototype")}}),n=y}else if(t==="__proto__"||t==="constructor"||t==="prototype")return nt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return AT({map:oA,keys:[t,e],value:n})}function cA(t,e){return PT({map:oA,keys:[t,e]})}function hq(t,e,r,n,a){return AT({map:lA,keys:[t,e,r,n],value:a})}function vq(t,e,r,n){return PT({map:lA,keys:[t,e,r,n]})}var um=function(){if(arguments.length===2)return cA.apply(null,arguments);if(arguments.length===3)return uA.apply(null,arguments);if(arguments.length===4)return vq.apply(null,arguments);if(arguments.length===5)return hq.apply(null,arguments);nt("Invalid extension access syntax")};_s.prototype.extension=um;dq.forEach(function(t){t.extensions.forEach(function(e){uA(t.type,e.name,e.impl)})});var _l=function(){if(!(this instanceof _l))return new _l;this.length=0},_a=_l.prototype;_a.instanceString=function(){return"stylesheet"};_a.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};_a.css=function(t,e){var r=this.length-1;if(we(t))this[r].properties.push({name:t,value:e});else if($e(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var l=Pt.properties[s]||Pt.properties[Dl(s)];if(l!=null){var u=l.name,c=o;this[r].properties.push({name:u,value:c})}}}return this};_a.style=_a.css;_a.generateStyle=function(t){var e=new Pt(t);return this.appendToStyle(e)};_a.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};var gq="3.33.1",zn=function(e){if(e===void 0&&(e={}),$e(e))return new _s(e);if(we(e))return um.apply(um,arguments)};zn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(zn),t.apply(null,e),this};zn.warnings=function(t){return BT(t)};zn.version=gq;zn.stylesheet=zn.Stylesheet=_l;var fA={exports:{}};function ly(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tf,Z1;function pq(){if(Z1)return tf;Z1=1;function t(){this.__data__=[],this.size=0}return tf=t,tf}var rf,Q1;function bi(){if(Q1)return rf;Q1=1;function t(e,r){return e===r||e!==e&&r!==r}return rf=t,rf}var nf,J1;function Xl(){if(J1)return nf;J1=1;var t=bi();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return nf=e,nf}var af,e_;function mq(){if(e_)return af;e_=1;var t=Xl(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return af=n,af}var sf,t_;function yq(){if(t_)return sf;t_=1;var t=Xl();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return sf=e,sf}var of,r_;function bq(){if(r_)return of;r_=1;var t=Xl();function e(r){return t(this.__data__,r)>-1}return of=e,of}var lf,n_;function _q(){if(n_)return lf;n_=1;var t=Xl();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return lf=e,lf}var uf,a_;function Zl(){if(a_)return uf;a_=1;var t=pq(),e=mq(),r=yq(),n=bq(),a=_q();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,uf=i,uf}var cf,i_;function xq(){if(i_)return cf;i_=1;var t=Zl();function e(){this.__data__=new t,this.size=0}return cf=e,cf}var ff,s_;function wq(){if(s_)return ff;s_=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return ff=t,ff}var df,o_;function Sq(){if(o_)return df;o_=1;function t(e){return this.__data__.get(e)}return df=t,df}var hf,l_;function Eq(){if(l_)return hf;l_=1;function t(e){return this.__data__.has(e)}return hf=t,hf}var vf,u_;function dA(){if(u_)return vf;u_=1;var t=typeof ca=="object"&&ca&&ca.Object===Object&&ca;return vf=t,vf}var gf,c_;function Tr(){if(c_)return gf;c_=1;var t=dA(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return gf=r,gf}var pf,f_;function _i(){if(f_)return pf;f_=1;var t=Tr(),e=t.Symbol;return pf=e,pf}var mf,d_;function Cq(){if(d_)return mf;d_=1;var t=_i(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),l=s[a];try{s[a]=void 0;var u=!0}catch{}var c=n.call(s);return u&&(o?s[a]=l:delete s[a]),c}return mf=i,mf}var yf,h_;function kq(){if(h_)return yf;h_=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return yf=r,yf}var bf,v_;function Ta(){if(v_)return bf;v_=1;var t=_i(),e=Cq(),r=kq(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return bf=s,bf}var _f,g_;function pr(){if(g_)return _f;g_=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return _f=t,_f}var xf,p_;function Vs(){if(p_)return xf;p_=1;var t=Ta(),e=pr(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var l=t(o);return l==n||l==a||l==r||l==i}return xf=s,xf}var wf,m_;function Tq(){if(m_)return wf;m_=1;var t=Tr(),e=t["__core-js_shared__"];return wf=e,wf}var Sf,y_;function Aq(){if(y_)return Sf;y_=1;var t=Tq(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Sf=r,Sf}var Ef,b_;function hA(){if(b_)return Ef;b_=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Ef=r,Ef}var Cf,__;function Pq(){if(__)return Cf;__=1;var t=Vs(),e=Aq(),r=pr(),n=hA(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!r(d)||e(d))return!1;var h=t(d)?c:i;return h.test(n(d))}return Cf=f,Cf}var kf,x_;function Rq(){if(x_)return kf;x_=1;function t(e,r){return e==null?void 0:e[r]}return kf=t,kf}var Tf,w_;function Aa(){if(w_)return Tf;w_=1;var t=Pq(),e=Rq();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Tf=r,Tf}var Af,S_;function uy(){if(S_)return Af;S_=1;var t=Aa(),e=Tr(),r=t(e,"Map");return Af=r,Af}var Pf,E_;function Ql(){if(E_)return Pf;E_=1;var t=Aa(),e=t(Object,"create");return Pf=e,Pf}var Rf,C_;function Mq(){if(C_)return Rf;C_=1;var t=Ql();function e(){this.__data__=t?t(null):{},this.size=0}return Rf=e,Rf}var Mf,k_;function Dq(){if(k_)return Mf;k_=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Mf=t,Mf}var Df,T_;function Lq(){if(T_)return Df;T_=1;var t=Ql(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return Df=a,Df}var Lf,A_;function Oq(){if(A_)return Lf;A_=1;var t=Ql(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Lf=n,Lf}var Of,P_;function Iq(){if(P_)return Of;P_=1;var t=Ql(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Of=r,Of}var If,R_;function Bq(){if(R_)return If;R_=1;var t=Mq(),e=Dq(),r=Lq(),n=Oq(),a=Iq();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,If=i,If}var Bf,M_;function Fq(){if(M_)return Bf;M_=1;var t=Bq(),e=Zl(),r=uy();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Bf=n,Bf}var Ff,D_;function qq(){if(D_)return Ff;D_=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Ff=t,Ff}var qf,L_;function Jl(){if(L_)return qf;L_=1;var t=qq();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return qf=e,qf}var Nf,O_;function Nq(){if(O_)return Nf;O_=1;var t=Jl();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Nf=e,Nf}var zf,I_;function zq(){if(I_)return zf;I_=1;var t=Jl();function e(r){return t(this,r).get(r)}return zf=e,zf}var $f,B_;function $q(){if(B_)return $f;B_=1;var t=Jl();function e(r){return t(this,r).has(r)}return $f=e,$f}var Vf,F_;function Vq(){if(F_)return Vf;F_=1;var t=Jl();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Vf=e,Vf}var Hf,q_;function cy(){if(q_)return Hf;q_=1;var t=Fq(),e=Nq(),r=zq(),n=$q(),a=Vq();function i(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Hf=i,Hf}var Wf,N_;function Hq(){if(N_)return Wf;N_=1;var t=Zl(),e=uy(),r=cy(),n=200;function a(i,s){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<n-1)return l.push([i,s]),this.size=++o.size,this;o=this.__data__=new r(l)}return o.set(i,s),this.size=o.size,this}return Wf=a,Wf}var Gf,z_;function eu(){if(z_)return Gf;z_=1;var t=Zl(),e=xq(),r=wq(),n=Sq(),a=Eq(),i=Hq();function s(o){var l=this.__data__=new t(o);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,Gf=s,Gf}var Uf,$_;function fy(){if($_)return Uf;$_=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return Uf=t,Uf}var jf,V_;function vA(){if(V_)return jf;V_=1;var t=Aa(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return jf=e,jf}var Kf,H_;function tu(){if(H_)return Kf;H_=1;var t=vA();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Kf=e,Kf}var Yf,W_;function ru(){if(W_)return Yf;W_=1;var t=tu(),e=bi(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var l=i[s];(!(n.call(i,s)&&e(l,o))||o===void 0&&!(s in i))&&t(i,s,o)}return Yf=a,Yf}var Xf,G_;function Hs(){if(G_)return Xf;G_=1;var t=ru(),e=tu();function r(n,a,i,s){var o=!i;i||(i={});for(var l=-1,u=a.length;++l<u;){var c=a[l],f=s?s(i[c],n[c],c,i,n):void 0;f===void 0&&(f=n[c]),o?e(i,c,f):t(i,c,f)}return i}return Xf=r,Xf}var Zf,U_;function Wq(){if(U_)return Zf;U_=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Zf=t,Zf}var Qf,j_;function Wr(){if(j_)return Qf;j_=1;function t(e){return e!=null&&typeof e=="object"}return Qf=t,Qf}var Jf,K_;function Gq(){if(K_)return Jf;K_=1;var t=Ta(),e=Wr(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return Jf=n,Jf}var ed,Y_;function Ws(){if(Y_)return ed;Y_=1;var t=Gq(),e=Wr(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(s){return e(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return ed=i,ed}var td,X_;function mt(){if(X_)return td;X_=1;var t=Array.isArray;return td=t,td}var Hi={exports:{}},rd,Z_;function Uq(){if(Z_)return rd;Z_=1;function t(){return!1}return rd=t,rd}Hi.exports;var Q_;function xi(){return Q_||(Q_=1,function(t,e){var r=Tr(),n=Uq(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s?r.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||n;t.exports=u}(Hi,Hi.exports)),Hi.exports}var nd,J_;function nu(){if(J_)return nd;J_=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return nd=r,nd}var ad,ex;function dy(){if(ex)return ad;ex=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return ad=e,ad}var id,tx;function jq(){if(tx)return id;tx=1;var t=Ta(),e=dy(),r=Wr(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",f="[object Object]",d="[object RegExp]",h="[object Set]",v="[object String]",p="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]",A={};A[m]=A[b]=A[_]=A[x]=A[S]=A[w]=A[E]=A[C]=A[T]=!0,A[n]=A[a]=A[g]=A[i]=A[y]=A[s]=A[o]=A[l]=A[u]=A[c]=A[f]=A[d]=A[h]=A[v]=A[p]=!1;function P(R){return r(R)&&e(R.length)&&!!A[t(R)]}return id=P,id}var sd,rx;function au(){if(rx)return sd;rx=1;function t(e){return function(r){return e(r)}}return sd=t,sd}var Wi={exports:{}};Wi.exports;var nx;function hy(){return nx||(nx=1,function(t,e){var r=dA(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i&&r.process,o=function(){try{var l=a&&a.require&&a.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(Wi,Wi.exports)),Wi.exports}var od,ax;function Gs(){if(ax)return od;ax=1;var t=jq(),e=au(),r=hy(),n=r&&r.isTypedArray,a=n?e(n):t;return od=a,od}var ld,ix;function gA(){if(ix)return ld;ix=1;var t=Wq(),e=Ws(),r=mt(),n=xi(),a=nu(),i=Gs(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var f=r(u),d=!f&&e(u),h=!f&&!d&&n(u),v=!f&&!d&&!h&&i(u),p=f||d||h||v,g=p?t(u.length,String):[],y=g.length;for(var m in u)(c||o.call(u,m))&&!(p&&(m=="length"||h&&(m=="offset"||m=="parent")||v&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||a(m,y)))&&g.push(m);return g}return ld=l,ld}var ud,sx;function iu(){if(sx)return ud;sx=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return ud=e,ud}var cd,ox;function pA(){if(ox)return cd;ox=1;function t(e,r){return function(n){return e(r(n))}}return cd=t,cd}var fd,lx;function Kq(){if(lx)return fd;lx=1;var t=pA(),e=t(Object.keys,Object);return fd=e,fd}var dd,ux;function vy(){if(ux)return dd;ux=1;var t=iu(),e=Kq(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var s=[];for(var o in Object(i))n.call(i,o)&&o!="constructor"&&s.push(o);return s}return dd=a,dd}var hd,cx;function hn(){if(cx)return hd;cx=1;var t=Vs(),e=dy();function r(n){return n!=null&&e(n.length)&&!t(n)}return hd=r,hd}var vd,fx;function Kn(){if(fx)return vd;fx=1;var t=gA(),e=vy(),r=hn();function n(a){return r(a)?t(a):e(a)}return vd=n,vd}var gd,dx;function Yq(){if(dx)return gd;dx=1;var t=Hs(),e=Kn();function r(n,a){return n&&t(a,e(a),n)}return gd=r,gd}var pd,hx;function Xq(){if(hx)return pd;hx=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return pd=t,pd}var md,vx;function Zq(){if(vx)return md;vx=1;var t=pr(),e=iu(),r=Xq(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return r(s);var o=e(s),l=[];for(var u in s)u=="constructor"&&(o||!a.call(s,u))||l.push(u);return l}return md=i,md}var yd,gx;function Pa(){if(gx)return yd;gx=1;var t=gA(),e=Zq(),r=hn();function n(a){return r(a)?t(a,!0):e(a)}return yd=n,yd}var bd,px;function Qq(){if(px)return bd;px=1;var t=Hs(),e=Pa();function r(n,a){return n&&t(a,e(a),n)}return bd=r,bd}var Gi={exports:{}};Gi.exports;var mx;function mA(){return mx||(mx=1,function(t,e){var r=Tr(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,d=o?o(f):new u.constructor(f);return u.copy(d),d}t.exports=l}(Gi,Gi.exports)),Gi.exports}var _d,yx;function yA(){if(yx)return _d;yx=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return _d=t,_d}var xd,bx;function bA(){if(bx)return xd;bx=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,s=[];++n<a;){var o=e[n];r(o,n,e)&&(s[i++]=o)}return s}return xd=t,xd}var wd,_x;function _A(){if(_x)return wd;_x=1;function t(){return[]}return wd=t,wd}var Sd,xx;function gy(){if(xx)return Sd;xx=1;var t=bA(),e=_A(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),t(a(s),function(o){return n.call(s,o)}))}:e;return Sd=i,Sd}var Ed,wx;function Jq(){if(wx)return Ed;wx=1;var t=Hs(),e=gy();function r(n,a){return t(n,e(n),a)}return Ed=r,Ed}var Cd,Sx;function py(){if(Sx)return Cd;Sx=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Cd=t,Cd}var kd,Ex;function su(){if(Ex)return kd;Ex=1;var t=pA(),e=t(Object.getPrototypeOf,Object);return kd=e,kd}var Td,Cx;function xA(){if(Cx)return Td;Cx=1;var t=py(),e=su(),r=gy(),n=_A(),a=Object.getOwnPropertySymbols,i=a?function(s){for(var o=[];s;)t(o,r(s)),s=e(s);return o}:n;return Td=i,Td}var Ad,kx;function eN(){if(kx)return Ad;kx=1;var t=Hs(),e=xA();function r(n,a){return t(n,e(n),a)}return Ad=r,Ad}var Pd,Tx;function wA(){if(Tx)return Pd;Tx=1;var t=py(),e=mt();function r(n,a,i){var s=a(n);return e(n)?s:t(s,i(n))}return Pd=r,Pd}var Rd,Ax;function SA(){if(Ax)return Rd;Ax=1;var t=wA(),e=gy(),r=Kn();function n(a){return t(a,r,e)}return Rd=n,Rd}var Md,Px;function tN(){if(Px)return Md;Px=1;var t=wA(),e=xA(),r=Pa();function n(a){return t(a,r,e)}return Md=n,Md}var Dd,Rx;function rN(){if(Rx)return Dd;Rx=1;var t=Aa(),e=Tr(),r=t(e,"DataView");return Dd=r,Dd}var Ld,Mx;function nN(){if(Mx)return Ld;Mx=1;var t=Aa(),e=Tr(),r=t(e,"Promise");return Ld=r,Ld}var Od,Dx;function EA(){if(Dx)return Od;Dx=1;var t=Aa(),e=Tr(),r=t(e,"Set");return Od=r,Od}var Id,Lx;function aN(){if(Lx)return Id;Lx=1;var t=Aa(),e=Tr(),r=t(e,"WeakMap");return Id=r,Id}var Bd,Ox;function wi(){if(Ox)return Bd;Ox=1;var t=rN(),e=uy(),r=nN(),n=EA(),a=aN(),i=Ta(),s=hA(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",f="[object WeakMap]",d="[object DataView]",h=s(t),v=s(e),p=s(r),g=s(n),y=s(a),m=i;return(t&&m(new t(new ArrayBuffer(1)))!=d||e&&m(new e)!=o||r&&m(r.resolve())!=u||n&&m(new n)!=c||a&&m(new a)!=f)&&(m=function(b){var _=i(b),x=_==l?b.constructor:void 0,S=x?s(x):"";if(S)switch(S){case h:return d;case v:return o;case p:return u;case g:return c;case y:return f}return _}),Bd=m,Bd}var Fd,Ix;function iN(){if(Ix)return Fd;Ix=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Fd=r,Fd}var qd,Bx;function CA(){if(Bx)return qd;Bx=1;var t=Tr(),e=t.Uint8Array;return qd=e,qd}var Nd,Fx;function my(){if(Fx)return Nd;Fx=1;var t=CA();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Nd=e,Nd}var zd,qx;function sN(){if(qx)return zd;qx=1;var t=my();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return zd=e,zd}var $d,Nx;function oN(){if(Nx)return $d;Nx=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return $d=e,$d}var Vd,zx;function lN(){if(zx)return Vd;zx=1;var t=_i(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return Vd=n,Vd}var Hd,$x;function kA(){if($x)return Hd;$x=1;var t=my();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return Hd=e,Hd}var Wd,Vx;function uN(){if(Vx)return Wd;Vx=1;var t=my(),e=sN(),r=oN(),n=lN(),a=kA(),i="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",f="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",g="[object Float64Array]",y="[object Int8Array]",m="[object Int16Array]",b="[object Int32Array]",_="[object Uint8Array]",x="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]";function E(C,T,A){var P=C.constructor;switch(T){case h:return t(C);case i:case s:return new P(+C);case v:return e(C,A);case p:case g:case y:case m:case b:case _:case x:case S:case w:return a(C,A);case o:return new P;case l:case f:return new P(C);case u:return r(C);case c:return new P;case d:return n(C)}}return Wd=E,Wd}var Gd,Hx;function TA(){if(Hx)return Gd;Hx=1;var t=pr(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return Gd=r,Gd}var Ud,Wx;function AA(){if(Wx)return Ud;Wx=1;var t=TA(),e=su(),r=iu();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return Ud=n,Ud}var jd,Gx;function cN(){if(Gx)return jd;Gx=1;var t=wi(),e=Wr(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return jd=n,jd}var Kd,Ux;function fN(){if(Ux)return Kd;Ux=1;var t=cN(),e=au(),r=hy(),n=r&&r.isMap,a=n?e(n):t;return Kd=a,Kd}var Yd,jx;function dN(){if(jx)return Yd;jx=1;var t=wi(),e=Wr(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return Yd=n,Yd}var Xd,Kx;function hN(){if(Kx)return Xd;Kx=1;var t=dN(),e=au(),r=hy(),n=r&&r.isSet,a=n?e(n):t;return Xd=a,Xd}var Zd,Yx;function PA(){if(Yx)return Zd;Yx=1;var t=eu(),e=fy(),r=ru(),n=Yq(),a=Qq(),i=mA(),s=yA(),o=Jq(),l=eN(),u=SA(),c=tN(),f=wi(),d=iN(),h=uN(),v=AA(),p=mt(),g=xi(),y=fN(),m=pr(),b=hN(),_=Kn(),x=Pa(),S=1,w=2,E=4,C="[object Arguments]",T="[object Array]",A="[object Boolean]",P="[object Date]",R="[object Error]",D="[object Function]",L="[object GeneratorFunction]",I="[object Map]",O="[object Number]",B="[object Object]",H="[object RegExp]",G="[object Set]",N="[object String]",$="[object Symbol]",X="[object WeakMap]",F="[object ArrayBuffer]",q="[object DataView]",z="[object Float32Array]",W="[object Float64Array]",te="[object Int8Array]",Y="[object Int16Array]",V="[object Int32Array]",U="[object Uint8Array]",K="[object Uint8ClampedArray]",Z="[object Uint16Array]",ae="[object Uint32Array]",ie={};ie[C]=ie[T]=ie[F]=ie[q]=ie[A]=ie[P]=ie[z]=ie[W]=ie[te]=ie[Y]=ie[V]=ie[I]=ie[O]=ie[B]=ie[H]=ie[G]=ie[N]=ie[$]=ie[U]=ie[K]=ie[Z]=ie[ae]=!0,ie[R]=ie[D]=ie[X]=!1;function Ae(le,xe,me,ue,ge,de){var pe,ye=xe&S,ke=xe&w,Be=xe&E;if(me&&(pe=ge?me(le,ue,ge,de):me(le)),pe!==void 0)return pe;if(!m(le))return le;var qe=p(le);if(qe){if(pe=d(le),!ye)return s(le,pe)}else{var Le=f(le),Ne=Le==D||Le==L;if(g(le))return i(le,ye);if(Le==B||Le==C||Ne&&!ge){if(pe=ke||Ne?{}:v(le),!ye)return ke?l(le,a(pe,le)):o(le,n(pe,le))}else{if(!ie[Le])return ge?le:{};pe=h(le,Le,ye)}}de||(de=new t);var Ce=de.get(le);if(Ce)return Ce;de.set(le,pe),b(le)?le.forEach(function(M){pe.add(Ae(M,xe,me,M,le,de))}):y(le)&&le.forEach(function(M,j){pe.set(j,Ae(M,xe,me,j,le,de))});var ce=Be?ke?c:u:ke?x:_,ee=qe?void 0:ce(le);return e(ee||le,function(M,j){ee&&(j=M,M=le[j]),r(pe,j,Ae(M,xe,me,j,le,de))}),pe}return Zd=Ae,Zd}var Qd,Xx;function vN(){if(Xx)return Qd;Xx=1;var t=PA(),e=4;function r(n){return t(n,e)}return Qd=r,Qd}var Jd,Zx;function yy(){if(Zx)return Jd;Zx=1;function t(e){return function(){return e}}return Jd=t,Jd}var eh,Qx;function gN(){if(Qx)return eh;Qx=1;function t(e){return function(r,n,a){for(var i=-1,s=Object(r),o=a(r),l=o.length;l--;){var u=o[e?l:++i];if(n(s[u],u,s)===!1)break}return r}}return eh=t,eh}var th,Jx;function by(){if(Jx)return th;Jx=1;var t=gN(),e=t();return th=e,th}var rh,ew;function _y(){if(ew)return rh;ew=1;var t=by(),e=Kn();function r(n,a){return n&&t(n,a,e)}return rh=r,rh}var nh,tw;function pN(){if(tw)return nh;tw=1;var t=hn();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var s=a.length,o=n?s:-1,l=Object(a);(n?o--:++o<s)&&i(l[o],o,l)!==!1;);return a}}return nh=e,nh}var ah,rw;function ou(){if(rw)return ah;rw=1;var t=_y(),e=pN(),r=e(t);return ah=r,ah}var ih,nw;function Ra(){if(nw)return ih;nw=1;function t(e){return e}return ih=t,ih}var sh,aw;function RA(){if(aw)return sh;aw=1;var t=Ra();function e(r){return typeof r=="function"?r:t}return sh=e,sh}var oh,iw;function MA(){if(iw)return oh;iw=1;var t=fy(),e=ou(),r=RA(),n=mt();function a(i,s){var o=n(i)?t:e;return o(i,r(s))}return oh=a,oh}var lh,sw;function DA(){return sw||(sw=1,lh=MA()),lh}var uh,ow;function mN(){if(ow)return uh;ow=1;var t=ou();function e(r,n){var a=[];return t(r,function(i,s,o){n(i,s,o)&&a.push(i)}),a}return uh=e,uh}var ch,lw;function yN(){if(lw)return ch;lw=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return ch=e,ch}var fh,uw;function bN(){if(uw)return fh;uw=1;function t(e){return this.__data__.has(e)}return fh=t,fh}var dh,cw;function LA(){if(cw)return dh;cw=1;var t=cy(),e=yN(),r=bN();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new t;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,dh=n,dh}var hh,fw;function _N(){if(fw)return hh;fw=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return hh=t,hh}var vh,dw;function OA(){if(dw)return vh;dw=1;function t(e,r){return e.has(r)}return vh=t,vh}var gh,hw;function IA(){if(hw)return gh;hw=1;var t=LA(),e=_N(),r=OA(),n=1,a=2;function i(s,o,l,u,c,f){var d=l&n,h=s.length,v=o.length;if(h!=v&&!(d&&v>h))return!1;var p=f.get(s),g=f.get(o);if(p&&g)return p==o&&g==s;var y=-1,m=!0,b=l&a?new t:void 0;for(f.set(s,o),f.set(o,s);++y<h;){var _=s[y],x=o[y];if(u)var S=d?u(x,_,y,o,s,f):u(_,x,y,s,o,f);if(S!==void 0){if(S)continue;m=!1;break}if(b){if(!e(o,function(w,E){if(!r(b,E)&&(_===w||c(_,w,l,u,f)))return b.push(E)})){m=!1;break}}else if(!(_===x||c(_,x,l,u,f))){m=!1;break}}return f.delete(s),f.delete(o),m}return gh=i,gh}var ph,vw;function xN(){if(vw)return ph;vw=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return ph=t,ph}var mh,gw;function xy(){if(gw)return mh;gw=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return mh=t,mh}var yh,pw;function wN(){if(pw)return yh;pw=1;var t=_i(),e=CA(),r=bi(),n=IA(),a=xN(),i=xy(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Map]",d="[object Number]",h="[object RegExp]",v="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",b=t?t.prototype:void 0,_=b?b.valueOf:void 0;function x(S,w,E,C,T,A,P){switch(E){case m:if(S.byteLength!=w.byteLength||S.byteOffset!=w.byteOffset)return!1;S=S.buffer,w=w.buffer;case y:return!(S.byteLength!=w.byteLength||!A(new e(S),new e(w)));case l:case u:case d:return r(+S,+w);case c:return S.name==w.name&&S.message==w.message;case h:case p:return S==w+"";case f:var R=a;case v:var D=C&s;if(R||(R=i),S.size!=w.size&&!D)return!1;var L=P.get(S);if(L)return L==w;C|=o,P.set(S,w);var I=n(R(S),R(w),C,T,A,P);return P.delete(S),I;case g:if(_)return _.call(S)==_.call(w)}return!1}return yh=x,yh}var bh,mw;function SN(){if(mw)return bh;mw=1;var t=SA(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o,l,u,c){var f=o&e,d=t(i),h=d.length,v=t(s),p=v.length;if(h!=p&&!f)return!1;for(var g=h;g--;){var y=d[g];if(!(f?y in s:n.call(s,y)))return!1}var m=c.get(i),b=c.get(s);if(m&&b)return m==s&&b==i;var _=!0;c.set(i,s),c.set(s,i);for(var x=f;++g<h;){y=d[g];var S=i[y],w=s[y];if(l)var E=f?l(w,S,y,s,i,c):l(S,w,y,i,s,c);if(!(E===void 0?S===w||u(S,w,o,l,c):E)){_=!1;break}x||(x=y=="constructor")}if(_&&!x){var C=i.constructor,T=s.constructor;C!=T&&"constructor"in i&&"constructor"in s&&!(typeof C=="function"&&C instanceof C&&typeof T=="function"&&T instanceof T)&&(_=!1)}return c.delete(i),c.delete(s),_}return bh=a,bh}var _h,yw;function EN(){if(yw)return _h;yw=1;var t=eu(),e=IA(),r=wN(),n=SN(),a=wi(),i=mt(),s=xi(),o=Gs(),l=1,u="[object Arguments]",c="[object Array]",f="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function v(p,g,y,m,b,_){var x=i(p),S=i(g),w=x?c:a(p),E=S?c:a(g);w=w==u?f:w,E=E==u?f:E;var C=w==f,T=E==f,A=w==E;if(A&&s(p)){if(!s(g))return!1;x=!0,C=!1}if(A&&!C)return _||(_=new t),x||o(p)?e(p,g,y,m,b,_):r(p,g,w,y,m,b,_);if(!(y&l)){var P=C&&h.call(p,"__wrapped__"),R=T&&h.call(g,"__wrapped__");if(P||R){var D=P?p.value():p,L=R?g.value():g;return _||(_=new t),b(D,L,y,m,_)}}return A?(_||(_=new t),n(p,g,y,m,b,_)):!1}return _h=v,_h}var xh,bw;function BA(){if(bw)return xh;bw=1;var t=EN(),e=Wr();function r(n,a,i,s,o){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,s,r,o)}return xh=r,xh}var wh,_w;function CN(){if(_w)return wh;_w=1;var t=eu(),e=BA(),r=1,n=2;function a(i,s,o,l){var u=o.length,c=u,f=!l;if(i==null)return!c;for(i=Object(i);u--;){var d=o[u];if(f&&d[2]?d[1]!==i[d[0]]:!(d[0]in i))return!1}for(;++u<c;){d=o[u];var h=d[0],v=i[h],p=d[1];if(f&&d[2]){if(v===void 0&&!(h in i))return!1}else{var g=new t;if(l)var y=l(v,p,h,i,s,g);if(!(y===void 0?e(p,v,r|n,l,g):y))return!1}}return!0}return wh=a,wh}var Sh,xw;function FA(){if(xw)return Sh;xw=1;var t=pr();function e(r){return r===r&&!t(r)}return Sh=e,Sh}var Eh,ww;function kN(){if(ww)return Eh;ww=1;var t=FA(),e=Kn();function r(n){for(var a=e(n),i=a.length;i--;){var s=a[i],o=n[s];a[i]=[s,o,t(o)]}return a}return Eh=r,Eh}var Ch,Sw;function qA(){if(Sw)return Ch;Sw=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Ch=t,Ch}var kh,Ew;function TN(){if(Ew)return kh;Ew=1;var t=CN(),e=kN(),r=qA();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||t(s,a,i)}}return kh=n,kh}var Th,Cw;function Si(){if(Cw)return Th;Cw=1;var t=Ta(),e=Wr(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Th=n,Th}var Ah,kw;function wy(){if(kw)return Ah;kw=1;var t=mt(),e=Si(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return Ah=a,Ah}var Ph,Tw;function AN(){if(Tw)return Ph;Tw=1;var t=cy(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],l=i.cache;if(l.has(o))return l.get(o);var u=n.apply(this,s);return i.cache=l.set(o,u)||l,u};return i.cache=new(r.Cache||t),i}return r.Cache=t,Ph=r,Ph}var Rh,Aw;function PN(){if(Aw)return Rh;Aw=1;var t=AN(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return Rh=r,Rh}var Mh,Pw;function RN(){if(Pw)return Mh;Pw=1;var t=PN(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,l,u){i.push(l?u.replace(r,"$1"):o||s)}),i});return Mh=n,Mh}var Dh,Rw;function lu(){if(Rw)return Dh;Rw=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Dh=t,Dh}var Lh,Mw;function MN(){if(Mw)return Lh;Mw=1;var t=_i(),e=lu(),r=mt(),n=Si(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Lh=s,Lh}var Oh,Dw;function NA(){if(Dw)return Oh;Dw=1;var t=MN();function e(r){return r==null?"":t(r)}return Oh=e,Oh}var Ih,Lw;function uu(){if(Lw)return Ih;Lw=1;var t=mt(),e=wy(),r=RN(),n=NA();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return Ih=a,Ih}var Bh,Ow;function Us(){if(Ow)return Bh;Ow=1;var t=Si();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Bh=e,Bh}var Fh,Iw;function cu(){if(Iw)return Fh;Iw=1;var t=uu(),e=Us();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return Fh=r,Fh}var qh,Bw;function DN(){if(Bw)return qh;Bw=1;var t=cu();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return qh=e,qh}var Nh,Fw;function LN(){if(Fw)return Nh;Fw=1;function t(e,r){return e!=null&&r in Object(e)}return Nh=t,Nh}var zh,qw;function zA(){if(qw)return zh;qw=1;var t=uu(),e=Ws(),r=mt(),n=nu(),a=dy(),i=Us();function s(o,l,u){l=t(l,o);for(var c=-1,f=l.length,d=!1;++c<f;){var h=i(l[c]);if(!(d=o!=null&&u(o,h)))break;o=o[h]}return d||++c!=f?d:(f=o==null?0:o.length,!!f&&a(f)&&n(h,f)&&(r(o)||e(o)))}return zh=s,zh}var $h,Nw;function $A(){if(Nw)return $h;Nw=1;var t=LN(),e=zA();function r(n,a){return n!=null&&e(n,a,t)}return $h=r,$h}var Vh,zw;function ON(){if(zw)return Vh;zw=1;var t=BA(),e=DN(),r=$A(),n=wy(),a=FA(),i=qA(),s=Us(),o=1,l=2;function u(c,f){return n(c)&&a(f)?i(s(c),f):function(d){var h=e(d,c);return h===void 0&&h===f?r(d,c):t(f,h,o|l)}}return Vh=u,Vh}var Hh,$w;function VA(){if($w)return Hh;$w=1;function t(e){return function(r){return r==null?void 0:r[e]}}return Hh=t,Hh}var Wh,Vw;function IN(){if(Vw)return Wh;Vw=1;var t=cu();function e(r){return function(n){return t(n,r)}}return Wh=e,Wh}var Gh,Hw;function BN(){if(Hw)return Gh;Hw=1;var t=VA(),e=IN(),r=wy(),n=Us();function a(i){return r(i)?t(n(i)):e(i)}return Gh=a,Gh}var Uh,Ww;function vn(){if(Ww)return Uh;Ww=1;var t=TN(),e=ON(),r=Ra(),n=mt(),a=BN();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):a(s)}return Uh=i,Uh}var jh,Gw;function HA(){if(Gw)return jh;Gw=1;var t=bA(),e=mN(),r=vn(),n=mt();function a(i,s){var o=n(i)?t:e;return o(i,r(s,3))}return jh=a,jh}var Kh,Uw;function FN(){if(Uw)return Kh;Uw=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,a){return n!=null&&e.call(n,a)}return Kh=r,Kh}var Yh,jw;function WA(){if(jw)return Yh;jw=1;var t=FN(),e=zA();function r(n,a){return n!=null&&e(n,a,t)}return Yh=r,Yh}var Xh,Kw;function qN(){if(Kw)return Xh;Kw=1;var t=vy(),e=wi(),r=Ws(),n=mt(),a=hn(),i=xi(),s=iu(),o=Gs(),l="[object Map]",u="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(a(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||i(h)||o(h)||r(h)))return!h.length;var v=e(h);if(v==l||v==u)return!h.size;if(s(h))return!t(h).length;for(var p in h)if(f.call(h,p))return!1;return!0}return Xh=d,Xh}var Zh,Yw;function GA(){if(Yw)return Zh;Yw=1;function t(e){return e===void 0}return Zh=t,Zh}var Qh,Xw;function UA(){if(Xw)return Qh;Xw=1;var t=ou(),e=hn();function r(n,a){var i=-1,s=e(n)?Array(n.length):[];return t(n,function(o,l,u){s[++i]=a(o,l,u)}),s}return Qh=r,Qh}var Jh,Zw;function jA(){if(Zw)return Jh;Zw=1;var t=lu(),e=vn(),r=UA(),n=mt();function a(i,s){var o=n(i)?t:r;return o(i,e(s,3))}return Jh=a,Jh}var ev,Qw;function NN(){if(Qw)return ev;Qw=1;function t(e,r,n,a){var i=-1,s=e==null?0:e.length;for(a&&s&&(n=e[++i]);++i<s;)n=r(n,e[i],i,e);return n}return ev=t,ev}var tv,Jw;function zN(){if(Jw)return tv;Jw=1;function t(e,r,n,a,i){return i(e,function(s,o,l){n=a?(a=!1,s):r(n,s,o,l)}),n}return tv=t,tv}var rv,eS;function KA(){if(eS)return rv;eS=1;var t=NN(),e=ou(),r=vn(),n=zN(),a=mt();function i(s,o,l){var u=a(s)?t:n,c=arguments.length<3;return u(s,r(o,4),l,c,e)}return rv=i,rv}var nv,tS;function $N(){if(tS)return nv;tS=1;var t=Ta(),e=mt(),r=Wr(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return nv=a,nv}var av,rS;function VN(){if(rS)return av;rS=1;var t=VA(),e=t("length");return av=e,av}var iv,nS;function HN(){if(nS)return iv;nS=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+a+i+"]");function l(u){return o.test(u)}return iv=l,iv}var sv,aS;function WN(){if(aS)return sv;aS=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="["+t+"]",o="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",v=u+"?",p="["+i+"]?",g="(?:"+h+"(?:"+[c,f,d].join("|")+")"+p+v+")*",y=p+v+g,m="(?:"+[c+o+"?",o,f,d,s].join("|")+")",b=RegExp(l+"(?="+l+")|"+m+y,"g");function _(x){for(var S=b.lastIndex=0;b.test(x);)++S;return S}return sv=_,sv}var ov,iS;function GN(){if(iS)return ov;iS=1;var t=VN(),e=HN(),r=WN();function n(a){return e(a)?r(a):t(a)}return ov=n,ov}var lv,sS;function UN(){if(sS)return lv;sS=1;var t=vy(),e=wi(),r=hn(),n=$N(),a=GN(),i="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(r(l))return n(l)?a(l):l.length;var u=e(l);return u==i||u==s?l.size:t(l).length}return lv=o,lv}var uv,oS;function jN(){if(oS)return uv;oS=1;var t=fy(),e=TA(),r=_y(),n=vn(),a=su(),i=mt(),s=xi(),o=Vs(),l=pr(),u=Gs();function c(f,d,h){var v=i(f),p=v||s(f)||u(f);if(d=n(d,4),h==null){var g=f&&f.constructor;p?h=v?new g:[]:l(f)?h=o(g)?e(a(f)):{}:h={}}return(p?t:r)(f,function(y,m,b){return d(h,y,m,b)}),h}return uv=c,uv}var cv,lS;function KN(){if(lS)return cv;lS=1;var t=_i(),e=Ws(),r=mt(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return cv=a,cv}var fv,uS;function Sy(){if(uS)return fv;uS=1;var t=py(),e=KN();function r(n,a,i,s,o){var l=-1,u=n.length;for(i||(i=e),o||(o=[]);++l<u;){var c=n[l];a>0&&i(c)?a>1?r(c,a-1,i,s,o):t(o,c):s||(o[o.length]=c)}return o}return fv=r,fv}var dv,cS;function YN(){if(cS)return dv;cS=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return dv=t,dv}var hv,fS;function YA(){if(fS)return hv;fS=1;var t=YN(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var s=arguments,o=-1,l=e(s.length-a,0),u=Array(l);++o<l;)u[o]=s[a+o];o=-1;for(var c=Array(a+1);++o<a;)c[o]=s[o];return c[a]=i(u),t(n,this,c)}}return hv=r,hv}var vv,dS;function XN(){if(dS)return vv;dS=1;var t=yy(),e=vA(),r=Ra(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return vv=n,vv}var gv,hS;function ZN(){if(hS)return gv;hS=1;var t=800,e=16,r=Date.now;function n(a){var i=0,s=0;return function(){var o=r(),l=e-(o-s);if(s=o,l>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return gv=n,gv}var pv,vS;function XA(){if(vS)return pv;vS=1;var t=XN(),e=ZN(),r=e(t);return pv=r,pv}var mv,gS;function fu(){if(gS)return mv;gS=1;var t=Ra(),e=YA(),r=XA();function n(a,i){return r(e(a,i,t),a+"")}return mv=n,mv}var yv,pS;function ZA(){if(pS)return yv;pS=1;function t(e,r,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(e[s],s,e))return s;return-1}return yv=t,yv}var bv,mS;function QN(){if(mS)return bv;mS=1;function t(e){return e!==e}return bv=t,bv}var _v,yS;function JN(){if(yS)return _v;yS=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return _v=t,_v}var xv,bS;function ez(){if(bS)return xv;bS=1;var t=ZA(),e=QN(),r=JN();function n(a,i,s){return i===i?r(a,i,s):t(a,e,s)}return xv=n,xv}var wv,_S;function tz(){if(_S)return wv;_S=1;var t=ez();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return wv=e,wv}var Sv,xS;function rz(){if(xS)return Sv;xS=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return Sv=t,Sv}var Ev,wS;function nz(){if(wS)return Ev;wS=1;function t(){}return Ev=t,Ev}var Cv,SS;function az(){if(SS)return Cv;SS=1;var t=EA(),e=nz(),r=xy(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return Cv=a,Cv}var kv,ES;function iz(){if(ES)return kv;ES=1;var t=LA(),e=tz(),r=rz(),n=OA(),a=az(),i=xy(),s=200;function o(l,u,c){var f=-1,d=e,h=l.length,v=!0,p=[],g=p;if(c)v=!1,d=r;else if(h>=s){var y=u?null:a(l);if(y)return i(y);v=!1,d=n,g=new t}else g=u?[]:p;e:for(;++f<h;){var m=l[f],b=u?u(m):m;if(m=c||m!==0?m:0,v&&b===b){for(var _=g.length;_--;)if(g[_]===b)continue e;u&&g.push(b),p.push(m)}else d(g,b,c)||(g!==p&&g.push(b),p.push(m))}return p}return kv=o,kv}var Tv,CS;function QA(){if(CS)return Tv;CS=1;var t=hn(),e=Wr();function r(n){return e(n)&&t(n)}return Tv=r,Tv}var Av,kS;function sz(){if(kS)return Av;kS=1;var t=Sy(),e=fu(),r=iz(),n=QA(),a=e(function(i){return r(t(i,1,n,!0))});return Av=a,Av}var Pv,TS;function oz(){if(TS)return Pv;TS=1;var t=lu();function e(r,n){return t(n,function(a){return r[a]})}return Pv=e,Pv}var Rv,AS;function JA(){if(AS)return Rv;AS=1;var t=oz(),e=Kn();function r(n){return n==null?[]:t(n,e(n))}return Rv=r,Rv}var Mv,PS;function mr(){if(PS)return Mv;PS=1;var t;if(typeof ly=="function")try{t={clone:vN(),constant:yy(),each:DA(),filter:HA(),has:WA(),isArray:mt(),isEmpty:qN(),isFunction:Vs(),isUndefined:GA(),keys:Kn(),map:jA(),reduce:KA(),size:UN(),transform:jN(),union:sz(),values:JA()}}catch{}return t||(t=window._),Mv=t,Mv}var Dv,RS;function Ey(){if(RS)return Dv;RS=1;var t=mr();Dv=a;var e="\0",r="\0",n="";function a(c){this._isDirected=t.has(c,"directed")?c.directed:!0,this._isMultigraph=t.has(c,"multigraph")?c.multigraph:!1,this._isCompound=t.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return t.keys(this._nodes)},a.prototype.sources=function(){var c=this;return t.filter(this.nodes(),function(f){return t.isEmpty(c._in[f])})},a.prototype.sinks=function(){var c=this;return t.filter(this.nodes(),function(f){return t.isEmpty(c._out[f])})},a.prototype.setNodes=function(c,f){var d=arguments,h=this;return t.each(c,function(v){d.length>1?h.setNode(v,f):h.setNode(v)}),this},a.prototype.setNode=function(c,f){return t.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return t.has(this._nodes,c)},a.prototype.removeNode=function(c){var f=this;if(t.has(this._nodes,c)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],t.each(this.children(c),function(h){f.setParent(h)}),delete this._children[c]),t.each(t.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],t.each(t.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=r;else{f+="";for(var d=f;!t.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==r)return f}},a.prototype.children=function(c){if(t.isUndefined(c)&&(c=r),this._isCompound){var f=this._children[c];if(f)return t.keys(f)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var f=this._preds[c];if(f)return t.keys(f)},a.prototype.successors=function(c){var f=this._sucs[c];if(f)return t.keys(f)},a.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return t.union(f,this.successors(c))},a.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},a.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;t.each(this._nodes,function(p,g){c(g)&&f.setNode(g,p)}),t.each(this._edgeObjs,function(p){f.hasNode(p.v)&&f.hasNode(p.w)&&f.setEdge(p,d.edge(p))});var h={};function v(p){var g=d.parent(p);return g===void 0||f.hasNode(g)?(h[p]=g,g):g in h?h[g]:v(g)}return this._isCompound&&t.each(f.nodes(),function(p){f.setParent(p,v(p))}),f},a.prototype.setDefaultEdgeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return t.values(this._edgeObjs)},a.prototype.setPath=function(c,f){var d=this,h=arguments;return t.reduce(c,function(v,p){return h.length>1?d.setEdge(v,p,f):d.setEdge(v,p),p}),this},a.prototype.setEdge=function(){var c,f,d,h,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,f=p.w,d=p.name,arguments.length===2&&(h=arguments[1],v=!0)):(c=p,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],v=!0)),c=""+c,f=""+f,t.isUndefined(d)||(d=""+d);var g=o(this._isDirected,c,f,d);if(t.has(this._edgeLabels,g))return v&&(this._edgeLabels[g]=h),this;if(!t.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[g]=v?h:this._defaultEdgeLabelFn(c,f,d);var y=l(this._isDirected,c,f,d);return c=y.v,f=y.w,Object.freeze(y),this._edgeObjs[g]=y,i(this._preds[f],c),i(this._sucs[c],f),this._in[f][g]=y,this._out[c][g]=y,this._edgeCount++,this},a.prototype.edge=function(c,f,d){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,d);return this._edgeLabels[h]},a.prototype.hasEdge=function(c,f,d){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,d);return t.has(this._edgeLabels,h)},a.prototype.removeEdge=function(c,f,d){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,d),v=this._edgeObjs[h];return v&&(c=v.v,f=v.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[f],c),s(this._sucs[c],f),delete this._in[f][h],delete this._out[c][h],this._edgeCount--),this},a.prototype.inEdges=function(c,f){var d=this._in[c];if(d){var h=t.values(d);return f?t.filter(h,function(v){return v.v===f}):h}},a.prototype.outEdges=function(c,f){var d=this._out[c];if(d){var h=t.values(d);return f?t.filter(h,function(v){return v.w===f}):h}},a.prototype.nodeEdges=function(c,f){var d=this.inEdges(c,f);if(d)return d.concat(this.outEdges(c,f))};function i(c,f){c[f]?c[f]++:c[f]=1}function s(c,f){--c[f]||delete c[f]}function o(c,f,d,h){var v=""+f,p=""+d;if(!c&&v>p){var g=v;v=p,p=g}return v+n+p+n+(t.isUndefined(h)?e:h)}function l(c,f,d,h){var v=""+f,p=""+d;if(!c&&v>p){var g=v;v=p,p=g}var y={v,w:p};return h&&(y.name=h),y}function u(c,f){return o(c,f.v,f.w,f.name)}return Dv}var Lv,MS;function lz(){return MS||(MS=1,Lv="2.1.8"),Lv}var Ov,DS;function uz(){return DS||(DS=1,Ov={Graph:Ey(),version:lz()}),Ov}var Iv,LS;function cz(){if(LS)return Iv;LS=1;var t=mr(),e=Ey();Iv={write:r,read:i};function r(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:a(s)};return t.isUndefined(s.graph())||(o.value=t.clone(s.graph())),o}function n(s){return t.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return t.isUndefined(l)||(c.value=l),t.isUndefined(u)||(c.parent=u),c})}function a(s){return t.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return t.isUndefined(o.name)||(u.name=o.name),t.isUndefined(l)||(u.value=l),u})}function i(s){var o=new e(s.options).setGraph(s.value);return t.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),t.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Iv}var Bv,OS;function fz(){if(OS)return Bv;OS=1;var t=mr();Bv=e;function e(r){var n={},a=[],i;function s(o){t.has(n,o)||(n[o]=!0,i.push(o),t.each(r.successors(o),s),t.each(r.predecessors(o),s))}return t.each(r.nodes(),function(o){i=[],s(o),i.length&&a.push(i)}),a}return Bv}var Fv,IS;function eP(){if(IS)return Fv;IS=1;var t=mr();Fv=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var a=this._keyIndices;if(r=String(r),!t.has(a,r)){var i=this._arr,s=i.length;return a[r]=s,i.push({key:r,priority:n}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var a=this._keyIndices[r];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(r){var n=this._arr,a=2*r,i=a+1,s=r;a<n.length&&(s=n[a].priority<n[s].priority?a:s,i<n.length&&(s=n[i].priority<n[s].priority?i:s),s!==r&&(this._swap(r,s),this._heapify(s)))},e.prototype._decrease=function(r){for(var n=this._arr,a=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<a));)this._swap(r,i),r=i},e.prototype._swap=function(r,n){var a=this._arr,i=this._keyIndices,s=a[r],o=a[n];a[r]=o,a[n]=s,i[o.key]=r,i[s.key]=n},Fv}var qv,BS;function tP(){if(BS)return qv;BS=1;var t=mr(),e=eP();qv=n;var r=t.constant(1);function n(i,s,o,l){return a(i,String(s),o||r,l||function(u){return i.outEdges(u)})}function a(i,s,o,l){var u={},c=new e,f,d,h=function(v){var p=v.v!==f?v.v:v.w,g=u[p],y=o(v),m=d.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);m<g.distance&&(g.distance=m,g.predecessor=f,c.decrease(p,m))};for(i.nodes().forEach(function(v){var p=v===s?0:Number.POSITIVE_INFINITY;u[v]={distance:p},c.add(v,p)});c.size()>0&&(f=c.removeMin(),d=u[f],d.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(h);return u}return qv}var Nv,FS;function dz(){if(FS)return Nv;FS=1;var t=tP(),e=mr();Nv=r;function r(n,a,i){return e.transform(n.nodes(),function(s,o){s[o]=t(n,o,a,i)},{})}return Nv}var zv,qS;function rP(){if(qS)return zv;qS=1;var t=mr();zv=e;function e(r){var n=0,a=[],i={},s=[];function o(l){var u=i[l]={onStack:!0,lowlink:n,index:n++};if(a.push(l),r.successors(l).forEach(function(d){t.has(i,d)?i[d].onStack&&(u.lowlink=Math.min(u.lowlink,i[d].index)):(o(d),u.lowlink=Math.min(u.lowlink,i[d].lowlink))}),u.lowlink===u.index){var c=[],f;do f=a.pop(),i[f].onStack=!1,c.push(f);while(l!==f);s.push(c)}}return r.nodes().forEach(function(l){t.has(i,l)||o(l)}),s}return zv}var $v,NS;function hz(){if(NS)return $v;NS=1;var t=mr(),e=rP();$v=r;function r(n){return t.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return $v}var Vv,zS;function vz(){if(zS)return Vv;zS=1;var t=mr();Vv=r;var e=t.constant(1);function r(a,i,s){return n(a,i||e,s||function(o){return a.outEdges(o)})}function n(a,i,s){var o={},l=a.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var f=c.v===u?c.w:c.v,d=i(c);o[u][f]={distance:d,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(f){var d=o[f];l.forEach(function(h){var v=d[u],p=c[h],g=d[h],y=v.distance+p.distance;y<g.distance&&(g.distance=y,g.predecessor=p.predecessor)})})}),o}return Vv}var Hv,$S;function nP(){if($S)return Hv;$S=1;var t=mr();Hv=e,e.CycleException=r;function e(n){var a={},i={},s=[];function o(l){if(t.has(i,l))throw new r;t.has(a,l)||(i[l]=!0,a[l]=!0,t.each(n.predecessors(l),o),delete i[l],s.push(l))}if(t.each(n.sinks(),o),t.size(a)!==n.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,Hv}var Wv,VS;function gz(){if(VS)return Wv;VS=1;var t=nP();Wv=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return Wv}var Gv,HS;function aP(){if(HS)return Gv;HS=1;var t=mr();Gv=e;function e(n,a,i){t.isArray(a)||(a=[a]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],l={};return t.each(a,function(u){if(!n.hasNode(u))throw new Error("Graph does not have node: "+u);r(n,u,i==="post",l,s,o)}),o}function r(n,a,i,s,o,l){t.has(s,a)||(s[a]=!0,i||l.push(a),t.each(o(a),function(u){r(n,u,i,s,o,l)}),i&&l.push(a))}return Gv}var Uv,WS;function pz(){if(WS)return Uv;WS=1;var t=aP();Uv=e;function e(r,n){return t(r,n,"post")}return Uv}var jv,GS;function mz(){if(GS)return jv;GS=1;var t=aP();jv=e;function e(r,n){return t(r,n,"pre")}return jv}var Kv,US;function yz(){if(US)return Kv;US=1;var t=mr(),e=Ey(),r=eP();Kv=n;function n(a,i){var s=new e,o={},l=new r,u;function c(d){var h=d.v===u?d.w:d.v,v=l.priority(h);if(v!==void 0){var p=i(d);p<v&&(o[h]=u,l.decrease(h,p))}}if(a.nodeCount()===0)return s;t.each(a.nodes(),function(d){l.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),l.decrease(a.nodes()[0],0);for(var f=!1;l.size()>0;){if(u=l.removeMin(),t.has(o,u))s.setEdge(u,o[u]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(u).forEach(c)}return s}return Kv}var Yv,jS;function bz(){return jS||(jS=1,Yv={components:fz(),dijkstra:tP(),dijkstraAll:dz(),findCycles:hz(),floydWarshall:vz(),isAcyclic:gz(),postorder:pz(),preorder:mz(),prim:yz(),tarjan:rP(),topsort:nP()}),Yv}var Xv,KS;function _z(){if(KS)return Xv;KS=1;var t=uz();return Xv={Graph:t.Graph,json:cz(),alg:bz(),version:t.version},Xv}var Zv,YS;function kr(){if(YS)return Zv;YS=1;var t;if(typeof ly=="function")try{t=_z()}catch{}return t||(t=window.graphlib),Zv=t,Zv}var Qv,XS;function xz(){if(XS)return Qv;XS=1;var t=PA(),e=1,r=4;function n(a){return t(a,e|r)}return Qv=n,Qv}var Jv,ZS;function du(){if(ZS)return Jv;ZS=1;var t=bi(),e=hn(),r=nu(),n=pr();function a(i,s,o){if(!n(o))return!1;var l=typeof s;return(l=="number"?e(o)&&r(s,o.length):l=="string"&&s in o)?t(o[s],i):!1}return Jv=a,Jv}var eg,QS;function wz(){if(QS)return eg;QS=1;var t=fu(),e=bi(),r=du(),n=Pa(),a=Object.prototype,i=a.hasOwnProperty,s=t(function(o,l){o=Object(o);var u=-1,c=l.length,f=c>2?l[2]:void 0;for(f&&r(l[0],l[1],f)&&(c=1);++u<c;)for(var d=l[u],h=n(d),v=-1,p=h.length;++v<p;){var g=h[v],y=o[g];(y===void 0||e(y,a[g])&&!i.call(o,g))&&(o[g]=d[g])}return o});return eg=s,eg}var tg,JS;function Sz(){if(JS)return tg;JS=1;var t=vn(),e=hn(),r=Kn();function n(a){return function(i,s,o){var l=Object(i);if(!e(i)){var u=t(s,3);i=r(i),s=function(f){return u(l[f],f,l)}}var c=a(i,s,o);return c>-1?l[u?i[c]:c]:void 0}}return tg=n,tg}var rg,eE;function Ez(){if(eE)return rg;eE=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return rg=e,rg}var ng,tE;function Cz(){if(tE)return ng;tE=1;var t=Ez(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return ng=r,ng}var ag,rE;function kz(){if(rE)return ag;rE=1;var t=Cz(),e=pr(),r=Si(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=i.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):a.test(u)?n:+u}return ag=l,ag}var ig,nE;function iP(){if(nE)return ig;nE=1;var t=kz(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return ig=n,ig}var sg,aE;function Tz(){if(aE)return sg;aE=1;var t=iP();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return sg=e,sg}var og,iE;function Az(){if(iE)return og;iE=1;var t=ZA(),e=vn(),r=Tz(),n=Math.max;function a(i,s,o){var l=i==null?0:i.length;if(!l)return-1;var u=o==null?0:r(o);return u<0&&(u=n(l+u,0)),t(i,e(s,3),u)}return og=a,og}var lg,sE;function Pz(){if(sE)return lg;sE=1;var t=Sz(),e=Az(),r=t(e);return lg=r,lg}var ug,oE;function sP(){if(oE)return ug;oE=1;var t=Sy();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return ug=e,ug}var cg,lE;function Rz(){if(lE)return cg;lE=1;var t=by(),e=RA(),r=Pa();function n(a,i){return a==null?a:t(a,e(i),r)}return cg=n,cg}var fg,uE;function Mz(){if(uE)return fg;uE=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return fg=t,fg}var dg,cE;function Dz(){if(cE)return dg;cE=1;var t=tu(),e=_y(),r=vn();function n(a,i){var s={};return i=r(i,3),e(a,function(o,l,u){t(s,l,i(o,l,u))}),s}return dg=n,dg}var hg,fE;function Cy(){if(fE)return hg;fE=1;var t=Si();function e(r,n,a){for(var i=-1,s=r.length;++i<s;){var o=r[i],l=n(o);if(l!=null&&(u===void 0?l===l&&!t(l):a(l,u)))var u=l,c=o}return c}return hg=e,hg}var vg,dE;function Lz(){if(dE)return vg;dE=1;function t(e,r){return e>r}return vg=t,vg}var gg,hE;function Oz(){if(hE)return gg;hE=1;var t=Cy(),e=Lz(),r=Ra();function n(a){return a&&a.length?t(a,r,e):void 0}return gg=n,gg}var pg,vE;function oP(){if(vE)return pg;vE=1;var t=tu(),e=bi();function r(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&t(n,a,i)}return pg=r,pg}var mg,gE;function Iz(){if(gE)return mg;gE=1;var t=Ta(),e=su(),r=Wr(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,o=i.hasOwnProperty,l=s.call(Object);function u(c){if(!r(c)||t(c)!=n)return!1;var f=e(c);if(f===null)return!0;var d=o.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&s.call(d)==l}return mg=u,mg}var yg,pE;function lP(){if(pE)return yg;pE=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return yg=t,yg}var bg,mE;function Bz(){if(mE)return bg;mE=1;var t=Hs(),e=Pa();function r(n){return t(n,e(n))}return bg=r,bg}var _g,yE;function Fz(){if(yE)return _g;yE=1;var t=oP(),e=mA(),r=kA(),n=yA(),a=AA(),i=Ws(),s=mt(),o=QA(),l=xi(),u=Vs(),c=pr(),f=Iz(),d=Gs(),h=lP(),v=Bz();function p(g,y,m,b,_,x,S){var w=h(g,m),E=h(y,m),C=S.get(E);if(C){t(g,m,C);return}var T=x?x(w,E,m+"",g,y,S):void 0,A=T===void 0;if(A){var P=s(E),R=!P&&l(E),D=!P&&!R&&d(E);T=E,P||R||D?s(w)?T=w:o(w)?T=n(w):R?(A=!1,T=e(E,!0)):D?(A=!1,T=r(E,!0)):T=[]:f(E)||i(E)?(T=w,i(w)?T=v(w):(!c(w)||u(w))&&(T=a(E))):A=!1}A&&(S.set(E,T),_(T,E,b,x,S),S.delete(E)),t(g,m,T)}return _g=p,_g}var xg,bE;function qz(){if(bE)return xg;bE=1;var t=eu(),e=oP(),r=by(),n=Fz(),a=pr(),i=Pa(),s=lP();function o(l,u,c,f,d){l!==u&&r(u,function(h,v){if(d||(d=new t),a(h))n(l,u,v,c,o,f,d);else{var p=f?f(s(l,v),h,v+"",l,u,d):void 0;p===void 0&&(p=h),e(l,v,p)}},i)}return xg=o,xg}var wg,_E;function Nz(){if(_E)return wg;_E=1;var t=fu(),e=du();function r(n){return t(function(a,i){var s=-1,o=i.length,l=o>1?i[o-1]:void 0,u=o>2?i[2]:void 0;for(l=n.length>3&&typeof l=="function"?(o--,l):void 0,u&&e(i[0],i[1],u)&&(l=o<3?void 0:l,o=1),a=Object(a);++s<o;){var c=i[s];c&&n(a,c,s,l)}return a})}return wg=r,wg}var Sg,xE;function zz(){if(xE)return Sg;xE=1;var t=qz(),e=Nz(),r=e(function(n,a,i){t(n,a,i)});return Sg=r,Sg}var Eg,wE;function uP(){if(wE)return Eg;wE=1;function t(e,r){return e<r}return Eg=t,Eg}var Cg,SE;function $z(){if(SE)return Cg;SE=1;var t=Cy(),e=uP(),r=Ra();function n(a){return a&&a.length?t(a,r,e):void 0}return Cg=n,Cg}var kg,EE;function Vz(){if(EE)return kg;EE=1;var t=Cy(),e=vn(),r=uP();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return kg=n,kg}var Tg,CE;function Hz(){if(CE)return Tg;CE=1;var t=Tr(),e=function(){return t.Date.now()};return Tg=e,Tg}var Ag,kE;function Wz(){if(kE)return Ag;kE=1;var t=ru(),e=uu(),r=nu(),n=pr(),a=Us();function i(s,o,l,u){if(!n(s))return s;o=e(o,s);for(var c=-1,f=o.length,d=f-1,h=s;h!=null&&++c<f;){var v=a(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=d){var g=h[v];p=u?u(g,v,h):void 0,p===void 0&&(p=n(g)?g:r(o[c+1])?[]:{})}t(h,v,p),h=h[v]}return s}return Ag=i,Ag}var Pg,TE;function Gz(){if(TE)return Pg;TE=1;var t=cu(),e=Wz(),r=uu();function n(a,i,s){for(var o=-1,l=i.length,u={};++o<l;){var c=i[o],f=t(a,c);s(f,c)&&e(u,r(c,a),f)}return u}return Pg=n,Pg}var Rg,AE;function Uz(){if(AE)return Rg;AE=1;var t=Gz(),e=$A();function r(n,a){return t(n,a,function(i,s){return e(n,s)})}return Rg=r,Rg}var Mg,PE;function jz(){if(PE)return Mg;PE=1;var t=sP(),e=YA(),r=XA();function n(a){return r(e(a,void 0,t),a+"")}return Mg=n,Mg}var Dg,RE;function Kz(){if(RE)return Dg;RE=1;var t=Uz(),e=jz(),r=e(function(n,a){return n==null?{}:t(n,a)});return Dg=r,Dg}var Lg,ME;function Yz(){if(ME)return Lg;ME=1;var t=Math.ceil,e=Math.max;function r(n,a,i,s){for(var o=-1,l=e(t((a-n)/(i||1)),0),u=Array(l);l--;)u[s?l:++o]=n,n+=i;return u}return Lg=r,Lg}var Og,DE;function Xz(){if(DE)return Og;DE=1;var t=Yz(),e=du(),r=iP();function n(a){return function(i,s,o){return o&&typeof o!="number"&&e(i,s,o)&&(s=o=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),o=o===void 0?i<s?1:-1:r(o),t(i,s,o,a)}}return Og=n,Og}var Ig,LE;function Zz(){if(LE)return Ig;LE=1;var t=Xz(),e=t();return Ig=e,Ig}var Bg,OE;function Qz(){if(OE)return Bg;OE=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return Bg=t,Bg}var Fg,IE;function Jz(){if(IE)return Fg;IE=1;var t=Si();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,o=t(r),l=n!==void 0,u=n===null,c=n===n,f=t(n);if(!u&&!f&&!o&&r>n||o&&l&&c&&!u&&!f||i&&l&&c||!a&&c||!s)return 1;if(!i&&!o&&!f&&r<n||f&&a&&s&&!i&&!o||u&&a&&s||!l&&s||!c)return-1}return 0}return Fg=e,Fg}var qg,BE;function e5(){if(BE)return qg;BE=1;var t=Jz();function e(r,n,a){for(var i=-1,s=r.criteria,o=n.criteria,l=s.length,u=a.length;++i<l;){var c=t(s[i],o[i]);if(c){if(i>=u)return c;var f=a[i];return c*(f=="desc"?-1:1)}}return r.index-n.index}return qg=e,qg}var Ng,FE;function t5(){if(FE)return Ng;FE=1;var t=lu(),e=cu(),r=vn(),n=UA(),a=Qz(),i=au(),s=e5(),o=Ra(),l=mt();function u(c,f,d){f.length?f=t(f,function(p){return l(p)?function(g){return e(g,p.length===1?p[0]:p)}:p}):f=[o];var h=-1;f=t(f,i(r));var v=n(c,function(p,g,y){var m=t(f,function(b){return b(p)});return{criteria:m,index:++h,value:p}});return a(v,function(p,g){return s(p,g,d)})}return Ng=u,Ng}var zg,qE;function r5(){if(qE)return zg;qE=1;var t=Sy(),e=t5(),r=fu(),n=du(),a=r(function(i,s){if(i==null)return[];var o=s.length;return o>1&&n(i,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(i,t(s,1),[])});return zg=a,zg}var $g,NE;function n5(){if(NE)return $g;NE=1;var t=NA(),e=0;function r(n){var a=++e;return t(n)+a}return $g=r,$g}var Vg,zE;function a5(){if(zE)return Vg;zE=1;function t(e,r,n){for(var a=-1,i=e.length,s=r.length,o={};++a<i;){var l=a<s?r[a]:void 0;n(o,e[a],l)}return o}return Vg=t,Vg}var Hg,$E;function i5(){if($E)return Hg;$E=1;var t=ru(),e=a5();function r(n,a){return e(n||[],a||[],t)}return Hg=r,Hg}var Wg,VE;function it(){if(VE)return Wg;VE=1;var t;if(typeof ly=="function")try{t={cloneDeep:xz(),constant:yy(),defaults:wz(),each:DA(),filter:HA(),find:Pz(),flatten:sP(),forEach:MA(),forIn:Rz(),has:WA(),isUndefined:GA(),last:Mz(),map:jA(),mapValues:Dz(),max:Oz(),merge:zz(),min:$z(),minBy:Vz(),now:Hz(),pick:Kz(),range:Zz(),reduce:KA(),sortBy:r5(),uniqueId:n5(),values:JA(),zipObject:i5()}}catch{}return t||(t=window._),Wg=t,Wg}var Gg,HE;function s5(){if(HE)return Gg;HE=1,Gg=t;function t(){var n={};n._next=n._prev=n,this._sentinel=n}t.prototype.dequeue=function(){var n=this._sentinel,a=n._prev;if(a!==n)return e(a),a},t.prototype.enqueue=function(n){var a=this._sentinel;n._prev&&n._next&&e(n),n._next=a._next,a._next._prev=n,a._next=n,n._prev=a},t.prototype.toString=function(){for(var n=[],a=this._sentinel,i=a._prev;i!==a;)n.push(JSON.stringify(i,r)),i=i._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,a){if(n!=="_next"&&n!=="_prev")return a}return Gg}var Ug,WE;function o5(){if(WE)return Ug;WE=1;var t=it(),e=kr().Graph,r=s5();Ug=a;var n=t.constant(1);function a(u,c){if(u.nodeCount()<=1)return[];var f=o(u,c||n),d=i(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(d,function(h){return u.outEdges(h.v,h.w)}),!0)}function i(u,c,f){for(var d=[],h=c[c.length-1],v=c[0],p;u.nodeCount();){for(;p=v.dequeue();)s(u,c,f,p);for(;p=h.dequeue();)s(u,c,f,p);if(u.nodeCount()){for(var g=c.length-2;g>0;--g)if(p=c[g].dequeue(),p){d=d.concat(s(u,c,f,p,!0));break}}}return d}function s(u,c,f,d,h){var v=h?[]:void 0;return t.forEach(u.inEdges(d.v),function(p){var g=u.edge(p),y=u.node(p.v);h&&v.push({v:p.v,w:p.w}),y.out-=g,l(c,f,y)}),t.forEach(u.outEdges(d.v),function(p){var g=u.edge(p),y=p.w,m=u.node(y);m.in-=g,l(c,f,m)}),u.removeNode(d.v),v}function o(u,c){var f=new e,d=0,h=0;t.forEach(u.nodes(),function(g){f.setNode(g,{v:g,in:0,out:0})}),t.forEach(u.edges(),function(g){var y=f.edge(g.v,g.w)||0,m=c(g),b=y+m;f.setEdge(g.v,g.w,b),h=Math.max(h,f.node(g.v).out+=m),d=Math.max(d,f.node(g.w).in+=m)});var v=t.range(h+d+3).map(function(){return new r}),p=d+1;return t.forEach(f.nodes(),function(g){l(v,p,f.node(g))}),{graph:f,buckets:v,zeroIdx:p}}function l(u,c,f){f.out?f.in?u[f.out-f.in+c].enqueue(f):u[u.length-1].enqueue(f):u[0].enqueue(f)}return Ug}var jg,GE;function l5(){if(GE)return jg;GE=1;var t=it(),e=o5();jg={run:r,undo:a};function r(i){var s=i.graph().acyclicer==="greedy"?e(i,o(i)):n(i);t.forEach(s,function(l){var u=i.edge(l);i.removeEdge(l),u.forwardName=l.name,u.reversed=!0,i.setEdge(l.w,l.v,u,t.uniqueId("rev"))});function o(l){return function(u){return l.edge(u).weight}}}function n(i){var s=[],o={},l={};function u(c){t.has(l,c)||(l[c]=!0,o[c]=!0,t.forEach(i.outEdges(c),function(f){t.has(o,f.w)?s.push(f):u(f.w)}),delete o[c])}return t.forEach(i.nodes(),u),s}function a(i){t.forEach(i.edges(),function(s){var o=i.edge(s);if(o.reversed){i.removeEdge(s);var l=o.forwardName;delete o.reversed,delete o.forwardName,i.setEdge(s.w,s.v,o,l)}})}return jg}var Kg,UE;function or(){if(UE)return Kg;UE=1;var t=it(),e=kr().Graph;Kg={addDummyNode:r,simplify:n,asNonCompoundGraph:a,successorWeights:i,predecessorWeights:s,intersectRect:o,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:c,addBorderNode:f,maxRank:d,partition:h,time:v,notime:p};function r(g,y,m,b){var _;do _=t.uniqueId(b);while(g.hasNode(_));return m.dummy=y,g.setNode(_,m),_}function n(g){var y=new e().setGraph(g.graph());return t.forEach(g.nodes(),function(m){y.setNode(m,g.node(m))}),t.forEach(g.edges(),function(m){var b=y.edge(m.v,m.w)||{weight:0,minlen:1},_=g.edge(m);y.setEdge(m.v,m.w,{weight:b.weight+_.weight,minlen:Math.max(b.minlen,_.minlen)})}),y}function a(g){var y=new e({multigraph:g.isMultigraph()}).setGraph(g.graph());return t.forEach(g.nodes(),function(m){g.children(m).length||y.setNode(m,g.node(m))}),t.forEach(g.edges(),function(m){y.setEdge(m,g.edge(m))}),y}function i(g){var y=t.map(g.nodes(),function(m){var b={};return t.forEach(g.outEdges(m),function(_){b[_.w]=(b[_.w]||0)+g.edge(_).weight}),b});return t.zipObject(g.nodes(),y)}function s(g){var y=t.map(g.nodes(),function(m){var b={};return t.forEach(g.inEdges(m),function(_){b[_.v]=(b[_.v]||0)+g.edge(_).weight}),b});return t.zipObject(g.nodes(),y)}function o(g,y){var m=g.x,b=g.y,_=y.x-m,x=y.y-b,S=g.width/2,w=g.height/2;if(!_&&!x)throw new Error("Not possible to find intersection inside of the rectangle");var E,C;return Math.abs(x)*S>Math.abs(_)*w?(x<0&&(w=-w),E=w*_/x,C=w):(_<0&&(S=-S),E=S,C=S*x/_),{x:m+E,y:b+C}}function l(g){var y=t.map(t.range(d(g)+1),function(){return[]});return t.forEach(g.nodes(),function(m){var b=g.node(m),_=b.rank;t.isUndefined(_)||(y[_][b.order]=m)}),y}function u(g){var y=t.min(t.map(g.nodes(),function(m){return g.node(m).rank}));t.forEach(g.nodes(),function(m){var b=g.node(m);t.has(b,"rank")&&(b.rank-=y)})}function c(g){var y=t.min(t.map(g.nodes(),function(x){return g.node(x).rank})),m=[];t.forEach(g.nodes(),function(x){var S=g.node(x).rank-y;m[S]||(m[S]=[]),m[S].push(x)});var b=0,_=g.graph().nodeRankFactor;t.forEach(m,function(x,S){t.isUndefined(x)&&S%_!==0?--b:b&&t.forEach(x,function(w){g.node(w).rank+=b})})}function f(g,y,m,b){var _={width:0,height:0};return arguments.length>=4&&(_.rank=m,_.order=b),r(g,"border",_,y)}function d(g){return t.max(t.map(g.nodes(),function(y){var m=g.node(y).rank;if(!t.isUndefined(m))return m}))}function h(g,y){var m={lhs:[],rhs:[]};return t.forEach(g,function(b){y(b)?m.lhs.push(b):m.rhs.push(b)}),m}function v(g,y){var m=t.now();try{return y()}finally{console.log(g+" time: "+(t.now()-m)+"ms")}}function p(g,y){return y()}return Kg}var Yg,jE;function u5(){if(jE)return Yg;jE=1;var t=it(),e=or();Yg={run:r,undo:a};function r(i){i.graph().dummyChains=[],t.forEach(i.edges(),function(s){n(i,s)})}function n(i,s){var o=s.v,l=i.node(o).rank,u=s.w,c=i.node(u).rank,f=s.name,d=i.edge(s),h=d.labelRank;if(c!==l+1){i.removeEdge(s);var v,p,g;for(g=0,++l;l<c;++g,++l)d.points=[],p={width:0,height:0,edgeLabel:d,edgeObj:s,rank:l},v=e.addDummyNode(i,"edge",p,"_d"),l===h&&(p.width=d.width,p.height=d.height,p.dummy="edge-label",p.labelpos=d.labelpos),i.setEdge(o,v,{weight:d.weight},f),g===0&&i.graph().dummyChains.push(v),o=v;i.setEdge(o,u,{weight:d.weight},f)}}function a(i){t.forEach(i.graph().dummyChains,function(s){var o=i.node(s),l=o.edgeLabel,u;for(i.setEdge(o.edgeObj,l);o.dummy;)u=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=i.node(s)})}return Yg}var Xg,KE;function xl(){if(KE)return Xg;KE=1;var t=it();Xg={longestPath:e,slack:r};function e(n){var a={};function i(s){var o=n.node(s);if(t.has(a,s))return o.rank;a[s]=!0;var l=t.min(t.map(n.outEdges(s),function(u){return i(u.w)-n.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),o.rank=l}t.forEach(n.sources(),i)}function r(n,a){return n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen}return Xg}var Zg,YE;function cP(){if(YE)return Zg;YE=1;var t=it(),e=kr().Graph,r=xl().slack;Zg=n;function n(o){var l=new e({directed:!1}),u=o.nodes()[0],c=o.nodeCount();l.setNode(u,{});for(var f,d;a(l,o)<c;)f=i(l,o),d=l.hasNode(f.v)?r(o,f):-r(o,f),s(l,o,d);return l}function a(o,l){function u(c){t.forEach(l.nodeEdges(c),function(f){var d=f.v,h=c===d?f.w:d;!o.hasNode(h)&&!r(l,f)&&(o.setNode(h,{}),o.setEdge(c,h,{}),u(h))})}return t.forEach(o.nodes(),u),o.nodeCount()}function i(o,l){return t.minBy(l.edges(),function(u){if(o.hasNode(u.v)!==o.hasNode(u.w))return r(l,u)})}function s(o,l,u){t.forEach(o.nodes(),function(c){l.node(c).rank+=u})}return Zg}var Qg,XE;function c5(){if(XE)return Qg;XE=1;var t=it(),e=cP(),r=xl().slack,n=xl().longestPath,a=kr().alg.preorder,i=kr().alg.postorder,s=or().simplify;Qg=o,o.initLowLimValues=f,o.initCutValues=l,o.calcCutValue=c,o.leaveEdge=h,o.enterEdge=v,o.exchangeEdges=p;function o(b){b=s(b),n(b);var _=e(b);f(_),l(_,b);for(var x,S;x=h(_);)S=v(_,b,x),p(_,b,x,S)}function l(b,_){var x=i(b,b.nodes());x=x.slice(0,x.length-1),t.forEach(x,function(S){u(b,_,S)})}function u(b,_,x){var S=b.node(x),w=S.parent;b.edge(x,w).cutvalue=c(b,_,x)}function c(b,_,x){var S=b.node(x),w=S.parent,E=!0,C=_.edge(x,w),T=0;return C||(E=!1,C=_.edge(w,x)),T=C.weight,t.forEach(_.nodeEdges(x),function(A){var P=A.v===x,R=P?A.w:A.v;if(R!==w){var D=P===E,L=_.edge(A).weight;if(T+=D?L:-L,y(b,x,R)){var I=b.edge(x,R).cutvalue;T+=D?-I:I}}}),T}function f(b,_){arguments.length<2&&(_=b.nodes()[0]),d(b,{},1,_)}function d(b,_,x,S,w){var E=x,C=b.node(S);return _[S]=!0,t.forEach(b.neighbors(S),function(T){t.has(_,T)||(x=d(b,_,x,T,S))}),C.low=E,C.lim=x++,w?C.parent=w:delete C.parent,x}function h(b){return t.find(b.edges(),function(_){return b.edge(_).cutvalue<0})}function v(b,_,x){var S=x.v,w=x.w;_.hasEdge(S,w)||(S=x.w,w=x.v);var E=b.node(S),C=b.node(w),T=E,A=!1;E.lim>C.lim&&(T=C,A=!0);var P=t.filter(_.edges(),function(R){return A===m(b,b.node(R.v),T)&&A!==m(b,b.node(R.w),T)});return t.minBy(P,function(R){return r(_,R)})}function p(b,_,x,S){var w=x.v,E=x.w;b.removeEdge(w,E),b.setEdge(S.v,S.w,{}),f(b),l(b,_),g(b,_)}function g(b,_){var x=t.find(b.nodes(),function(w){return!_.node(w).parent}),S=a(b,x);S=S.slice(1),t.forEach(S,function(w){var E=b.node(w).parent,C=_.edge(w,E),T=!1;C||(C=_.edge(E,w),T=!0),_.node(w).rank=_.node(E).rank+(T?C.minlen:-C.minlen)})}function y(b,_,x){return b.hasEdge(_,x)}function m(b,_,x){return x.low<=_.lim&&_.lim<=x.lim}return Qg}var Jg,ZE;function f5(){if(ZE)return Jg;ZE=1;var t=xl(),e=t.longestPath,r=cP(),n=c5();Jg=a;function a(l){switch(l.graph().ranker){case"network-simplex":o(l);break;case"tight-tree":s(l);break;case"longest-path":i(l);break;default:o(l)}}var i=e;function s(l){e(l),r(l)}function o(l){n(l)}return Jg}var ep,QE;function d5(){if(QE)return ep;QE=1;var t=it();ep=e;function e(a){var i=n(a);t.forEach(a.graph().dummyChains,function(s){for(var o=a.node(s),l=o.edgeObj,u=r(a,i,l.v,l.w),c=u.path,f=u.lca,d=0,h=c[d],v=!0;s!==l.w;){if(o=a.node(s),v){for(;(h=c[d])!==f&&a.node(h).maxRank<o.rank;)d++;h===f&&(v=!1)}if(!v){for(;d<c.length-1&&a.node(h=c[d+1]).minRank<=o.rank;)d++;h=c[d]}a.setParent(s,h),s=a.successors(s)[0]}})}function r(a,i,s,o){var l=[],u=[],c=Math.min(i[s].low,i[o].low),f=Math.max(i[s].lim,i[o].lim),d,h;d=s;do d=a.parent(d),l.push(d);while(d&&(i[d].low>c||f>i[d].lim));for(h=d,d=o;(d=a.parent(d))!==h;)u.push(d);return{path:l.concat(u.reverse()),lca:h}}function n(a){var i={},s=0;function o(l){var u=s;t.forEach(a.children(l),o),i[l]={low:u,lim:s++}}return t.forEach(a.children(),o),i}return ep}var tp,JE;function h5(){if(JE)return tp;JE=1;var t=it(),e=or();tp={run:r,cleanup:s};function r(o){var l=e.addDummyNode(o,"root",{},"_root"),u=a(o),c=t.max(t.values(u))-1,f=2*c+1;o.graph().nestingRoot=l,t.forEach(o.edges(),function(h){o.edge(h).minlen*=f});var d=i(o)+1;t.forEach(o.children(),function(h){n(o,l,f,d,c,u,h)}),o.graph().nodeRankFactor=f}function n(o,l,u,c,f,d,h){var v=o.children(h);if(!v.length){h!==l&&o.setEdge(l,h,{weight:0,minlen:u});return}var p=e.addBorderNode(o,"_bt"),g=e.addBorderNode(o,"_bb"),y=o.node(h);o.setParent(p,h),y.borderTop=p,o.setParent(g,h),y.borderBottom=g,t.forEach(v,function(m){n(o,l,u,c,f,d,m);var b=o.node(m),_=b.borderTop?b.borderTop:m,x=b.borderBottom?b.borderBottom:m,S=b.borderTop?c:2*c,w=_!==x?1:f-d[h]+1;o.setEdge(p,_,{weight:S,minlen:w,nestingEdge:!0}),o.setEdge(x,g,{weight:S,minlen:w,nestingEdge:!0})}),o.parent(h)||o.setEdge(l,p,{weight:0,minlen:f+d[h]})}function a(o){var l={};function u(c,f){var d=o.children(c);d&&d.length&&t.forEach(d,function(h){u(h,f+1)}),l[c]=f}return t.forEach(o.children(),function(c){u(c,1)}),l}function i(o){return t.reduce(o.edges(),function(l,u){return l+o.edge(u).weight},0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,t.forEach(o.edges(),function(u){var c=o.edge(u);c.nestingEdge&&o.removeEdge(u)})}return tp}var rp,eC;function v5(){if(eC)return rp;eC=1;var t=it(),e=or();rp=r;function r(a){function i(s){var o=a.children(s),l=a.node(s);if(o.length&&t.forEach(o,i),t.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,c=l.maxRank+1;u<c;++u)n(a,"borderLeft","_bl",s,l,u),n(a,"borderRight","_br",s,l,u)}}t.forEach(a.children(),i)}function n(a,i,s,o,l,u){var c={width:0,height:0,rank:u,borderType:i},f=l[i][u-1],d=e.addDummyNode(a,"border",c,s);l[i][u]=d,a.setParent(d,o),f&&a.setEdge(f,d,{weight:1})}return rp}var np,tC;function g5(){if(tC)return np;tC=1;var t=it();np={adjust:e,undo:r};function e(u){var c=u.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(u)}function r(u){var c=u.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(u),(c==="lr"||c==="rl")&&(o(u),n(u))}function n(u){t.forEach(u.nodes(),function(c){a(u.node(c))}),t.forEach(u.edges(),function(c){a(u.edge(c))})}function a(u){var c=u.width;u.width=u.height,u.height=c}function i(u){t.forEach(u.nodes(),function(c){s(u.node(c))}),t.forEach(u.edges(),function(c){var f=u.edge(c);t.forEach(f.points,s),t.has(f,"y")&&s(f)})}function s(u){u.y=-u.y}function o(u){t.forEach(u.nodes(),function(c){l(u.node(c))}),t.forEach(u.edges(),function(c){var f=u.edge(c);t.forEach(f.points,l),t.has(f,"x")&&l(f)})}function l(u){var c=u.x;u.x=u.y,u.y=c}return np}var ap,rC;function p5(){if(rC)return ap;rC=1;var t=it();ap=e;function e(r){var n={},a=t.filter(r.nodes(),function(u){return!r.children(u).length}),i=t.max(t.map(a,function(u){return r.node(u).rank})),s=t.map(t.range(i+1),function(){return[]});function o(u){if(!t.has(n,u)){n[u]=!0;var c=r.node(u);s[c.rank].push(u),t.forEach(r.successors(u),o)}}var l=t.sortBy(a,function(u){return r.node(u).rank});return t.forEach(l,o),s}return ap}var ip,nC;function m5(){if(nC)return ip;nC=1;var t=it();ip=e;function e(n,a){for(var i=0,s=1;s<a.length;++s)i+=r(n,a[s-1],a[s]);return i}function r(n,a,i){for(var s=t.zipObject(i,t.map(i,function(d,h){return h})),o=t.flatten(t.map(a,function(d){return t.sortBy(t.map(n.outEdges(d),function(h){return{pos:s[h.w],weight:n.edge(h).weight}}),"pos")}),!0),l=1;l<i.length;)l<<=1;var u=2*l-1;l-=1;var c=t.map(new Array(u),function(){return 0}),f=0;return t.forEach(o.forEach(function(d){var h=d.pos+l;c[h]+=d.weight;for(var v=0;h>0;)h%2&&(v+=c[h+1]),h=h-1>>1,c[h]+=d.weight;f+=d.weight*v})),f}return ip}var sp,aC;function y5(){if(aC)return sp;aC=1;var t=it();sp=e;function e(r,n){return t.map(n,function(a){var i=r.inEdges(a);if(i.length){var s=t.reduce(i,function(o,l){var u=r.edge(l),c=r.node(l.v);return{sum:o.sum+u.weight*c.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:a,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:a}})}return sp}var op,iC;function b5(){if(iC)return op;iC=1;var t=it();op=e;function e(a,i){var s={};t.forEach(a,function(l,u){var c=s[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};t.isUndefined(l.barycenter)||(c.barycenter=l.barycenter,c.weight=l.weight)}),t.forEach(i.edges(),function(l){var u=s[l.v],c=s[l.w];!t.isUndefined(u)&&!t.isUndefined(c)&&(c.indegree++,u.out.push(s[l.w]))});var o=t.filter(s,function(l){return!l.indegree});return r(o)}function r(a){var i=[];function s(u){return function(c){c.merged||(t.isUndefined(c.barycenter)||t.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&n(u,c)}}function o(u){return function(c){c.in.push(u),--c.indegree===0&&a.push(c)}}for(;a.length;){var l=a.pop();i.push(l),t.forEach(l.in.reverse(),s(l)),t.forEach(l.out,o(l))}return t.map(t.filter(i,function(u){return!u.merged}),function(u){return t.pick(u,["vs","i","barycenter","weight"])})}function n(a,i){var s=0,o=0;a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.vs=i.vs.concat(a.vs),a.barycenter=s/o,a.weight=o,a.i=Math.min(i.i,a.i),i.merged=!0}return op}var lp,sC;function _5(){if(sC)return lp;sC=1;var t=it(),e=or();lp=r;function r(i,s){var o=e.partition(i,function(p){return t.has(p,"barycenter")}),l=o.lhs,u=t.sortBy(o.rhs,function(p){return-p.i}),c=[],f=0,d=0,h=0;l.sort(a(!!s)),h=n(c,u,h),t.forEach(l,function(p){h+=p.vs.length,c.push(p.vs),f+=p.barycenter*p.weight,d+=p.weight,h=n(c,u,h)});var v={vs:t.flatten(c,!0)};return d&&(v.barycenter=f/d,v.weight=d),v}function n(i,s,o){for(var l;s.length&&(l=t.last(s)).i<=o;)s.pop(),i.push(l.vs),o++;return o}function a(i){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}}return lp}var up,oC;function x5(){if(oC)return up;oC=1;var t=it(),e=y5(),r=b5(),n=_5();up=a;function a(o,l,u,c){var f=o.children(l),d=o.node(l),h=d?d.borderLeft:void 0,v=d?d.borderRight:void 0,p={};h&&(f=t.filter(f,function(x){return x!==h&&x!==v}));var g=e(o,f);t.forEach(g,function(x){if(o.children(x.v).length){var S=a(o,x.v,u,c);p[x.v]=S,t.has(S,"barycenter")&&s(x,S)}});var y=r(g,u);i(y,p);var m=n(y,c);if(h&&(m.vs=t.flatten([h,m.vs,v],!0),o.predecessors(h).length)){var b=o.node(o.predecessors(h)[0]),_=o.node(o.predecessors(v)[0]);t.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+b.order+_.order)/(m.weight+2),m.weight+=2}return m}function i(o,l){t.forEach(o,function(u){u.vs=t.flatten(u.vs.map(function(c){return l[c]?l[c].vs:c}),!0)})}function s(o,l){t.isUndefined(o.barycenter)?(o.barycenter=l.barycenter,o.weight=l.weight):(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight)}return up}var cp,lC;function w5(){if(lC)return cp;lC=1;var t=it(),e=kr().Graph;cp=r;function r(a,i,s){var o=n(a),l=new e({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(u){return a.node(u)});return t.forEach(a.nodes(),function(u){var c=a.node(u),f=a.parent(u);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(l.setNode(u),l.setParent(u,f||o),t.forEach(a[s](u),function(d){var h=d.v===u?d.w:d.v,v=l.edge(h,u),p=t.isUndefined(v)?0:v.weight;l.setEdge(h,u,{weight:a.edge(d).weight+p})}),t.has(c,"minRank")&&l.setNode(u,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),l}function n(a){for(var i;a.hasNode(i=t.uniqueId("_root")););return i}return cp}var fp,uC;function S5(){if(uC)return fp;uC=1;var t=it();fp=e;function e(r,n,a){var i={},s;t.forEach(a,function(o){for(var l=r.parent(o),u,c;l;){if(u=r.parent(l),u?(c=i[u],i[u]=l):(c=s,s=l),c&&c!==l){n.setEdge(c,l);return}l=u}})}return fp}var dp,cC;function E5(){if(cC)return dp;cC=1;var t=it(),e=p5(),r=m5(),n=x5(),a=w5(),i=S5(),s=kr().Graph,o=or();dp=l;function l(d){var h=o.maxRank(d),v=u(d,t.range(1,h+1),"inEdges"),p=u(d,t.range(h-1,-1,-1),"outEdges"),g=e(d);f(d,g);for(var y=Number.POSITIVE_INFINITY,m,b=0,_=0;_<4;++b,++_){c(b%2?v:p,b%4>=2),g=o.buildLayerMatrix(d);var x=r(d,g);x<y&&(_=0,m=t.cloneDeep(g),y=x)}f(d,m)}function u(d,h,v){return t.map(h,function(p){return a(d,p,v)})}function c(d,h){var v=new s;t.forEach(d,function(p){var g=p.graph().root,y=n(p,g,v,h);t.forEach(y.vs,function(m,b){p.node(m).order=b}),i(p,v,y.vs)})}function f(d,h){t.forEach(h,function(v){t.forEach(v,function(p,g){d.node(p).order=g})})}return dp}var hp,fC;function C5(){if(fC)return hp;fC=1;var t=it(),e=kr().Graph,r=or();hp={positionX:v,findType1Conflicts:n,findType2Conflicts:a,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:f,balance:h};function n(y,m){var b={};function _(x,S){var w=0,E=0,C=x.length,T=t.last(S);return t.forEach(S,function(A,P){var R=i(y,A),D=R?y.node(R).order:C;(R||A===T)&&(t.forEach(S.slice(E,P+1),function(L){t.forEach(y.predecessors(L),function(I){var O=y.node(I),B=O.order;(B<w||D<B)&&!(O.dummy&&y.node(L).dummy)&&s(b,I,L)})}),E=P+1,w=D)}),S}return t.reduce(m,_),b}function a(y,m){var b={};function _(S,w,E,C,T){var A;t.forEach(t.range(w,E),function(P){A=S[P],y.node(A).dummy&&t.forEach(y.predecessors(A),function(R){var D=y.node(R);D.dummy&&(D.order<C||D.order>T)&&s(b,R,A)})})}function x(S,w){var E=-1,C,T=0;return t.forEach(w,function(A,P){if(y.node(A).dummy==="border"){var R=y.predecessors(A);R.length&&(C=y.node(R[0]).order,_(w,T,P,E,C),T=P,E=C)}_(w,T,w.length,C,S.length)}),w}return t.reduce(m,x),b}function i(y,m){if(y.node(m).dummy)return t.find(y.predecessors(m),function(b){return y.node(b).dummy})}function s(y,m,b){if(m>b){var _=m;m=b,b=_}var x=y[m];x||(y[m]=x={}),x[b]=!0}function o(y,m,b){if(m>b){var _=m;m=b,b=_}return t.has(y[m],b)}function l(y,m,b,_){var x={},S={},w={};return t.forEach(m,function(E){t.forEach(E,function(C,T){x[C]=C,S[C]=C,w[C]=T})}),t.forEach(m,function(E){var C=-1;t.forEach(E,function(T){var A=_(T);if(A.length){A=t.sortBy(A,function(I){return w[I]});for(var P=(A.length-1)/2,R=Math.floor(P),D=Math.ceil(P);R<=D;++R){var L=A[R];S[T]===T&&C<w[L]&&!o(b,T,L)&&(S[L]=T,S[T]=x[T]=x[L],C=w[L])}}})}),{root:x,align:S}}function u(y,m,b,_,x){var S={},w=c(y,m,b,x),E=x?"borderLeft":"borderRight";function C(P,R){for(var D=w.nodes(),L=D.pop(),I={};L;)I[L]?P(L):(I[L]=!0,D.push(L),D=D.concat(R(L))),L=D.pop()}function T(P){S[P]=w.inEdges(P).reduce(function(R,D){return Math.max(R,S[D.v]+w.edge(D))},0)}function A(P){var R=w.outEdges(P).reduce(function(L,I){return Math.min(L,S[I.w]-w.edge(I))},Number.POSITIVE_INFINITY),D=y.node(P);R!==Number.POSITIVE_INFINITY&&D.borderType!==E&&(S[P]=Math.max(S[P],R))}return C(T,w.predecessors.bind(w)),C(A,w.successors.bind(w)),t.forEach(_,function(P){S[P]=S[b[P]]}),S}function c(y,m,b,_){var x=new e,S=y.graph(),w=p(S.nodesep,S.edgesep,_);return t.forEach(m,function(E){var C;t.forEach(E,function(T){var A=b[T];if(x.setNode(A),C){var P=b[C],R=x.edge(P,A);x.setEdge(P,A,Math.max(w(y,T,C),R||0))}C=T})}),x}function f(y,m){return t.minBy(t.values(m),function(b){var _=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY;return t.forIn(b,function(S,w){var E=g(y,w)/2;_=Math.max(S+E,_),x=Math.min(S-E,x)}),_-x})}function d(y,m){var b=t.values(m),_=t.min(b),x=t.max(b);t.forEach(["u","d"],function(S){t.forEach(["l","r"],function(w){var E=S+w,C=y[E],T;if(C!==m){var A=t.values(C);T=w==="l"?_-t.min(A):x-t.max(A),T&&(y[E]=t.mapValues(C,function(P){return P+T}))}})})}function h(y,m){return t.mapValues(y.ul,function(b,_){if(m)return y[m.toLowerCase()][_];var x=t.sortBy(t.map(y,_));return(x[1]+x[2])/2})}function v(y){var m=r.buildLayerMatrix(y),b=t.merge(n(y,m),a(y,m)),_={},x;t.forEach(["u","d"],function(w){x=w==="u"?m:t.values(m).reverse(),t.forEach(["l","r"],function(E){E==="r"&&(x=t.map(x,function(P){return t.values(P).reverse()}));var C=(w==="u"?y.predecessors:y.successors).bind(y),T=l(y,x,b,C),A=u(y,x,T.root,T.align,E==="r");E==="r"&&(A=t.mapValues(A,function(P){return-P})),_[w+E]=A})});var S=f(y,_);return d(_,S),h(_,y.graph().align)}function p(y,m,b){return function(_,x,S){var w=_.node(x),E=_.node(S),C=0,T;if(C+=w.width/2,t.has(w,"labelpos"))switch(w.labelpos.toLowerCase()){case"l":T=-w.width/2;break;case"r":T=w.width/2;break}if(T&&(C+=b?T:-T),T=0,C+=(w.dummy?m:y)/2,C+=(E.dummy?m:y)/2,C+=E.width/2,t.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":T=E.width/2;break;case"r":T=-E.width/2;break}return T&&(C+=b?T:-T),T=0,C}}function g(y,m){return y.node(m).width}return hp}var vp,dC;function k5(){if(dC)return vp;dC=1;var t=it(),e=or(),r=C5().positionX;vp=n;function n(i){i=e.asNonCompoundGraph(i),a(i),t.forEach(r(i),function(s,o){i.node(o).x=s})}function a(i){var s=e.buildLayerMatrix(i),o=i.graph().ranksep,l=0;t.forEach(s,function(u){var c=t.max(t.map(u,function(f){return i.node(f).height}));t.forEach(u,function(f){i.node(f).y=l+c/2}),l+=c+o})}return vp}var gp,hC;function T5(){if(hC)return gp;hC=1;var t=it(),e=l5(),r=u5(),n=f5(),a=or().normalizeRanks,i=d5(),s=or().removeEmptyRanks,o=h5(),l=v5(),u=g5(),c=E5(),f=k5(),d=or(),h=kr().Graph;gp=v;function v(F,q){var z=q&&q.debugTiming?d.time:d.notime;z("layout",function(){var W=z("  buildLayoutGraph",function(){return C(F)});z("  runLayout",function(){p(W,z)}),z("  updateInputGraph",function(){g(F,W)})})}function p(F,q){q("    makeSpaceForEdgeLabels",function(){T(F)}),q("    removeSelfEdges",function(){H(F)}),q("    acyclic",function(){e.run(F)}),q("    nestingGraph.run",function(){o.run(F)}),q("    rank",function(){n(d.asNonCompoundGraph(F))}),q("    injectEdgeLabelProxies",function(){A(F)}),q("    removeEmptyRanks",function(){s(F)}),q("    nestingGraph.cleanup",function(){o.cleanup(F)}),q("    normalizeRanks",function(){a(F)}),q("    assignRankMinMax",function(){P(F)}),q("    removeEdgeLabelProxies",function(){R(F)}),q("    normalize.run",function(){r.run(F)}),q("    parentDummyChains",function(){i(F)}),q("    addBorderSegments",function(){l(F)}),q("    order",function(){c(F)}),q("    insertSelfEdges",function(){G(F)}),q("    adjustCoordinateSystem",function(){u.adjust(F)}),q("    position",function(){f(F)}),q("    positionSelfEdges",function(){N(F)}),q("    removeBorderNodes",function(){B(F)}),q("    normalize.undo",function(){r.undo(F)}),q("    fixupEdgeLabelCoords",function(){I(F)}),q("    undoCoordinateSystem",function(){u.undo(F)}),q("    translateGraph",function(){D(F)}),q("    assignNodeIntersects",function(){L(F)}),q("    reversePoints",function(){O(F)}),q("    acyclic.undo",function(){e.undo(F)})}function g(F,q){t.forEach(F.nodes(),function(z){var W=F.node(z),te=q.node(z);W&&(W.x=te.x,W.y=te.y,q.children(z).length&&(W.width=te.width,W.height=te.height))}),t.forEach(F.edges(),function(z){var W=F.edge(z),te=q.edge(z);W.points=te.points,t.has(te,"x")&&(W.x=te.x,W.y=te.y)}),F.graph().width=q.graph().width,F.graph().height=q.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function C(F){var q=new h({multigraph:!0,compound:!0}),z=X(F.graph());return q.setGraph(t.merge({},m,$(z,y),t.pick(z,b))),t.forEach(F.nodes(),function(W){var te=X(F.node(W));q.setNode(W,t.defaults($(te,_),x)),q.setParent(W,F.parent(W))}),t.forEach(F.edges(),function(W){var te=X(F.edge(W));q.setEdge(W,t.merge({},w,$(te,S),t.pick(te,E)))}),q}function T(F){var q=F.graph();q.ranksep/=2,t.forEach(F.edges(),function(z){var W=F.edge(z);W.minlen*=2,W.labelpos.toLowerCase()!=="c"&&(q.rankdir==="TB"||q.rankdir==="BT"?W.width+=W.labeloffset:W.height+=W.labeloffset)})}function A(F){t.forEach(F.edges(),function(q){var z=F.edge(q);if(z.width&&z.height){var W=F.node(q.v),te=F.node(q.w),Y={rank:(te.rank-W.rank)/2+W.rank,e:q};d.addDummyNode(F,"edge-proxy",Y,"_ep")}})}function P(F){var q=0;t.forEach(F.nodes(),function(z){var W=F.node(z);W.borderTop&&(W.minRank=F.node(W.borderTop).rank,W.maxRank=F.node(W.borderBottom).rank,q=t.max(q,W.maxRank))}),F.graph().maxRank=q}function R(F){t.forEach(F.nodes(),function(q){var z=F.node(q);z.dummy==="edge-proxy"&&(F.edge(z.e).labelRank=z.rank,F.removeNode(q))})}function D(F){var q=Number.POSITIVE_INFINITY,z=0,W=Number.POSITIVE_INFINITY,te=0,Y=F.graph(),V=Y.marginx||0,U=Y.marginy||0;function K(Z){var ae=Z.x,ie=Z.y,Ae=Z.width,le=Z.height;q=Math.min(q,ae-Ae/2),z=Math.max(z,ae+Ae/2),W=Math.min(W,ie-le/2),te=Math.max(te,ie+le/2)}t.forEach(F.nodes(),function(Z){K(F.node(Z))}),t.forEach(F.edges(),function(Z){var ae=F.edge(Z);t.has(ae,"x")&&K(ae)}),q-=V,W-=U,t.forEach(F.nodes(),function(Z){var ae=F.node(Z);ae.x-=q,ae.y-=W}),t.forEach(F.edges(),function(Z){var ae=F.edge(Z);t.forEach(ae.points,function(ie){ie.x-=q,ie.y-=W}),t.has(ae,"x")&&(ae.x-=q),t.has(ae,"y")&&(ae.y-=W)}),Y.width=z-q+V,Y.height=te-W+U}function L(F){t.forEach(F.edges(),function(q){var z=F.edge(q),W=F.node(q.v),te=F.node(q.w),Y,V;z.points?(Y=z.points[0],V=z.points[z.points.length-1]):(z.points=[],Y=te,V=W),z.points.unshift(d.intersectRect(W,Y)),z.points.push(d.intersectRect(te,V))})}function I(F){t.forEach(F.edges(),function(q){var z=F.edge(q);if(t.has(z,"x"))switch((z.labelpos==="l"||z.labelpos==="r")&&(z.width-=z.labeloffset),z.labelpos){case"l":z.x-=z.width/2+z.labeloffset;break;case"r":z.x+=z.width/2+z.labeloffset;break}})}function O(F){t.forEach(F.edges(),function(q){var z=F.edge(q);z.reversed&&z.points.reverse()})}function B(F){t.forEach(F.nodes(),function(q){if(F.children(q).length){var z=F.node(q),W=F.node(z.borderTop),te=F.node(z.borderBottom),Y=F.node(t.last(z.borderLeft)),V=F.node(t.last(z.borderRight));z.width=Math.abs(V.x-Y.x),z.height=Math.abs(te.y-W.y),z.x=Y.x+z.width/2,z.y=W.y+z.height/2}}),t.forEach(F.nodes(),function(q){F.node(q).dummy==="border"&&F.removeNode(q)})}function H(F){t.forEach(F.edges(),function(q){if(q.v===q.w){var z=F.node(q.v);z.selfEdges||(z.selfEdges=[]),z.selfEdges.push({e:q,label:F.edge(q)}),F.removeEdge(q)}})}function G(F){var q=d.buildLayerMatrix(F);t.forEach(q,function(z){var W=0;t.forEach(z,function(te,Y){var V=F.node(te);V.order=Y+W,t.forEach(V.selfEdges,function(U){d.addDummyNode(F,"selfedge",{width:U.label.width,height:U.label.height,rank:V.rank,order:Y+ ++W,e:U.e,label:U.label},"_se")}),delete V.selfEdges})})}function N(F){t.forEach(F.nodes(),function(q){var z=F.node(q);if(z.dummy==="selfedge"){var W=F.node(z.e.v),te=W.x+W.width/2,Y=W.y,V=z.x-te,U=W.height/2;F.setEdge(z.e,z.label),F.removeNode(q),z.label.points=[{x:te+2*V/3,y:Y-U},{x:te+5*V/6,y:Y-U},{x:te+V,y:Y},{x:te+5*V/6,y:Y+U},{x:te+2*V/3,y:Y+U}],z.label.x=z.x,z.label.y=z.y}})}function $(F,q){return t.mapValues(t.pick(F,q),Number)}function X(F){var q={};return t.forEach(F,function(z,W){q[W.toLowerCase()]=z}),q}return gp}var pp,vC;function A5(){if(vC)return pp;vC=1;var t=it(),e=or(),r=kr().Graph;pp={debugOrdering:n};function n(a){var i=e.buildLayerMatrix(a),s=new r({compound:!0,multigraph:!0}).setGraph({});return t.forEach(a.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+a.node(o).rank)}),t.forEach(a.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),t.forEach(i,function(o,l){var u="layer"+l;s.setNode(u,{rank:"same"}),t.reduce(o,function(c,f){return s.setEdge(c,f,{style:"invis"}),f})}),s}return pp}var mp,gC;function P5(){return gC||(gC=1,mp="0.8.5"),mp}var yp,pC;function R5(){return pC||(pC=1,yp={graphlib:kr(),layout:T5(),debug:A5(),util:{time:or().time,notime:or().notime},version:P5()}),yp}(function(t,e){(function(n,a){t.exports=a(R5())})(ca,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.d=function(s,o,l){i.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,o){if(o&1&&(s=i(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var u in s)i.d(l,u,(function(c){return s[c]}).bind(null,u));return l},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=0)}([function(n,a,i){var s=i(1),o=function(u){u&&u("layout","dagre",s)};typeof cytoscape<"u"&&o(cytoscape),n.exports=o},function(n,a,i){function s(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(v){return typeof v}:s=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(d)}var o=function(h){return typeof h=="function"},l=i(2),u=i(3),c=i(4);function f(d){this.options=u({},l,d)}f.prototype.run=function(){var d=this.options,h=this,v=d.cy,p=d.eles,g=function(N,$){return o($)?$.apply(N,[N]):$},y=d.boundingBox||{x1:0,y1:0,w:v.width(),h:v.height()};y.x2===void 0&&(y.x2=y.x1+y.w),y.w===void 0&&(y.w=y.x2-y.x1),y.y2===void 0&&(y.y2=y.y1+y.h),y.h===void 0&&(y.h=y.y2-y.y1);var m=new c.graphlib.Graph({multigraph:!0,compound:!0}),b={},_=function(N,$){$!=null&&(b[N]=$)};_("nodesep",d.nodeSep),_("edgesep",d.edgeSep),_("ranksep",d.rankSep),_("rankdir",d.rankDir),_("align",d.align),_("ranker",d.ranker),_("acyclicer",d.acyclicer),m.setGraph(b),m.setDefaultEdgeLabel(function(){return{}}),m.setDefaultNodeLabel(function(){return{}});var x=p.nodes();o(d.sort)&&(x=x.sort(d.sort));for(var S=0;S<x.length;S++){var w=x[S],E=w.layoutDimensions(d);m.setNode(w.id(),{width:E.w,height:E.h,name:w.id()})}for(var C=0;C<x.length;C++){var T=x[C];T.isChild()&&m.setParent(T.id(),T.parent().id())}var A=p.edges().stdFilter(function(G){return!G.source().isParent()&&!G.target().isParent()});o(d.sort)&&(A=A.sort(d.sort));for(var P=0;P<A.length;P++){var R=A[P];m.setEdge(R.source().id(),R.target().id(),{minlen:g(R,d.minLen),weight:g(R,d.edgeWeight),name:R.id()},R.id())}c.layout(m);for(var D=m.nodes(),L=0;L<D.length;L++){var I=D[L],O=m.node(I);v.getElementById(I).scratch().dagre=O}var B;d.boundingBox?(B={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},x.forEach(function(G){var N=G.scratch().dagre;B.x1=Math.min(B.x1,N.x),B.x2=Math.max(B.x2,N.x),B.y1=Math.min(B.y1,N.y),B.y2=Math.max(B.y2,N.y)}),B.w=B.x2-B.x1,B.h=B.y2-B.y1):B=y;var H=function(N){if(d.boundingBox){var $=B.w===0?0:(N.x-B.x1)/B.w,X=B.h===0?0:(N.y-B.y1)/B.h;return{x:y.x1+$*y.w,y:y.y1+X*y.h}}else return N};return x.layoutPositions(h,d,function(G){G=s(G)==="object"?G:this;var N=G.scratch().dagre;return H({x:N.x,y:N.y})}),this},n.exports=f},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(o){return 1},edgeWeight:function(o){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(o,l){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(o,l){return l},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return o.forEach(function(u){Object.keys(u).forEach(function(c){return i[c]=u[c]})}),i}},function(n,a){n.exports=r}])})})(fA);var M5=fA.exports;const D5=yT(M5);zn.use(D5);function L5(t){const e=[],r=[],n=[];let a=null;for(const i of t){const s=`node-${i.line_number}`;if(e.push({id:s,entry:i,type:i.event_type}),a&&r.push({source:a,target:s,type:"sequence"}),i.event_type==="span_enter"&&i.span_name)n.push({name:i.span_name,nodeId:s});else if(i.event_type==="span_exit"&&i.span_name){const o=n.findLastIndex(l=>l.name===i.span_name);if(o>=0){const l=n[o];l&&r.push({source:l.nodeId,target:s,type:"span"}),n.splice(o,1)}}a=s}return{nodes:e,edges:r}}function O5(t){switch(t.toUpperCase()){case"ERROR":return"#e74c3c";case"WARN":return"#f39c12";case"INFO":return"#3498db";case"DEBUG":return"#9b59b6";case"TRACE":return"#95a5a6";default:return"#7f8c8d"}}function I5(t){var s,o;const e=t.level.toUpperCase().padEnd(5),r=t.event_type==="span_enter"?"â–¶":t.event_type==="span_exit"?"â—€":"â—",n=t.span_name||"",a=t.message.length>60?t.message.slice(0,60)+"â€¦":t.message,i=((o=(s=t.timestamp)==null?void 0:s.split("T")[1])==null?void 0:o.slice(0,12))||"";return n?`${r} ${e} ${n}
${a}
${i}`:`${r} ${e}
${a}
${i}`}function B5(){const t=Ir(null),e=Ir(null),r=zr.value,n=Wt.value;return Sa(()=>{if(!t.current||r.length===0)return;const{nodes:a,edges:i}=L5(r),o=a.slice(0,200),l=new Set(o.map(f=>f.id)),u=i.filter(f=>l.has(f.source)&&l.has(f.target));e.current&&e.current.destroy();const c=zn({container:t.current,elements:[...o.map(f=>({data:{id:f.id,label:I5(f.entry),entry:f.entry,type:f.type,level:f.entry.level}})),...u.map((f,d)=>({data:{id:`edge-${d}`,source:f.source,target:f.target,type:f.type}}))],style:[{selector:"node",style:{"background-color":f=>O5(f.data("level")),label:"data(label)","font-size":"14px","font-family":"monospace","font-weight":"bold","text-wrap":"wrap","text-max-width":"280px","text-valign":"center","text-halign":"center","text-justification":"left",color:"#fff",width:320,height:90,shape:"round-rectangle",padding:"12px"}},{selector:'node[type="span_enter"]',style:{"border-width":3,"border-color":"#2ecc71"}},{selector:'node[type="span_exit"]',style:{"border-width":3,"border-style":"dashed","border-color":"#e74c3c"}},{selector:"edge",style:{width:2,"line-color":"#555","target-arrow-color":"#555","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:'edge[type="span"]',style:{"line-color":"#27ae60","target-arrow-color":"#27ae60","line-style":"dashed"}},{selector:":selected",style:{"border-width":4,"border-color":"#f1c40f"}}],layout:{name:"dagre",rankDir:"TB",nodeSep:30,rankSep:50,edgeSep:10,fit:!1,padding:30}});return c.one("layoutstop",()=>{c.zoom(1.2),c.pan({x:50,y:50});const f=c.nodes().first();f.length&&c.center(f)}),c.on("tap","node",f=>{const d=f.target.data("entry");d&&(fT(d),dT("logs"))}),e.current=c,()=>{e.current&&(e.current.destroy(),e.current=null)}},[r,n]),n?r.length===0?k("div",{class:"flow-graph empty",children:k("div",{class:"placeholder-message",children:[k("span",{class:"placeholder-icon",children:"ðŸ“Š"}),k("p",{children:"No entries to visualize"})]})}):k("div",{class:"flow-graph",children:[k("div",{class:"flow-header",children:[k("span",{children:"Flow Graph"}),r.length>200&&k("span",{class:"flow-warning",children:["âš ï¸ Showing first 200 of ",r.length," entries"]}),k("div",{class:"flow-legend",children:[k("span",{class:"legend-item",children:[k("span",{class:"dot event"})," Event"]}),k("span",{class:"legend-item",children:[k("span",{class:"dot span-enter"})," Span Enter"]}),k("span",{class:"legend-item",children:[k("span",{class:"dot span-exit"})," Span Exit"]})]})]}),k("div",{class:"flow-container",ref:t})]}):k("div",{class:"flow-graph empty",children:k("div",{class:"placeholder-message",children:[k("span",{class:"placeholder-icon",children:"ðŸ”€"}),k("p",{children:"Select a log file to view flow graph"})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function js(t){return t+.5|0}const Cn=(t,e,r)=>Math.max(Math.min(t,r),e);function Ui(t){return Cn(js(t*2.55),0,255)}function Dn(t){return Cn(js(t*255),0,255)}function Jr(t){return Cn(js(t/2.55)/100,0,1)}function mC(t){return Cn(js(t*100),0,100)}const dr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},cm=[..."0123456789ABCDEF"],F5=t=>cm[t&15],q5=t=>cm[(t&240)>>4]+cm[t&15],go=t=>(t&240)>>4===(t&15),N5=t=>go(t.r)&&go(t.g)&&go(t.b)&&go(t.a);function z5(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&dr[t[1]]*17,g:255&dr[t[2]]*17,b:255&dr[t[3]]*17,a:e===5?dr[t[4]]*17:255}:(e===7||e===9)&&(r={r:dr[t[1]]<<4|dr[t[2]],g:dr[t[3]]<<4|dr[t[4]],b:dr[t[5]]<<4|dr[t[6]],a:e===9?dr[t[7]]<<4|dr[t[8]]:255})),r}const $5=(t,e)=>t<255?e(t):"";function V5(t){var e=N5(t)?F5:q5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$5(t.a,e):void 0}const H5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fP(t,e,r){const n=e*Math.min(r,1-r),a=(i,s=(i+t/30)%12)=>r-n*Math.max(Math.min(s-3,9-s,1),-1);return[a(0),a(8),a(4)]}function W5(t,e,r){const n=(a,i=(a+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function G5(t,e,r){const n=fP(t,1,.5);let a;for(e+r>1&&(a=1/(e+r),e*=a,r*=a),a=0;a<3;a++)n[a]*=1-e-r,n[a]+=e;return n}function U5(t,e,r,n,a){return t===a?(e-r)/n+(e<r?6:0):e===a?(r-t)/n+2:(t-e)/n+4}function ky(t){const r=t.r/255,n=t.g/255,a=t.b/255,i=Math.max(r,n,a),s=Math.min(r,n,a),o=(i+s)/2;let l,u,c;return i!==s&&(c=i-s,u=o>.5?c/(2-i-s):c/(i+s),l=U5(r,n,a,c,i),l=l*60+.5),[l|0,u||0,o]}function Ty(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Dn)}function Ay(t,e,r){return Ty(fP,t,e,r)}function j5(t,e,r){return Ty(G5,t,e,r)}function K5(t,e,r){return Ty(W5,t,e,r)}function dP(t){return(t%360+360)%360}function Y5(t){const e=H5.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Ui(+e[5]):Dn(+e[5]));const a=dP(+e[2]),i=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=j5(a,i,s):e[1]==="hsv"?n=K5(a,i,s):n=Ay(a,i,s),{r:n[0],g:n[1],b:n[2],a:r}}function X5(t,e){var r=ky(t);r[0]=dP(r[0]+e),r=Ay(r),t.r=r[0],t.g=r[1],t.b=r[2]}function Z5(t){if(!t)return;const e=ky(t),r=e[0],n=mC(e[1]),a=mC(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${a}%, ${Jr(t.a)})`:`hsl(${r}, ${n}%, ${a}%)`}const yC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Q5(){const t={},e=Object.keys(bC),r=Object.keys(yC);let n,a,i,s,o;for(n=0;n<e.length;n++){for(s=o=e[n],a=0;a<r.length;a++)i=r[a],o=o.replace(i,yC[i]);i=parseInt(bC[s],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let po;function J5(t){po||(po=Q5(),po.transparent=[0,0,0,0]);const e=po[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const e$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function t$(t){const e=e$.exec(t);let r=255,n,a,i;if(e){if(e[7]!==n){const s=+e[7];r=e[8]?Ui(s):Cn(s*255,0,255)}return n=+e[1],a=+e[3],i=+e[5],n=255&(e[2]?Ui(n):Cn(n,0,255)),a=255&(e[4]?Ui(a):Cn(a,0,255)),i=255&(e[6]?Ui(i):Cn(i,0,255)),{r:n,g:a,b:i,a:r}}}function r$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Jr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const bp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$a=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function n$(t,e,r){const n=$a(Jr(t.r)),a=$a(Jr(t.g)),i=$a(Jr(t.b));return{r:Dn(bp(n+r*($a(Jr(e.r))-n))),g:Dn(bp(a+r*($a(Jr(e.g))-a))),b:Dn(bp(i+r*($a(Jr(e.b))-i))),a:t.a+r*(e.a-t.a)}}function mo(t,e,r){if(t){let n=ky(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=Ay(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function hP(t,e){return t&&Object.assign(e||{},t)}function _C(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Dn(t[3]))):(e=hP(t,{r:0,g:0,b:0,a:1}),e.a=Dn(e.a)),e}function a$(t){return t.charAt(0)==="r"?t$(t):Y5(t)}class ws{constructor(e){if(e instanceof ws)return e;const r=typeof e;let n;r==="object"?n=_C(e):r==="string"&&(n=z5(e)||J5(e)||a$(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=hP(this._rgb);return e&&(e.a=Jr(e.a)),e}set rgb(e){this._rgb=_C(e)}rgbString(){return this._valid?r$(this._rgb):void 0}hexString(){return this._valid?V5(this._rgb):void 0}hslString(){return this._valid?Z5(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,a=e.rgb;let i;const s=r===i?.5:r,o=2*s-1,l=n.a-a.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-u,n.r=255&u*n.r+i*a.r+.5,n.g=255&u*n.g+i*a.g+.5,n.b=255&u*n.b+i*a.b+.5,n.a=s*n.a+(1-s)*a.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=n$(this._rgb,e._rgb,r)),this}clone(){return new ws(this.rgb)}alpha(e){return this._rgb.a=Dn(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=js(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mo(this._rgb,2,e),this}darken(e){return mo(this._rgb,2,-e),this}saturate(e){return mo(this._rgb,1,e),this}desaturate(e){return mo(this._rgb,1,-e),this}rotate(e){return X5(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Kr(){}const i$=(()=>{let t=0;return()=>t++})();function Ie(t){return t==null}function rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function lt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function lr(t,e){return lt(t)?t:e}function Te(t,e){return typeof t>"u"?e:t}const s$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,vP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Qe(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function je(t,e,r,n){let a,i,s;if(rt(t))for(i=t.length,a=0;a<i;a++)e.call(r,t[a],a);else if(Fe(t))for(s=Object.keys(t),i=s.length,a=0;a<i;a++)e.call(r,t[s[a]],s[a])}function wl(t,e){let r,n,a,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(a=t[r],i=e[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function Sl(t){if(rt(t))return t.map(Sl);if(Fe(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let a=0;for(;a<n;++a)e[r[a]]=Sl(t[r[a]]);return e}return t}function gP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function o$(t,e,r,n){if(!gP(t))return;const a=e[t],i=r[t];Fe(a)&&Fe(i)?Ss(a,i,n):e[t]=Sl(i)}function Ss(t,e,r){const n=rt(e)?e:[e],a=n.length;if(!Fe(t))return t;r=r||{};const i=r.merger||o$;let s;for(let o=0;o<a;++o){if(s=n[o],!Fe(s))continue;const l=Object.keys(s);for(let u=0,c=l.length;u<c;++u)i(l[u],t,s,r)}return t}function is(t,e){return Ss(t,e,{merger:l$})}function l$(t,e,r){if(!gP(t))return;const n=e[t],a=r[t];Fe(n)&&Fe(a)?is(n,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sl(a))}const xC={"":t=>t,x:t=>t.x,y:t=>t.y};function u$(t){const e=t.split("."),r=[];let n="";for(const a of e)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function c$(t){const e=u$(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function $n(t,e){return(xC[e]||(xC[e]=c$(e)))(t)}function Py(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Es=t=>typeof t<"u",Vn=t=>typeof t=="function",wC=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function f$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const He=Math.PI,tt=2*He,d$=tt+He,El=Number.POSITIVE_INFINITY,h$=He/180,ft=He/2,Jn=He/4,SC=He*2/3,kn=Math.log10,qr=Math.sign;function ss(t,e,r){return Math.abs(t-e)<r}function EC(t){const e=Math.round(t);t=ss(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(kn(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function v$(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((a,i)=>a-i).pop(),e}function g$(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function si(t){return!g$(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function p$(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function pP(t,e,r){let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function wr(t){return t*(He/180)}function Ry(t){return t*(180/He)}function CC(t){if(!lt(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function mP(t,e){const r=e.x-t.x,n=e.y-t.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*He&&(i+=tt),{angle:i,distance:a}}function fm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function m$(t,e){return(t-e+d$)%tt-He}function Vt(t){return(t%tt+tt)%tt}function Cs(t,e,r,n){const a=Vt(t),i=Vt(e),s=Vt(r),o=Vt(i-a),l=Vt(s-a),u=Vt(a-i),c=Vt(a-s);return a===i||a===s||n&&i===s||o>l&&u<c}function At(t,e,r){return Math.max(e,Math.min(r,t))}function y$(t){return At(t,-32768,32767)}function an(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function My(t,e,r){r=r||(s=>t[s]<e);let n=t.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}const sn=(t,e,r,n)=>My(t,r,n?a=>{const i=t[a][e];return i<r||i===r&&t[a+1][e]===r}:a=>t[a][e]<r),b$=(t,e,r)=>My(t,r,n=>t[n][e]>=r);function _$(t,e,r){let n=0,a=t.length;for(;n<a&&t[n]<e;)n++;for(;a>n&&t[a-1]>r;)a--;return n>0||a<t.length?t.slice(n,a):t}const yP=["push","pop","shift","splice","unshift"];function x$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yP.forEach(r=>{const n="_onData"+Py(r),a=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const s=a.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...i)}),s}})})}function kC(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(e);a!==-1&&n.splice(a,1),!(n.length>0)&&(yP.forEach(i=>{delete t[i]}),delete t._chartjs)}function bP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _P=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function xP(t,e){let r=[],n=!1;return function(...a){r=a,n||(n=!0,_P.call(window,()=>{n=!1,t.apply(e,r)}))}}function w$(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const Dy=t=>t==="start"?"left":t==="end"?"right":"center",$t=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,S$=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function wP(t,e,r){const n=e.length;let a=0,i=n;if(t._sorted){const{iScale:s,vScale:o,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=s.axis,{min:f,max:d,minDefined:h,maxDefined:v}=s.getUserBounds();if(h){if(a=Math.min(sn(l,c,f).lo,r?n:sn(e,c,s.getPixelForValue(f)).lo),u){const p=l.slice(0,a+1).reverse().findIndex(g=>!Ie(g[o.axis]));a-=Math.max(0,p)}a=At(a,0,n-1)}if(v){let p=Math.max(sn(l,s.axis,d,!0).hi+1,r?0:sn(e,c,s.getPixelForValue(d),!0).hi+1);if(u){const g=l.slice(p-1).findIndex(y=>!Ie(y[o.axis]));p+=Math.max(0,g)}i=At(p,a,n)-a}else i=n-a}return{start:a,count:i}}function SP(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,a={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=a,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const yo=t=>t===0||t===1,TC=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*tt/r)),AC=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*tt/r)+1,os={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ft)+1,easeOutSine:t=>Math.sin(t*ft),easeInOutSine:t=>-.5*(Math.cos(He*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yo(t)?t:TC(t,.075,.3),easeOutElastic:t=>yo(t)?t:AC(t,.075,.3),easeInOutElastic(t){return yo(t)?t:t<.5?.5*TC(t*2,.1125,.45):.5+.5*AC(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-os.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?os.easeInBounce(t*2)*.5:os.easeOutBounce(t*2-1)*.5+.5};function Ly(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function PC(t){return Ly(t)?t:new ws(t)}function _p(t){return Ly(t)?t:new ws(t).saturate(.5).darken(.1).hexString()}const E$=["x","y","borderWidth","radius","tension"],C$=["color","borderColor","backgroundColor"];function k$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:C$},numbers:{type:"number",properties:E$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function T$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const RC=new Map;function A$(t,e){e=e||{};const r=t+JSON.stringify(e);let n=RC.get(r);return n||(n=new Intl.NumberFormat(t,e),RC.set(r,n)),n}function Ks(t,e,r){return A$(e,r).format(t)}const EP={values(t){return rt(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let a,i=t;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),i=P$(t,r)}const s=kn(Math.abs(i)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Ks(t,n,l)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(kn(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?EP.numeric.call(this,t,e,r):""}};function P$(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var hu={formatters:EP};function R$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xa=Object.create(null),dm=Object.create(null);function ls(t,e){if(!e)return t;const r=e.split(".");for(let n=0,a=r.length;n<a;++n){const i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function xp(t,e,r){return typeof e=="string"?Ss(ls(t,e),r):Ss(ls(t,""),e)}class M${constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>_p(a.backgroundColor),this.hoverBorderColor=(n,a)=>_p(a.borderColor),this.hoverColor=(n,a)=>_p(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return xp(this,e,r)}get(e){return ls(this,e)}describe(e,r){return xp(dm,e,r)}override(e,r){return xp(xa,e,r)}route(e,r,n,a){const i=ls(this,e),s=ls(this,n),o="_"+r;Object.defineProperties(i,{[o]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const l=this[o],u=s[a];return Fe(l)?Object.assign({},u,l):Te(l,u)},set(l){this[o]=l}}})}apply(e){e.forEach(r=>r(this))}}var at=new M$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[k$,T$,R$]);function D$(t){return!t||Ie(t.size)||Ie(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Cl(t,e,r,n,a){let i=e[a];return i||(i=e[a]=t.measureText(a).width,r.push(a)),i>n&&(n=i),n}function L$(t,e,r,n){n=n||{};let a=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(a=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0;const o=r.length;let l,u,c,f,d;for(l=0;l<o;l++)if(f=r[l],f!=null&&!rt(f))s=Cl(t,a,i,s,f);else if(rt(f))for(u=0,c=f.length;u<c;u++)d=f[u],d!=null&&!rt(d)&&(s=Cl(t,a,i,s,d));t.restore();const h=i.length/2;if(h>r.length){for(l=0;l<h;l++)delete a[i[l]];i.splice(0,h)}return s}function ea(t,e,r){const n=t.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((e-a)*n)/n+a}function MC(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function hm(t,e,r,n){CP(t,e,r,n,null)}function CP(t,e,r,n,a){let i,s,o,l,u,c,f,d;const h=e.pointStyle,v=e.rotation,p=e.radius;let g=(v||0)*h$;if(h&&typeof h=="object"&&(i=h.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(g),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),h){default:a?t.ellipse(r,n,a/2,p,0,0,tt):t.arc(r,n,p,0,tt),t.closePath();break;case"triangle":c=a?a/2:p,t.moveTo(r+Math.sin(g)*c,n-Math.cos(g)*p),g+=SC,t.lineTo(r+Math.sin(g)*c,n-Math.cos(g)*p),g+=SC,t.lineTo(r+Math.sin(g)*c,n-Math.cos(g)*p),t.closePath();break;case"rectRounded":u=p*.516,l=p-u,s=Math.cos(g+Jn)*l,f=Math.cos(g+Jn)*(a?a/2-u:l),o=Math.sin(g+Jn)*l,d=Math.sin(g+Jn)*(a?a/2-u:l),t.arc(r-f,n-o,u,g-He,g-ft),t.arc(r+d,n-s,u,g-ft,g),t.arc(r+f,n+o,u,g,g+ft),t.arc(r-d,n+s,u,g+ft,g+He),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*p,c=a?a/2:l,t.rect(r-c,n-l,2*c,2*l);break}g+=Jn;case"rectRot":f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+d,n-s),t.lineTo(r+f,n+o),t.lineTo(r-d,n+s),t.closePath();break;case"crossRot":g+=Jn;case"cross":f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+d,n-s),t.lineTo(r-d,n+s);break;case"star":f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+d,n-s),t.lineTo(r-d,n+s),g+=Jn,f=Math.cos(g)*(a?a/2:p),s=Math.cos(g)*p,o=Math.sin(g)*p,d=Math.sin(g)*(a?a/2:p),t.moveTo(r-f,n-o),t.lineTo(r+f,n+o),t.moveTo(r+d,n-s),t.lineTo(r-d,n+s);break;case"line":s=a?a/2:Math.cos(g)*p,o=Math.sin(g)*p,t.moveTo(r-s,n-o),t.lineTo(r+s,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(g)*(a?a/2:p),n+Math.sin(g)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function on(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function vu(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function gu(t){t.restore()}function O$(t,e,r,n,a){if(!e)return t.lineTo(r.x,r.y);if(a==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else a==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function I$(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function B$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ie(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function F$(t,e,r,n,a){if(a.strikethrough||a.underline){const i=t.measureText(n),s=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=r-i.actualBoundingBoxAscent,u=r+i.actualBoundingBoxDescent,c=a.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(s,c),t.lineTo(o,c),t.stroke()}}function q$(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function wa(t,e,r,n,a,i={}){const s=rt(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=a.string,B$(t,i),l=0;l<s.length;++l)u=s[l],i.backdrop&&q$(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ie(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,r,n,i.maxWidth)),t.fillText(u,r,n,i.maxWidth),F$(t,r,n,u,i),n+=Number(a.lineHeight);t.restore()}function ks(t,e){const{x:r,y:n,w:a,h:i,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*He,He,!0),t.lineTo(r,n+i-s.bottomLeft),t.arc(r+s.bottomLeft,n+i-s.bottomLeft,s.bottomLeft,He,ft,!0),t.lineTo(r+a-s.bottomRight,n+i),t.arc(r+a-s.bottomRight,n+i-s.bottomRight,s.bottomRight,ft,0,!0),t.lineTo(r+a,n+s.topRight),t.arc(r+a-s.topRight,n+s.topRight,s.topRight,0,-ft,!0),t.lineTo(r+s.topLeft,n)}const N$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,z$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $$(t,e){const r=(""+t).match(N$);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const V$=t=>+t||0;function Oy(t,e){const r={},n=Fe(e),a=n?Object.keys(e):e,i=Fe(t)?n?s=>Te(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of a)r[s]=V$(i(s));return r}function kP(t){return Oy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ha(t){return Oy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jt(t){const e=kP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wt(t,e){t=t||{},e=e||at.font;let r=Te(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Te(t.style,e.style);n&&!(""+n).match(z$)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:Te(t.family,e.family),lineHeight:$$(Te(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Te(t.weight,e.weight),string:""};return a.string=D$(a),a}function ji(t,e,r,n){let a,i,s;for(a=0,i=t.length;a<i;++a)if(s=t[a],s!==void 0&&s!==void 0)return s}function H$(t,e,r){const{min:n,max:a}=t,i=vP(e,(a-n)/2),s=(o,l)=>r&&o===0?0:o+l;return{min:s(n,-Math.abs(i)),max:s(a,i)}}function Yn(t,e){return Object.assign(Object.create(t),e)}function Iy(t,e=[""],r,n,a=()=>t[0]){const i=r||t;typeof n>"u"&&(n=RP("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:a,override:o=>Iy([o,...t],e,i,n)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return AP(o,l,()=>Z$(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return LC(o).includes(l)},ownKeys(o){return LC(o)},set(o,l,u){const c=o._storage||(o._storage=a());return o[l]=c[l]=u,delete o._keys,!0}})}function oi(t,e,r,n){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:TP(t,n),setContext:i=>oi(t,i,r,n),override:i=>oi(t.override(i),e,r,n)};return new Proxy(a,{deleteProperty(i,s){return delete i[s],delete t[s],!0},get(i,s,o){return AP(i,s,()=>G$(i,s,o))},getOwnPropertyDescriptor(i,s){return i._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(i,s,o){return t[s]=o,delete i[s],!0}})}function TP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Vn(r)?r:()=>r,isIndexable:Vn(n)?n:()=>n}}const W$=(t,e)=>t?t+Py(e):e,By=(t,e)=>Fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function AP(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function G$(t,e,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:s}=t;let o=n[e];return Vn(o)&&s.isScriptable(e)&&(o=U$(e,o,t,r)),rt(o)&&o.length&&(o=j$(e,o,t,s.isIndexable)),By(e,o)&&(o=oi(o,a,i&&i[e],s)),o}function U$(t,e,r,n){const{_proxy:a,_context:i,_subProxy:s,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,s||n);return o.delete(t),By(t,l)&&(l=Fy(a._scopes,a,t,l)),l}function j$(t,e,r,n){const{_proxy:a,_context:i,_subProxy:s,_descriptors:o}=r;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(Fe(e[0])){const l=e,u=a._scopes.filter(c=>c!==l);e=[];for(const c of l){const f=Fy(u,a,t,c);e.push(oi(f,i,s&&s[t],o))}}return e}function PP(t,e,r){return Vn(t)?t(e,r):t}const K$=(t,e)=>t===!0?e:typeof t=="string"?$n(e,t):void 0;function Y$(t,e,r,n,a){for(const i of e){const s=K$(r,i);if(s){t.add(s);const o=PP(s._fallback,r,a);if(typeof o<"u"&&o!==r&&o!==n)return o}else if(s===!1&&typeof n<"u"&&r!==n)return null}return!1}function Fy(t,e,r,n){const a=e._rootScopes,i=PP(e._fallback,r,n),s=[...t,...a],o=new Set;o.add(n);let l=DC(o,s,r,i||r,n);return l===null||typeof i<"u"&&i!==r&&(l=DC(o,s,i,l,n),l===null)?!1:Iy(Array.from(o),[""],a,i,()=>X$(e,r,n))}function DC(t,e,r,n,a){for(;r;)r=Y$(t,e,r,n,a);return r}function X$(t,e,r){const n=t._getTarget();e in n||(n[e]={});const a=n[e];return rt(a)&&Fe(r)?r:a||{}}function Z$(t,e,r,n){let a;for(const i of e)if(a=RP(W$(i,t),r),typeof a<"u")return By(t,a)?Fy(r,n,t,a):a}function RP(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function LC(t){let e=t._keys;return e||(e=t._keys=Q$(t._scopes)),e}function Q$(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(a=>!a.startsWith("_")))e.add(n);return Array.from(e)}function MP(t,e,r,n){const{iScale:a}=t,{key:i="r"}=this._parsing,s=new Array(n);let o,l,u,c;for(o=0,l=n;o<l;++o)u=o+r,c=e[u],s[o]={r:a.parse($n(c,i),u)};return s}const J$=Number.EPSILON||1e-14,li=(t,e)=>e<t.length&&!t[e].skip&&t[e],DP=t=>t==="x"?"y":"x";function eV(t,e,r,n){const a=t.skip?e:t,i=e,s=r.skip?e:r,o=fm(i,a),l=fm(s,i);let u=o/(o+l),c=l/(o+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const f=n*u,d=n*c;return{previous:{x:i.x-f*(s.x-a.x),y:i.y-f*(s.y-a.y)},next:{x:i.x+d*(s.x-a.x),y:i.y+d*(s.y-a.y)}}}function tV(t,e,r){const n=t.length;let a,i,s,o,l,u=li(t,0);for(let c=0;c<n-1;++c)if(l=u,u=li(t,c+1),!(!l||!u)){if(ss(e[c],0,J$)){r[c]=r[c+1]=0;continue}a=r[c]/e[c],i=r[c+1]/e[c],o=Math.pow(a,2)+Math.pow(i,2),!(o<=9)&&(s=3/Math.sqrt(o),r[c]=a*s*e[c],r[c+1]=i*s*e[c])}}function rV(t,e,r="x"){const n=DP(r),a=t.length;let i,s,o,l=li(t,0);for(let u=0;u<a;++u){if(s=o,o=l,l=li(t,u+1),!o)continue;const c=o[r],f=o[n];s&&(i=(c-s[r])/3,o[`cp1${r}`]=c-i,o[`cp1${n}`]=f-i*e[u]),l&&(i=(l[r]-c)/3,o[`cp2${r}`]=c+i,o[`cp2${n}`]=f+i*e[u])}}function nV(t,e="x"){const r=DP(e),n=t.length,a=Array(n).fill(0),i=Array(n);let s,o,l,u=li(t,0);for(s=0;s<n;++s)if(o=l,l=u,u=li(t,s+1),!!l){if(u){const c=u[e]-l[e];a[s]=c!==0?(u[r]-l[r])/c:0}i[s]=o?u?qr(a[s-1])!==qr(a[s])?0:(a[s-1]+a[s])/2:a[s-1]:a[s]}tV(t,a,i),rV(t,i,e)}function bo(t,e,r){return Math.max(Math.min(t,r),e)}function aV(t,e){let r,n,a,i,s,o=on(t[0],e);for(r=0,n=t.length;r<n;++r)s=i,i=o,o=r<n-1&&on(t[r+1],e),i&&(a=t[r],s&&(a.cp1x=bo(a.cp1x,e.left,e.right),a.cp1y=bo(a.cp1y,e.top,e.bottom)),o&&(a.cp2x=bo(a.cp2x,e.left,e.right),a.cp2y=bo(a.cp2y,e.top,e.bottom)))}function iV(t,e,r,n,a){let i,s,o,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")nV(t,a);else{let u=n?t[t.length-1]:t[0];for(i=0,s=t.length;i<s;++i)o=t[i],l=eV(u,o,t[Math.min(i+1,s-(n?0:1))%s],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}e.capBezierPoints&&aV(t,r)}function qy(){return typeof window<"u"&&typeof document<"u"}function Ny(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kl(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const pu=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function sV(t,e){return pu(t).getPropertyValue(e)}const oV=["top","right","bottom","left"];function va(t,e,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=oV[a];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const lV=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function uV(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:a,offsetY:i}=n;let s=!1,o,l;if(lV(a,i,t.target))o=a,l=i;else{const u=e.getBoundingClientRect();o=n.clientX-u.left,l=n.clientY-u.top,s=!0}return{x:o,y:l,box:s}}function ia(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,a=pu(r),i=a.boxSizing==="border-box",s=va(a,"padding"),o=va(a,"border","width"),{x:l,y:u,box:c}=uV(t,r),f=s.left+(c&&o.left),d=s.top+(c&&o.top);let{width:h,height:v}=e;return i&&(h-=s.width+o.width,v-=s.height+o.height),{x:Math.round((l-f)/h*r.width/n),y:Math.round((u-d)/v*r.height/n)}}function cV(t,e,r){let n,a;if(e===void 0||r===void 0){const i=t&&Ny(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const s=i.getBoundingClientRect(),o=pu(i),l=va(o,"border","width"),u=va(o,"padding");e=s.width-u.width-l.width,r=s.height-u.height-l.height,n=kl(o.maxWidth,i,"clientWidth"),a=kl(o.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||El,maxHeight:a||El}}const Tn=t=>Math.round(t*10)/10;function fV(t,e,r,n){const a=pu(t),i=va(a,"margin"),s=kl(a.maxWidth,t,"clientWidth")||El,o=kl(a.maxHeight,t,"clientHeight")||El,l=cV(t,e,r);let{width:u,height:c}=l;if(a.boxSizing==="content-box"){const d=va(a,"border","width"),h=va(a,"padding");u-=h.width+d.width,c-=h.height+d.height}return u=Math.max(0,u-i.width),c=Math.max(0,n?u/n:c-i.height),u=Tn(Math.min(u,s,l.maxWidth)),c=Tn(Math.min(c,o,l.maxHeight)),u&&!c&&(c=Tn(u/2)),(e!==void 0||r!==void 0)&&n&&l.height&&c>l.height&&(c=l.height,u=Tn(Math.floor(c*n))),{width:u,height:c}}function OC(t,e,r){const n=e||1,a=Tn(t.height*n),i=Tn(t.width*n);t.height=Tn(t.height),t.width=Tn(t.width);const s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||s.height!==a||s.width!==i?(t.currentDevicePixelRatio=n,s.height=a,s.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const dV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};qy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function IC(t,e){const r=sV(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function sa(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function hV(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function vV(t,e,r,n){const a={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},s=sa(t,a,r),o=sa(a,i,r),l=sa(i,e,r),u=sa(s,o,r),c=sa(o,l,r);return sa(u,c,r)}const gV=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},pV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ei(t,e,r){return t?gV(e,r):pV()}function LP(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function OP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function IP(t){return t==="angle"?{between:Cs,compare:m$,normalize:Vt}:{between:an,compare:(e,r)=>e-r,normalize:e=>e}}function BC({start:t,end:e,count:r,loop:n,style:a}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:a}}function mV(t,e,r){const{property:n,start:a,end:i}=r,{between:s,normalize:o}=IP(n),l=e.length;let{start:u,end:c,loop:f}=t,d,h;if(f){for(u+=l,c+=l,d=0,h=l;d<h&&s(o(e[u%l][n]),a,i);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:f,style:t.style}}function BP(t,e,r){if(!r)return[t];const{property:n,start:a,end:i}=r,s=e.length,{compare:o,between:l,normalize:u}=IP(n),{start:c,end:f,loop:d,style:h}=mV(t,e,r),v=[];let p=!1,g=null,y,m,b;const _=()=>l(a,b,y)&&o(a,b)!==0,x=()=>o(i,y)===0||l(i,b,y),S=()=>p||_(),w=()=>!p||x();for(let E=c,C=c;E<=f;++E)m=e[E%s],!m.skip&&(y=u(m[n]),y!==b&&(p=l(y,a,i),g===null&&S()&&(g=o(y,a)===0?E:C),g!==null&&w()&&(v.push(BC({start:g,end:E,loop:d,count:s,style:h})),g=null),C=E,b=y));return g!==null&&v.push(BC({start:g,end:f,loop:d,count:s,style:h})),v}function FP(t,e){const r=[],n=t.segments;for(let a=0;a<n.length;a++){const i=BP(n[a],t.points,e);i.length&&r.push(...i)}return r}function yV(t,e,r,n){let a=0,i=e-1;if(r&&!n)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,r&&(i+=a);i>a&&t[i%e].skip;)i--;return i%=e,{start:a,end:i}}function bV(t,e,r,n){const a=t.length,i=[];let s=e,o=t[e],l;for(l=e+1;l<=r;++l){const u=t[l%a];u.skip||u.stop?o.skip||(n=!1,i.push({start:e%a,end:(l-1)%a,loop:n}),e=s=u.stop?l:null):(s=l,o.skip&&(e=l)),o=u}return s!==null&&i.push({start:e%a,end:s%a,loop:n}),i}function _V(t,e){const r=t.points,n=t.options.spanGaps,a=r.length;if(!a)return[];const i=!!t._loop,{start:s,end:o}=yV(r,a,i,n);if(n===!0)return FC(t,[{start:s,end:o,loop:i}],r,e);const l=o<s?o+a:o,u=!!t._fullLoop&&s===0&&o===a-1;return FC(t,bV(r,s,l,u),r,e)}function FC(t,e,r,n){return!n||!n.setContext||!r?e:xV(t,e,r,n)}function xV(t,e,r,n){const a=t._chart.getContext(),i=qC(t.options),{_datasetIndex:s,options:{spanGaps:o}}=t,l=r.length,u=[];let c=i,f=e[0].start,d=f;function h(v,p,g,y){const m=o?-1:1;if(v!==p){for(v+=l;r[v%l].skip;)v-=m;for(;r[p%l].skip;)p+=m;v%l!==p%l&&(u.push({start:v%l,end:p%l,loop:g,style:y}),c=y,f=p%l)}}for(const v of e){f=o?f:v.start;let p=r[f%l],g;for(d=f+1;d<=v.end;d++){const y=r[d%l];g=qC(n.setContext(Yn(a,{type:"segment",p0:p,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),wV(g,c)&&h(f,d-1,v.loop,c),p=y,c=g}f<d-1&&h(f,d-1,v.loop,c)}return u}function qC(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function wV(t,e){if(!e)return!1;const r=[],n=function(a,i){return Ly(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function _o(t,e,r){return t.options.clip?t[r]:e[r]}function SV(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:_o(r,e,"left"),right:_o(r,e,"right"),top:_o(n,e,"top"),bottom:_o(n,e,"bottom")}:e}function qP(t,e){const r=e._clip;if(r.disabled)return!1;const n=SV(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class EV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,a){const i=r.listeners[a],s=r.duration;i.forEach(o=>o({chart:e,initial:r.initial,numSteps:s,currentStep:Math.min(n-r.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=_P.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let s=i.length-1,o=!1,l;for(;s>=0;--s)l=i[s],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(i[s]=i[i.length-1],i.pop());o&&(a.draw(),this._notify(a,n,e,"progress")),i.length||(n.running=!1,this._notify(a,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xr=new EV;const NC="transparent",CV={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=PC(t||NC),a=n.valid&&PC(e||NC);return a&&a.valid?a.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class kV{constructor(e,r,n,a){const i=r[n];a=ji([e.to,a,i,e.from]);const s=ji([e.from,i,a]);this._active=!0,this._fn=e.fn||CV[e.type||typeof s],this._easing=os[e.easing]||os.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=s,this._to=a,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ji([e.to,r,a,e.from]),this._from=ji([e.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,a=this._prop,i=this._from,s=this._loop,o=this._to;let l;if(this._active=i!==o&&(s||r<n),!this._active){this._target[a]=o,this._notify(!0);return}if(r<0){this._target[a]=i;return}l=r/n%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[a]=this._fn(i,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}}class NP{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Fe(e))return;const r=Object.keys(at.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const i=e[a];if(!Fe(i))return;const s={};for(const o of r)s[o]=i[o];(rt(i.properties)&&i.properties||[a]).forEach(o=>{(o===a||!n.has(o))&&n.set(o,s)})})}_animateOptions(e,r){const n=r.options,a=AV(e,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&TV(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){const n=this._properties,a=[],i=e.$animations||(e.$animations={}),s=Object.keys(r),o=Date.now();let l;for(l=s.length-1;l>=0;--l){const u=s[l];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,r));continue}const c=r[u];let f=i[u];const d=n.get(u);if(f)if(d&&f.active()){f.update(d,c,o);continue}else f.cancel();if(!d||!d.duration){e[u]=c;continue}i[u]=f=new kV(d,e,u,c),a.push(f)}return a}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return Xr.add(this._chart,n),!0}}function TV(t,e){const r=[],n=Object.keys(e);for(let a=0;a<n.length;a++){const i=t[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function AV(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function zC(t,e){const r=t&&t.options||{},n=r.reverse,a=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:a,end:n?a:i}}function PV(t,e,r){if(r===!1)return!1;const n=zC(t,r),a=zC(e,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function RV(t){let e,r,n,a;return Fe(t)?(e=t.top,r=t.right,n=t.bottom,a=t.left):e=r=n=a=t,{top:e,right:r,bottom:n,left:a,disabled:t===!1}}function zP(t,e){const r=[],n=t._getSortedDatasetMetas(e);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function $C(t,e,r,n={}){const a=t.keys,i=n.mode==="single";let s,o,l,u;if(e===null)return;let c=!1;for(s=0,o=a.length;s<o;++s){if(l=+a[s],l===r){if(c=!0,n.all)continue;break}u=t.values[l],lt(u)&&(i||e===0||qr(e)===qr(u))&&(e+=u)}return!c&&!n.all?0:e}function MV(t,e){const{iScale:r,vScale:n}=e,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",s=Object.keys(t),o=new Array(s.length);let l,u,c;for(l=0,u=s.length;l<u;++l)c=s[l],o[l]={[a]:c,[i]:t[c]};return o}function wp(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function DV(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function LV(t){const{min:e,max:r,minDefined:n,maxDefined:a}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function OV(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function VC(t,e,r,n){for(const a of e.getMatchingVisibleMetas(n).reverse()){const i=t[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function HC(t,e){const{chart:r,_cachedMeta:n}=t,a=r._stacks||(r._stacks={}),{iScale:i,vScale:s,index:o}=n,l=i.axis,u=s.axis,c=DV(i,s,n),f=e.length;let d;for(let h=0;h<f;++h){const v=e[h],{[l]:p,[u]:g}=v,y=v._stacks||(v._stacks={});d=y[u]=OV(a,c,p),d[o]=g,d._top=VC(d,s,!0,n.type),d._bottom=VC(d,s,!1,n.type);const m=d._visualValues||(d._visualValues={});m[o]=g}}function Sp(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function IV(t,e){return Yn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function BV(t,e,r){return Yn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Oi(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const a of e){const i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const Ep=t=>t==="reset"||t==="none",WC=(t,e)=>e?t:Object.assign({},t),FV=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:zP(r,!0),values:null};class Er{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=wp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Oi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(f,d,h,v)=>f==="x"?d:f==="r"?v:h,i=r.xAxisID=Te(n.xAxisID,Sp(e,"x")),s=r.yAxisID=Te(n.yAxisID,Sp(e,"y")),o=r.rAxisID=Te(n.rAxisID,Sp(e,"r")),l=r.indexAxis,u=r.iAxisID=a(l,i,s,o),c=r.vAxisID=a(l,s,i,o);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(s),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&kC(this._data,this),e._stacked&&Oi(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Fe(r)){const a=this._cachedMeta;this._data=MV(r,a)}else if(n!==r){if(n){kC(n,this);const a=this._cachedMeta;Oi(a),a._parsed=[]}r&&Object.isExtensible(r)&&x$(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=r._stacked;r._stacked=wp(r.vScale,r),r.stack!==n.stack&&(a=!0,Oi(r),r.stack=n.stack),this._resyncElements(e),(a||i!==r._stacked)&&(HC(this,r._parsed),r._stacked=wp(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:s}=n,o=i.axis;let l=e===0&&r===a.length?!0:n._sorted,u=e>0&&n._parsed[e-1],c,f,d;if(this._parsing===!1)n._parsed=a,n._sorted=!0,d=a;else{rt(a[e])?d=this.parseArrayData(n,a,e,r):Fe(a[e])?d=this.parseObjectData(n,a,e,r):d=this.parsePrimitiveData(n,a,e,r);const h=()=>f[o]===null||u&&f[o]<u[o];for(c=0;c<r;++c)n._parsed[c+e]=f=d[c],l&&(h()&&(l=!1),u=f);n._sorted=l}s&&HC(this,d)}parsePrimitiveData(e,r,n,a){const{iScale:i,vScale:s}=e,o=i.axis,l=s.axis,u=i.getLabels(),c=i===s,f=new Array(a);let d,h,v;for(d=0,h=a;d<h;++d)v=d+n,f[d]={[o]:c||i.parse(u[v],v),[l]:s.parse(r[v],v)};return f}parseArrayData(e,r,n,a){const{xScale:i,yScale:s}=e,o=new Array(a);let l,u,c,f;for(l=0,u=a;l<u;++l)c=l+n,f=r[c],o[l]={x:i.parse(f[0],c),y:s.parse(f[1],c)};return o}parseObjectData(e,r,n,a){const{xScale:i,yScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=new Array(a);let c,f,d,h;for(c=0,f=a;c<f;++c)d=c+n,h=r[d],u[c]={x:i.parse($n(h,o),d),y:s.parse($n(h,l),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const a=this.chart,i=this._cachedMeta,s=r[e.axis],o={keys:zP(a,!0),values:r._stacks[e.axis]._visualValues};return $C(o,s,i.index,{mode:n})}updateRangeFromParsed(e,r,n,a){const i=n[r.axis];let s=i===null?NaN:i;const o=a&&n._stacks[r.axis];a&&o&&(a.values=o,s=$C(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,r){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&e===n.iScale,s=a.length,o=this._getOtherScale(e),l=FV(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=LV(o);let d,h;function v(){h=a[d];const p=h[o.axis];return!lt(h[e.axis])||c>p||f<p}for(d=0;d<s&&!(!v()&&(this.updateRangeFromParsed(u,e,h,l),i));++d);if(i){for(d=s-1;d>=0;--d)if(!v()){this.updateRangeFromParsed(u,e,h,l);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let a,i,s;for(a=0,i=r.length;a<i;++a)s=r[a][e.axis],lt(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=RV(Te(this.options.clip,PV(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||a.length-o,u=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,o,l),c=o;c<o+l;++c){const f=a[c];f.hidden||(f.active&&u?s.push(f):f.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const a=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];i=s.$context||(s.$context=BV(this.getContext(),e,s)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=IV(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const a=r==="active",i=this._cachedDataOpts,s=e+"-"+r,o=i[s],l=this.enableOptionSharing&&Es(n);if(o)return WC(o,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),c),h=Object.keys(at.elements[e]),v=()=>this.getContext(n,a,r),p=u.resolveNamedOptions(d,h,v,f);return p.$shared&&(p.$shared=l,i[s]=Object.freeze(WC(p,l))),p}_resolveAnimations(e,r,n){const a=this.chart,i=this._cachedDataOpts,s=`animation-${r}`,o=i[s];if(o)return o;let l;if(a.options.animation!==!1){const c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,r),d=c.getOptionScopes(this.getDataset(),f);l=c.createResolver(d,this.getContext(e,n,r))}const u=new NP(a,l&&l.animations);return l&&l._cacheable&&(i[s]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Ep(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),a=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:s}}updateElement(e,r,n,a){Ep(a)?Object.assign(e,n):this._resolveAnimations(r,a).update(e,n)}updateSharedOptions(e,r,n){e&&!Ep(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,a){e.active=a;const i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[o,l,u]of this._syncList)this[o](l,u);this._syncList=[];const a=n.length,i=r.length,s=Math.min(i,a);s&&this.parse(0,s),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,r,n=!0){const a=this._cachedMeta,i=a.data,s=e+r;let o;const l=u=>{for(u.length+=r,o=u.length-1;o>=s;o--)u[o]=u[o-r]};for(l(i),o=e;o<s;++o)i[o]=new this.dataElementType;this._parsing&&l(a._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,a){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(e,r);n._stacked&&Oi(n,a)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,a]=e;this[r](n,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}se(Er,"defaults",{}),se(Er,"datasetElementType",null),se(Er,"dataElementType",null);function qV(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let a=0,i=r.length;a<i;a++)n=n.concat(r[a].controller.getAllParsedValues(t));t._cache.$bar=bP(n.sort((a,i)=>a-i))}return t._cache.$bar}function NV(t){const e=t.iScale,r=qV(e,t.type);let n=e._length,a,i,s,o;const l=()=>{s===32767||s===-32768||(Es(o)&&(n=Math.min(n,Math.abs(s-o)||n)),o=s)};for(a=0,i=r.length;a<i;++a)s=e.getPixelForValue(r[a]),l();for(o=void 0,a=0,i=e.ticks.length;a<i;++a)s=e.getPixelForTick(a),l();return n}function zV(t,e,r,n){const a=r.barThickness;let i,s;return Ie(a)?(i=e.min*r.categoryPercentage,s=r.barPercentage):(i=a*n,s=1),{chunk:i/n,ratio:s,start:e.pixels[t]-i/2}}function $V(t,e,r,n){const a=e.pixels,i=a[t];let s=t>0?a[t-1]:null,o=t<a.length-1?a[t+1]:null;const l=r.categoryPercentage;s===null&&(s=i-(o===null?e.end-e.start:o-i)),o===null&&(o=i+i-s);const u=i-(i-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/n,ratio:r.barPercentage,start:u}}function VV(t,e,r,n){const a=r.parse(t[0],n),i=r.parse(t[1],n),s=Math.min(a,i),o=Math.max(a,i);let l=s,u=o;Math.abs(s)>Math.abs(o)&&(l=o,u=s),e[r.axis]=u,e._custom={barStart:l,barEnd:u,start:a,end:i,min:s,max:o}}function $P(t,e,r,n){return rt(t)?VV(t,e,r,n):e[r.axis]=r.parse(t,n),e}function GC(t,e,r,n){const a=t.iScale,i=t.vScale,s=a.getLabels(),o=a===i,l=[];let u,c,f,d;for(u=r,c=r+n;u<c;++u)d=e[u],f={},f[a.axis]=o||a.parse(s[u],u),l.push($P(d,f,i,u));return l}function Cp(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function HV(t,e,r){return t!==0?qr(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function WV(t){let e,r,n,a,i;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(a="end",i="start"):(a="start",i="end"),{start:r,end:n,reverse:e,top:a,bottom:i}}function GV(t,e,r,n){let a=e.borderSkipped;const i={};if(!a){t.borderSkipped=i;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:o,reverse:l,top:u,bottom:c}=WV(t);a==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?a=u:(r._bottom||0)===n?a=c:(i[UC(c,s,o,l)]=!0,a=u)),i[UC(a,s,o,l)]=!0,t.borderSkipped=i}function UC(t,e,r,n){return n?(t=UV(t,e,r),t=jC(t,r,e)):t=jC(t,e,r),t}function UV(t,e,r){return t===e?r:t===r?e:t}function jC(t,e,r){return t==="start"?e:t==="end"?r:t}function jV(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class Go extends Er{parsePrimitiveData(e,r,n,a){return GC(e,r,n,a)}parseArrayData(e,r,n,a){return GC(e,r,n,a)}parseObjectData(e,r,n,a){const{iScale:i,vScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=i.axis==="x"?o:l,c=s.axis==="x"?o:l,f=[];let d,h,v,p;for(d=n,h=n+a;d<h;++d)p=r[d],v={},v[i.axis]=i.parse($n(p,u),d),f.push($P($n(p,c),v,s,d));return f}updateRangeFromParsed(e,r,n,a){super.updateRangeFromParsed(e,r,n,a);const i=n._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:a}=r,i=this.getParsed(e),s=i._custom,o=Cp(s)?"["+s.start+", "+s.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,a){const i=a==="reset",{index:s,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),u=o.isHorizontal(),c=this._getRuler(),{sharedOptions:f,includeOptions:d}=this._getSharedOptions(r,a);for(let h=r;h<r+n;h++){const v=this.getParsed(h),p=i||Ie(v[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,c),y=(v._stacks||{})[o.axis],m={horizontal:u,base:p.base,enableBorderRadius:!y||Cp(v._custom)||s===y._top||s===y._bottom,x:u?p.head:g.center,y:u?g.center:p.head,height:u?g.size:Math.abs(p.size),width:u?Math.abs(p.size):g.size};d&&(m.options=f||this.resolveDataElementOptions(h,e[h].active?"active":a));const b=m.options||e[h].options;GV(m,b,y,s),jV(m,b,c.ratio),this.updateElement(e[h],h,m,a)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),i=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(r),l=o&&o[n.axis],u=c=>{const f=c._parsed.find(h=>h[n.axis]===l),d=f&&f[c.vScale.axis];if(Ie(d)||isNaN(d))return!0};for(const c of a)if(!(r!==void 0&&u(c))&&((i===!1||s.indexOf(c.stack)===-1||i===void 0&&c.stack===void 0)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Te(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const a=this._getStacks(e,n),i=r!==void 0?a.indexOf(r):-1;return i===-1?a.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,a=[];let i,s;for(i=0,s=r.data.length;i<s;++i)a.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||NV(r),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:a},options:{base:i,minBarLength:s}}=this,o=i||0,l=this.getParsed(e),u=l._custom,c=Cp(u);let f=l[r.axis],d=0,h=n?this.applyStack(r,l,n):f,v,p;h!==f&&(d=h-f,h=f),c&&(f=u.barStart,h=u.barEnd-u.barStart,f!==0&&qr(f)!==qr(u.barEnd)&&(d=0),d+=f);const g=!Ie(i)&&!c?i:d;let y=r.getPixelForValue(g);if(this.chart.getDataVisibility(e)?v=r.getPixelForValue(d+h):v=y,p=v-y,Math.abs(p)<s){p=HV(p,r,o)*s,f===o&&(y-=p/2);const m=r.getPixelForDecimal(0),b=r.getPixelForDecimal(1),_=Math.min(m,b),x=Math.max(m,b);y=Math.max(Math.min(y,x),_),v=y+p,n&&!c&&(l._stacks[r.axis]._visualValues[a]=r.getValueForPixel(v)-r.getValueForPixel(y))}if(y===r.getPixelForValue(o)){const m=qr(p)*r.getLineWidthForValue(o)/2;y+=m,p-=m}return{size:p,base:y,head:v,center:v+p/2}}_calculateBarIndexPixels(e,r){const n=r.scale,a=this.options,i=a.skipNull,s=Te(a.maxBarThickness,1/0);let o,l;const u=this._getAxisCount();if(r.grouped){const c=i?this._getStackCount(e):r.stackCount,f=a.barThickness==="flex"?$V(e,r,a,c*u):zV(e,r,a,c*u),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(Te(d,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+h;o=f.start+f.chunk*v+f.chunk/2,l=Math.min(s,f.chunk*f.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(s,r.min*r.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,a=n.length;let i=0;for(;i<a;++i)this.getParsed(i)[r.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}se(Go,"id","bar"),se(Go,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),se(Go,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Uo extends Er{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,a){const i=super.parsePrimitiveData(e,r,n,a);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,r,n,a){const i=super.parseArrayData(e,r,n,a);for(let s=0;s<i.length;s++){const o=r[n+s];i[s]._custom=Te(o[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,r,n,a){const i=super.parseObjectData(e,r,n,a);for(let s=0;s<i.length;s++){const o=r[n+s];i[s]._custom=Te(o&&o.r&&+o.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:a,yScale:i}=r,s=this.getParsed(e),o=a.getLabelForValue(s.x),l=i.getLabelForValue(s.y),u=s._custom;return{label:n[e]||"",value:"("+o+", "+l+(u?", "+u:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,a){const i=a==="reset",{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,a),c=s.axis,f=o.axis;for(let d=r;d<r+n;d++){const h=e[d],v=!i&&this.getParsed(d),p={},g=p[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(v[c]),y=p[f]=i?o.getBasePixel():o.getPixelForValue(v[f]);p.skip=isNaN(g)||isNaN(y),u&&(p.options=l||this.resolveDataElementOptions(d,h.active?"active":a),i&&(p.options.radius=0)),this.updateElement(h,d,p,a)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let a=super.resolveDataElementOptions(e,r);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const i=a.radius;return r!=="active"&&(a.radius=0),a.radius+=Te(n&&n._custom,i),a}}se(Uo,"id","bubble"),se(Uo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),se(Uo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function KV(t,e,r){let n=1,a=1,i=0,s=0;if(e<tt){const o=t,l=o+e,u=Math.cos(o),c=Math.sin(o),f=Math.cos(l),d=Math.sin(l),h=(b,_,x)=>Cs(b,o,l,!0)?1:Math.max(_,_*r,x,x*r),v=(b,_,x)=>Cs(b,o,l,!0)?-1:Math.min(_,_*r,x,x*r),p=h(0,u,f),g=h(ft,c,d),y=v(He,u,f),m=v(He+ft,c,d);n=(p-y)/2,a=(g-m)/2,i=-(p+y)/2,s=-(g+m)/2}return{ratioX:n,ratioY:a,offsetX:i,offsetY:s}}class da extends Er{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=n;else{let i=l=>+n[l];if(Fe(n[e])){const{key:l="value"}=this._parsing;i=u=>+$n(n[u],l)}let s,o;for(s=e,o=e+r;s<o;++s)a._parsed[s]=i(s)}}_getRotation(){return wr(this.options.rotation-90)}_getCircumference(){return wr(this.options.circumference)}_getRotationExtents(){let e=tt,r=-tt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const a=this.chart.getDatasetMeta(n).controller,i=a._getRotation(),s=a._getCircumference();e=Math.min(e,i),r=Math.max(r,i+s)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,a=this._cachedMeta,i=a.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),l=Math.min(s$(this.options.cutout,o),1),u=this._getRingWeight(this.index),{circumference:c,rotation:f}=this._getRotationExtents(),{ratioX:d,ratioY:h,offsetX:v,offsetY:p}=KV(f,c,l),g=(n.width-s)/d,y=(n.height-s)/h,m=Math.max(Math.min(g,y)/2,0),b=vP(this.options.radius,m),_=Math.max(b*l,0),x=(b-_)/this._getVisibleDatasetWeightTotal();this.offsetX=v*b,this.offsetY=p*b,a.total=this.calculateTotal(),this.outerRadius=b-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const n=this.options,a=this._cachedMeta,i=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*i/tt)}updateElements(e,r,n,a){const i=a==="reset",s=this.chart,o=s.chartArea,u=s.options.animation,c=(o.left+o.right)/2,f=(o.top+o.bottom)/2,d=i&&u.animateScale,h=d?0:this.innerRadius,v=d?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(r,a);let y=this._getRotation(),m;for(m=0;m<r;++m)y+=this._circumference(m,i);for(m=r;m<r+n;++m){const b=this._circumference(m,i),_=e[m],x={x:c+this.offsetX,y:f+this.offsetY,startAngle:y,endAngle:y+b,circumference:b,outerRadius:v,innerRadius:h};g&&(x.options=p||this.resolveDataElementOptions(m,_.active?"active":a)),y+=b,this.updateElement(_,m,x,a)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,a;for(a=0;a<r.length;a++){const i=e._parsed[a];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(a)&&!r[a].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?tt*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,a=n.data.labels||[],i=Ks(r._parsed[e],n.options.locale);return{label:a[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const n=this.chart;let a,i,s,o,l;if(!e){for(a=0,i=n.data.datasets.length;a<i;++a)if(n.isDatasetVisible(a)){s=n.getDatasetMeta(a),e=s.data,o=s.controller;break}}if(!e)return 0;for(a=0,i=e.length;a<i;++a)l=o.resolveDataElementOptions(a),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,a=e.length;n<a;++n){const i=this.resolveDataElementOptions(n);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(Te(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}se(da,"id","doughnut"),se(da,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),se(da,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),se(da,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data,{labels:{pointStyle:n,textAlign:a,color:i,useBorderRadius:s,borderRadius:o}}=e.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((l,u)=>{const f=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:f.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(u),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:a,pointStyle:n,borderRadius:s&&(o||f.borderRadius),index:u}}):[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class jo extends Er{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=r,s=this.chart._animationsDisabled;let{start:o,count:l}=wP(r,a,s);this._drawStart=o,this._drawCount=l,SP(r)&&(o=0,l=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:u},e),this.updateElements(a,o,l,e)}updateElements(e,r,n,a){const i=a==="reset",{iScale:s,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(r,a),d=s.axis,h=o.axis,{spanGaps:v,segment:p}=this.options,g=si(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||a==="none",m=r+n,b=e.length;let _=r>0&&this.getParsed(r-1);for(let x=0;x<b;++x){const S=e[x],w=y?S:{};if(x<r||x>=m){w.skip=!0;continue}const E=this.getParsed(x),C=Ie(E[h]),T=w[d]=s.getPixelForValue(E[d],x),A=w[h]=i||C?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,E,l):E[h],x);w.skip=isNaN(T)||isNaN(A)||C,w.stop=x>0&&Math.abs(E[d]-_[d])>g,p&&(w.parsed=E,w.raw=u.data[x]),f&&(w.options=c||this.resolveDataElementOptions(x,S.active?"active":a)),y||this.updateElement(S,x,w,a),_=E}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,a=e.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),s=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}se(jo,"id","line"),se(jo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),se(jo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class us extends Er{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,a=n.data.labels||[],i=Ks(r._parsed[e].r,n.options.locale);return{label:a[e]||"",value:i}}parseObjectData(e,r,n,a){return MP.bind(this)(e,r,n,a)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,a)=>{const i=this.getParsed(a).r;!isNaN(i)&&this.chart.getDataVisibility(a)&&(i<r.min&&(r.min=i),i>r.max&&(r.max=i))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,a=Math.min(r.right-r.left,r.bottom-r.top),i=Math.max(a/2,0),s=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),o=(i-s)/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,r,n,a){const i=a==="reset",s=this.chart,l=s.options.animation,u=this._cachedMeta.rScale,c=u.xCenter,f=u.yCenter,d=u.getIndexAngle(0)-.5*He;let h=d,v;const p=360/this.countVisibleElements();for(v=0;v<r;++v)h+=this._computeAngle(v,a,p);for(v=r;v<r+n;v++){const g=e[v];let y=h,m=h+this._computeAngle(v,a,p),b=s.getDataVisibility(v)?u.getDistanceFromCenterForValue(this.getParsed(v).r):0;h=m,i&&(l.animateScale&&(b=0),l.animateRotate&&(y=m=d));const _={x:c,y:f,innerRadius:0,outerRadius:b,startAngle:y,endAngle:m,options:this.resolveDataElementOptions(v,g.active?"active":a)};this.updateElement(g,v,_,a)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?wr(this.resolveDataElementOptions(e,r).angle||n):0}}se(us,"id","polarArea"),se(us,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),se(us,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:a}}=e.legend.options;return r.labels.map((i,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:a,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class vm extends da{}se(vm,"id","pie"),se(vm,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ko extends Er{getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,a){return MP.bind(this)(e,r,n,a)}update(e){const r=this._cachedMeta,n=r.dataset,a=r.data||[],i=r.iScale.getLabels();if(n.points=a,e!=="resize"){const s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===a.length,options:s};this.updateElement(n,void 0,o,e)}this.updateElements(a,0,a.length,e)}updateElements(e,r,n,a){const i=this._cachedMeta.rScale,s=a==="reset";for(let o=r;o<r+n;o++){const l=e[o],u=this.resolveDataElementOptions(o,l.active?"active":a),c=i.getPointPositionForValue(o,this.getParsed(o).r),f=s?i.xCenter:c.x,d=s?i.yCenter:c.y,h={x:f,y:d,angle:c.angle,skip:isNaN(f)||isNaN(d),options:u};this.updateElement(l,o,h,a)}}}se(Ko,"id","radar"),se(Ko,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),se(Ko,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Yo extends Er{getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:a,yScale:i}=r,s=this.getParsed(e),o=a.getLabelForValue(s.x),l=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+l+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,a=this.chart._animationsDisabled;let{start:i,count:s}=wP(r,n,a);if(this._drawStart=i,this._drawCount=s,SP(r)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=r;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=n;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(o,void 0,{animated:!a,options:u},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,a){const i=a==="reset",{iScale:s,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(r,a),f=this.getSharedOptions(c),d=this.includeOptions(a,f),h=s.axis,v=o.axis,{spanGaps:p,segment:g}=this.options,y=si(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||a==="none";let b=r>0&&this.getParsed(r-1);for(let _=r;_<r+n;++_){const x=e[_],S=this.getParsed(_),w=m?x:{},E=Ie(S[v]),C=w[h]=s.getPixelForValue(S[h],_),T=w[v]=i||E?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,S,l):S[v],_);w.skip=isNaN(C)||isNaN(T)||E,w.stop=_>0&&Math.abs(S[h]-b[h])>y,g&&(w.parsed=S,w.raw=u.data[_]),d&&(w.options=f||this.resolveDataElementOptions(_,x.active?"active":a)),m||this.updateElement(x,_,w,a),b=S}this.updateSharedOptions(f,a,c)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let o=0;for(let l=r.length-1;l>=0;--l)o=Math.max(o,r[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const n=e.dataset,a=n.options&&n.options.borderWidth||0;if(!r.length)return a;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(a,i,s)/2}}se(Yo,"id","scatter"),se(Yo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),se(Yo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var YV=Object.freeze({__proto__:null,BarController:Go,BubbleController:Uo,DoughnutController:da,LineController:jo,PieController:vm,PolarAreaController:us,RadarController:Ko,ScatterController:Yo});function ta(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zy{constructor(e){se(this,"options");this.options=e||{}}static override(e){Object.assign(zy.prototype,e)}init(){}formats(){return ta()}parse(){return ta()}format(){return ta()}add(){return ta()}diff(){return ta()}startOf(){return ta()}endOf(){return ta()}}var XV={_date:zy};function ZV(t,e,r,n){const{controller:a,data:i,_sorted:s}=t,o=a._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&s&&i.length){const u=o._reversePixels?b$:sn;if(n){if(a._sharedOptions){const c=i[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const d=u(i,e,r-f),h=u(i,e,r+f);return{lo:d.lo,hi:h.hi}}}}else{const c=u(i,e,r);if(l){const{vScale:f}=a._cachedMeta,{_parsed:d}=t,h=d.slice(0,c.lo+1).reverse().findIndex(p=>!Ie(p[f.axis]));c.lo-=Math.max(0,h);const v=d.slice(c.hi).findIndex(p=>!Ie(p[f.axis]));c.hi+=Math.max(0,v)}return c}}return{lo:0,hi:i.length-1}}function mu(t,e,r,n,a){const i=t.getSortedVisibleDatasetMetas(),s=r[e];for(let o=0,l=i.length;o<l;++o){const{index:u,data:c}=i[o],{lo:f,hi:d}=ZV(i[o],e,s,a);for(let h=f;h<=d;++h){const v=c[h];v.skip||n(v,u,h)}}}function QV(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,a){const i=e?Math.abs(n.x-a.x):0,s=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}function kp(t,e,r,n,a){const i=[];return!a&&!t.isPointInArea(e)||mu(t,r,e,function(o,l,u){!a&&!on(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&i.push({element:o,datasetIndex:l,index:u})},!0),i}function JV(t,e,r,n){let a=[];function i(s,o,l){const{startAngle:u,endAngle:c}=s.getProps(["startAngle","endAngle"],n),{angle:f}=mP(s,{x:e.x,y:e.y});Cs(f,u,c)&&a.push({element:s,datasetIndex:o,index:l})}return mu(t,r,e,i),a}function eH(t,e,r,n,a,i){let s=[];const o=QV(r);let l=Number.POSITIVE_INFINITY;function u(c,f,d){const h=c.inRange(e.x,e.y,a);if(n&&!h)return;const v=c.getCenterPoint(a);if(!(!!i||t.isPointInArea(v))&&!h)return;const g=o(e,v);g<l?(s=[{element:c,datasetIndex:f,index:d}],l=g):g===l&&s.push({element:c,datasetIndex:f,index:d})}return mu(t,r,e,u),s}function Tp(t,e,r,n,a,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?JV(t,e,r,a):eH(t,e,r,n,a,i)}function KC(t,e,r,n,a){const i=[],s=r==="x"?"inXRange":"inYRange";let o=!1;return mu(t,r,e,(l,u,c)=>{l[s]&&l[s](e[r],a)&&(i.push({element:l,datasetIndex:u,index:c}),o=o||l.inRange(e.x,e.y,a))}),n&&!o?[]:i}var tH={modes:{index(t,e,r,n){const a=ia(e,t),i=r.axis||"x",s=r.includeInvisible||!1,o=r.intersect?kp(t,a,i,n,s):Tp(t,a,i,!1,n,s),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const c=o[0].index,f=u.data[c];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:c})}),l):[]},dataset(t,e,r,n){const a=ia(e,t),i=r.axis||"xy",s=r.includeInvisible||!1;let o=r.intersect?kp(t,a,i,n,s):Tp(t,a,i,!1,n,s);if(o.length>0){const l=o[0].datasetIndex,u=t.getDatasetMeta(l).data;o=[];for(let c=0;c<u.length;++c)o.push({element:u[c],datasetIndex:l,index:c})}return o},point(t,e,r,n){const a=ia(e,t),i=r.axis||"xy",s=r.includeInvisible||!1;return kp(t,a,i,n,s)},nearest(t,e,r,n){const a=ia(e,t),i=r.axis||"xy",s=r.includeInvisible||!1;return Tp(t,a,i,r.intersect,n,s)},x(t,e,r,n){const a=ia(e,t);return KC(t,a,"x",r.intersect,n)},y(t,e,r,n){const a=ia(e,t);return KC(t,a,"y",r.intersect,n)}}};const VP=["left","top","right","bottom"];function Ii(t,e){return t.filter(r=>r.pos===e)}function YC(t,e){return t.filter(r=>VP.indexOf(r.pos)===-1&&r.box.axis===e)}function Bi(t,e){return t.sort((r,n)=>{const a=e?n:r,i=e?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function rH(t){const e=[];let r,n,a,i,s,o;for(r=0,n=(t||[]).length;r<n;++r)a=t[r],{position:i,options:{stack:s,stackWeight:o=1}}=a,e.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:s&&i+s,stackWeight:o});return e}function nH(t){const e={};for(const r of t){const{stack:n,pos:a,stackWeight:i}=r;if(!n||!VP.includes(a))continue;const s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return e}function aH(t,e){const r=nH(t),{vBoxMaxWidth:n,hBoxMaxHeight:a}=e;let i,s,o;for(i=0,s=t.length;i<s;++i){o=t[i];const{fullSize:l}=o.box,u=r[o.stack],c=u&&o.stackWeight/u.weight;o.horizontal?(o.width=c?c*n:l&&e.availableWidth,o.height=a):(o.width=n,o.height=c?c*a:l&&e.availableHeight)}return r}function iH(t){const e=rH(t),r=Bi(e.filter(u=>u.box.fullSize),!0),n=Bi(Ii(e,"left"),!0),a=Bi(Ii(e,"right")),i=Bi(Ii(e,"top"),!0),s=Bi(Ii(e,"bottom")),o=YC(e,"x"),l=YC(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(l).concat(s).concat(o),chartArea:Ii(e,"chartArea"),vertical:n.concat(a).concat(l),horizontal:i.concat(s).concat(o)}}function XC(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function HP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function sH(t,e,r,n){const{pos:a,box:i}=r,s=t.maxPadding;if(!Fe(a)){r.size&&(t[a]-=r.size);const f=n[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,t[a]+=r.size}i.getPadding&&HP(s,i.getPadding());const o=Math.max(0,e.outerWidth-XC(s,t,"left","right")),l=Math.max(0,e.outerHeight-XC(s,t,"top","bottom")),u=o!==t.w,c=l!==t.h;return t.w=o,t.h=l,r.horizontal?{same:u,other:c}:{same:c,other:u}}function oH(t){const e=t.maxPadding;function r(n){const a=Math.max(e[n]-t[n],0);return t[n]+=a,a}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function lH(t,e){const r=e.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(s=>{i[s]=Math.max(e[s],r[s])}),i}return n(t?["left","right"]:["top","bottom"])}function Ki(t,e,r,n){const a=[];let i,s,o,l,u,c;for(i=0,s=t.length,u=0;i<s;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,lH(o.horizontal,e));const{same:f,other:d}=sH(e,r,o,n);u|=f&&a.length,c=c||d,l.fullSize||a.push(o)}return u&&Ki(a,e,r,n)||c}function xo(t,e,r,n,a){t.top=r,t.left=e,t.right=e+n,t.bottom=r+a,t.width=n,t.height=a}function ZC(t,e,r,n){const a=r.padding;let{x:i,y:s}=e;for(const o of t){const l=o.box,u=n[o.stack]||{placed:0,weight:1},c=o.stackWeight/u.weight||1;if(o.horizontal){const f=e.w*c,d=u.size||l.height;Es(u.start)&&(s=u.start),l.fullSize?xo(l,a.left,s,r.outerWidth-a.right-a.left,d):xo(l,e.left+u.placed,s,f,d),u.start=s,u.placed+=f,s=l.bottom}else{const f=e.h*c,d=u.size||l.width;Es(u.start)&&(i=u.start),l.fullSize?xo(l,i,a.top,d,r.outerHeight-a.bottom-a.top):xo(l,i,e.top+u.placed,d,f),u.start=i,u.placed+=f,i=l.right}}e.x=i,e.y=s}var Ht={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const a=jt(t.options.layout.padding),i=Math.max(e-a.width,0),s=Math.max(r-a.height,0),o=iH(t.boxes),l=o.vertical,u=o.horizontal;je(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const c=l.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:r,padding:a,availableWidth:i,availableHeight:s,vBoxMaxWidth:i/2/c,hBoxMaxHeight:s/2}),d=Object.assign({},a);HP(d,jt(n));const h=Object.assign({maxPadding:d,w:i,h:s,x:a.left,y:a.top},a),v=aH(l.concat(u),f);Ki(o.fullSize,h,f,v),Ki(l,h,f,v),Ki(u,h,f,v)&&Ki(l,h,f,v),oH(h),ZC(o.leftAndTop,h,f,v),h.x+=h.w,h.y+=h.h,ZC(o.rightAndBottom,h,f,v),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},je(o.chartArea,p=>{const g=p.box;Object.assign(g,t.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class WP{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,a){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(e){return!0}updateConfig(e){}}class uH extends WP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Xo="$chartjs",cH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},QC=t=>t===null||t==="";function fH(t,e){const r=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[Xo]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",QC(a)){const i=IC(t,"width");i!==void 0&&(t.width=i)}if(QC(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=IC(t,"height");i!==void 0&&(t.height=i)}return t}const GP=dV?{passive:!0}:!1;function dH(t,e,r){t&&t.addEventListener(e,r,GP)}function hH(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,GP)}function vH(t,e){const r=cH[t.type]||t.type,{x:n,y:a}=ia(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:a!==void 0?a:null}}function Tl(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function gH(t,e,r){const n=t.canvas,a=new MutationObserver(i=>{let s=!1;for(const o of i)s=s||Tl(o.addedNodes,n),s=s&&!Tl(o.removedNodes,n);s&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function pH(t,e,r){const n=t.canvas,a=new MutationObserver(i=>{let s=!1;for(const o of i)s=s||Tl(o.removedNodes,n),s=s&&!Tl(o.addedNodes,n);s&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Ts=new Map;let JC=0;function UP(){const t=window.devicePixelRatio;t!==JC&&(JC=t,Ts.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function mH(t,e){Ts.size||window.addEventListener("resize",UP),Ts.set(t,e)}function yH(t){Ts.delete(t),Ts.size||window.removeEventListener("resize",UP)}function bH(t,e,r){const n=t.canvas,a=n&&Ny(n);if(!a)return;const i=xP((o,l)=>{const u=a.clientWidth;r(o,l),u<a.clientWidth&&r()},window),s=new ResizeObserver(o=>{const l=o[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||i(u,c)});return s.observe(a),mH(t,i),s}function Ap(t,e,r){r&&r.disconnect(),e==="resize"&&yH(t)}function _H(t,e,r){const n=t.canvas,a=xP(i=>{t.ctx!==null&&r(vH(i,t))},t);return dH(n,e,a),a}class xH extends WP{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(fH(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[Xo])return!1;const n=r[Xo].initial;["height","width"].forEach(i=>{const s=n[i];Ie(s)?r.removeAttribute(i):r.setAttribute(i,s)});const a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[Xo],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const a=e.$proxies||(e.$proxies={}),s={attach:gH,detach:pH,resize:bH}[r]||_H;a[r]=s(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),a=n[r];if(!a)return;({attach:Ap,detach:Ap,resize:Ap}[r]||hH)(e,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,a){return fV(e,r,n,a)}isAttached(e){const r=e&&Ny(e);return!!(r&&r.isConnected)}}function wH(t){return!qy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uH:xH}var Ao;let gn=(Ao=class{constructor(){se(this,"x");se(this,"y");se(this,"active",!1);se(this,"options");se(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return si(this.x)&&si(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const a={};return e.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}},se(Ao,"defaults",{}),se(Ao,"defaultRoutes"),Ao);function SH(t,e){const r=t.options.ticks,n=EH(t),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?kH(e):[],s=i.length,o=i[0],l=i[s-1],u=[];if(s>a)return TH(e,u,i,s/a),u;const c=CH(i,e,a);if(s>0){let f,d;const h=s>1?Math.round((l-o)/(s-1)):null;for(wo(e,u,c,Ie(h)?0:o-h,o),f=0,d=s-1;f<d;f++)wo(e,u,c,i[f],i[f+1]);return wo(e,u,c,l,Ie(h)?e.length:l+h),u}return wo(e,u,c),u}function EH(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),a=t._maxLength/r;return Math.floor(Math.min(n,a))}function CH(t,e,r){const n=AH(t),a=e.length/r;if(!n)return Math.max(a,1);const i=v$(n);for(let s=0,o=i.length-1;s<o;s++){const l=i[s];if(l>a)return l}return Math.max(a,1)}function kH(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function TH(t,e,r,n){let a=0,i=r[0],s;for(n=Math.ceil(n),s=0;s<t.length;s++)s===i&&(e.push(t[s]),a++,i=r[a*n])}function wo(t,e,r,n,a){const i=Te(n,0),s=Math.min(Te(a,t.length),t.length);let o=0,l,u,c;for(r=Math.ceil(r),a&&(l=a-n,r=l/Math.floor(l/r)),c=i;c<0;)o++,c=Math.round(i+o*r);for(u=Math.max(i,0);u<s;u++)u===c&&(e.push(t[u]),o++,c=Math.round(i+o*r))}function AH(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const PH=t=>t==="left"?"right":t==="right"?"left":t,ek=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,tk=(t,e)=>Math.min(e||t,t);function rk(t,e){const r=[],n=t.length/e,a=t.length;let i=0;for(;i<a;i+=n)r.push(t[Math.floor(i)]);return r}function RH(t,e,r){const n=t.ticks.length,a=Math.min(e,n-1),i=t._startPixel,s=t._endPixel,o=1e-6;let l=t.getPixelForTick(a),u;if(!(r&&(n===1?u=Math.max(l-i,s-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(a-1))/2,l+=a<e?u:-u,l<i-o||l>s+o)))return l}function MH(t,e){je(t,r=>{const n=r.gc,a=n.length/2;let i;if(a>e){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function Fi(t){return t.drawTicks?t.tickLength:0}function nk(t,e){if(!t.display)return 0;const r=wt(t.font,e),n=jt(t.padding);return(rt(t.text)?t.text.length:1)*r.lineHeight+n.height}function DH(t,e){return Yn(t,{scale:e,type:"scale"})}function LH(t,e,r){return Yn(t,{tick:r,index:e,type:"tick"})}function OH(t,e,r){let n=Dy(t);return(r&&e!=="right"||!r&&e==="right")&&(n=PH(n)),n}function IH(t,e,r,n){const{top:a,left:i,bottom:s,right:o,chart:l}=t,{chartArea:u,scales:c}=l;let f=0,d,h,v;const p=s-a,g=o-i;if(t.isHorizontal()){if(h=$t(n,i,o),Fe(r)){const y=Object.keys(r)[0],m=r[y];v=c[y].getPixelForValue(m)+p-e}else r==="center"?v=(u.bottom+u.top)/2+p-e:v=ek(t,r,e);d=o-i}else{if(Fe(r)){const y=Object.keys(r)[0],m=r[y];h=c[y].getPixelForValue(m)-g+e}else r==="center"?h=(u.left+u.right)/2-g+e:h=ek(t,r,e);v=$t(n,s,a),f=r==="left"?-ft:ft}return{titleX:h,titleY:v,maxWidth:d,rotation:f}}class Ma extends gn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return e=lr(e,Number.POSITIVE_INFINITY),r=lr(r,Number.NEGATIVE_INFINITY),n=lr(n,Number.POSITIVE_INFINITY),a=lr(a,Number.NEGATIVE_INFINITY),{min:lr(e,n),max:lr(r,a),minDefined:lt(e),maxDefined:lt(r)}}getMinMax(e){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),s;if(a&&i)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)s=o[l].controller.getMinMax(this,e),a||(r=Math.min(r,s.min)),i||(n=Math.max(n,s.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:lr(r,lr(n,r)),max:lr(n,lr(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qe(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:a,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=H$(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?rk(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=SH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qe(this.options.afterUpdate,[this])}beforeSetDimensions(){Qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n],i.label=Qe(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=tk(this.ticks.length,e.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation;let s=a,o,l,u;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const c=this._getLabelSizes(),f=c.widest.width,d=c.highest.height,h=At(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),f+6>o&&(o=h/(n-(e.offset?.5:1)),l=this.maxHeight-Fi(e.grid)-r.padding-nk(e.title,this.chart.options.font),u=Math.sqrt(f*f+d*d),s=Ry(Math.min(Math.asin(At((c.highest.height+6)/o,-1,1)),Math.asin(At(l/u,-1,1))-Math.asin(At(d/u,-1,1)))),s=Math.max(a,Math.min(i,s))),this.labelRotation=s}afterCalculateLabelRotation(){Qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const l=nk(a,r.options.font);if(o?(e.width=this.maxWidth,e.height=Fi(i)+l):(e.height=this.maxHeight,e.width=Fi(i)+l),n.display&&this.ticks.length){const{first:u,last:c,widest:f,highest:d}=this._getLabelSizes(),h=n.padding*2,v=wr(this.labelRotation),p=Math.cos(v),g=Math.sin(v);if(o){const y=n.mirror?0:g*f.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+y+h)}else{const y=n.mirror?0:p*f.width+g*d.height;e.width=Math.min(this.maxWidth,e.width+y+h)}this._calculatePadding(u,c,g,p)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,a){const{ticks:{align:i,padding:s},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;l?u?(d=a*e.width,h=n*r.height):(d=n*e.height,h=a*r.width):i==="start"?h=r.width:i==="end"?d=e.width:i!=="inner"&&(d=e.width/2,h=r.width/2),this.paddingLeft=Math.max((d-c+s)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-f+s)*this.width/(this.width-f),0)}else{let c=r.height/2,f=e.height/2;i==="start"?(c=0,f=e.height):i==="end"&&(c=r.height,f=0),this.paddingTop=c+s,this.paddingBottom=f+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Ie(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=rk(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:a,_longestTextCache:i}=this,s=[],o=[],l=Math.floor(r/tk(r,n));let u=0,c=0,f,d,h,v,p,g,y,m,b,_,x;for(f=0;f<r;f+=l){if(v=e[f].label,p=this._resolveTickFontOptions(f),a.font=g=p.string,y=i[g]=i[g]||{data:{},gc:[]},m=p.lineHeight,b=_=0,!Ie(v)&&!rt(v))b=Cl(a,y.data,y.gc,b,v),_=m;else if(rt(v))for(d=0,h=v.length;d<h;++d)x=v[d],!Ie(x)&&!rt(x)&&(b=Cl(a,y.data,y.gc,b,x),_+=m);s.push(b),o.push(_),u=Math.max(b,u),c=Math.max(_,c)}MH(i,r);const S=s.indexOf(u),w=o.indexOf(c),E=C=>({width:s[C]||0,height:o[C]||0});return{first:E(0),last:E(r-1),widest:E(S),highest:E(w),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return y$(this._alignToPixels?ea(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=LH(this.getContext(),e,n))}return this.$context||(this.$context=DH(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=wr(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,o=i?i.widest.width+s:0,l=i?i.highest.height+s:0;return this.isHorizontal()?l*n>o*a?o/n:l/a:l*a<o*n?l/n:o/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,a=this.options,{grid:i,position:s,border:o}=a,l=i.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),d=Fi(i),h=[],v=o.setContext(this.getContext()),p=v.display?v.width:0,g=p/2,y=function(I){return ea(n,I,p)};let m,b,_,x,S,w,E,C,T,A,P,R;if(s==="top")m=y(this.bottom),w=this.bottom-d,C=m-g,A=y(e.top)+g,R=e.bottom;else if(s==="bottom")m=y(this.top),A=e.top,R=y(e.bottom)-g,w=m+g,C=this.top+d;else if(s==="left")m=y(this.right),S=this.right-d,E=m-g,T=y(e.left)+g,P=e.right;else if(s==="right")m=y(this.left),T=e.left,P=y(e.right)-g,S=m+g,E=this.left+d;else if(r==="x"){if(s==="center")m=y((e.top+e.bottom)/2+.5);else if(Fe(s)){const I=Object.keys(s)[0],O=s[I];m=y(this.chart.scales[I].getPixelForValue(O))}A=e.top,R=e.bottom,w=m+g,C=w+d}else if(r==="y"){if(s==="center")m=y((e.left+e.right)/2);else if(Fe(s)){const I=Object.keys(s)[0],O=s[I];m=y(this.chart.scales[I].getPixelForValue(O))}S=m-g,E=S-d,T=e.left,P=e.right}const D=Te(a.ticks.maxTicksLimit,f),L=Math.max(1,Math.ceil(f/D));for(b=0;b<f;b+=L){const I=this.getContext(b),O=i.setContext(I),B=o.setContext(I),H=O.lineWidth,G=O.color,N=B.dash||[],$=B.dashOffset,X=O.tickWidth,F=O.tickColor,q=O.tickBorderDash||[],z=O.tickBorderDashOffset;_=RH(this,b,l),_!==void 0&&(x=ea(n,_,H),u?S=E=T=P=x:w=C=A=R=x,h.push({tx1:S,ty1:w,tx2:E,ty2:C,x1:T,y1:A,x2:P,y2:R,width:H,color:G,borderDash:N,borderDashOffset:$,tickWidth:X,tickColor:F,tickBorderDash:q,tickBorderDashOffset:z}))}return this._ticksLength=f,this._borderValue=m,h}_computeLabelItems(e){const r=this.axis,n=this.options,{position:a,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:c,mirror:f}=i,d=Fi(n.grid),h=d+c,v=f?-c:h,p=-wr(this.labelRotation),g=[];let y,m,b,_,x,S,w,E,C,T,A,P,R="middle";if(a==="top")S=this.bottom-v,w=this._getXAxisLabelAlignment();else if(a==="bottom")S=this.top+v,w=this._getXAxisLabelAlignment();else if(a==="left"){const L=this._getYAxisLabelAlignment(d);w=L.textAlign,x=L.x}else if(a==="right"){const L=this._getYAxisLabelAlignment(d);w=L.textAlign,x=L.x}else if(r==="x"){if(a==="center")S=(e.top+e.bottom)/2+h;else if(Fe(a)){const L=Object.keys(a)[0],I=a[L];S=this.chart.scales[L].getPixelForValue(I)+h}w=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")x=(e.left+e.right)/2-h;else if(Fe(a)){const L=Object.keys(a)[0],I=a[L];x=this.chart.scales[L].getPixelForValue(I)}w=this._getYAxisLabelAlignment(d).textAlign}r==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const D=this._getLabelSizes();for(y=0,m=o.length;y<m;++y){b=o[y],_=b.label;const L=i.setContext(this.getContext(y));E=this.getPixelForTick(y)+i.labelOffset,C=this._resolveTickFontOptions(y),T=C.lineHeight,A=rt(_)?_.length:1;const I=A/2,O=L.color,B=L.textStrokeColor,H=L.textStrokeWidth;let G=w;s?(x=E,w==="inner"&&(y===m-1?G=this.options.reverse?"left":"right":y===0?G=this.options.reverse?"right":"left":G="center"),a==="top"?u==="near"||p!==0?P=-A*T+T/2:u==="center"?P=-D.highest.height/2-I*T+T:P=-D.highest.height+T/2:u==="near"||p!==0?P=T/2:u==="center"?P=D.highest.height/2-I*T:P=D.highest.height-A*T,f&&(P*=-1),p!==0&&!L.showLabelBackdrop&&(x+=T/2*Math.sin(p))):(S=E,P=(1-A)*T/2);let N;if(L.showLabelBackdrop){const $=jt(L.backdropPadding),X=D.heights[y],F=D.widths[y];let q=P-$.top,z=0-$.left;switch(R){case"middle":q-=X/2;break;case"bottom":q-=X;break}switch(w){case"center":z-=F/2;break;case"right":z-=F;break;case"inner":y===m-1?z-=F:y>0&&(z-=F/2);break}N={left:z,top:q,width:F+$.width,height:X+$.height,color:L.backdropColor}}g.push({label:_,font:C,textOffset:P,options:{rotation:p,color:O,strokeColor:B,strokeWidth:H,textAlign:G,textBaseline:R,translation:[x,S],backdrop:N}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-wr(this.labelRotation))return e==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,s=this._getLabelSizes(),o=e+i,l=s.widest.width;let u,c;return r==="left"?a?(c=this.right+i,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-o,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c=this.left)):r==="right"?a?(c=this.left+i,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+o,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:a,width:i,height:s}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,a,i,s),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const a=this.ticks.findIndex(i=>i.value===e);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const o=(l,u,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(i=0,s=a.length;i<s;++i){const l=a[i];r.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=a.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,f,d;this.isHorizontal()?(u=ea(e,this.left,s)-s/2,c=ea(e,this.right,o)+o/2,f=d=l):(f=ea(e,this.top,s)-s/2,d=ea(e,this.bottom,o)+o/2,u=c=l),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(u,f),r.lineTo(c,d),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&vu(n,a);const i=this.getLabelItems(e);for(const s of i){const o=s.options,l=s.font,u=s.label,c=s.textOffset;wa(n,u,0,c,l,o)}a&&gu(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;const i=wt(n.font),s=jt(n.padding),o=n.align;let l=i.lineHeight/2;r==="bottom"||r==="center"||Fe(r)?(l+=s.bottom,rt(n.text)&&(l+=i.lineHeight*(n.text.length-1))):l+=s.top;const{titleX:u,titleY:c,maxWidth:f,rotation:d}=IH(this,l,r,o);wa(e,n.text,0,0,i,{color:n.color,maxWidth:f,rotation:d,textAlign:OH(o,r,a),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Te(e.grid&&e.grid.z,-1),a=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ma.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,s;for(i=0,s=r.length;i<s;++i){const o=r[i];o[n]===this.id&&(!e||o.type===e)&&a.push(o)}return a}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return wt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class So{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;qH(r)&&(n=this.register(r));const a=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,BH(e,s,n),this.override&&at.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,a=this.scope;n in r&&delete r[n],a&&n in at[a]&&(delete at[a][n],this.override&&delete xa[n])}}function BH(t,e,r){const n=Ss(Object.create(null),[r?at.get(r):{},at.get(e),t.defaults]);at.set(e,n),t.defaultRoutes&&FH(e,t.defaultRoutes),t.descriptors&&at.describe(e,t.descriptors)}function FH(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),a=n.pop(),i=[t].concat(n).join("."),s=e[r].split("."),o=s.pop(),l=s.join(".");at.route(i,a,l,o)})}function qH(t){return"id"in t&&"defaults"in t}class NH{constructor(){this.controllers=new So(Er,"datasets",!0),this.elements=new So(gn,"elements"),this.plugins=new So(Object,"plugins"),this.scales=new So(Ma,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):je(a,s=>{const o=n||this._getRegistryForType(s);this._exec(e,o,s)})})}_exec(e,r,n){const a=Py(e);Qe(n["before"+a],[],n),r[e](n),Qe(n["after"+a],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const a=r.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return a}}var Lr=new NH;class zH{constructor(){this._init=void 0}notify(e,r,n,a){if(r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=a?this._descriptors(e).filter(a):this._descriptors(e),s=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,r,n,a){a=a||{};for(const i of e){const s=i.plugin,o=s[n],l=[r,a,i.options];if(Qe(o,l,s)===!1&&a.cancelable)return!1}return!0}invalidate(){Ie(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,a=Te(n.options&&n.options.plugins,{}),i=$H(n);return a===!1&&!r?[]:HH(e,i,a,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,a=(i,s)=>i.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(a(r,n),e,"stop"),this._notify(a(n,r),e,"start")}}function $H(t){const e={},r=[],n=Object.keys(Lr.plugins.items);for(let i=0;i<n.length;i++)r.push(Lr.getPlugin(n[i]));const a=t.plugins||[];for(let i=0;i<a.length;i++){const s=a[i];r.indexOf(s)===-1&&(r.push(s),e[s.id]=!0)}return{plugins:r,localIds:e}}function VH(t,e){return!e&&t===!1?null:t===!0?{}:t}function HH(t,{plugins:e,localIds:r},n,a){const i=[],s=t.getContext();for(const o of e){const l=o.id,u=VH(n[l],a);u!==null&&i.push({plugin:o,options:WH(t.config,{plugin:o,local:r[l]},u,s)})}return i}function WH(t,{plugin:e,local:r},n,a){const i=t.pluginScopeKeys(e),s=t.getOptionScopes(n,i);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gm(t,e){const r=at.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function GH(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function UH(t,e){return t===e?"_index_":"_value_"}function ak(t){if(t==="x"||t==="y"||t==="r")return t}function jH(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function pm(t,...e){if(ak(t))return t;for(const r of e){const n=r.axis||jH(r.position)||t.length>1&&ak(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ik(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function KH(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return ik(t,"x",r[0])||ik(t,"y",r[0])}return{}}function YH(t,e){const r=xa[t.type]||{scales:{}},n=e.scales||{},a=gm(t.type,e),i=Object.create(null);return Object.keys(n).forEach(s=>{const o=n[s];if(!Fe(o))return console.error(`Invalid scale configuration for scale: ${s}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=pm(s,o,KH(s,t),at.scales[o.type]),u=UH(l,a),c=r.scales||{};i[s]=is(Object.create(null),[{axis:l},o,c[l],c[u]])}),t.data.datasets.forEach(s=>{const o=s.type||t.type,l=s.indexAxis||gm(o,e),c=(xa[o]||{}).scales||{};Object.keys(c).forEach(f=>{const d=GH(f,l),h=s[d+"AxisID"]||d;i[h]=i[h]||Object.create(null),is(i[h],[{axis:d},n[h],c[f]])})}),Object.keys(i).forEach(s=>{const o=i[s];is(o,[at.scales[o.type],at.scale])}),i}function jP(t){const e=t.options||(t.options={});e.plugins=Te(e.plugins,{}),e.scales=YH(t,e)}function KP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function XH(t){return t=t||{},t.data=KP(t.data),jP(t),t}const sk=new Map,YP=new Set;function Eo(t,e){let r=sk.get(t);return r||(r=e(),sk.set(t,r),YP.add(r)),r}const qi=(t,e,r)=>{const n=$n(e,r);n!==void 0&&t.add(n)};class ZH{constructor(e){this._config=XH(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=KP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),jP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Eo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Eo(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Eo(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Eo(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let a=n.get(e);return(!a||r)&&(a=new Map,n.set(e,a)),a}getOptionScopes(e,r,n){const{options:a,type:i}=this,s=this._cachedScopes(e,n),o=s.get(r);if(o)return o;const l=new Set;r.forEach(c=>{e&&(l.add(e),c.forEach(f=>qi(l,e,f))),c.forEach(f=>qi(l,a,f)),c.forEach(f=>qi(l,xa[i]||{},f)),c.forEach(f=>qi(l,at,f)),c.forEach(f=>qi(l,dm,f))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),YP.has(r)&&s.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,xa[r]||{},at.datasets[r]||{},{type:r},at,dm]}resolveNamedOptions(e,r,n,a=[""]){const i={$shared:!0},{resolver:s,subPrefixes:o}=ok(this._resolverCache,e,a);let l=s;if(JH(s,r)){i.$shared=!1,n=Vn(n)?n():n;const u=this.createResolver(e,n,o);l=oi(s,n,u)}for(const u of r)i[u]=l[u];return i}createResolver(e,r,n=[""],a){const{resolver:i}=ok(this._resolverCache,e,n);return Fe(r)?oi(i,r,void 0,a):i}}function ok(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const a=r.join();let i=n.get(a);return i||(i={resolver:Iy(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(a,i)),i}const QH=t=>Fe(t)&&Object.getOwnPropertyNames(t).some(e=>Vn(t[e]));function JH(t,e){const{isScriptable:r,isIndexable:n}=TP(t);for(const a of e){const i=r(a),s=n(a),o=(s||i)&&t[a];if(i&&(Vn(o)||QH(o))||s&&rt(o))return!0}return!1}var e4="4.5.1";const t4=["top","bottom","left","right","chartArea"];function lk(t,e){return t==="top"||t==="bottom"||t4.indexOf(t)===-1&&e==="x"}function uk(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function ck(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Qe(r&&r.onComplete,[t],e)}function r4(t){const e=t.chart,r=e.options.animation;Qe(r&&r.onProgress,[t],e)}function XP(t){return qy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Zo={},fk=t=>{const e=XP(t);return Object.values(Zo).filter(r=>r.canvas===e).pop()};function n4(t,e,r){const n=Object.keys(t);for(const a of n){const i=+a;if(i>=e){const s=t[a];delete t[a],(r>0||i>e)&&(t[i+r]=s)}}}function a4(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}class xr{static register(...e){Lr.add(...e),dk()}static unregister(...e){Lr.remove(...e),dk()}constructor(e,r){const n=this.config=new ZH(r),a=XP(e),i=fk(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||wH(a)),this.platform.updateConfig(n);const o=this.platform.acquireContext(a,s.aspectRatio),l=o&&o.canvas,u=l&&l.height,c=l&&l.width;if(this.id=i$(),this.ctx=o,this.canvas=l,this.width=c,this.height=u,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=w$(f=>this.update(f),s.resizeDelay||0),this._dataChanges=[],Zo[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Xr.listen(this,"complete",ck),Xr.listen(this,"progress",r4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return Ie(e)?r&&i?i:a?n/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Lr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():OC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return MC(this.canvas,this.ctx),this}stop(){return Xr.stop(this),this}resize(e,r){Xr.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(a,e,r,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,OC(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Qe(n.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};je(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,a=Object.keys(n).reduce((s,o)=>(s[o]=!1,s),{});let i=[];r&&(i=i.concat(Object.keys(r).map(s=>{const o=r[s],l=pm(s,o),u=l==="r",c=l==="x";return{options:o,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),je(i,s=>{const o=s.options,l=o.id,u=pm(l,o),c=Te(o.type,s.dtype);(o.position===void 0||lk(o.position,u)!==lk(s.dposition))&&(o.position=s.dposition),a[l]=!0;let f=null;if(l in n&&n[l].type===c)f=n[l];else{const d=Lr.getScale(c);f=new d({id:l,type:c,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(o,e)}),je(a,(s,o)=>{s||delete n[o]}),je(n,s=>{Ht.configure(this,s,s.options),Ht.addBox(this,s)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(uk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){const i=r[n];let s=this.getDatasetMeta(n);const o=i.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=o,s.indexAxis=i.indexAxis||gm(o,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const l=Lr.getController(o),{datasetElementType:u,dataElementType:c}=at.datasets[o];Object.assign(l,{dataElementType:Lr.getElement(c),datasetElementType:u&&Lr.getElement(u)}),s.controller=new l(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){je(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:f}=this.getDatasetMeta(u),d=!a&&i.indexOf(f)===-1;f.buildOrUpdateElements(d),s=Math.max(+f.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),a||je(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(uk("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){je(this.scales,e=>{Ht.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!wC(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of r){const s=n==="_removeElements"?-i:i;n4(e,a,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(e.filter(s=>s[0]===i).map((s,o)=>o+","+s.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!wC(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ht.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],je(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Vn(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),a={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Xr.has(this)?this.attached&&!Xr.running(this)&&Xr.start(this):(this.draw(),ck({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let a,i;for(a=0,i=r.length;a<i;++a){const s=r[a];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},a=qP(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&vu(r,a),e.controller.draw(),a&&gu(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return on(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,a){const i=tH.modes[r];return typeof i=="function"?i(this,e,n,a):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=Yn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const a=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,a);Es(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(o=>o.datasetIndex===e?a:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Xr.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),MC(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Zo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(i,s)=>{r.addEventListener(this,i,s),e[i]=s},a=(i,s,o)=>{i.offsetX=s,i.offsetY=o,this._eventHandler(i)};je(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(l,u)=>{r.addEventListener(this,l,u),e[l]=u},a=(l,u)=>{e[l]&&(r.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let s;const o=()=>{a("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():s()}unbindEvents(){je(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},je(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const a=n?"set":"remove";let i,s,o,l;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){s=e[o];const u=s&&this.getDatasetMeta(s.datasetIndex).controller;u&&u[a+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:i,index:s})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[s],index:s}});!wl(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const a=this.options.hover,i=(l,u)=>l.filter(c=>!u.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),s=i(r,e),o=n?e:i(e,r);s.length&&this.updateHoverStyle(s,a.mode,!1),o.length&&a.mode&&this.updateHoverStyle(o,a.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},a=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:a=[],options:i}=this,s=r,o=this._getActiveElements(e,a,n,s),l=f$(e),u=a4(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Qe(i.onHover,[e,o,this],this),l&&Qe(i.onClick,[e,o,this],this));const c=!wl(o,a);return(c||r)&&(this._active=o,this._updateHoverStyles(o,a,r)),this._lastEvent=u,c}_getActiveElements(e,r,n,a){if(e.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}}se(xr,"defaults",at),se(xr,"instances",Zo),se(xr,"overrides",xa),se(xr,"registry",Lr),se(xr,"version",e4),se(xr,"getChart",fk);function dk(){return je(xr.instances,t=>t._plugins.invalidate())}function i4(t,e,r){const{startAngle:n,x:a,y:i,outerRadius:s,innerRadius:o,options:l}=e,{borderWidth:u,borderJoinStyle:c}=l,f=Math.min(u/s,Vt(n-r));if(t.beginPath(),t.arc(a,i,s-u/2,n+f/2,r-f/2),o>0){const d=Math.min(u/o,Vt(n-r));t.arc(a,i,o+u/2,r-d/2,n+d/2,!0)}else{const d=Math.min(u/2,s*Vt(n-r));if(c==="round")t.arc(a,i,d,r-He/2,n+He/2,!0);else if(c==="bevel"){const h=2*d*d,v=-h*Math.cos(r+He/2)+a,p=-h*Math.sin(r+He/2)+i,g=h*Math.cos(n+He/2)+a,y=h*Math.sin(n+He/2)+i;t.lineTo(v,p),t.lineTo(g,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function s4(t,e,r){const{startAngle:n,pixelMargin:a,x:i,y:s,outerRadius:o,innerRadius:l}=e;let u=a/o;t.beginPath(),t.arc(i,s,o,n-u,r+u),l>a?(u=a/l,t.arc(i,s,l,r+u,n-u,!0)):t.arc(i,s,a,r+ft,n-ft),t.closePath(),t.clip()}function o4(t){return Oy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function l4(t,e,r,n){const a=o4(t.options.borderRadius),i=(r-e)/2,s=Math.min(i,n*e/2),o=l=>{const u=(r-Math.min(i,l))*n/2;return At(l,0,Math.min(i,u))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:At(a.innerStart,0,s),innerEnd:At(a.innerEnd,0,s)}}function Va(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function Al(t,e,r,n,a,i){const{x:s,y:o,startAngle:l,pixelMargin:u,innerRadius:c}=e,f=Math.max(e.outerRadius+n+r-u,0),d=c>0?c+n+r+u:0;let h=0;const v=a-l;if(n){const L=c>0?c-n:0,I=f>0?f-n:0,O=(L+I)/2,B=O!==0?v*O/(O+n):v;h=(v-B)/2}const p=Math.max(.001,v*f-r/He)/f,g=(v-p)/2,y=l+g+h,m=a-g-h,{outerStart:b,outerEnd:_,innerStart:x,innerEnd:S}=l4(e,d,f,m-y),w=f-b,E=f-_,C=y+b/w,T=m-_/E,A=d+x,P=d+S,R=y+x/A,D=m-S/P;if(t.beginPath(),i){const L=(C+T)/2;if(t.arc(s,o,f,C,L),t.arc(s,o,f,L,T),_>0){const H=Va(E,T,s,o);t.arc(H.x,H.y,_,T,m+ft)}const I=Va(P,m,s,o);if(t.lineTo(I.x,I.y),S>0){const H=Va(P,D,s,o);t.arc(H.x,H.y,S,m+ft,D+Math.PI)}const O=(m-S/d+(y+x/d))/2;if(t.arc(s,o,d,m-S/d,O,!0),t.arc(s,o,d,O,y+x/d,!0),x>0){const H=Va(A,R,s,o);t.arc(H.x,H.y,x,R+Math.PI,y-ft)}const B=Va(w,y,s,o);if(t.lineTo(B.x,B.y),b>0){const H=Va(w,C,s,o);t.arc(H.x,H.y,b,y-ft,C)}}else{t.moveTo(s,o);const L=Math.cos(C)*f+s,I=Math.sin(C)*f+o;t.lineTo(L,I);const O=Math.cos(T)*f+s,B=Math.sin(T)*f+o;t.lineTo(O,B)}t.closePath()}function u4(t,e,r,n,a){const{fullCircles:i,startAngle:s,circumference:o}=e;let l=e.endAngle;if(i){Al(t,e,r,n,l,a);for(let u=0;u<i;++u)t.fill();isNaN(o)||(l=s+(o%tt||tt))}return Al(t,e,r,n,l,a),t.fill(),l}function c4(t,e,r,n,a){const{fullCircles:i,startAngle:s,circumference:o,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:f,borderDashOffset:d,borderRadius:h}=l,v=l.borderAlign==="inner";if(!u)return;t.setLineDash(f||[]),t.lineDashOffset=d,v?(t.lineWidth=u*2,t.lineJoin=c||"round"):(t.lineWidth=u,t.lineJoin=c||"bevel");let p=e.endAngle;if(i){Al(t,e,r,n,p,a);for(let g=0;g<i;++g)t.stroke();isNaN(o)||(p=s+(o%tt||tt))}v&&s4(t,e,p),l.selfJoin&&p-s>=He&&h===0&&c!=="miter"&&i4(t,e,p),i||(Al(t,e,r,n,p,a),t.stroke())}class Yi extends gn{constructor(r){super();se(this,"circumference");se(this,"endAngle");se(this,"fullCircles");se(this,"innerRadius");se(this,"outerRadius");se(this,"pixelMargin");se(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.getProps(["x","y"],a),{angle:s,distance:o}=mP(i,{x:r,y:n}),{startAngle:l,endAngle:u,innerRadius:c,outerRadius:f,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),h=(this.options.spacing+this.options.borderWidth)/2,v=Te(d,u-l),p=Cs(s,l,u)&&l!==u,g=v>=tt||p,y=an(o,c+h,f+h);return g&&y}getCenterPoint(r){const{x:n,y:a,startAngle:i,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:u,spacing:c}=this.options,f=(i+s)/2,d=(o+l+c+u)/2;return{x:n+Math.cos(f)*d,y:a+Math.sin(f)*d}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:a}=this,i=(n.offset||0)/4,s=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=a>tt?Math.floor(a/tt):0,a===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const l=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(l)*i,Math.sin(l)*i);const u=1-Math.sin(Math.min(He,a||0)),c=i*u;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,u4(r,this,c,s,o),c4(r,this,c,s,o),r.restore()}}se(Yi,"id","arc"),se(Yi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),se(Yi,"defaultRoutes",{backgroundColor:"backgroundColor"}),se(Yi,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function ZP(t,e,r=e){t.lineCap=Te(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Te(r.borderDash,e.borderDash)),t.lineDashOffset=Te(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Te(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Te(r.borderWidth,e.borderWidth),t.strokeStyle=Te(r.borderColor,e.borderColor)}function f4(t,e,r){t.lineTo(r.x,r.y)}function d4(t){return t.stepped?O$:t.tension||t.cubicInterpolationMode==="monotone"?I$:f4}function QP(t,e,r={}){const n=t.length,{start:a=0,end:i=n-1}=r,{start:s,end:o}=e,l=Math.max(a,s),u=Math.min(i,o),c=a<s&&i<s||a>o&&i>o;return{count:n,start:l,loop:e.loop,ilen:u<l&&!c?n+u-l:u-l}}function h4(t,e,r,n){const{points:a,options:i}=e,{count:s,start:o,loop:l,ilen:u}=QP(a,r,n),c=d4(i);let{move:f=!0,reverse:d}=n||{},h,v,p;for(h=0;h<=u;++h)v=a[(o+(d?u-h:h))%s],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):c(t,p,v,d,i.stepped),p=v);return l&&(v=a[(o+(d?u:0))%s],c(t,p,v,d,i.stepped)),!!l}function v4(t,e,r,n){const a=e.points,{count:i,start:s,ilen:o}=QP(a,r,n),{move:l=!0,reverse:u}=n||{};let c=0,f=0,d,h,v,p,g,y;const m=_=>(s+(u?o-_:_))%i,b=()=>{p!==g&&(t.lineTo(c,g),t.lineTo(c,p),t.lineTo(c,y))};for(l&&(h=a[m(0)],t.moveTo(h.x,h.y)),d=0;d<=o;++d){if(h=a[m(d)],h.skip)continue;const _=h.x,x=h.y,S=_|0;S===v?(x<p?p=x:x>g&&(g=x),c=(f*c+_)/++f):(b(),t.lineTo(_,x),v=S,f=0,p=g=x),y=x}b()}function mm(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?v4:h4}function g4(t){return t.stepped?hV:t.tension||t.cubicInterpolationMode==="monotone"?vV:sa}function p4(t,e,r,n){let a=e._path;a||(a=e._path=new Path2D,e.path(a,r,n)&&a.closePath()),ZP(t,e.options),t.stroke(a)}function m4(t,e,r,n){const{segments:a,options:i}=e,s=mm(e);for(const o of a)ZP(t,i,o.style),t.beginPath(),s(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const y4=typeof Path2D=="function";function b4(t,e,r,n){y4&&!e.options.segment?p4(t,e,r,n):m4(t,e,r,n)}class An extends gn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;iV(this._points,n,e,a,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_V(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,a=e[r],i=this.points,s=FP(this,{property:r,start:a,end:a});if(!s.length)return;const o=[],l=g4(n);let u,c;for(u=0,c=s.length;u<c;++u){const{start:f,end:d}=s[u],h=i[f],v=i[d];if(h===v){o.push(h);continue}const p=Math.abs((a-h[r])/(v[r]-h[r])),g=l(h,v,p,n.stepped);g[r]=e[r],o.push(g)}return o.length===1?o[0]:o}pathSegment(e,r,n){return mm(this)(e,this,r,n)}path(e,r,n){const a=this.segments,i=mm(this);let s=this._loop;r=r||0,n=n||this.points.length-r;for(const o of a)s&=i(e,this,o,{start:r,end:r+n-1});return!!s}draw(e,r,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),b4(e,this,n,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}se(An,"id","line"),se(An,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),se(An,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),se(An,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function hk(t,e,r,n){const a=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<a.radius+a.hitRadius}class Qo extends gn{constructor(r){super();se(this,"parsed");se(this,"skip");se(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],a);return Math.pow(r-s,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return hk(this,r,"x",n)}inYRange(r,n){return hk(this,r,"y",n)}getCenterPoint(r){const{x:n,y:a}=this.getProps(["x","y"],r);return{x:n,y:a}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const a=n&&r.borderWidth||0;return(n+a)*2}draw(r,n){const a=this.options;this.skip||a.radius<.1||!on(this,n,this.size(a)/2)||(r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.fillStyle=a.backgroundColor,hm(r,a,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}se(Qo,"id","point"),se(Qo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),se(Qo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function JP(t,e){const{x:r,y:n,base:a,width:i,height:s}=t.getProps(["x","y","base","width","height"],e);let o,l,u,c,f;return t.horizontal?(f=s/2,o=Math.min(r,a),l=Math.max(r,a),u=n-f,c=n+f):(f=i/2,o=r-f,l=r+f,u=Math.min(n,a),c=Math.max(n,a)),{left:o,top:u,right:l,bottom:c}}function Pn(t,e,r,n){return t?0:At(e,r,n)}function _4(t,e,r){const n=t.options.borderWidth,a=t.borderSkipped,i=kP(n);return{t:Pn(a.top,i.top,0,r),r:Pn(a.right,i.right,0,e),b:Pn(a.bottom,i.bottom,0,r),l:Pn(a.left,i.left,0,e)}}function x4(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,i=ha(a),s=Math.min(e,r),o=t.borderSkipped,l=n||Fe(a);return{topLeft:Pn(!l||o.top||o.left,i.topLeft,0,s),topRight:Pn(!l||o.top||o.right,i.topRight,0,s),bottomLeft:Pn(!l||o.bottom||o.left,i.bottomLeft,0,s),bottomRight:Pn(!l||o.bottom||o.right,i.bottomRight,0,s)}}function w4(t){const e=JP(t),r=e.right-e.left,n=e.bottom-e.top,a=_4(t,r/2,n/2),i=x4(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Pp(t,e,r,n){const a=e===null,i=r===null,o=t&&!(a&&i)&&JP(t,n);return o&&(a||an(e,o.left,o.right))&&(i||an(r,o.top,o.bottom))}function S4(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function E4(t,e){t.rect(e.x,e.y,e.w,e.h)}function Rp(t,e,r={}){const n=t.x!==r.x?-e:0,a=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-n,s=(t.y+t.h!==r.y+r.h?e:0)-a;return{x:t.x+n,y:t.y+a,w:t.w+i,h:t.h+s,radius:t.radius}}class Jo extends gn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:s}=w4(this),o=S4(s.radius)?ks:E4;e.save(),(s.w!==i.w||s.h!==i.h)&&(e.beginPath(),o(e,Rp(s,r,i)),e.clip(),o(e,Rp(i,-r,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,Rp(i,r)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,r,n){return Pp(this,e,r,n)}inXRange(e,r){return Pp(this,e,null,r)}inYRange(e,r){return Pp(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}se(Jo,"id","bar"),se(Jo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),se(Jo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var C4=Object.freeze({__proto__:null,ArcElement:Yi,BarElement:Jo,LineElement:An,PointElement:Qo});const ym=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],vk=ym.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function eR(t){return ym[t%ym.length]}function tR(t){return vk[t%vk.length]}function k4(t,e){return t.borderColor=eR(e),t.backgroundColor=tR(e),++e}function T4(t,e){return t.backgroundColor=t.data.map(()=>eR(e++)),e}function A4(t,e){return t.backgroundColor=t.data.map(()=>tR(e++)),e}function P4(t){let e=0;return(r,n)=>{const a=t.getDatasetMeta(n).controller;a instanceof da?e=T4(r,e):a instanceof us?e=A4(r,e):a&&(e=k4(r,e))}}function gk(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function R4(t){return t&&(t.borderColor||t.backgroundColor)}function M4(){return at.borderColor!=="rgba(0,0,0,0.1)"||at.backgroundColor!=="rgba(0,0,0,0.1)"}var D4={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:a}=t.config,{elements:i}=a,s=gk(n)||R4(a)||i&&gk(i)||M4();if(!r.forceOverride&&s)return;const o=P4(t);n.forEach(o)}};function L4(t,e,r,n,a){const i=a.samples||n;if(i>=r)return t.slice(e,e+r);const s=[],o=(r-2)/(i-2);let l=0;const u=e+r-1;let c=e,f,d,h,v,p;for(s[l++]=t[c],f=0;f<i-2;f++){let g=0,y=0,m;const b=Math.floor((f+1)*o)+1+e,_=Math.min(Math.floor((f+2)*o)+1,r)+e,x=_-b;for(m=b;m<_;m++)g+=t[m].x,y+=t[m].y;g/=x,y/=x;const S=Math.floor(f*o)+1+e,w=Math.min(Math.floor((f+1)*o)+1,r)+e,{x:E,y:C}=t[c];for(h=v=-1,m=S;m<w;m++)v=.5*Math.abs((E-g)*(t[m].y-C)-(E-t[m].x)*(y-C)),v>h&&(h=v,d=t[m],p=m);s[l++]=d,c=p}return s[l++]=t[u],s}function O4(t,e,r,n){let a=0,i=0,s,o,l,u,c,f,d,h,v,p;const g=[],y=e+r-1,m=t[e].x,_=t[y].x-m;for(s=e;s<e+r;++s){o=t[s],l=(o.x-m)/_*n,u=o.y;const x=l|0;if(x===c)u<v?(v=u,f=s):u>p&&(p=u,d=s),a=(i*a+o.x)/++i;else{const S=s-1;if(!Ie(f)&&!Ie(d)){const w=Math.min(f,d),E=Math.max(f,d);w!==h&&w!==S&&g.push({...t[w],x:a}),E!==h&&E!==S&&g.push({...t[E],x:a})}s>0&&S!==h&&g.push(t[S]),g.push(o),c=x,i=0,v=p=u,f=d=h=s}}return g}function rR(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function pk(t){t.data.datasets.forEach(e=>{rR(e)})}function I4(t,e){const r=e.length;let n=0,a;const{iScale:i}=t,{min:s,max:o,minDefined:l,maxDefined:u}=i.getUserBounds();return l&&(n=At(sn(e,i.axis,s).lo,0,r-1)),u?a=At(sn(e,i.axis,o).hi+1,n,r)-n:a=r-n,{start:n,count:a}}var B4={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){pk(t);return}const n=t.width;t.data.datasets.forEach((a,i)=>{const{_data:s,indexAxis:o}=a,l=t.getDatasetMeta(i),u=s||a.data;if(ji([o,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=t.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||t.options.parsing)return;let{start:f,count:d}=I4(l,u);const h=r.threshold||4*n;if(d<=h){rR(a);return}Ie(s)&&(a._data=u,delete a.data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let v;switch(r.algorithm){case"lttb":v=L4(u,f,d,n,r);break;case"min-max":v=O4(u,f,d,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}a._decimated=v})},destroy(t){pk(t)}};function F4(t,e,r){const n=t.segments,a=t.points,i=e.points,s=[];for(const o of n){let{start:l,end:u}=o;u=yu(l,u,a);const c=bm(r,a[l],a[u],o.loop);if(!e.segments){s.push({source:o,target:c,start:a[l],end:a[u]});continue}const f=FP(e,c);for(const d of f){const h=bm(r,i[d.start],i[d.end],d.loop),v=BP(o,a,h);for(const p of v)s.push({source:p,target:d,start:{[r]:mk(c,h,"start",Math.max)},end:{[r]:mk(c,h,"end",Math.min)}})}}return s}function bm(t,e,r,n){if(n)return;let a=e[t],i=r[t];return t==="angle"&&(a=Vt(a),i=Vt(i)),{property:t,start:a,end:i}}function q4(t,e){const{x:r=null,y:n=null}=t||{},a=e.points,i=[];return e.segments.forEach(({start:s,end:o})=>{o=yu(s,o,a);const l=a[s],u=a[o];n!==null?(i.push({x:l.x,y:n}),i.push({x:u.x,y:n})):r!==null&&(i.push({x:r,y:l.y}),i.push({x:r,y:u.y}))}),i}function yu(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function mk(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function nR(t,e){let r=[],n=!1;return rt(t)?(n=!0,r=t):r=q4(t,e),r.length?new An({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function yk(t){return t&&t.fill!==!1}function N4(t,e,r){let a=t[e].fill;const i=[e];let s;if(!r)return a;for(;a!==!1&&i.indexOf(a)===-1;){if(!lt(a))return a;if(s=t[a],!s)return!1;if(s.visible)return a;i.push(a),a=s.fill}return!1}function z4(t,e,r){const n=W4(t);if(Fe(n))return isNaN(n.value)?!1:n;let a=parseFloat(n);return lt(a)&&Math.floor(a)===a?$4(n[0],e,a,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function $4(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function V4(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Fe(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function H4(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:Fe(t)?n=t.value:n=e.getBaseValue(),n}function W4(t){const e=t.options,r=e.fill;let n=Te(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function G4(t){const{scale:e,index:r,line:n}=t,a=[],i=n.segments,s=n.points,o=U4(e,r);o.push(nR({x:null,y:e.bottom},n));for(let l=0;l<i.length;l++){const u=i[l];for(let c=u.start;c<=u.end;c++)j4(a,s[c],o)}return new An({points:a,options:{}})}function U4(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let a=0;a<n.length;a++){const i=n[a];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function j4(t,e,r){const n=[];for(let a=0;a<r.length;a++){const i=r[a],{first:s,last:o,point:l}=K4(i,e,"x");if(!(!l||s&&o)){if(s)n.unshift(l);else if(t.push(l),!o)break}}t.push(...n)}function K4(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const a=n[r],i=t.segments,s=t.points;let o=!1,l=!1;for(let u=0;u<i.length;u++){const c=i[u],f=s[c.start][r],d=s[c.end][r];if(an(a,f,d)){o=a===f,l=a===d;break}}return{first:o,last:l,point:n}}class aR{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:a,y:i,radius:s}=this;return r=r||{start:0,end:tt},e.arc(a,i,s,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:a}=this,i=e.angle;return{x:r+Math.cos(i)*a,y:n+Math.sin(i)*a,angle:i}}}function Y4(t){const{chart:e,fill:r,line:n}=t;if(lt(r))return X4(e,r);if(r==="stack")return G4(t);if(r==="shape")return!0;const a=Z4(t);return a instanceof aR?a:nR(a,n)}function X4(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function Z4(t){return(t.scale||{}).getPointPositionForValue?J4(t):Q4(t)}function Q4(t){const{scale:e={},fill:r}=t,n=V4(r,e);if(lt(n)){const a=e.isHorizontal();return{x:a?n:null,y:a?null:n}}return null}function J4(t){const{scale:e,fill:r}=t,n=e.options,a=e.getLabels().length,i=n.reverse?e.max:e.min,s=H4(r,e,i),o=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,i);return new aR({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<a;++l)o.push(e.getPointPositionForValue(l,s));return o}function Mp(t,e,r){const n=Y4(e),{chart:a,index:i,line:s,scale:o,axis:l}=e,u=s.options,c=u.fill,f=u.backgroundColor,{above:d=f,below:h=f}=c||{},v=a.getDatasetMeta(i),p=qP(a,v);n&&s.points.length&&(vu(t,r),e3(t,{line:s,target:n,above:d,below:h,area:r,scale:o,axis:l,clip:p}),gu(t))}function e3(t,e){const{line:r,target:n,above:a,below:i,area:s,scale:o,clip:l}=e,u=r._loop?"angle":e.axis;t.save();let c=i;i!==a&&(u==="x"?(bk(t,n,s.top),Dp(t,{line:r,target:n,color:a,scale:o,property:u,clip:l}),t.restore(),t.save(),bk(t,n,s.bottom)):u==="y"&&(_k(t,n,s.left),Dp(t,{line:r,target:n,color:i,scale:o,property:u,clip:l}),t.restore(),t.save(),_k(t,n,s.right),c=a)),Dp(t,{line:r,target:n,color:c,scale:o,property:u,clip:l}),t.restore()}function bk(t,e,r){const{segments:n,points:a}=e;let i=!0,s=!1;t.beginPath();for(const o of n){const{start:l,end:u}=o,c=a[l],f=a[yu(l,u,a)];i?(t.moveTo(c.x,c.y),i=!1):(t.lineTo(c.x,r),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,o,{move:s}),s?t.closePath():t.lineTo(f.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function _k(t,e,r){const{segments:n,points:a}=e;let i=!0,s=!1;t.beginPath();for(const o of n){const{start:l,end:u}=o,c=a[l],f=a[yu(l,u,a)];i?(t.moveTo(c.x,c.y),i=!1):(t.lineTo(r,c.y),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,o,{move:s}),s?t.closePath():t.lineTo(r,f.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function Dp(t,e){const{line:r,target:n,property:a,color:i,scale:s,clip:o}=e,l=F4(r,n,a);for(const{source:u,target:c,start:f,end:d}of l){const{style:{backgroundColor:h=i}={}}=u,v=n!==!0;t.save(),t.fillStyle=h,t3(t,s,o,v&&bm(a,f,d)),t.beginPath();const p=!!r.pathSegment(t,u);let g;if(v){p?t.closePath():xk(t,n,d,a);const y=!!n.pathSegment(t,c,{move:p,reverse:!0});g=p&&y,g||xk(t,n,f,a)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function t3(t,e,r,n){const a=e.chart.chartArea,{property:i,start:s,end:o}=n||{};if(i==="x"||i==="y"){let l,u,c,f;i==="x"?(l=s,u=a.top,c=o,f=a.bottom):(l=a.left,u=s,c=a.right,f=o),t.beginPath(),r&&(l=Math.max(l,r.left),c=Math.min(c,r.right),u=Math.max(u,r.top),f=Math.min(f,r.bottom)),t.rect(l,u,c-l,f-u),t.clip()}}function xk(t,e,r,n){const a=e.interpolate(r,n);a&&t.lineTo(a.x,a.y)}var r3={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,a=[];let i,s,o,l;for(s=0;s<n;++s)i=t.getDatasetMeta(s),o=i.dataset,l=null,o&&o.options&&o instanceof An&&(l={visible:t.isDatasetVisible(s),index:s,fill:z4(o,s,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=l,a.push(l);for(s=0;s<n;++s)l=a[s],!(!l||l.fill===!1)&&(l.fill=N4(a,s,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",a=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let s=a.length-1;s>=0;--s){const o=a[s].$filler;o&&(o.line.updateControlPoints(i,o.axis),n&&o.fill&&Mp(t.ctx,o,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let a=n.length-1;a>=0;--a){const i=n[a].$filler;yk(i)&&Mp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!yk(n)||r.drawTime!=="beforeDatasetDraw"||Mp(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wk=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},n3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Sk extends gn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Qe(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,a)=>e.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,a=wt(n.font),i=a.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=wk(n,i);let u,c;r.font=a.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(s,i,o,l)+10):(c=this.maxHeight,u=this._fitCols(s,a,o,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,a){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=a+o;let f=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((v,p)=>{const g=n+r/2+i.measureText(v.text).width;(p===0||u[u.length-1]+g+2*o>s)&&(f+=c,u[u.length-(p>0?0:1)]=0,h+=c,d++),l[p]={left:0,top:h,row:d,width:g,height:a},u[u.length-1]+=g+o}),f}_fitCols(e,r,n,a){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=s-e;let f=o,d=0,h=0,v=0,p=0;return this.legendItems.forEach((g,y)=>{const{itemWidth:m,itemHeight:b}=a3(n,r,i,g,a);y>0&&h+b+2*o>c&&(f+=d+o,u.push({width:d,height:h}),v+=d+o,p++,d=h=0),l[y]={left:v,top:h,col:p,width:m,height:b},d=Math.max(d,m),h+=b+o}),f+=d,u.push({width:d,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,s=ei(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=$t(n,this.left+a,this.right-this.lineWidths[o]);for(const u of r)o!==u.row&&(o=u.row,l=$t(n,this.left+a,this.right-this.lineWidths[o])),u.top+=this.top+e+a,u.left=s.leftForLtr(s.x(l),u.width),l+=u.width+a}else{let o=0,l=$t(n,this.top+e+a,this.bottom-this.columnSizes[o].height);for(const u of r)u.col!==o&&(o=u.col,l=$t(n,this.top+e+a,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+a,u.left=s.leftForLtr(s.x(u.left),u.width),l+=u.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;vu(e,this),this._draw(),gu(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:s}=e,o=at.color,l=ei(e.rtl,this.left,this.width),u=wt(s.font),{padding:c}=s,f=u.size,d=f/2;let h;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=u.string;const{boxWidth:v,boxHeight:p,itemHeight:g}=wk(s,f),y=function(S,w,E){if(isNaN(v)||v<=0||isNaN(p)||p<0)return;a.save();const C=Te(E.lineWidth,1);if(a.fillStyle=Te(E.fillStyle,o),a.lineCap=Te(E.lineCap,"butt"),a.lineDashOffset=Te(E.lineDashOffset,0),a.lineJoin=Te(E.lineJoin,"miter"),a.lineWidth=C,a.strokeStyle=Te(E.strokeStyle,o),a.setLineDash(Te(E.lineDash,[])),s.usePointStyle){const T={radius:p*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:C},A=l.xPlus(S,v/2),P=w+d;CP(a,T,A,P,s.pointStyleWidth&&v)}else{const T=w+Math.max((f-p)/2,0),A=l.leftForLtr(S,v),P=ha(E.borderRadius);a.beginPath(),Object.values(P).some(R=>R!==0)?ks(a,{x:A,y:T,w:v,h:p,radius:P}):a.rect(A,T,v,p),a.fill(),C!==0&&a.stroke()}a.restore()},m=function(S,w,E){wa(a,E.text,S,w+g/2,u,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},b=this.isHorizontal(),_=this._computeTitleHeight();b?h={x:$t(i,this.left+c,this.right-n[0]),y:this.top+c+_,line:0}:h={x:this.left+c,y:$t(i,this.top+_+c,this.bottom-r[0].height),line:0},LP(this.ctx,e.textDirection);const x=g+c;this.legendItems.forEach((S,w)=>{a.strokeStyle=S.fontColor,a.fillStyle=S.fontColor;const E=a.measureText(S.text).width,C=l.textAlign(S.textAlign||(S.textAlign=s.textAlign)),T=v+d+E;let A=h.x,P=h.y;l.setWidth(this.width),b?w>0&&A+T+c>this.right&&(P=h.y+=x,h.line++,A=h.x=$t(i,this.left+c,this.right-n[h.line])):w>0&&P+x>this.bottom&&(A=h.x=A+r[h.line].width+c,h.line++,P=h.y=$t(i,this.top+_+c,this.bottom-r[h.line].height));const R=l.x(A);if(y(R,P,S),A=S$(C,A+v+d,b?A+T:this.right,e.rtl),m(l.x(A),P,S),b)h.x+=T+c;else if(typeof S.text!="string"){const D=u.lineHeight;h.y+=iR(S,D)+c}else h.y+=x}),OP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=wt(r.font),a=jt(r.padding);if(!r.display)return;const i=ei(e.rtl,this.left,this.width),s=this.ctx,o=r.position,l=n.size/2,u=a.top+l;let c,f=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,f=$t(e.align,f,this.right-d);else{const v=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);c=u+$t(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const h=$t(o,f,f+d);s.textAlign=i.textAlign(Dy(o)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=n.string,wa(s,r.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,r=wt(e.font),n=jt(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,a,i;if(an(e,this.left,this.right)&&an(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],an(e,a.left,a.left+a.width)&&an(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!o3(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,i=n3(a,n);a&&!i&&Qe(r.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&Qe(r.onHover,[e,n,this],this)}else n&&Qe(r.onClick,[e,n,this],this)}}function a3(t,e,r,n,a){const i=i3(n,t,e,r),s=s3(a,n,e.lineHeight);return{itemWidth:i,itemHeight:s}}function i3(t,e,r,n){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((i,s)=>i.length>s.length?i:s)),e+r.size/2+n.measureText(a).width}function s3(t,e,r){let n=t;return typeof e.text!="string"&&(n=iR(e,r)),n}function iR(t,e){const r=t.text?t.text.length:0;return e*r}function o3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var l3={id:"legend",_element:Sk,start(t,e,r){const n=t.legend=new Sk({ctx:t.ctx,options:r,chart:t});Ht.configure(t,n,r),Ht.addBox(t,n)},stop(t){Ht.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Ht.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),e.hidden=!0):(a.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:s,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(r?0:void 0),c=jt(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:a||u.textAlign,borderRadius:s&&(o||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class $y extends gn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const a=rt(n.text)?n.text.length:1;this._padding=jt(n.padding);const i=a*wt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:a,right:i,options:s}=this,o=s.align;let l=0,u,c,f;return this.isHorizontal()?(c=$t(o,n,i),f=r+e,u=i-n):(s.position==="left"?(c=n+e,f=$t(o,a,r),l=He*-.5):(c=i-e,f=$t(o,r,a),l=He*.5),u=a-r),{titleX:c,titleY:f,maxWidth:u,rotation:l}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=wt(r.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(i);wa(e,r.text,0,0,n,{color:r.color,maxWidth:l,rotation:u,textAlign:Dy(r.align),textBaseline:"middle",translation:[s,o]})}}function u3(t,e){const r=new $y({ctx:t.ctx,options:e,chart:t});Ht.configure(t,r,e),Ht.addBox(t,r),t.titleBlock=r}var c3={id:"title",_element:$y,start(t,e,r){u3(t,r)},stop(t){const e=t.titleBlock;Ht.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Ht.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Co=new WeakMap;var f3={id:"subtitle",start(t,e,r){const n=new $y({ctx:t.ctx,options:r,chart:t});Ht.configure(t,n,r),Ht.addBox(t,n),Co.set(t,n)},stop(t){Ht.removeBox(t,Co.get(t)),Co.delete(t)},beforeUpdate(t,e,r){const n=Co.get(t);Ht.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xi={average(t){if(!t.length)return!1;let e,r,n=new Set,a=0,i=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n.add(l.x),a+=l.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:a/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,a=Number.POSITIVE_INFINITY,i,s,o;for(i=0,s=t.length;i<s;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=fm(e,u);c<a&&(a=c,o=l)}}if(o){const l=o.tooltipPosition();r=l.x,n=l.y}return{x:r,y:n}}};function Dr(t,e){return e&&(rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Zr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function d3(t,e){const{element:r,datasetIndex:n,index:a}=e,i=t.getDatasetMeta(n).controller,{label:s,value:o}=i.getLabelAndValue(a);return{chart:t,label:s,parsed:i.getParsed(a),raw:t.data.datasets[n].data[a],formattedValue:o,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function Ek(t,e){const r=t.chart.ctx,{body:n,footer:a,title:i}=t,{boxWidth:s,boxHeight:o}=e,l=wt(e.bodyFont),u=wt(e.titleFont),c=wt(e.footerFont),f=i.length,d=a.length,h=n.length,v=jt(e.padding);let p=v.height,g=0,y=n.reduce((_,x)=>_+x.before.length+x.lines.length+x.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,f&&(p+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),y){const _=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;p+=h*_+(y-h)*l.lineHeight+(y-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let m=0;const b=function(_){g=Math.max(g,r.measureText(_).width+m)};return r.save(),r.font=u.string,je(t.title,b),r.font=l.string,je(t.beforeBody.concat(t.afterBody),b),m=e.displayColors?s+2+e.boxPadding:0,je(n,_=>{je(_.before,b),je(_.lines,b),je(_.after,b)}),m=0,r.font=c.string,je(t.footer,b),r.restore(),g+=v.width,{width:g,height:p}}function h3(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function v3(t,e,r,n){const{x:a,width:i}=n,s=r.caretSize+r.caretPadding;if(t==="left"&&a+i+s>e.width||t==="right"&&a-i-s<0)return!0}function g3(t,e,r,n){const{x:a,width:i}=r,{width:s,chartArea:{left:o,right:l}}=t;let u="center";return n==="center"?u=a<=(o+l)/2?"left":"right":a<=i/2?u="left":a>=s-i/2&&(u="right"),v3(u,t,e,r)&&(u="center"),u}function Ck(t,e,r){const n=r.yAlign||e.yAlign||h3(t,r);return{xAlign:r.xAlign||e.xAlign||g3(t,e,r,n),yAlign:n}}function p3(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function m3(t,e,r){let{y:n,height:a}=t;return e==="top"?n+=r:e==="bottom"?n-=a+r:n-=a/2,n}function kk(t,e,r,n){const{caretSize:a,caretPadding:i,cornerRadius:s}=t,{xAlign:o,yAlign:l}=r,u=a+i,{topLeft:c,topRight:f,bottomLeft:d,bottomRight:h}=ha(s);let v=p3(e,o);const p=m3(e,l,u);return l==="center"?o==="left"?v+=u:o==="right"&&(v-=u):o==="left"?v-=Math.max(c,d)+a:o==="right"&&(v+=Math.max(f,h)+a),{x:At(v,0,n.width-e.width),y:At(p,0,n.height-e.height)}}function ko(t,e,r){const n=jt(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Tk(t){return Dr([],Zr(t))}function y3(t,e,r){return Yn(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function Ak(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const sR={beforeTitle:Kr,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Kr,beforeBody:Kr,beforeLabel:Kr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Ie(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Kr,afterBody:Kr,beforeFooter:Kr,footer:Kr,afterFooter:Kr};function tr(t,e,r,n){const a=t[e].call(r,n);return typeof a>"u"?sR[e].call(r,n):a}class _m extends gn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new NP(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=y3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,a=tr(n,"beforeTitle",this,e),i=tr(n,"title",this,e),s=tr(n,"afterTitle",this,e);let o=[];return o=Dr(o,Zr(a)),o=Dr(o,Zr(i)),o=Dr(o,Zr(s)),o}getBeforeBody(e,r){return Tk(tr(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,a=[];return je(e,i=>{const s={before:[],lines:[],after:[]},o=Ak(n,i);Dr(s.before,Zr(tr(o,"beforeLabel",this,i))),Dr(s.lines,tr(o,"label",this,i)),Dr(s.after,Zr(tr(o,"afterLabel",this,i))),a.push(s)}),a}getAfterBody(e,r){return Tk(tr(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,a=tr(n,"beforeFooter",this,e),i=tr(n,"footer",this,e),s=tr(n,"afterFooter",this,e);let o=[];return o=Dr(o,Zr(a)),o=Dr(o,Zr(i)),o=Dr(o,Zr(s)),o}_createItems(e){const r=this._active,n=this.chart.data,a=[],i=[],s=[];let o=[],l,u;for(l=0,u=r.length;l<u;++l)o.push(d3(this.chart,r[l]));return e.filter&&(o=o.filter((c,f,d)=>e.filter(c,f,d,n))),e.itemSort&&(o=o.sort((c,f)=>e.itemSort(c,f,n))),je(o,c=>{const f=Ak(e.callbacks,c);a.push(tr(f,"labelColor",this,c)),i.push(tr(f,"labelPointStyle",this,c)),s.push(tr(f,"labelTextColor",this,c))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=o,o}update(e,r){const n=this.options.setContext(this.getContext()),a=this._active;let i,s=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const o=Xi[n.position].call(this,a,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const l=this._size=Ek(this,n),u=Object.assign({},o,l),c=Ck(this.chart,n,u),f=kk(n,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,a){const i=this.getCaretPosition(e,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){const{xAlign:a,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:f}=ha(o),{x:d,y:h}=e,{width:v,height:p}=r;let g,y,m,b,_,x;return i==="center"?(_=h+p/2,a==="left"?(g=d,y=g-s,b=_+s,x=_-s):(g=d+v,y=g+s,b=_-s,x=_+s),m=g):(a==="left"?y=d+Math.max(l,c)+s:a==="right"?y=d+v-Math.max(u,f)-s:y=this.caretX,i==="top"?(b=h,_=b-s,g=y-s,m=y+s):(b=h+p,_=b+s,g=y+s,m=y-s),x=b),{x1:g,x2:y,x3:m,y1:b,y2:_,y3:x}}drawTitle(e,r,n){const a=this.title,i=a.length;let s,o,l;if(i){const u=ei(n.rtl,this.x,this.width);for(e.x=ko(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",s=wt(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=s.string,l=0;l<i;++l)r.fillText(a[l],u.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,l+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,a,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=i,c=wt(i.bodyFont),f=ko(this,"left",i),d=a.x(f),h=l<c.lineHeight?(c.lineHeight-l)/2:0,v=r.y+h;if(i.usePointStyle){const p={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},g=a.leftForLtr(d,u)+u/2,y=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,hm(e,p,g,y),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,hm(e,p,g,y)}else{e.lineWidth=Fe(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const p=a.leftForLtr(d,u),g=a.leftForLtr(a.xPlus(d,1),u-2),y=ha(s.borderRadius);Object.values(y).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,ks(e,{x:p,y:v,w:u,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),ks(e,{x:g,y:v+1,w:u-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(p,v,u,l),e.strokeRect(p,v,u,l),e.fillStyle=s.backgroundColor,e.fillRect(g,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:a}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:l,boxWidth:u,boxPadding:c}=n,f=wt(n.bodyFont);let d=f.lineHeight,h=0;const v=ei(n.rtl,this.x,this.width),p=function(E){r.fillText(E,v.x(e.x+h),e.y+d/2),e.y+=d+i},g=v.textAlign(s);let y,m,b,_,x,S,w;for(r.textAlign=s,r.textBaseline="middle",r.font=f.string,e.x=ko(this,g,n),r.fillStyle=n.bodyColor,je(this.beforeBody,p),h=o&&g!=="right"?s==="center"?u/2+c:u+2+c:0,_=0,S=a.length;_<S;++_){for(y=a[_],m=this.labelTextColors[_],r.fillStyle=m,je(y.before,p),b=y.lines,o&&b.length&&(this._drawColorBox(r,e,_,v,n),d=Math.max(f.lineHeight,l)),x=0,w=b.length;x<w;++x)p(b[x]),d=f.lineHeight;je(y.after,p)}h=0,d=f.lineHeight,je(this.afterBody,p),e.y-=i}drawFooter(e,r,n){const a=this.footer,i=a.length;let s,o;if(i){const l=ei(n.rtl,this.x,this.width);for(e.x=ko(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=l.textAlign(n.footerAlign),r.textBaseline="middle",s=wt(n.footerFont),r.fillStyle=n.footerColor,r.font=s.string,o=0;o<i;++o)r.fillText(a[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,r,n,a){const{xAlign:i,yAlign:s}=this,{x:o,y:l}=e,{width:u,height:c}=n,{topLeft:f,topRight:d,bottomLeft:h,bottomRight:v}=ha(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(o+f,l),s==="top"&&this.drawCaret(e,r,n,a),r.lineTo(o+u-d,l),r.quadraticCurveTo(o+u,l,o+u,l+d),s==="center"&&i==="right"&&this.drawCaret(e,r,n,a),r.lineTo(o+u,l+c-v),r.quadraticCurveTo(o+u,l+c,o+u-v,l+c),s==="bottom"&&this.drawCaret(e,r,n,a),r.lineTo(o+h,l+c),r.quadraticCurveTo(o,l+c,o,l+c-h),s==="center"&&i==="left"&&this.drawCaret(e,r,n,a),r.lineTo(o,l+f),r.quadraticCurveTo(o,l,o+f,l),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const s=Xi[e.position].call(this,this._active,this._eventPosition);if(!s)return;const o=this._size=Ek(this,e),l=Object.assign({},s,this._size),u=Ck(r,e,l),c=kk(e,l,u,r);(a._to!==c.x||i._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=jt(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,a,r),LP(e,r.textDirection),i.y+=s.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),OP(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,a=e.map(({datasetIndex:o,index:l})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[l],index:l}}),i=!wl(n,a),s=this._positionChanged(a,r);(i||s)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],s=this._getActiveElements(e,i,r,n),o=this._positionChanged(s,e),l=r||!wl(s,i)||o;return l&&(this._active=s,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,n,a){const i=this.options;if(e.type==="mouseout")return[];if(!a)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,r){const{caretX:n,caretY:a,options:i}=this,s=Xi[i.position].call(this,e,r);return s!==!1&&(n!==s.x||a!==s.y)}}se(_m,"positioners",Xi);var b3={id:"tooltip",_element:_m,positioners:Xi,afterInit(t,e,r){r&&(t.tooltip=new _m({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:sR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_3=Object.freeze({__proto__:null,Colors:D4,Decimation:B4,Filler:r3,Legend:l3,SubTitle:f3,Title:c3,Tooltip:b3});const x3=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function w3(t,e,r,n){const a=t.indexOf(e);if(a===-1)return x3(t,e,r,n);const i=t.lastIndexOf(e);return a!==i?r:a}const S3=(t,e)=>t===null?null:At(Math.round(t),0,e);function Pk(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class xm extends Ma{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ie(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:w3(n,e,Te(r,e),this._addedLabels),S3(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=r;s++)a.push({value:s});return a}getLabelForValue(e){return Pk.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}se(xm,"id","category"),se(xm,"defaults",{ticks:{callback:Pk}});function E3(t,e){const r=[],{bounds:a,step:i,min:s,max:o,precision:l,count:u,maxTicks:c,maxDigits:f,includeBounds:d}=t,h=i||1,v=c-1,{min:p,max:g}=e,y=!Ie(s),m=!Ie(o),b=!Ie(u),_=(g-p)/(f+1);let x=EC((g-p)/v/h)*h,S,w,E,C;if(x<1e-14&&!y&&!m)return[{value:p},{value:g}];C=Math.ceil(g/x)-Math.floor(p/x),C>v&&(x=EC(C*x/v/h)*h),Ie(l)||(S=Math.pow(10,l),x=Math.ceil(x*S)/S),a==="ticks"?(w=Math.floor(p/x)*x,E=Math.ceil(g/x)*x):(w=p,E=g),y&&m&&i&&p$((o-s)/i,x/1e3)?(C=Math.round(Math.min((o-s)/x,c)),x=(o-s)/C,w=s,E=o):b?(w=y?s:w,E=m?o:E,C=u-1,x=(E-w)/C):(C=(E-w)/x,ss(C,Math.round(C),x/1e3)?C=Math.round(C):C=Math.ceil(C));const T=Math.max(CC(x),CC(w));S=Math.pow(10,Ie(l)?T:l),w=Math.round(w*S)/S,E=Math.round(E*S)/S;let A=0;for(y&&(d&&w!==s?(r.push({value:s}),w<s&&A++,ss(Math.round((w+A*x)*S)/S,s,Rk(s,_,t))&&A++):w<s&&A++);A<C;++A){const P=Math.round((w+A*x)*S)/S;if(m&&P>o)break;r.push({value:P})}return m&&d&&E!==o?r.length&&ss(r[r.length-1].value,o,Rk(o,_,t))?r[r.length-1].value=o:r.push({value:o}):(!m||E===o)&&r.push({value:E}),r}function Rk(t,e,{horizontal:r,minRotation:n}){const a=wr(n),i=(r?Math.sin(a):Math.cos(a))||.001,s=.75*e*(""+t).length;return Math.min(e/i,s)}class Pl extends Ma{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Ie(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const s=l=>a=r?a:l,o=l=>i=n?i:l;if(e){const l=qr(a),u=qr(i);l<0&&u<0?o(0):l>0&&u>0&&s(0)}if(a===i){let l=i===0?1:Math.abs(i*.05);o(i+l),e||s(a-l)}this.min=a,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,s=E3(a,i);return e.bounds==="ticks"&&pP(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const a=(n-r)/Math.max(e.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return Ks(e,this.chart.options.locale,this.options.ticks.format)}}class wm extends Pl{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=lt(e)?e:0,this.max=lt(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=wr(this.options.ticks.minRotation),a=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}se(wm,"id","linear"),se(wm,"defaults",{ticks:{callback:hu.formatters.numeric}});const As=t=>Math.floor(kn(t)),ra=(t,e)=>Math.pow(10,As(t)+e);function Mk(t){return t/Math.pow(10,As(t))===1}function Dk(t,e,r){const n=Math.pow(10,r),a=Math.floor(t/n);return Math.ceil(e/n)-a}function C3(t,e){const r=e-t;let n=As(r);for(;Dk(t,e,n)>10;)n++;for(;Dk(t,e,n)<10;)n--;return Math.min(n,As(t))}function k3(t,{min:e,max:r}){e=lr(t.min,e);const n=[],a=As(e);let i=C3(e,r),s=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),l=a>i?Math.pow(10,a):0,u=Math.round((e-l)*s)/s,c=Math.floor((e-l)/o/10)*o*10;let f=Math.floor((u-c)/Math.pow(10,i)),d=lr(t.min,Math.round((l+c+f*Math.pow(10,i))*s)/s);for(;d<r;)n.push({value:d,major:Mk(d),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(i++,f=2,s=i>=0?1:s),d=Math.round((l+c+f*Math.pow(10,i))*s)/s;const h=lr(t.max,d);return n.push({value:h,major:Mk(h),significand:f}),n}class Sm extends Ma{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=Pl.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return lt(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=lt(e)?Math.max(0,e):null,this.max=lt(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!lt(this._userMin)&&(this.min=e===ra(this.min,0)?ra(this.min,-1):ra(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,a=this.max;const i=o=>n=e?n:o,s=o=>a=r?a:o;n===a&&(n<=0?(i(1),s(10)):(i(ra(n,-1)),s(ra(a,1)))),n<=0&&i(ra(a,-1)),a<=0&&s(ra(n,1)),this.min=n,this.max=a}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=k3(r,this);return e.bounds==="ticks"&&pP(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Ks(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=kn(e),this._valueRange=kn(this.max)-kn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(kn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}se(Sm,"id","logarithmic"),se(Sm,"defaults",{ticks:{callback:hu.formatters.logarithmic,major:{enabled:!0}}});function Em(t){const e=t.ticks;if(e.display&&t.display){const r=jt(e.backdropPadding);return Te(e.font&&e.font.size,at.font.size)+r.height}return 0}function T3(t,e,r){return r=rt(r)?r:[r],{w:L$(t,e.string,r),h:r.length*e.lineHeight}}function Lk(t,e,r,n,a){return t===n||t===a?{start:e-r/2,end:e+r/2}:t<n||t>a?{start:e-r,end:e}:{start:e,end:e+r}}function A3(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],a=[],i=t._pointLabels.length,s=t.options.pointLabels,o=s.centerPointLabels?He/i:0;for(let l=0;l<i;l++){const u=s.setContext(t.getPointLabelContext(l));a[l]=u.padding;const c=t.getPointPosition(l,t.drawingArea+a[l],o),f=wt(u.font),d=T3(t.ctx,f,t._pointLabels[l]);n[l]=d;const h=Vt(t.getIndexAngle(l)+o),v=Math.round(Ry(h)),p=Lk(v,c.x,d.w,0,180),g=Lk(v,c.y,d.h,90,270);P3(r,e,h,p,g)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=D3(t,n,a)}function P3(t,e,r,n,a){const i=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r));let o=0,l=0;n.start<e.l?(o=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+o)),a.start<e.t?(l=(e.t-a.start)/s,t.t=Math.min(t.t,e.t-l)):a.end>e.b&&(l=(a.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function R3(t,e,r){const n=t.drawingArea,{extra:a,additionalAngle:i,padding:s,size:o}=r,l=t.getPointPosition(e,n+a+s,i),u=Math.round(Ry(Vt(l.angle+ft))),c=I3(l.y,o.h,u),f=L3(u),d=O3(l.x,o.w,f);return{visible:!0,x:l.x,y:c,textAlign:f,left:d,top:c,right:d+o.w,bottom:c+o.h}}function M3(t,e){if(!e)return!0;const{left:r,top:n,right:a,bottom:i}=t;return!(on({x:r,y:n},e)||on({x:r,y:i},e)||on({x:a,y:n},e)||on({x:a,y:i},e))}function D3(t,e,r){const n=[],a=t._pointLabels.length,i=t.options,{centerPointLabels:s,display:o}=i.pointLabels,l={extra:Em(i)/2,additionalAngle:s?He/a:0};let u;for(let c=0;c<a;c++){l.padding=r[c],l.size=e[c];const f=R3(t,c,l);n.push(f),o==="auto"&&(f.visible=M3(f,u),f.visible&&(u=f))}return n}function L3(t){return t===0||t===180?"center":t<180?"left":"right"}function O3(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function I3(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function B3(t,e,r){const{left:n,top:a,right:i,bottom:s}=r,{backdropColor:o}=e;if(!Ie(o)){const l=ha(e.borderRadius),u=jt(e.backdropPadding);t.fillStyle=o;const c=n-u.left,f=a-u.top,d=i-n+u.width,h=s-a+u.height;Object.values(l).some(v=>v!==0)?(t.beginPath(),ks(t,{x:c,y:f,w:d,h,radius:l}),t.fill()):t.fillRect(c,f,d,h)}}function F3(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let a=e-1;a>=0;a--){const i=t._pointLabelItems[a];if(!i.visible)continue;const s=n.setContext(t.getPointLabelContext(a));B3(r,s,i);const o=wt(s.font),{x:l,y:u,textAlign:c}=i;wa(r,t._pointLabels[a],l,u+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}function oR(t,e,r,n){const{ctx:a}=t;if(r)a.arc(t.xCenter,t.yCenter,e,0,tt);else{let i=t.getPointPosition(0,e);a.moveTo(i.x,i.y);for(let s=1;s<n;s++)i=t.getPointPosition(s,e),a.lineTo(i.x,i.y)}}function q3(t,e,r,n,a){const i=t.ctx,s=e.circular,{color:o,lineWidth:l}=e;!s&&!n||!o||!l||r<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(a.dash||[]),i.lineDashOffset=a.dashOffset,i.beginPath(),oR(t,r,s,n),i.closePath(),i.stroke(),i.restore())}function N3(t,e,r){return Yn(t,{label:r,index:e,type:"pointLabel"})}class Zi extends Pl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=jt(Em(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=lt(e)&&!isNaN(e)?e:0,this.max=lt(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Em(this.options))}generateTickLabels(e){Pl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const a=Qe(this.options.pointLabels.callback,[r,n],this);return a||a===0?a:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?A3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,a){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,a))}getIndexAngle(e){const r=tt/(this._pointLabels.length||1),n=this.options.startAngle||0;return Vt(e*r+wr(n))}getDistanceFromCenterForValue(e){if(Ie(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Ie(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return N3(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const a=this.getIndexAngle(e)-ft+n;return{x:Math.cos(a)*r+this.xCenter,y:Math.sin(a)*r+this.yCenter,angle:a}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:a,bottom:i}=this._pointLabelItems[e];return{left:r,top:n,right:a,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),oR(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:a,border:i}=r,s=this._pointLabels.length;let o,l,u;if(r.pointLabels.display&&F3(this,s),a.display&&this.ticks.forEach((c,f)=>{if(f!==0||f===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);const d=this.getContext(f),h=a.setContext(d),v=i.setContext(d);q3(this,h,l,s,v)}}),n.display){for(e.save(),o=s-1;o>=0;o--){const c=n.setContext(this.getPointLabelContext(o)),{color:f,lineWidth:d}=c;!d||!f||(e.lineWidth=d,e.strokeStyle=f,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),u=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const a=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!r.reverse)return;const u=n.setContext(this.getContext(l)),c=wt(u.font);if(i=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,s=e.measureText(o.label).width,e.fillStyle=u.backdropColor;const f=jt(u.backdropPadding);e.fillRect(-s/2-f.left,-i-c.size/2-f.top,s+f.width,c.size+f.height)}wa(e,o.label,0,-i,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}se(Zi,"id","radialLinear"),se(Zi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),se(Zi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),se(Zi,"descriptors",{angleLines:{_fallback:"grid"}});const bu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ir=Object.keys(bu);function Ok(t,e){return t-e}function Ik(t,e){if(Ie(e))return null;const r=t._adapter,{parser:n,round:a,isoWeekday:i}=t._parseOpts;let s=e;return typeof n=="function"&&(s=n(s)),lt(s)||(s=typeof n=="string"?r.parse(s,n):r.parse(s)),s===null?null:(a&&(s=a==="week"&&(si(i)||i===!0)?r.startOf(s,"isoWeek",i):r.startOf(s,a)),+s)}function Bk(t,e,r,n){const a=ir.length;for(let i=ir.indexOf(t);i<a-1;++i){const s=bu[ir[i]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((r-e)/(o*s.size))<=n)return ir[i]}return ir[a-1]}function z3(t,e,r,n,a){for(let i=ir.length-1;i>=ir.indexOf(r);i--){const s=ir[i];if(bu[s].common&&t._adapter.diff(a,n,s)>=e-1)return s}return ir[r?ir.indexOf(r):0]}function $3(t){for(let e=ir.indexOf(t)+1,r=ir.length;e<r;++e)if(bu[ir[e]].common)return ir[e]}function Fk(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:a}=My(r,e),i=r[n]>=e?r[n]:r[a];t[i]=!0}}function V3(t,e,r,n){const a=t._adapter,i=+a.startOf(e[0].value,n),s=e[e.length-1].value;let o,l;for(o=i;o<=s;o=+a.add(o,1,n))l=r[o],l>=0&&(e[l].major=!0);return e}function qk(t,e,r){const n=[],a={},i=e.length;let s,o;for(s=0;s<i;++s)o=e[s],a[o]=s,n.push({value:o,major:!1});return i===0||!r?n:V3(t,n,a,r)}class Ps extends Ma{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),a=this._adapter=new XV._date(e.adapters.date);a.init(r),is(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Ik(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:a,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function l(u){!s&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!o&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!s||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),a=lt(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=lt(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,s=this.max,o=_$(a,i,s);return this._unit=r.unit||(n.autoSkip?Bk(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):z3(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:$3(this._unit),this.initOffsets(a),e.reverse&&o.reverse(),qk(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?r=1-a:r=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;r=At(r,0,s),n=At(n,0,s),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,s=i.unit||Bk(i.minUnit,r,n,this._getLabelCapacity(r)),o=Te(a.ticks.stepSize,1),l=s==="week"?i.isoWeekday:!1,u=si(l)||l===!0,c={};let f=r,d,h;if(u&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,u?"day":s),e.diff(n,r,s)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+s);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(d=f,h=0;d<n;d=+e.add(d,o,s),h++)Fk(c,d,v);return(d===n||a.bounds==="ticks"||h===1)&&Fk(c,d,v),Object.keys(c).sort(Ok).map(p=>+p)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const a=this.options.time.displayFormats,i=this._unit,s=r||a[i];return this._adapter.format(e,s)}_tickFormatFunction(e,r,n,a){const i=this.options,s=i.ticks.callback;if(s)return Qe(s,[e,r,n],this);const o=i.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&o[l],f=u&&o[u],d=n[r],h=u&&f&&d&&d.major;return this._adapter.format(e,a||(h?f:c))}generateTickLabels(e){let r,n,a;for(r=0,n=e.length;r<n;++r)a=e[r],a.label=this._tickFormatFunction(a.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,a=wr(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),s=Math.sin(a),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,qk(this,[e],this._majorUnit),a),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)e=e.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const a=this.getLabels();for(r=0,n=a.length;r<n;++r)e.push(Ik(this,a[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bP(e.sort(Ok))}}se(Ps,"id","time"),se(Ps,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function To(t,e,r){let n=0,a=t.length-1,i,s,o,l;r?(e>=t[n].pos&&e<=t[a].pos&&({lo:n,hi:a}=sn(t,"pos",e)),{pos:i,time:o}=t[n],{pos:s,time:l}=t[a]):(e>=t[n].time&&e<=t[a].time&&({lo:n,hi:a}=sn(t,"time",e)),{time:i,pos:o}=t[n],{time:s,pos:l}=t[a]);const u=s-i;return u?o+(l-o)*(e-i)/u:o}class Cm extends Ps{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=To(r,this.min),this._tableRange=To(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,a=[],i=[];let s,o,l,u,c;for(s=0,o=e.length;s<o;++s)u=e[s],u>=r&&u<=n&&a.push(u);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(s=0,o=a.length;s<o;++s)c=a[s+1],l=a[s-1],u=a[s],Math.round((c+l)/2)!==u&&i.push({time:u,pos:s/(o-1)});return i}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(To(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return To(this._table,n*this._tableRange+this._minPos,!0)}}se(Cm,"id","timeseries"),se(Cm,"defaults",Ps.defaults);var H3=Object.freeze({__proto__:null,CategoryScale:xm,LinearScale:wm,LogarithmicScale:Sm,RadialLinearScale:Zi,TimeScale:Ps,TimeSeriesScale:Cm});const W3=[YV,C4,_3,H3];xr.register(...W3);function G3(){const t=Ir(null),e=Ir(null),r=Ir(null),n=Ir([]),a=tM.value,i=Wt.value;return Sa(()=>{if(n.current.forEach(s=>s.destroy()),n.current=[],!(!i||zr.value.length===0)){if(t.current){const s=t.current.getContext("2d");if(s){const o=new xr(s,{type:"doughnut",data:{labels:["TRACE","DEBUG","INFO","WARN","ERROR"],datasets:[{data:[a.levelCounts.TRACE,a.levelCounts.DEBUG,a.levelCounts.INFO,a.levelCounts.WARN,a.levelCounts.ERROR],backgroundColor:["#95a5a6","#9b59b6","#3498db","#f39c12","#e74c3c"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#ccc"}},title:{display:!0,text:"Log Levels",color:"#fff"}}}});n.current.push(o)}}if(e.current){const s=e.current.getContext("2d");if(s){const o=new xr(s,{type:"bar",data:{labels:["Events","Span Enter","Span Exit"],datasets:[{label:"Count",data:[a.typeCounts.event,a.typeCounts.span_enter,a.typeCounts.span_exit],backgroundColor:["#3498db","#27ae60","#e67e22"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Entry Types",color:"#fff"}},scales:{x:{ticks:{color:"#ccc"},grid:{color:"#333"}},y:{ticks:{color:"#ccc"},grid:{color:"#333"}}}}});n.current.push(o)}}if(r.current&&a.timelineData.length>0){const s=r.current.getContext("2d");if(s){const o=new xr(s,{type:"line",data:{labels:a.timelineData.map(l=>`${l.timestamp.toFixed(1)}s`),datasets:[{label:"Events",data:a.timelineData.map(l=>l.count),borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.2)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Events Over Time",color:"#fff"}},scales:{x:{ticks:{color:"#ccc",maxTicksLimit:10},grid:{color:"#333"},title:{display:!0,text:"Time",color:"#ccc"}},y:{ticks:{color:"#ccc"},grid:{color:"#333"},title:{display:!0,text:"Count",color:"#ccc"}}}}});n.current.push(o)}}return()=>{n.current.forEach(s=>s.destroy()),n.current=[]}}},[a,i]),i?k("div",{class:"stats-view",children:k("div",{class:"stats-grid",children:[k("div",{class:"stats-card chart-card",children:k("canvas",{ref:t})}),k("div",{class:"stats-card chart-card",children:k("canvas",{ref:e})}),k("div",{class:"stats-card chart-card wide",children:k("canvas",{ref:r})}),k("div",{class:"stats-card",children:[k("h3",{children:"Summary"}),k("div",{class:"stats-summary",children:[k("div",{class:"stat-row",children:[k("span",{class:"stat-label",children:"Total Entries"}),k("span",{class:"stat-value",children:zr.value.length})]}),k("div",{class:"stat-row",children:[k("span",{class:"stat-label",children:"Unique Spans"}),k("span",{class:"stat-value",children:a.topSpans.length})]}),k("div",{class:"stat-row",children:[k("span",{class:"stat-label",children:"Errors"}),k("span",{class:"stat-value error",children:a.levelCounts.ERROR})]}),k("div",{class:"stat-row",children:[k("span",{class:"stat-label",children:"Warnings"}),k("span",{class:"stat-value warn",children:a.levelCounts.WARN})]})]})]}),a.topSpans.length>0&&k("div",{class:"stats-card",children:[k("h3",{children:"Top Spans by Count"}),k("div",{class:"stats-table",children:a.topSpans.map(s=>k("div",{class:"span-row",children:[k("span",{class:"span-name",title:s.name,children:s.name}),k("span",{class:"span-count",children:[s.count,"x"]}),s.avgDuration>0&&k("span",{class:"span-duration",children:["~",(s.avgDuration*1e3).toFixed(2),"ms"]})]},s.name))})]})]})}):k("div",{class:"stats-view empty",children:k("div",{class:"placeholder-message",children:[k("span",{class:"placeholder-icon",children:"ðŸ“Š"}),k("p",{children:"Select a log file to view statistics"})]})})}function U3(){return Sa(()=>{cT()},[]),k("div",{class:"app",children:[k(dM,{}),k(fM,{}),k("div",{class:"main-layout",children:[k(vM,{}),k("main",{class:"content",children:[k(bM,{}),k("div",{class:"view-container",children:(()=>{switch(ri.value){case"logs":return k(w0,{});case"code":return k(NM,{});case"flow":return k(B5,{});case"stats":return k(G3,{});default:return k(w0,{})}})()})]})]})]})}kR(k(U3,{}),document.getElementById("app"));
